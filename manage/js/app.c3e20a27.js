(function(t){function e(e){for(var a,s,o=e[0],c=e[1],l=e[2],d=0,p=[];d<o.length;d++)s=o[d],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&p.push(n[s][0]),n[s]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);u&&u(e);while(p.length)p.shift()();return r.push.apply(r,l||[]),i()}function i(){for(var t,e=0;e<r.length;e++){for(var i=r[e],a=!0,o=1;o<i.length;o++){var c=i[o];0!==n[c]&&(a=!1)}a&&(r.splice(e--,1),t=s(s.s=i[0]))}return t}var a={},n={app:0},r=[];function s(e){if(a[e])return a[e].exports;var i=a[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=t,s.c=a,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)s.d(i,a,function(e){return t[e]}.bind(null,a));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;r.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"0210":function(t,e,i){"use strict";i.r(e),i.d(e,"getCookie",(function(){return u})),i.d(e,"setCookie",(function(){return d})),i.d(e,"copyText",(function(){return p})),i.d(e,"timeFormat",(function(){return h})),i.d(e,"formatDate",(function(){return m})),i.d(e,"formatDateChar",(function(){return f})),i.d(e,"getQuery",(function(){return v})),i.d(e,"addClass",(function(){return g})),i.d(e,"removeClass",(function(){return y})),i.d(e,"logout",(function(){return b})),i.d(e,"axiosGet",(function(){return x})),i.d(e,"axiosPost",(function(){return _})),i.d(e,"axiosPostPIC",(function(){return C})),i.d(e,"axiosDelete",(function(){return T})),i.d(e,"axiosPut",(function(){return A})),i.d(e,"downloadFromUrl",(function(){return P})),i.d(e,"dateFormate",(function(){return D})),i.d(e,"getTimestamp",(function(){return j})),i.d(e,"swapItems",(function(){return O})),i.d(e,"timestampToTime",(function(){return E})),i.d(e,"setAxiosConf",(function(){return N})),i.d(e,"getCosKey",(function(){return $})),i.d(e,"formatTime",(function(){return F})),i.d(e,"getSubSet",(function(){return z})),i.d(e,"extname",(function(){return U}));var a=i("f753"),n=i.n(a),r=i("4360"),s="",o="https://api.huodong.eduinspector.com",c="https://cxyy.szdj.edu.cn/api",l="";function u(t){var e=document.cookie.match(new RegExp("(^| )"+t+"=([^;]*)(;|$)"));return null!=e?unescape(e[2]):null}function d(t,e,i,a,n){i||(i=86400);var r=new Date;r.setTime(r.getTime()+1e3*i);var s=t+"="+escape(e)+";expires="+r.toGMTString()+";path=/";n&&(s+=";domain="+n),document.cookie=s}function p(t){var e=document.createElement("textarea");e.textContent=t,document.body.appendChild(e),e.select(),document.execCommand("Copy"),e.style.display="none"}function h(t,e){t instanceof Date||(t=new Date(t));var i={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(var a in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),i)new RegExp("("+a+")").test(e)&&(e=e.replace(RegExp.$1,1===RegExp.$1.length?i[a]:("00"+i[a]).substr((""+i[a]).length)));return e}function m(t){var e=new Date(t),i=""+(e.getMonth()+1),a=""+e.getDate(),n=e.getFullYear();return i.length<2&&(i="0"+i),a.length<2&&(a="0"+a),[n,i,a].join("")}function f(t){var e=new Date(t),i=e.getMonth()+1+"月",a=e.getDate()+"日",n=e.getFullYear()+"年";return i.length<2&&(i="0"+i),a.length<2&&(a="0"+a),[n,i,a].join("")}function v(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),i=window.location.search.substr(1).match(e);return null!=i?unescape(i[2]):null}function g(t,e){var i=t.className.split(" ");i.push(e),t.className=i.join(" ")}function y(t,e){var i=t.className.split(" ").filter((function(t){return t!=e}));t.className=i.join(" ")}function b(){d("x-api-key",""),localStorage.removeItem("user"),localStorage.removeItem("roles"),localStorage.removeItem("nowRole"),location.href="/"}function w(t){var e=void 0===t.id?t.url:"".concat(t.url,"/").concat(t.id),i=t;delete i.id,delete i.url;var a={};return void 0!=u("x-api-key")&&""!=u("x-api-key")&&(a["x-api-key"]=u("x-api-key")),{url:e,param:i,headers:a}}function x(t){var e=this,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=arguments.length>2?arguments[2]:void 0,s=w(t),o=Object.assign(s.headers,a);return r["a"].dispatch("INIT_SHOW",!1),new Promise((function(t,a){n.a.get(s.url,{params:s.param,headers:o}).then((function(i){t(i.data),void 0!=i.data.code&&(403==i.data.code?(e.$message({type:"warning",message:i.data.message}),setTimeout((function(){b()}),1e3)):404==i.data.code&&(e.$message({type:"warning",message:i.data.message}),setTimeout((function(){b()}),1e3)))})).catch((function(t){console.log("err==",t);var e=t.response;e&&("Unauthorized"==e.statusText||"UserNotLogin"==e.data.ErrorCode||"User.SessionError"==e.data.ErrorCode)&&i?(I(),a(e.data||t)):a(e.data||t)}))}))}function k(t){var e=t.url,i={"Content-type":"application/json"};return u("x-api-key")&&(i["x-api-key"]=u("x-api-key")),delete t.url,{url:e,param:t,headers:i}}function _(t){var e=this,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=arguments.length>2?arguments[2]:void 0,s=k(t),o=Object.assign(s.headers,a);return delete s.headers,r["a"].dispatch("INIT_SHOW",!1),new Promise((function(t,a){n.a.post(s.url,s.param,{headers:o}).then((function(i){var a=i.data;t(a),void 0!=i.data.code&&(403==i.data.code?(e.$message({type:"warning",message:i.data.message}),setTimeout((function(){b()}),1e3)):404==i.data.code&&(e.$message({type:"warning",message:i.data.message}),setTimeout((function(){b()}),1e3)))})).catch((function(t){var e=t.response;e&&("Unauthorized"==e.statusText||"UserNotLogin"==e.data.ErrorCode||"User.SessionError"==e.data.ErrorCode)&&i?(I(),a(e.data||t)):a(e.data||t)}))}))}function C(t){var e=this,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=k(t),s={"x-api-key":u("x-api-key")};return r["a"].dispatch("INIT_SHOW",!1),new Promise((function(t,r){n.a.post(a.url,a.param,{headers:s}).then((function(i){var a=i.data;t(a),void 0!=i.data.code&&(403==i.data.code?(e.$message({type:"warning",message:i.data.message}),setTimeout((function(){b()}),1e3)):404==i.data.code&&(e.$message({type:"warning",message:i.data.message}),setTimeout((function(){b()}),1e3)))})).catch((function(t){var e=t.response;e&&("Unauthorized"==e.statusText||"UserNotLogin"==e.data.ErrorCode||"User.SessionError"==e.data.ErrorCode)&&i?(I(),r(e.data||t)):r(e.data||t)}))}))}function S(t){var e=void 0===t.id?t.url:"".concat(t.url,"/").concat(t.id),i={"Content-type":"application/json"};return u("x-api-key")&&(i["x-api-key"]=u("x-api-key")),delete t.url,delete t.id,{url:e,param:t,headers:i}}function T(t){var e=this,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=arguments.length>2?arguments[2]:void 0,s=S(t),o=Object.assign(s.headers,a);return r["a"].dispatch("INIT_SHOW",!1),new Promise((function(t,a){n.a.delete(s.url,{params:s.param,headers:o}).then((function(i){t(i.data),void 0!=i.data.code&&(403==i.data.code?(e.$message({type:"warning",message:i.data.message}),setTimeout((function(){b()}),1e3)):404==i.data.code&&(e.$message({type:"warning",message:i.data.message}),setTimeout((function(){b()}),1e3)))})).catch((function(t){var e=t.response;e&&("Unauthorized"==e.statusText||"UserNotLogin"==e.data.ErrorCode||"User.SessionError"==e.data.ErrorCode)&&i?(I(),a(e.data||t)):a(e.data||t)}))}))}function L(t){var e=void 0===t.id?t.url:"".concat(t.url,"/").concat(t.id),i={"Content-type":"application/json"};return u("x-api-key")&&(i["x-api-key"]=u("x-api-key")),delete t.url,delete t.id,{url:e,param:t,headers:i}}function A(t){var e=this,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=arguments.length>2?arguments[2]:void 0,s=L(t),o=Object.assign(s.headers,a);return r["a"].dispatch("INIT_SHOW",!1),new Promise((function(t,a){n.a.put(s.url,s.param,{headers:o}).then((function(i){t(i.data),void 0!=i.data.code&&(403==i.data.code?(e.$message({type:"warning",message:i.data.message}),setTimeout((function(){b()}),1e3)):404==i.data.code&&(e.$message({type:"warning",message:i.data.message}),setTimeout((function(){b()}),1e3)))})).catch((function(t){var e=t.response;e&&("Unauthorized"==e.statusText||"UserNotLogin"==e.data.ErrorCode||"User.SessionError"==e.data.ErrorCode)&&i?(I(),a(e.data||t)):a(e.data||t)}))}))}function I(){window.app&&(d("x-api-key",""),localStorage.removeItem("user"),localStorage.removeItem("roles"),localStorage.removeItem("nowRole"),location.href="/")}function P(t,e){n.a.get(t,{responseType:"blob"}).then((function(i){var a=i.data,n=document.createElement("a");e||(e=t.split("/").pop()),n.download=e,n.href=URL.createObjectURL(a),n.dispatchEvent(new MouseEvent("click")),URL.revokeObjectURL(n.href)}))}function D(t){if(!t)return"";var e=t.substring(0,4),i=t.substring(4,6),a=t.substring(6,8);return e+"-"+i+"-"+a}function j(){var t=new Date,e=t.getFullYear(),i=t.getMonth();i=i<10?"0"+i:i;var a=t.getDate(),n=new Date(e+"-"+i+"-"+a);console.log(n);var r=new Date(n),s=Number(Date.parse(r).toString().substring(0,10));return s}function O(t,e,i){return t[e]=t.splice(i,1,t[e])[0],t}function E(t,e){var i=new Date(1e3*t),a=i.getFullYear(),n=i.getMonth()+1<10?"0"+(i.getMonth()+1):i.getMonth()+1,r=i.getDate(),s="".concat(a,"-").concat(n,"-").concat(r);return e&&(e.dateZero&&(r=r<10?"0"+r:r,s="".concat(a,"-").concat(n,"-").concat(r)),e.needUnit&&(a+="年",n+="月",r+="日",s="".concat(a).concat(n).concat(r))),s}function N(t){t&&(n.a.defaults.headers.common["Authorization"]=t)}function $(t){var e=t.name.slice(0,t.name.indexOf(".")),i=t.name.slice(t.name.indexOf(".")+1);return"activity_platform/".concat(e,"_").concat(Date.now(),".").concat(i)}function F(t){var e=0,i=0,a=0;return e=parseInt(t/3600,10),t-=3600*e,i=parseInt(t/60,10),t-=60*i,a=t,0!=e&&e<10&&(e="0"+e),0==i?i="00":i<10&&(i="0"+i),0==a?a="00":a<10&&(a="0"+a),e?e+":":i+":"+a}function z(t,e){for(var i=[];i.push([])<e.length;);for(var a=Math.pow(2,e.length)-1,n=1;n<=a;n++){for(var r=[],s=n,o=0;s>0;s>>=1,o++)!0&s&&r.push(e[o]);i[r.length-1].push(r);var c=[],l=0;for(var u in r)l+=r[u];if(l===t)return c=r,c}}function U(t){if(!t||"string"!=typeof t)return!1;var e=t.split("").reverse().join(""),i=e.substring(0,e.search(/\./)).split("").reverse().join("");return i}"localhost"===location.hostname?l=s:"huodong.eduinspector.com"===location.hostname?l=o:"cxyy.szdj.edu.cn"===location.hostname&&(l=c),n.a.defaults.baseURL=l},"02b8":function(t,e,i){"use strict";var a=i("d503"),n=i.n(a);n.a},"02ff":function(t,e,i){},"040c":function(t,e,i){},"063c":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"myActivityDetail",staticClass:"my-activity-detail"},[i("el-breadcrumb",{attrs:{separator:"/"}},[i("el-breadcrumb-item",{on:{click:function(e){return t.$router.push("myActivity")}}},[i("span",{staticClass:"link-btn"},[t._v("我发布的活动")])]),i("el-breadcrumb-item",[t._v("创建活动_"+t._s(t.activityName))])],1),i("setting-item")],1)},n=[],r=i("ca41"),s={name:"myActivityDetail",components:{SettingItem:r["a"]},data:function(){return{activityName:""}},mounted:function(){this.activityName=this.$route.query.title}},o=s,c=(i("02b8"),i("623f")),l=Object(c["a"])(o,a,n,!1,null,null,null);e["default"]=l.exports},"0649":function(t,e,i){},"07a2":function(t,e,i){},"0859":function(t,e,i){},"0865":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.workDetailList?i("div",{staticClass:"audit-word"},[i("span",{staticClass:"audit-name"},[t._v(t._s(this.workDetailList.Title))]),i("div",{staticClass:"audit-info"},[t._v(t._s(this.workDetailList.Desc))]),t._l(t.videoList,(function(t,e){return i("div",{key:e,staticClass:"video-wrap"},[i("video",{staticClass:"work-video",attrs:{id:"work-video",src:t.ResourceContent,controls:"",loop:"loop","x-webkit-airplay":"true","webkit-playsinline":"true"}})])})),i("div",{staticClass:"docfile"},[i("div",{staticClass:"title"},[t._v("学习资料包")]),t._l(t.docList,(function(e,a){return i("div",{key:a,staticClass:"doc-item"},[i("a",{attrs:{download:e.name,href:e.ResourceContent,target:"_blank"}},[t._v(t._s(e.ResourceName))])])}))],2)],2):t._e()},n=[],r=i("46b4"),s=i.n(r);function o(t,e,i,a,n,r,s){try{var o=t[r](s),c=o.value}catch(l){return void i(l)}o.done?e(c):Promise.resolve(c).then(a,n)}function c(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var r=t.apply(e,i);function s(t){o(r,a,n,s,c,"next",t)}function c(t){o(r,a,n,s,c,"throw",t)}s(void 0)}))}}var l={props:{WorkId:Number},data:function(){return{workDetailList:{},videoList:[],docList:[],isShadeShow:!0,DivisionId:""}},mounted:function(){this.DivisionId=this.$route.query.DivisionId||"",this.onWorkDetail()},methods:{onWorkDetail:function(){var t=c(s.a.mark((function t(){var e,i,a,n,r,o,c,l,u;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={url:"/v1/activity/GetWorkDetail",WorkId:this.WorkId},this.DivisionId&&(e.DivisionId=this.DivisionId),t.next=4,this.axiosGet(e).catch((function(t){return t}));case 4:if(i=t.sent,"OK"==i.ErrorCode){t.next=7;break}return t.abrupt("return",this.$message.error(i.ErrorMsg));case 7:for(this.workDetailList=i.Data.WorkDetail,a=this.workDetailList.ResourceList,n=!0,r=!1,o=void 0,t.prev=12,c=a[Symbol.iterator]();!(n=(l=c.next()).done);n=!0)u=l.value,4==u.ResourceType?this.videoList.push(u):5==u.ResourceType&&this.docList.push(u);t.next=20;break;case 16:t.prev=16,t.t0=t["catch"](12),r=!0,o=t.t0;case 20:t.prev=20,t.prev=21,n||null==c.return||c.return();case 23:if(t.prev=23,!r){t.next=26;break}throw o;case 26:return t.finish(23);case 27:return t.finish(20);case 28:this.$emit("Evaluation",i.Data);case 29:case"end":return t.stop()}}),t,this,[[12,16,20,28],[21,,23,27]])})));function e(){return t.apply(this,arguments)}return e}()}},u=l,d=(i("37fe"),i("623f")),p=Object(d["a"])(u,a,n,!1,null,"f5d19bae",null);e["a"]=p.exports},"08a1":function(t,e,i){},"094b":function(t,e,i){"use strict";var a=i("4357"),n=i.n(a);n.a},"09c2":function(t,e,i){t.exports=i.p+"img/sanjiao.2227a4fd.png"},"0a77":function(t,e,i){"use strict";var a=i("846f"),n=i.n(a);n.a},"0b35":function(t,e,i){"use strict";var a,n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"header-container"},[i("div",{staticClass:"uni-header"},[t._m(0),i("div",{staticClass:"header-menu"},t._l(t.tabs,(function(e){return e.hide?t._e():i("div",{key:e.key,class:"menu-item "+(t.activeTab===e.key?"active":""),on:{click:function(i){return t.switchPage(e.key)}}},[t._v(t._s(e.name)),"个人中心"==e.name&&t.$store.state.account.remindCount>0?i("p",{staticClass:"el-icon-message-solid"}):t._e()])})),0),i("div",{staticClass:"header-user"},[t.$store.state.account.roles.length>0?[i("span",{staticClass:"name",on:{click:t.roleClick}}),i("el-dropdown",{on:{command:t.roleClick}},[i("span",{staticClass:"name"},[t._v("\n            "+t._s(t.$store.state.account.nowRole.name)+"\n            "),i("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.$store.state.account.roles,(function(e,a){return i("el-dropdown-item",{key:a,attrs:{command:e.type}},[t._v(t._s(e.name))])})),1)],1)]:t._e(),i("div",{staticClass:"divider"},[t._v("|")]),t.user?[i("div",{staticClass:"name"},[t._v(t._s(t.user.name||"未知用户"))]),i("div",{staticClass:"divider"},[t._v("|")]),i("div",{staticClass:"logout",on:{click:t.logout}},[t._v("退出")])]:[i("span",{staticClass:"name",on:{click:t.loginClick}},[t._v("未登录")])]],2),i("login",{ref:"allLogin"})],1),t.levelList.length>1?i("div",{staticClass:"my-bread"},[i("div",{staticClass:"my-bread-main"},[i("my-bread-crumb",{attrs:{levelList:t.levelList}})],1)]):t._e()])},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a",{staticClass:"uni-title",attrs:{href:"/"}},[a("img",{staticClass:"logo",attrs:{src:i("933f")}}),a("span",[t._v("深圳市中小学科技创新活动平台")])])}],s=i("46b4"),o=i.n(s),c=(i("f753"),i("6507"),i("0210")),l=i("578a"),u=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-breadcrumb",{staticClass:"app-breadcrumb",attrs:{"separator-class":"el-icon-arrow-right"}},t._l(t.levelList,(function(e,a){return i("el-breadcrumb-item",{key:a},[i("router-link",{attrs:{to:e.redirect||e.path}},[t._v(t._s(e.meta.title))])],1)})),1)},d=[];function p(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var h=(a={props:{levelList:{type:Array,default:function(){return[]}}},data:function(){return{}},mounted:function(){},methods:{}},p(a,"mounted",(function(){})),p(a,"watch",{}),a),m=h,f=i("623f"),v=Object(f["a"])(m,u,d,!1,null,null,null),g=v.exports,y=i("408b");function b(t,e,i,a,n,r,s){try{var o=t[r](s),c=o.value}catch(l){return void i(l)}o.done?e(c):Promise.resolve(c).then(a,n)}function w(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var r=t.apply(e,i);function s(t){b(r,a,n,s,o,"next",t)}function o(t){b(r,a,n,s,o,"throw",t)}s(void 0)}))}}var x={name:"uni-header",components:{MyBreadCrumb:g,Login:l["a"]},data:function(){return{tabs:[],normalTabs:[{key:"home",name:"首页",hide:!1},{key:"activeManager",name:"活动管理",hide:!0},{key:"workReview",name:"专家评审",hide:!0},{key:"userCenter",name:"个人中心",hide:!0}],adminTabs:[{key:"admin",name:"用户管理",hide:!1},{key:"roleManage",name:"角色管理",hide:!1},{key:"expertManage",name:"专家管理",hide:!1},{key:"prizeManagement",name:"奖项管理",hide:!1},{key:"activeManager",name:"活动管理",hide:!1}],activeTab:"home",levelList:[],memberTypeObj:{0:"超级管理员",2:"市级管理员",3:"区级管理员",4:"专家",11:"老师",12:"学生",13:"家长"}}},computed:{user:function(){return this.$store.state.account.user},getRoles:function(){return this.$store.state.account.roles},getNowRole:function(){return this.$store.state.account.nowRole},show:function(){return this.$store.state.login.show},remindCount:function(){return this.$store.state.account.remindCount}},created:function(){},mounted:function(){if(void 0!=Object(c["getCookie"])("x-api-key")&&Object(c["getCookie"])("x-api-key")){this.$store.dispatch("INIT_USER",JSON.parse(localStorage.getItem("user"))),this.$store.dispatch("INIT_ROLES",JSON.parse(localStorage.getItem("roles"))),this.$store.dispatch("INIT_NOWROLE",JSON.parse(localStorage.getItem("nowRole")));var t=1;this.checkRole(t),this.getRemindCount()}else this.tabs=this.normalTabs,this.$router.push("/home"),this.activeTab="home",this.levelList=[{path:"/home",name:"首页",meta:{title:"首页"}}]},watch:{$route:function(t){this.activeTab=t.path.split("/")[1],this.getBreadcrumb(t)},getNowRole:function(t,e){if(t.type!==e.type)if(void 0!=Object(c["getCookie"])("x-api-key")&&""!=Object(c["getCookie"])("x-api-key")){this.$store.dispatch("INIT_USER",JSON.parse(localStorage.getItem("user"))),this.$store.dispatch("INIT_ROLES",JSON.parse(localStorage.getItem("roles"))),this.$store.dispatch("INIT_NOWROLE",JSON.parse(localStorage.getItem("nowRole")));var i=0;i=void 0==e.type?0:1,this.checkRole(i),this.getRemindCount()}else this.tabs=this.normalTabs,this.$router.push("/home"),this.activeTab="home",this.levelList=[{path:"/home",name:"首页",meta:{title:"首页"}}]},show:function(t){t&&this.$refs.allLogin.showDialog()}},methods:{switchPage:function(t){this.activeTab===t&&this.$route.path=="/"+this.activeTab||(this.activeTab=t,this.$router.push("/"+t))},loginClick:function(){this.$refs.allLogin.showDialog()},logout:function(){Object(c["setCookie"])("x-api-key",""),localStorage.removeItem("user"),localStorage.removeItem("roles"),localStorage.removeItem("nowRole"),location.href="/"},checkRole:function(t){if(void 0!=this.$store.state.account.nowRole.type&&null!=this.$store.state.account.nowRole.type)if(console.log("this.$store.state.account.nowRole===",this.$store.state.account.nowRole),0==this.$store.state.account.nowRole.type)this.tabs=this.adminTabs,this.activeTab="admin",this.$router.push("/admin"),this.levelList=[{path:"/admin",name:"用户管理",meta:{title:"用户管理"}}];else{if(1==this.$store.state.account.nowRole.type||2==this.$store.state.account.nowRole.type||3==this.$store.state.account.nowRole.type)for(var e in this.normalTabs)"activeManager"==this.normalTabs[e].key?this.normalTabs[e].hide=!1:"workReview"==this.normalTabs[e].key&&(this.normalTabs[e].hide=!0),"userCenter"==this.normalTabs[e].key&&(this.normalTabs[e].hide=!1);else if(4==this.$store.state.account.nowRole.type)for(var i in this.normalTabs)"workReview"==this.normalTabs[i].key?this.normalTabs[i].hide=!1:"activeManager"==this.normalTabs[i].key&&(this.normalTabs[i].hide=!0),"userCenter"==this.normalTabs[i].key&&(this.normalTabs[i].hide=!1);else if(11==this.$store.state.account.nowRole.type||12==this.$store.state.account.nowRole.type||13==this.$store.state.account.nowRole.type)for(var a in this.normalTabs)"workReview"==this.normalTabs[a].key?this.normalTabs[a].hide=!0:"activeManager"==this.normalTabs[a].key&&(this.normalTabs[a].hide=!0),"userCenter"==this.normalTabs[a].key&&(this.normalTabs[a].hide=!1);this.tabs=this.normalTabs,1==t&&(this.$router.push("/home"),this.activeTab="home"),this.levelList=[{path:"/home",name:"首页",meta:{title:"首页"}}]}},roleClick:function(){var t=w(o.a.mark((function t(e){var i,a=this;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i={},i.type=e,i.url=y["a"].switchToken,t.next=5,this.axiosGet(i).then((function(t){void 0!=t.token&&Object(c["setCookie"])("x-api-key",t.token),a.$store.dispatch("INIT_USER",t);var e=JSON.stringify(t);localStorage.setItem("user",e);var i=t.members.map((function(t){var e={};if(e.type=t.type,e.name=a.memberTypeObj[t.type],void 0!=t.school_id&&(e.school_id=t.school_id),void 0!=t.school_title&&(e.school_title=t.school_title),void 0!=t.current){e.current=t.current;var i=JSON.stringify(e);localStorage.setItem("nowRole",i),a.$store.dispatch("INIT_NOWROLE",e)}return e})),n=JSON.stringify(i);localStorage.setItem("roles",n),a.$store.dispatch("INIT_ROLES",i);var r=a.$loading({lock:!0,text:"切换中。。",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});setTimeout((function(){r.close()}),2e3)})).catch((function(t){return t}));case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),getBreadcrumb:function(t){var e=this.$route.matched.filter((function(t){return t.name}));if(void 0!=t){e[0].path=t.fullPath;var i=e[0];if(i&&"首页"!==i.name&&"活动管理"!==i.name&&"专家评审"!==i.name&&"个人中心"!==i.name&&"用户管理"!==i.name&&"角色管理"!==i.name&&"专家管理"!==i.name&&"专家分配"!==i.name&&"分类管理"!==i.name&&"奖品管理"!==i.name){var a=this.levelList.findIndex((function(t){return t.name==i.name}));e=-1!=a?this.levelList.slice(0,a+1):this.levelList.concat(e)}else e="首页"==i.name||"活动管理"==i.name||"专家评审"==i.name||"个人中心"==i.name||"用户管理"==i.name||"角色管理"==i.name||"专家管理"==i.name||"专家分配"==i.name||"分类管理"==i.name||"奖品管理"==i.name?e:[{path:"/home",name:"首页",meta:{title:"首页"}}];this.levelList=e}},getRemindCount:function(){var t=w(o.a.mark((function t(){var e,i=this;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={},e.url=y["a"].remindCount,t.next=4,this.axiosGet(e).then((function(t){0==t.code&&i.$store.dispatch("INIT_REMINDCOUNT",t.count)})).catch((function(t){}));case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},k=x,_=(i("66ad"),Object(f["a"])(k,n,r,!1,null,null,null));e["a"]=_.exports},"0ba1":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-card",{staticClass:"box-card"},[i("div",{staticClass:"enroll-container"},[i("div",{staticClass:"imagelog"},[i("img",{attrs:{src:t.imagelog}})]),i("div",{staticClass:"title"},[i("span",[t._v("你的报名已提交成功")])]),i("div",{staticClass:"buttom"},[i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.enrollRecord()}}},[t._v("查看报名记录")])],1)])])},n=[],r={data:function(){return{imagelog:i("80f0")}},methods:{enrollRecord:function(){this.$router.push({path:"/userCenter"})}}},s=r,o=(i("2c4a"),i("623f")),c=Object(o["a"])(s,a,n,!1,null,"072e1d06",null);e["default"]=c.exports},"0cbf":function(t,e,i){"use strict";var a=i("c6b0"),n=i.n(a);n.a},"0f38":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"activityProject-center"},[i("el-card",{staticStyle:{"min-height":"650px"}},[i("div",{staticClass:"activityProject-wrap"},[t.activityList?i("div",{staticClass:"activityProject-activity-list"},[i("card-list",{attrs:{cardList:t.activityList},on:{toNext:t.toNext}})],1):t._e()])])],1)},n=[],r=i("c995"),s={name:"activityProject-center",components:{CardList:r["a"]},data:function(){return{activityList:[{id:1,name:"数字创作项目",imgUrl:i("89c2")},{id:2,name:"程序设计项目",imgUrl:i("75a6")},{id:3,name:"创客项目",imgUrl:i("81a3")},{id:4,name:"深圳市中小学网络夏令营",imgUrl:i("3e41")}]}},methods:{toNext:function(t){console.log("id==",t),this.$router.push({path:"/activityCenter",query:{id:t}})}}},o=s,c=(i("0cbf"),i("623f")),l=Object(c["a"])(o,a,n,!1,null,"76dc45c5",null);e["default"]=l.exports},"0f4c":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"activity-work-show"},[t.workList.length>0?t._l(t.workList,(function(e,a){return i("el-card",{key:a,staticClass:"work-list-item"},[i("div",{staticClass:"work-list-top"},[i("div",{staticClass:"picleft"},[i("img",{attrs:{src:e.url}})]),i("div",{staticClass:"jianjie"},[i("div",{staticClass:"name"},[i("p",[t._v(t._s(e.name))])]),i("div",{staticClass:"activeclass"},[i("p",[t._v("报名时间："+t._s(e.avitveTiem))]),i("p",[t._v("活动对象："+t._s(e.activeObject[0])+" ")]),i("p",[t._v("活动组别："+t._s(e.activeGroup[0])+" ")]),i("p",[t._v("活动范围："+t._s(e.activeLimit[0])+" ")]),i("p",[t._v("活动类别："+t._s(e.activeClass[0])+" ")]),i("div",{staticClass:"activeclass-bottom"},[i("el-button",{attrs:{type:"primary"},on:{click:t.goToActivityEnroll}},[t._v("我要报名")])],1)])])]),i("div",{staticClass:"count"},[i("p",{staticClass:"title"},[t._v("活动详情")]),i("hr",{staticStyle:{background:"rgba(229,229,229,1)"}}),i("div",{staticClass:"count-item"},[i("p",{staticClass:"sontitle"},[t._v("活动前言")]),i("p",{staticClass:"soncount"},[t._v(t._s(e.activePreface))])]),i("div",{staticClass:"count-item"},[i("p",{staticClass:"sontitle"},[t._v("参赛地点")]),i("p",{staticClass:"soncount"},[t._v(t._s(e.activeAddr))])]),i("div",{staticClass:"count-item"},[i("p",{staticClass:"sontitle"},[t._v("参赛要求")]),i("p",{staticClass:"soncount"},[t._v(t._s(e.activeRequer))])]),i("hr",{staticStyle:{background:"rgba(229,229,229,1)"}})])])})):i("div",{staticClass:"no-data"},[t._v("暂无数据")])],2)},n=[],r=i("46b4"),s=i.n(r),o=i("7342");function c(t,e,i,a,n,r,s){try{var o=t[r](s),c=o.value}catch(l){return void i(l)}o.done?e(c):Promise.resolve(c).then(a,n)}function l(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var r=t.apply(e,i);function s(t){c(r,a,n,s,o,"next",t)}function o(t){c(r,a,n,s,o,"throw",t)}s(void 0)}))}}var u={name:"activity-work-show",components:{ActivityList:o["a"]},data:function(){return{workList:[],activityId:""}},props:{stage:{type:String}},mounted:function(){this.activityId=this.$route.query.ActivityId,"STAGE_WORK_SHOW"==this.stage?this.getAllWorkList():"STAGE_EXCELLENT_WORK_SHOW"==this.stage&&this.getExcellentWorkList()},methods:{goToActivityEnroll:function(){this.$router.push({path:"/home/activityEnroll"})},getAllWorkList:function(){var t=l(s.a.mark((function t(){return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.workList=[{url:i("89c2"),name:"电脑绘图",avitveTiem:"2020-01-05 ～ 2020-02-06",activeObject:["学生"],activeGroup:["小学组","初中组"],activeLimit:["宝安区","龙岗区","南山区","福田区"],activeClass:["数字创作项目"],activePreface:"为提高我市中小学实验教师（实验管理员）的实验操作技能和动手实际能力，激发教师的创新思维和意识，提升实验教学水平，推动实验教学改革和推进素质教育。2019年深圳市物理、化学、生物和小学科学实验教师（实验管理员）实验操作与创新技能竞赛活动。",activeAddr:"（一）报名及上传资料：请各参赛教师将创新实验操作视频、PPT及文稿（包括题目、教师姓名、学校名称、使用教材、创新实验器材、创新实验原理、目标、内容、过程等）通过深圳市2019年物理、化学、生物及小学科学实验教师实验操作与创新技能竞赛活动专题http://cxyy.szdj.edu.cn上传； 作品上传时间：2019年10月8号 — 10月18号 （二）初赛：各区（新区、市局直属学校）根据在线报名参赛情况组织初赛，形式不限，并于10月25日前通过平台报送参加名单及作品； （三）市赛：组织全市现场比赛与培训，具体时间、地点另行通知。",activeRequer:"（一）常规实验操作技能竞赛。熟练、规范完成一个本学科课程开设的学生分组实验，限时20分钟； （二）创新实验器材开发技能竞赛。现场演示并解说适用于本学科课程自己开发的演示实验、探究实验、课外实验等创新实验器材，并附上文字图片说明，限时20分钟。创新实验器材能够改进原有实验器材的缺陷或不足，有创新点或解决本学科实验教学中遇到的问题； 每位参赛教师必须参加以上两项竞赛（评分细则见附件1）。"}];case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getExcellentWorkList:function(){var t=l(s.a.mark((function t(){var e,i;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/activity/GetExcellentWorkList",ActivityId:this.activityId,GradeId:5}).catch((function(t){return t}));case 2:if(e=t.sent,"OK"==e.ErrorCode){t.next=5;break}return t.abrupt("return");case 5:i=e.Data.WorkList||[],this.workList=i.map((function(t){var e=t.ResourceList,i=e.find((function(t){return 4==t.ResourceType}));return{name:t.TeamName,school:t.School,url:i.ResourceContent}}));case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},d=u,p=(i("863f"),i("623f")),h=Object(p["a"])(d,a,n,!1,null,null,null);e["default"]=h.exports},"0fbe":function(t,e,i){"use strict";var a=i("1209"),n=i.n(a);n.a},1:function(t,e){},"118c":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"import-expert-container"},[i("el-card",{staticStyle:{"min-height":"600px"}},[i("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:"导入专家",name:"importExpert"}},[i("el-row",[i("el-col",{attrs:{span:3}},[i("el-button",{attrs:{type:"primary",plain:"",size:"small"}},[t._v("下载模板")])],1)],1),i("el-row",[i("el-col",{attrs:{span:8}},[i("el-button",{attrs:{type:"primary",size:"small"}},[t._v("导入专家")])],1)],1),i("p",{staticStyle:{"margin-bottom":"20px",color:"#999999"}},[t._v("上传文件，导入专家信息")]),i("el-row",[i("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"","header-cell-style":{background:"#EEEEEE",color:"#323232"},"tooltip-effect":"dark"}},[i("el-table-column",{attrs:{prop:"fileName",label:"文件名"}}),i("el-table-column",{attrs:{prop:"status",label:"上传状态"}}),i("el-table-column",{attrs:{prop:"finishStatus",label:"完成状态"}}),i("el-table-column",{attrs:{prop:"operPeple",label:"操作人"}}),i("el-table-column",{attrs:{label:"导入时间",prop:"importTime"}}),i("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return t.goToExport(e.row)}}},[t._v("导出")]),i("el-button",{staticStyle:{color:"red"},attrs:{type:"text",size:"small"},on:{click:function(i){return t.goToDelete(e.$index,t.tableData)}}},[t._v("删除")])]}}])})],1)],1),i("el-row",{staticClass:"page-div"},[i("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,20,30,40],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:40},on:{"size-change":t.pageSizeChange,"current-change":t.pageCurrentChange}})],1)],1)],1)],1)],1)},n=[],r={data:function(){return{activeName:"importExpert",tableData:[{fileName:"龙华区专家组",status:"上传完成",finishStatus:"完成",operPeple:"陆同学",importTime:"2019-11-18 16:26:35"},{fileName:"龙华区专家组",status:"上传完成",finishStatus:"完成",operPeple:"陆同学",importTime:"2019-11-18 16:26:35"},{fileName:"龙华区专家组",status:"上传完成",finishStatus:"完成",operPeple:"陆同学",importTime:"2019-11-18 16:26:35"},{fileName:"龙华区专家组",status:"上传完成",finishStatus:"完成",operPeple:"陆同学",importTime:"2019-11-18 16:26:35"},{fileName:"龙华区专家组",status:"上传完成",finishStatus:"完成",operPeple:"陆同学",importTime:"2019-11-18 16:26:35"},{fileName:"龙华区专家组",status:"上传完成",finishStatus:"完成",operPeple:"陆同学",importTime:"2019-11-18 16:26:35"},{fileName:"龙华区专家组",status:"上传完成",finishStatus:"完成",operPeple:"陆同学",importTime:"2019-11-18 16:26:35"}],multipleSelection:[],currentPage:1}},mounted:function(){},methods:{goToExport:function(){},goToDelete:function(t,e){this.open(t,e)},open:function(t,e){var i=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.splice(t,1),i.$message({type:"success",message:"删除成功!"})})).catch((function(){i.$message({type:"info",message:"已取消删除"})}))},pageSizeChange:function(t){},pageCurrentChange:function(t){}}},s=r,o=(i("c725"),i("623f")),c=Object(o["a"])(s,a,n,!1,null,"7e731532",null);e["default"]=c.exports},"11e2":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div")},n=[],r=i("1f21"),s=i.n(r),o=i("7690"),c=i.n(o),l=i("a313"),u=i.n(l);c()(s.a),u()(s.a);var d={name:"highCharts",data:function(){return{chart:{}}},props:{options:{type:Object}},watch:{options:function(t){this.render()}},mounted:function(){this.render()},methods:{render:function(){this.options&&this.options.show&&(this.options.credits={enabled:!1},this.addNoData(),this.chart=new s.a.Chart(this.$el,this.options))},addNoData:function(){this.options.lang=this.options.lang||{noData:"暂无有数据"},this.options.noData=this.options.noData||{style:{fontWeight:"bold",fontSize:"24px"}}}}},p=d,h=i("623f"),m=Object(h["a"])(p,a,n,!1,null,null,null);e["a"]=m.exports},1209:function(t,e,i){},1217:function(t,e,i){t.exports=i.p+"img/small.0b57a1f1.png"},"127b":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"sub-classify-centainer"},[i("el-card",{staticStyle:{"min-height":"600px"}},[i("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:t.title,name:"classify"}},[i("el-row",[i("el-col",{attrs:{span:3}},[i("el-button",{attrs:{type:"primary"},on:{click:t.goToAddClassify}},[t._v("添加分类")])],1)],1),i("el-row",[i("el-col",[i("div",{staticClass:"card"},[t._l(t.cardList,(function(e){return[i("card",{attrs:{cardDetail:e},on:{goToAdd:t.goToAdd,goToEdit:t.goToEdit,goToDelete:t.goToDelete}})]}))],2)])],1)],1)],1)],1)],1)},n=[],r=i("ae8d"),s={components:{Card:r["a"]},data:function(){return{activeName:"classify",cardList:[{id:1,imgUrl:i("1617"),title:"数字创作项目"},{id:2,imgUrl:i("2a8e"),title:"程序设计项目"},{id:3,imgUrl:i("74e7"),title:"创客项目"}],title:this.$route.query.title,id:this.$route.query.id}},mounted:function(){},methods:{goToAddClassify:function(){this.$router.push({path:"/addClassify"})},goToAdd:function(t){console.log("添加id==",t)},goToEdit:function(t){console.log("编辑id==",t)},goToDelete:function(t){console.log("删除id==",t)}}},o=s,c=(i("6c54"),i("623f")),l=Object(c["a"])(o,a,n,!1,null,"8c7351f4",null);e["default"]=l.exports},"12c7":function(t,e,i){},"14d1":function(t,e,i){},"15b1":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"add-classify-centainer"},[i("el-card",{staticStyle:{"min-height":"600px"}},[i("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:"添加分类",name:"addClassify"}},[i("div",{staticClass:"add-classify-body"},[i("el-row",[i("el-col",[t._v("\n                            分类标题：\n                        ")])],1),i("el-row",[i("el-col",[i("el-input",{attrs:{placeholder:"请输入分类标题",clearable:"",size:"small"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1)],1),i("el-row",[i("el-col",[t._v("\n                            分类封面：\n                        ")])],1),i("el-row",[i("el-col",[i("el-upload",{attrs:{action:"https://jsonplaceholder.typicode.com/posts/","list-type":"picture-card","on-preview":t.handlePictureCardPreview,"on-remove":t.handleRemove}},[i("i",{staticClass:"el-icon-plus"})]),i("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)],1),i("el-row",[i("el-col",[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.goToSubmit}},[t._v("提交")])],1)],1)],1)])],1)],1)],1)},n=[],r={data:function(){return{activeName:"addClassify",title:""}},mounted:function(){},methods:{goToSubmit:function(){console.log("提交")}}},s=r,o=(i("cdf4"),i("623f")),c=Object(o["a"])(s,a,n,!1,null,"566a0ab5",null);e["default"]=c.exports},1617:function(t,e,i){t.exports=i.p+"img/ac1.4e0d413b.png"},1631:function(t,e,i){},"16e7":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"message-warrp"},[i("div",{staticClass:"message-center"},[i("div",{staticClass:"message-title"},[t._v("消息中心")]),i("div",{staticClass:"message-lable"},[i("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData}},[i("el-table-column",{attrs:{label:"时间",prop:"UpdatedTime",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(t.timeFormat(1e3*e.row.UpdatedTime,"yyyy-MM-dd"))+"\n          ")]}}])}),i("el-table-column",{attrs:{label:"标题",prop:"Title",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.Title))]),1==e.row.Type?i("el-button",{attrs:{type:"text"},on:{click:function(i){return t.messageDetail(e.row)}}},[t._v("查看详情")]):t._e()]}}])}),i("el-table-column",{attrs:{label:"内容",prop:"Abstract","show-overflow-tooltip":""}})],1)],1),i("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.total,"page-size":t.PageSize,"current-page":t.currentPage},on:{"current-change":t.handleCurrentChange}})],1)])},n=[],r=i("46b4"),s=i.n(r);function o(t,e,i,a,n,r,s){try{var o=t[r](s),c=o.value}catch(l){return void i(l)}o.done?e(c):Promise.resolve(c).then(a,n)}function c(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var r=t.apply(e,i);function s(t){o(r,a,n,s,c,"next",t)}function c(t){o(r,a,n,s,c,"throw",t)}s(void 0)}))}}var l={data:function(){return{tableData:[],multipleSelection:[],currentPage:1,PageSize:10,total:0,MessageId:"",day:""}},created:function(){var t=c(s.a.mark((function t(){var e;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.init(),t.next=3,this.axiosGet({url:"/v1/message/GetUserMessageList",AppId:1567654633,PageNum:this.currentPage,PageSize:this.PageSize}).catch((function(t){return t}));case 3:e=t.sent,this.total=e.Data.Total;case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),methods:{init:function(){var t=c(s.a.mark((function t(){var e;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/message/GetUserMessageList",AppId:1567654633,PageNum:this.currentPage,PageSize:this.PageSize}).catch((function(t){return t}));case 2:if(e=t.sent,"OK"==e.ErrorCode){t.next=5;break}return t.abrupt("return");case 5:this.tableData=e.Data.MessageList;case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),handleCurrentChange:function(t){this.currentPage=t,this.init()},messageDetail:function(){var t=c(s.a.mark((function t(e){var i,a;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/message/GetUserMessage",MessageId:e.MessageId}).catch((function(t){return t}));case 2:if(i=t.sent,"OK"==i.ErrorCode){t.next=5;break}return t.abrupt("return",this.$message.error(i.ErrorMsg));case 5:a=JSON.parse(i.Data.Content||"{}"),this.$router.push({path:"/myActivity/workAuditDetail",query:{activityId:a.ActivityId,title:a.Title,workId:a.WorkId,curStatus:3}});case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}},u=l,d=(i("8811"),i("bdab"),i("623f")),p=Object(d["a"])(u,a,n,!1,null,"8d0b361e",null);e["default"]=p.exports},1734:function(t,e,i){},"177c":function(t,e,i){"use strict";var a=i("040c"),n=i.n(a);n.a},"191b":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.showPreview?t._e():i("div",{staticClass:"create-activity-container"},[i("el-card",{staticStyle:{"min-height":"650px"}},[i("el-page-header",{attrs:{content:"公告编辑"},on:{back:function(e){return t.back()}}}),i("el-divider"),i("div",{staticClass:"create-activity-body"},[i("el-form",{ref:"form",attrs:{model:t.form,"label-width":"130px",rules:t.rules}},[i("el-form-item",{attrs:{label:"标题:",prop:"title"}},[i("el-col",{attrs:{span:9}},[i("el-input",{attrs:{placeholder:"请输入标题",size:"small",type:"text"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1)],1),i("div",{staticClass:"my-editer",staticStyle:{"margin-left":"15px"}},[i("P",{staticStyle:{width:"45px","margin-left":"60px"}},[t._v("内容:")]),i("my-editor",{attrs:{inputtext:t.form.content},on:{editorChange:t.editorChange}})],1),i("el-form-item",{attrs:{label:"公告附件:"}},[i("div",{staticStyle:{width:"710px"}},[i("upload-file",{attrs:{uploadType:"all",myFileList:t.attachment,max:50,name:"上传附件"},on:{uploadSuccess:t.attachmentSuccess}})],1)])],1),i("el-row",[i("el-col",{attrs:{offset:10}},[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.goToPreview()}}},[t._v("预览")]),i("el-button",{attrs:{size:"small"},on:{click:function(e){return t.goToCancel()}}},[t._v("取消")])],1)],1)],1)],1)],1),t.showPreview?i("div",{staticClass:"see-information-container"},[i("el-card",{staticStyle:{"min-height":"600px"}},[i("div",{staticClass:"title"},[i("p",[t._v(t._s(t.form.title))])]),i("el-divider"),i("div",{staticClass:"content ql-snow ql-editor",domProps:{innerHTML:t._s(t.form.content)}}),i("el-divider"),i("div",{staticClass:"attachment"},[i("p",[t._v("公告附件")]),i("div",{staticClass:"attachment-item"},[t._l(t.attachment,(function(t){return[i("file-preview",{attrs:{fileObj:t}})]}))],2)]),i("el-row",[i("el-col",{staticStyle:{"margin-top":"20px"},attrs:{offset:10}},[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.goToRelease()}}},[t._v("确定并发布")]),i("el-button",{attrs:{size:"small"},on:{click:function(e){return t.goBack()}}},[t._v("返回")])],1)],1)],1)],1):t._e()])},n=[],r=i("46b4"),s=i.n(r),o=i("cfc6"),c=i("408b"),l=i("8a99"),u=i("2847");function d(t,e,i,a,n,r,s){try{var o=t[r](s),c=o.value}catch(l){return void i(l)}o.done?e(c):Promise.resolve(c).then(a,n)}function p(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var r=t.apply(e,i);function s(t){d(r,a,n,s,o,"next",t)}function o(t){d(r,a,n,s,o,"throw",t)}s(void 0)}))}}var h={components:{MyEditor:o["a"],UploadFile:l["a"],FilePreview:u["a"]},data:function(){return{edit:this.$route.query.edit,id:this.$route.query.id,rules:{title:[{required:!0,message:"标题必填，不能为空",trigger:"blur"}]},form:{title:"",content:""},attachment:[],showPreview:!1}},watch:{},created:function(){1==this.edit&&this.getAnnouncementDetail()},computed:{},mounted:function(){},methods:{attachmentSuccess:function(t){var e=this;this.attachment=[],t.forEach((function(t){var i={};i.url=t.url,i.title=t.name,e.attachment.push(i)}))},back:function(){this.$router.go(-1)},editorChange:function(t){this.form.content=t},getAnnouncementDetail:function(){var t=p(s.a.mark((function t(){var e,i=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={},e.url=c["a"].activityNotice,e.id=this.id,e.expand="content,bcheck,attachment",t.next=6,this.axiosGet(e).then((function(t){i.form.title=t.title,i.form.content=t.content,t.attachment.length>0&&(i.attachment=t.attachment.map((function(t){return{title:t.title,url:t.url}})))})).catch((function(t){return t}));case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),goToPreview:function(){this.showPreview=!0},goToCancel:function(){this.back()},goToRelease:function(){var t=p(s.a.mark((function t(){var e,i=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e={},e.url=c["a"].activityNotice,""==this.form.title){t.next=11;break}if(!(this.form.title.length>128)){t.next=8;break}return this.$message({type:"warning",message:"标题太长，请重新填写"}),t.abrupt("return");case 8:e.title=this.form.title;case 9:t.next=13;break;case 11:return this.$message({type:"warning",message:"请添加标题"}),t.abrupt("return");case 13:if(""==this.form.content){t.next=17;break}e.content=this.form.content,t.next=19;break;case 17:return this.$message({type:"warning",message:"请添加内容"}),t.abrupt("return");case 19:if(e.attachment=this.attachment,0!=this.edit){t.next=26;break}return e.activity_id=this.id,t.next=24,this.axiosPost(e).then((function(t){void 0!=t.title&&""!=t.title?(i.$message({type:"success",message:"发布成功！！"}),setTimeout((function(){i.back()}),1e3)):-1==t.code&&i.$message({type:"warning",message:t.message})})).catch((function(t){console.log("err===",t)}));case 24:t.next=30;break;case 26:if(1!=this.edit){t.next=30;break}return e.id=this.id,t.next=30,this.axiosPut(e).then((function(t){void 0!=t.title&&""!=t.title?(i.$message({type:"success",message:"发布成功！！"}),setTimeout((function(){i.back()}),1e3)):-1==t.code&&i.$message({type:"warning",message:t.message})})).catch((function(t){console.log("err==",t)}));case 30:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),goBack:function(){this.showPreview=!1}}},m=h,f=(i("beab"),i("623f")),v=Object(f["a"])(m,a,n,!1,null,null,null);e["default"]=v.exports},"1a30":function(t,e,i){},"1de2":function(t,e,i){},"1e50":function(t,e,i){"use strict";var a=i("82f8"),n=i.n(a);n.a},"1e9d":function(t,e,i){"use strict";var a=i("b6f0"),n=i.n(a);n.a},"20e8":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"activity-publicity"},[i("div",{staticClass:"activity-wrap"},[t.stageList.length>0&&"STAGE_WORK_LOOK_OVER"==t.currentStage?i("div",{staticClass:"activity-top"},[i("flow-steps",{attrs:{"stage-list":t.stageList,stage:t.currentStage},on:{changeStage:t.changeStage}})],1):t._e(),i("div",{staticClass:"activity-bottom"},["STAGE_PREPARE"==t.currentStage?i("prepare"):t._e(),"STAGE_WORK_UPLOAD"==t.currentStage?i("work-upload",{attrs:{stage:t.currentStage}}):t._e(),"STAGE_WORK_AUDIT"==t.currentStage?i("work-upload",{attrs:{stage:t.currentStage}}):t._e(),"STAGE_WORK_SHOW"==t.currentStage?i("work-show",{key:"work-show1",attrs:{stage:t.currentStage}}):t._e(),"STAGE_WORK_PRE_JUDGE"==t.currentStage?i("expert-jude",{key:"expert-jude1",attrs:{stage:t.currentStage}}):t._e(),"STAGE_WORK_JUDGE"==t.currentStage?i("expert-jude",{key:"expert-jude2",attrs:{stage:t.currentStage}}):t._e(),"STAGE_EXCELLENT_WORK_SHOW"==t.currentStage?i("work-show",{key:"work-show2",attrs:{stage:t.currentStage}}):t._e(),"STAGE_WORK_LOOK_OVER"==t.currentStage?i("work-look-over",{attrs:{stage:t.currentStage}}):t._e()],1)])])},n=[],r=i("46b4"),s=i.n(r),o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"flow-steps-wrap"},[i("div",{staticClass:"activity-step"},[i("el-steps",{attrs:{active:t.stageIndex,"process-status":"finish","finish-status":"success"}},t._l(t.myStageList,(function(e,a){return i("el-step",{key:a,attrs:{status:a==t.stageIndex?"finish":e.status},nativeOn:{click:function(i){return t.onStep(e,a)}}},[i("template",{slot:"description"},[i("div",{staticClass:"step-row"},[t._v(t._s(e.StageName))]),e.ShowTime?i("div",[t._v("\n            "+t._s(t.timeFormat(1e3*e.StartTime,"yyyy-MM-dd"))+" -\n            "+t._s(t.timeFormat(1e3*e.EndTime,"yyyy-MM-dd"))+"\n          ")]):t._e()])],2)})),1)],1)])},c=[];function l(t,e,i,a,n,r,s){try{var o=t[r](s),c=o.value}catch(l){return void i(l)}o.done?e(c):Promise.resolve(c).then(a,n)}function u(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var r=t.apply(e,i);function s(t){l(r,a,n,s,o,"next",t)}function o(t){l(r,a,n,s,o,"throw",t)}s(void 0)}))}}var d={name:"flow-steps",props:{stage:{type:String},stageList:{type:Array,default:[]}},data:function(){return{activityId:"",myStageList:[],dialogVisible:!1,textarea:"",fileList:[],myStage:"",lockAct:!1}},computed:{stageIndex:function(){var t=this;return this.stageList.findIndex((function(e){return e.StageId==t.myStage}))}},mounted:function(){var t=this;this.myStageList=this.stageList.map((function(e){var i=new Date(1e3*e.StartTime),a=t.getNowLastTime();return e.status=a<i?"wait":"success",e})),this.activityId=this.$route.query.ActivityId,this.myStage=this.stage},methods:{getFileList:function(){var t=u(s.a.mark((function t(){var e;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/activity/GetActivityPageConf",ActivityId:this.activityId}).catch((function(t){return t}));case 2:if(e=t.sent,"OK"==e.ErrorCode){t.next=5;break}return t.abrupt("return",this.$message.error(e.ErrorMsg));case 5:this.fileList=e.Data.AttachmentList||[];case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),downLodeFile:function(t){window.open(t.URL)},feedbackSubmit:function(){var t=u(s.a.mark((function t(){var e,i=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.lockAct){t.next=2;break}return t.abrupt("return");case 2:return this.lockAct=!0,t.next=5,this.axiosPost({url:"/v1/activity/AddFeedback",Content:this.textarea,Title:"",ActivityId:this.activityId}).catch((function(t){return t}));case 5:e=t.sent,"OK"===e.ErrorCode?(this.dialogVisible=!1,this.textarea="",this.$message({type:"success",duration:2e3,message:"提交成功！"})):this.$message({type:"error",duration:2e3,message:e.ErrorCode}),setTimeout((function(){i.lockAct=!1}),1e3);case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),onStep:function(t,e){},getNowLastTime:function(){var t=new Date;return t.setHours(23),t.setMinutes(23),t.setSeconds(59),t}}},p=d,h=(i("68b4"),i("623f")),m=Object(h["a"])(p,o,c,!1,null,null,null),f=m.exports,v=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"activity-prepare"},[t._l(t.activityDetailList,(function(e,a){return i("component-item",{key:a,attrs:{type:e.type,name:e.name,text:e.text,url:e.url||"",styleType:e.styleType},on:{btnClick:t.apply}})})),i("w-x-login")],2)},g=[],y=i("b6cc"),b=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-dialog",{staticClass:"login-dialog",attrs:{visible:t.show,width:"400px","modal-append-to-body":!1},on:{"update:visible":function(e){t.show=e},close:t.onClose}},[i("div",{attrs:{id:"weixin-code"}})])},w=[],x={name:"wx-login",data:function(){return{show:!1}},methods:{login:function(){var t="127.0.0.1"==location.hostname?"https://upclaass.educloud.tencent.com":location.protocol+"//"+location.host;"cxyy.educloud.tencent.com"!=location.hostname&&"cxyy.szdj.edu.cn"!=location.hostname?setTimeout((function(){new window.WxLogin({id:"weixin-code",appid:"wx34fc14711090d000",scope:"snsapi_login",redirect_uri:encodeURIComponent(t),state:(new Date).getTime()})})):location.href="".concat(t,"/edulogin/?redirectUrl=").concat(t,"&from=activity")},onClose:function(){this.$store.dispatch("INIT_SHOW",!1)}}},k=x,_=(i("094b"),Object(h["a"])(k,b,w,!1,null,null,null)),C=_.exports;function S(t,e,i,a,n,r,s){try{var o=t[r](s),c=o.value}catch(l){return void i(l)}o.done?e(c):Promise.resolve(c).then(a,n)}function T(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var r=t.apply(e,i);function s(t){S(r,a,n,s,o,"next",t)}function o(t){S(r,a,n,s,o,"throw",t)}s(void 0)}))}}var L={name:"activity-prepare",components:{ComponentItem:y["a"],WXLogin:C},data:function(){return{activityId:"",activityDetailList:[],styleType:2,isShadeShow:!0}},mounted:function(){this.activityId=this.$route.query.ActivityId,this.getPublicPage()},methods:{getPublicPage:function(){var t=T(s.a.mark((function t(){var e;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/page/GetPublicPage",ActivityId:this.activityId}).catch((function(t){return t}));case 2:if(e=t.sent,"OK"==e.ErrorCode){t.next=5;break}return t.abrupt("return",this.$message.error(e.ErrorMsg));case 5:this.activityDetailList=JSON.parse(e.Data.Content||"{}");case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),apply:function(){var t=T(s.a.mark((function t(){var e;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosPost({url:"/v1/activity/ApplyActivity",ActivityId:this.activityId}).catch((function(t){return t}));case 2:if(e=t.sent,"OK"==e.ErrorCode){t.next=5;break}return t.abrupt("return",this.$message.error(e.ErrorMsg));case 5:this.$message.success("报名成功");case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},A=L,I=(i("fb13"),Object(h["a"])(A,v,g,!1,null,null,null)),P=I.exports,D=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"activity-work-upload"},[a("div",{staticClass:"work-title"},[t._v("提交作品")]),a("div",{staticClass:"line"}),"WORK_WAITING_AUDIT"==t.auditStatus?a("div",{staticClass:"work-hint audio-ing"},[a("span",[t._v("您提交的作品正在审核中…")])]):t._e(),"WORK_AUDIT_REJECT"==t.auditStatus||"WORK_AUDIT_AI_REJECT"==t.auditStatus?a("div",{staticClass:"work-hint audio-no"},[a("span",[t._v("您提交的作品审核不通过！")]),a("span",{staticClass:"appeal",on:{click:t.onAppealVisible}},[t._v("提交申述")])]):t._e(),a("div",{staticClass:"hint-title"},[a("span",[t._v("请输入作品名称")]),a("el-select",{staticClass:"subject",staticStyle:{width:"150px"},attrs:{placeholder:"选择组别",disabled:t.disabled},model:{value:t.TermId,callback:function(e){t.TermId=e},expression:"TermId"}},t._l(t.gradeOptions,(function(t){return a("el-option",{key:t.Id,attrs:{label:t.Name,value:t.Id}})})),1),a("el-select",{staticClass:"subject",staticStyle:{width:"150px"},attrs:{placeholder:"选择学科",disabled:t.disabled},model:{value:t.SubjectId,callback:function(e){t.SubjectId=e},expression:"SubjectId"}},t._l(t.subjectOptions,(function(t){return a("el-option",{key:t.Id,attrs:{label:t.Name,value:t.Id}})})),1)],1),a("el-input",{attrs:{placeholder:"请输入作品名称",disabled:t.disabled,maxlength:50},model:{value:t.workName,callback:function(e){t.workName=e},expression:"workName"}}),a("div",{staticClass:"hint-title"},[t._v("请输入作品简介")]),a("div",{staticClass:"work-textarea"},[a("el-input",{attrs:{type:"textarea",rows:9,placeholder:"请输入作品简介",disabled:t.disabled,maxlength:300,resize:"none"},model:{value:t.textarea,callback:function(e){t.textarea=e},expression:"textarea"}})],1),a("div",{staticClass:"upload-content"},[a("div",{staticClass:"upload-wrap video-wrap"},[a("div",{staticClass:"upload-file"},[a("el-button",{attrs:{type:"primary",disabled:t.disabled||t.uploading},on:{click:function(e){return t.uploadFile("video")}}},[0==t.videoFile.length?a("span",[t._v("上传作品")]):a("span",[t._v("替换作品")])]),a("div",{staticClass:"upload-text"},[t._v("支持mp4格式")])],1),t._l(t.videoFile,(function(e,n){return a("div",{key:n,staticClass:"file"},[a("span",{staticClass:"file-name"},[t._v(t._s(e.ResourceName))]),t.disabled?t._e():a("span",{staticClass:"close",on:{click:function(e){return t.deleteFile("video",n)}}},[a("img",{attrs:{src:i("9265")}})])])}))],2),a("div",{staticClass:"upload-wrap"},[a("div",{staticClass:"upload-file"},[a("el-button",{attrs:{type:"primary",disabled:t.disabled||t.uploading},on:{click:function(e){return t.uploadFile("doc")}}},[t._v("学习材料包")]),a("div",{staticClass:"upload-text"},[t._v("支持"+t._s(t.docFileList.join("、"))+"格式")])],1),t._l(t.docFile,(function(e,n){return a("div",{key:n,staticClass:"file"},[a("span",{staticClass:"file-name"},[t._v(t._s(e.ResourceName))]),t.disabled?t._e():a("span",{staticClass:"close",on:{click:function(e){return t.deleteFile("doc",n)}}},[a("img",{attrs:{src:i("9265")}})])])}))],2)]),a("div",{staticClass:"submit"},[t.disabled?t._e():a("el-button",{attrs:{type:"primary",disabled:!t.submitEnable},on:{click:t.submitWork}},[t._v("确认提交")])],1),a("div",{staticClass:"qr-code"},[t.h5Url?a("vue-qr",{attrs:{size:200,dotScale:1,text:t.h5Url}}):t._e(),a("div",{staticClass:"code-title"},[t._v("手机扫描查看作品预览页")])],1),a("cos",{ref:"cos",attrs:{"valid-list":t.validList},on:{start:function(e){t.uploading=!0},fail:t.fileFail,success:t.fileSuccess}}),a("el-dialog",{attrs:{title:"提交申述",visible:t.appealVisible,width:"400px","modal-append-to-body":!1,"append-to-body":!1},on:{"update:visible":function(e){t.appealVisible=e}}},[a("el-input",{attrs:{type:"textarea",rows:3,resize:"none",placeholder:"请输入申述的内容"},model:{value:t.appealText,callback:function(e){t.appealText=e},expression:"appealText"}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.submitAppeal}},[t._v("提交")]),a("el-button",{on:{click:function(e){t.appealVisible=!1}}},[t._v("取消")])],1)],1)],1)},j=[],O=i("af32"),E=i("4579"),N=i.n(E);function $(t,e,i,a,n,r,s){try{var o=t[r](s),c=o.value}catch(l){return void i(l)}o.done?e(c):Promise.resolve(c).then(a,n)}function F(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var r=t.apply(e,i);function s(t){$(r,a,n,s,o,"next",t)}function o(t){$(r,a,n,s,o,"throw",t)}s(void 0)}))}}var z={name:"activity-work-upload",components:{Cos:O["a"],VueQr:N.a},props:{stage:{type:String}},data:function(){return{workName:"",textarea:"",videoFile:[],docFile:[],nullFile:!0,QRCode:"",queryFileList:[],activityId:null,validList:[],videoFileList:["mp4"],docFileList:["txt","pdf","doc","ppt","xls","docx","xlsx","pptx"],fileLimit:200,videoName:"",videoUrl:"",appealVisible:!1,auditStatus:"",Current:"",workId:"",gradeOptions:[],subjectOptions:[],TermId:"",SubjectId:"",uploadType:"",isSubmit:!1,appealText:"",h5Url:"",uploading:!1}},computed:{submitEnable:function(){return this.TermId&&this.SubjectId&&this.workName&&this.textarea&&this.videoFile.length>0&&this.docFile.length>0},disabled:function(){return"STAGE_WORK_AUDIT"==this.stage}},mounted:function(){this.activityId=this.$route.query.ActivityId,this.Current=this.$route.query.Current,this.getGradeList(),this.getSubjectList(),this.getActivityWorkDetail()},methods:{getActivityWorkDetail:function(){var t=F(s.a.mark((function t(){var e,i,a,n,r,o,c,l,u,d;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/activity/GetWorkDetailByActivityId",ActivityId:this.activityId}).catch((function(t){return t}));case 2:if(e=t.sent,"OK"==e.ErrorCode){t.next=5;break}return t.abrupt("return");case 5:for(i=e.Data.WorkDetail||{},this.workName=i.Title,this.textarea=i.Desc,this.workId=i.WorkId,this.TermId=i.TermId,this.SubjectId=i.SubjectId,this.auditStatus=i.Status,this.videoFile=[],this.docFile=[],a=e.Data.Resource||[],n=!0,r=!1,o=void 0,t.prev=18,c=a[Symbol.iterator]();!(n=(l=c.next()).done);n=!0)u=l.value,4==u.ResourceType?this.videoFile.push(u):5==u.ResourceType&&this.docFile.push(u);t.next=26;break;case 22:t.prev=22,t.t0=t["catch"](18),r=!0,o=t.t0;case 26:t.prev=26,t.prev=27,n||null==c.return||c.return();case 29:if(t.prev=29,!r){t.next=32;break}throw o;case 32:return t.finish(29);case 33:return t.finish(26);case 34:i.WorkId&&(d=this.getCookie("Authorization"),this.h5Url="https://".concat(location.hostname,"/h5/myWorks?")+"ActivityId=".concat(this.activityId,"&WorkId=").concat(i.WorkId,"&token=").concat(d));case 35:case"end":return t.stop()}}),t,this,[[18,22,26,34],[27,,29,33]])})));function e(){return t.apply(this,arguments)}return e}(),submitWork:function(){var t=F(s.a.mark((function t(){var e,i;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("STAGE_WORK_AUDIT"!=this.auditStatus&&"WORK_AUDIT_REJECT"!=this.auditStatus&&"WORK_AUDIT_ACCEPT"!=this.auditStatus){t.next=11;break}return t.next=3,this.axiosPost({url:"/v1/activity/UpdateWork",ActivityId:+this.activityId,WorkId:"".concat(this.workId),Desc:this.textarea,Title:this.workName,Category:1,ResourceType:0,ResourceList:this.videoFile.concat(this.docFile),Term:this.TermId,Subject:this.SubjectId}).catch((function(t){return t}));case 3:if(e=t.sent,"OK"==e.ErrorCode){t.next=8;break}return t.abrupt("return",this.$message.error(e.ErrorMsg));case 8:this.$message.success("更新成功");case 9:t.next=18;break;case 11:return t.next=13,this.axiosPost({url:"/v1/activity/UploadWork",ActivityId:+this.activityId,Desc:this.textarea,Title:this.workName,Category:1,ResourceType:0,ResourceList:this.videoFile.concat(this.docFile),Term:this.TermId,Subject:this.SubjectId}).catch((function(t){return t}));case 13:if(i=t.sent,"OK"==i.ErrorCode){t.next=16;break}return t.abrupt("return",this.$message.error(i.ErrorMsg));case 16:this.$message.success("提交成功"),this.getActivityWorkDetail();case 18:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),deleteFile:function(t,e){"video"==t?this.videoFile=[]:this.docFile.splice(e,1)},fileFail:function(){this.uploading=!1},fileSuccess:function(t){this.uploading=!1;var e={ResourceType:"video"==this.uploadType?4:5,ResourceName:t.filename,ResourceContent:"https://"+t.Location};"video"==this.uploadType?this.videoFile=[e]:this.docFile.push(e)},uploadFile:function(t){this.uploadType=t,this.validList="doc"==t?this.docFileList:this.videoFileList,this.$refs.cos.$refs.fileEle.dispatchEvent(new MouseEvent("click"))},onAppealVisible:function(){this.appealText="",this.appealVisible=!0},submitAppeal:function(){var t=F(s.a.mark((function t(){var e;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosPost({url:"/v1/activity/WorkAppeal",WorkId:this.workId,Message:this.appealText}).catch((function(t){return t}));case 2:if(e=t.sent,"OK"==e.ErrorCode){t.next=5;break}return t.abrupt("return",this.$message.error(e.ErrorMsg));case 5:this.$message.success("申诉成功"),this.appealVisible=!1;case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getGradeList:function(){var t=F(s.a.mark((function t(){var e;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/activity/GetGradeGroup"}).catch((function(t){return t}));case 2:e=t.sent,this.gradeOptions=e.Data.GradeGroup||[];case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getSubjectList:function(){var t=F(s.a.mark((function t(){var e;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/activity/GetSubjectList"}).catch((function(t){return t}));case 2:e=t.sent,this.subjectOptions=e.Data.SubjectList||[];case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},U=z,R=(i("622c"),Object(h["a"])(U,D,j,!1,null,null,null)),V=R.exports,G=i("0f4c"),W=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"activity-expert-judge"},[t.loaded?i("div",{staticClass:"info"},[t.award?i("span",[t._v(t._s(t.award.Message))]):i("span",[t._v("暂无获奖信息")])]):t._e(),i("div",{staticClass:"expert-img"})])},M=[];function q(t,e,i,a,n,r,s){try{var o=t[r](s),c=o.value}catch(l){return void i(l)}o.done?e(c):Promise.resolve(c).then(a,n)}function B(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var r=t.apply(e,i);function s(t){q(r,a,n,s,o,"next",t)}function o(t){q(r,a,n,s,o,"throw",t)}s(void 0)}))}}var J={name:"activity-expert-judge",props:{stage:{type:String}},data:function(){return{activityId:"",award:"",loaded:!1}},mounted:function(){this.activityId=this.$route.query.ActivityId},methods:{getAward:function(){var t=B(s.a.mark((function t(){var e,i;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/activity/AwardStatus",ActivityId:this.activityId,StageId:this.stage}).catch((function(t){return t}));case 2:if(e=t.sent,this.loaded=!0,"OK"==e.ErrorCode){t.next=6;break}return t.abrupt("return");case 6:i=e.Data.AwardList,i&&i[0]&&(this.award=i[0]);case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},K=J,H=(i("81ef"),Object(h["a"])(K,W,M,!1,null,null,null)),Y=H.exports,Q=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"activity-look-over"},[t.workList.length>0?t._l(t.workList,(function(e,a){return i("el-card",{key:a,staticClass:"work-list-item"},[i("div",{staticClass:"work-list-top"},[i("div",{staticClass:"picleft"},[i("img",{attrs:{src:e.url}})]),i("div",{staticClass:"jianjie"},[i("div",{staticClass:"name"},[i("p",[t._v(t._s(e.name))])]),i("div",{staticClass:"activeclass"},[i("p",[t._v("报名时间："+t._s(e.avitveTiem))]),i("p",[t._v("活动对象："+t._s(e.activeObject[0])+" ")]),i("p",[t._v("活动组别："+t._s(e.activeGroup[0])+" ")]),i("p",[t._v("活动范围："+t._s(e.activeLimit[0])+" ")]),i("p",[t._v("活动类别："+t._s(e.activeClass[0])+" ")]),i("div",{staticClass:"activeclass-bottom"},[i("el-button",{attrs:{type:"text"},on:{click:t.goToActivity}},[t._v("查看活动详情 》")])],1)])])]),i("div",{staticClass:"activity-detail"},[i("p",{staticClass:"title"},[t._v("作品详情")]),i("el-divider"),i("div",{staticClass:"activity-detail-item"},[i("p",[t._v("作品名称：")]),i("span",[t._v("机器人的形成")])]),i("div",{staticClass:"activity-detail-item"},[i("p",[t._v("作品简介：")]),i("span",[t._v("\n                                出埃及记，说的是希伯来人的苦难历史，之所以用这个题材设计，是想通过他们故事引出我们现在生活的各种感悟。年纪愈大，对社会的感觉愈深。望大家不要忽略文案，动画设计只是表像，内容才是意义所在。与其说是网易游戏，不如说是献给大家，借用里的一个桥段：\n第四段背景：摩西带领众人来到红海边，见到大海挡住了去路，在后有追兵前有大海的困境中，向天神祈求。\n                            ")])]),i("div",{staticClass:"activity-detail-file"},[i("p",[t._v("报名登记表：")]),i("div",{staticClass:"file"},[i("span",[t._v("报名登记表.DOC")])])]),i("div",{staticClass:"activity-detail-file"},[i("p",[t._v("作品附件：")]),i("div",{staticClass:"file"},[i("span",[t._v("宝安中学报名申请表.doc")])])]),i("div",{staticClass:"activity-detail-item"},[i("p",[t._v("作者名称： ")]),i("span",[t._v("张三")])]),i("div",{staticClass:"activity-detail-item"},[i("p",[t._v("指导老师：")]),i("span",[t._v("陈老师")])]),i("div",{staticClass:"activity-detail-item"},[i("p",[t._v("电子邮箱：")]),i("span",[t._v("36512366122@163.com")])])],1)])})):i("div",{staticClass:"no-data"},[t._v("暂无数据")])],2)},X=[],Z={name:"activity-look-over",data:function(){return{activityId:"",workList:[{url:i("89c2"),name:"电脑绘图",avitveTiem:"2020-01-05 ～ 2020-02-06",activeObject:["学生"],activeGroup:["小学组","初中组"],activeLimit:["宝安区","龙岗区","南山区","福田区"],activeClass:["数字创作项目"],activePreface:"为提高我市中小学实验教师（实验管理员）的实验操作技能和动手实际能力，激发教师的创新思维和意识，提升实验教学水平，推动实验教学改革和推进素质教育。2019年深圳市物理、化学、生物和小学科学实验教师（实验管理员）实验操作与创新技能竞赛活动。",activeAddr:"（一）报名及上传资料：请各参赛教师将创新实验操作视频、PPT及文稿（包括题目、教师姓名、学校名称、使用教材、创新实验器材、创新实验原理、目标、内容、过程等）通过深圳市2019年物理、化学、生物及小学科学实验教师实验操作与创新技能竞赛活动专题http://cxyy.szdj.edu.cn上传； 作品上传时间：2019年10月8号 — 10月18号 （二）初赛：各区（新区、市局直属学校）根据在线报名参赛情况组织初赛，形式不限，并于10月25日前通过平台报送参加名单及作品； （三）市赛：组织全市现场比赛与培训，具体时间、地点另行通知。",activeRequer:"（一）常规实验操作技能竞赛。熟练、规范完成一个本学科课程开设的学生分组实验，限时20分钟； （二）创新实验器材开发技能竞赛。现场演示并解说适用于本学科课程自己开发的演示实验、探究实验、课外实验等创新实验器材，并附上文字图片说明，限时20分钟。创新实验器材能够改进原有实验器材的缺陷或不足，有创新点或解决本学科实验教学中遇到的问题； 每位参赛教师必须参加以上两项竞赛（评分细则见附件1）。"}]}},props:{stage:{type:String}},mounted:function(){this.activityId=this.$route.query.ActivityId},methods:{goToActivity:function(){this.$router.push({path:"/activityDetail"})}}},tt=Z,et=(i("9648"),Object(h["a"])(tt,Q,X,!1,null,"9016ca98",null)),it=et.exports;function at(t,e,i,a,n,r,s){try{var o=t[r](s),c=o.value}catch(l){return void i(l)}o.done?e(c):Promise.resolve(c).then(a,n)}function nt(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var r=t.apply(e,i);function s(t){at(r,a,n,s,o,"next",t)}function o(t){at(r,a,n,s,o,"throw",t)}s(void 0)}))}}var rt={components:{FlowSteps:f,Prepare:P,WorkUpload:V,ExpertJude:Y,WorkLookOver:it,WorkShow:G["default"]},data:function(){return{activityId:1,currentStage:"",stageList:[{StageName:"作品报名",StartTime:"",EndTime:"",status:""},{StageName:"区域推荐",StartTime:"",EndTime:"",status:""},{StageName:"市级评审"},{StageName:"查看结果",StartTime:"",EndTime:"",status:""}]}},mounted:function(){this.activityId=this.$route.query.ActivityId,this.getStageList(),this.currentStage=this.$route.query.stage},methods:{getStageList:function(){var t=nt(s.a.mark((function t(){return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}(),changeStage:function(t){this.currentStage=t}}},st=rt,ot=(i("0fbe"),Object(h["a"])(st,a,n,!1,null,null,null));e["default"]=ot.exports},2244:function(t,e,i){},"22e6":function(t,e,i){"use strict";var a=i("8562"),n=i.n(a);n.a},"22ff":function(t,e,i){"use strict";var a=i("3f02"),n=i.n(a);n.a},"24a8":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"warrp"},[i("div",{staticClass:"expert-content"},[i("el-button",{staticStyle:{"margin-bottom":"10px"},attrs:{type:"primary"},on:{click:t.addClick}},[t._v("添加专家")]),i("div",{staticClass:"exper-table"},[i("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{"tooltip-effect":"dark",data:t.tableData}},[i("el-table-column",{attrs:{prop:"Username",label:"专家姓名",width:"193"}}),i("el-table-column",{attrs:{prop:"Phone",label:"联系电话",width:"193"}}),i("el-table-column",{attrs:{prop:"WorkUnit",label:"所属单位",width:"193"}}),i("el-table-column",{attrs:{prop:"CreatedAt",label:"创建时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(t.timeFormat(1e3*e.row.CreatedAt,"yyyy-MM-dd hh:mm:ss"))+"\n          ")]}}])}),i("el-table-column",{scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return t.handleDelete(e.row)}}},[t._v("删除")])]}}])})],1),i("el-pagination",{attrs:{layout:"prev, pager, next",total:t.total,"page-size":t.pagesize,"current-page":t.currentPage},on:{"current-change":t.handleCurrentChange}})],1)],1),i("el-dialog",{attrs:{title:"添加专家",visible:t.showAdd,width:"500px"},on:{"update:visible":function(e){t.showAdd=e}}},[i("el-form",{attrs:{"label-width":"80px"}},[i("el-form-item",{attrs:{label:"专家姓名"}},[i("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"支持中英文数字",maxlength:"20"},model:{value:t.form.Username,callback:function(e){t.$set(t.form,"Username",e)},expression:"form.Username"}})],1),i("el-form-item",{attrs:{label:"手机号"}},[i("el-input",{staticStyle:{width:"300px"},attrs:{maxlength:"11"},model:{value:t.form.Phone,callback:function(e){t.$set(t.form,"Phone",e)},expression:"form.Phone"}})],1),i("el-form-item",{attrs:{label:"所属单位"}},[i("el-input",{staticStyle:{width:"300px"},attrs:{maxlength:"20"},model:{value:t.form.WorkUnit,callback:function(e){t.$set(t.form,"WorkUnit",e)},expression:"form.WorkUnit"}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.showAdd=!1}}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:t.confirmBtn}},[t._v("确 定")])],1)],1)],1)},n=[],r=i("46b4"),s=i.n(r),o=/^1[23456789]\d{9}$/,c=/^[0-9A-Za-z\u4e00-\u9fa5]+$/;function l(t,e,i,a,n,r,s){try{var o=t[r](s),c=o.value}catch(l){return void i(l)}o.done?e(c):Promise.resolve(c).then(a,n)}function u(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var r=t.apply(e,i);function s(t){l(r,a,n,s,o,"next",t)}function o(t){l(r,a,n,s,o,"throw",t)}s(void 0)}))}}var d={data:function(){return{currentPage:1,pagesize:10,total:0,tableData:[],multipleSelection:[],showAdd:!1,UserId:"",day:"",form:{Username:"",Phone:"",WorkUnit:""}}},created:function(){var t=u(s.a.mark((function t(){return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.init();case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),methods:{init:function(){var t=u(s.a.mark((function t(){var e;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/activity/GetExpertList",PageSize:this.pagesize,PageNum:this.currentPage}).catch((function(t){return t}));case 2:e=t.sent,this.tableData=e.Data.ExpertInfo,this.total=e.Data.Total;case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),addClick:function(){for(var t in this.form)this.form[t]="";this.showAdd=!0},confirmBtn:function(){var t=u(s.a.mark((function t(){var e;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(c.test(this.form.Username)){t.next=2;break}return t.abrupt("return",this.$message.error("请输入正确的姓名"));case 2:if(o.test(this.form.Phone)){t.next=4;break}return t.abrupt("return",this.$message.error("请输入正确的手机号"));case 4:return t.next=6,this.axiosPost({url:"/v1/activity/AddExpert",Username:this.form.Username,Phone:this.form.Phone,WorkUnit:this.form.WorkUnit}).catch((function(t){return t}));case 6:if(e=t.sent,"OK"==e.ErrorCode){t.next=9;break}return t.abrupt("return",this.$message.error(e.ErrorMsg));case 9:this.$message.success("添加成功"),this.showAdd=!1,this.init();case 12:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),handleDelete:function(t){var e=this;this.$confirm("确定删除专家【".concat(t.Username,"】？"),"删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(u(s.a.mark((function i(){var a;return s.a.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,e.axiosGet({url:"/v1/activity/DeleteExpert",UserId:t.UserId}).catch((function(t){return t}));case 2:if(a=i.sent,"OK"==a.ErrorCode){i.next=5;break}return i.abrupt("return",e.$message.error(a.ErrorMsg));case 5:e.$message({type:"success",showClose:!0,message:"删除成功",duration:2e3}),e.init();case 7:case"end":return i.stop()}}),i)}))))},handleCurrentChange:function(t){this.currentPage=t,this.init()}}},p=d,h=(i("64ed"),i("3a08"),i("623f")),m=Object(h["a"])(p,a,n,!1,null,"375aeab8",null);e["default"]=m.exports},"26c7":function(t,e,i){"use strict";var a=i("b87d"),n=i.n(a);n.a},2710:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"video-player"},[i("video-player",{ref:"videoPlayer",staticClass:"video-player vjs-custom-skin",attrs:{playsinline:!0,options:t.playerOptions},on:{play:function(e){return t.onPlayerPlay(e)},pause:function(e){return t.onPlayerPause(e)}}})],1)},n=[],r={props:{videoSrc:{type:String,default:function(){return""}}},data:function(){return{playerOptions:{playbackRates:[.5,1,1.5,2],autoplay:!1,muted:!1,loop:!1,preload:"auto",language:"zh-CN",aspectRatio:"16:9",fluid:!0,sources:[{type:"video/mp4",src:""}],poster:"",notSupportedMessage:"此视频暂无法播放，请稍后再试",controlBar:{timeDivider:!1,durationDisplay:!1,remainingTimeDisplay:!1,fullscreenToggle:!0}}}},mounted:function(){this.playerOptions.sources[0].src=this.videoSrc},watch:{videoSrc:function(t){""!==t&&this.$refs.videoPlayer.player.src(t)}},methods:{onPlayerPlay:function(t){this.$refs.videoPlayer.player.play()},onPlayerPause:function(t){this.$refs.videoPlayer.player.pause()}},computed:{}},s=r,o=(i("0a77"),i("623f")),c=Object(o["a"])(s,a,n,!1,null,null,null);e["a"]=c.exports},2760:function(t,e,i){},2847:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container"},[1==t.type?i("div",{staticClass:"picture-items"},[i("el-image",{attrs:{src:t.fileObj.url,fit:"contain"}}),i("div",{staticClass:"operate"},[i("p",{staticClass:"el-icon-zoom-in",on:{click:function(e){return t.goToPreview(t.fileObj.url)}}})]),i("p",[t._v(t._s(t.fileObj.title||t.fileObj.name))])],1):t._e(),2==t.type?i("div",{staticClass:"picture-items"},[i("video",{attrs:{src:t.fileObj.url}}),i("div",{staticClass:"operate"},[i("p",{staticClass:"el-icon-video-play",on:{click:function(e){return t.goToPlay(t.fileObj.url)}}})]),i("p",[t._v(t._s(t.fileObj.title||t.fileObj.name))])]):t._e(),3==t.type?i("div",{staticClass:"file-item"},[i("div",{staticClass:"file-preview"},[i("div",{staticClass:"icon-name"},[i("img",{attrs:{src:t.fileIconUrl,alt:""}}),i("p",[t._v(t._s(t.fileObj.title||t.fileObj.name))])]),t.showDownLoad?i("div",{staticClass:"operate"},[i("el-link",{staticStyle:{"margin-left":"15px"},attrs:{target:"_blank",href:t.fileObj.url,underline:!1}},[i("el-button",{attrs:{type:"text"}},[t._v("下载")])],1)],1):t._e()])]):t._e(),i("el-dialog",{attrs:{visible:t.dialogVisible,width:"800px","before-close":t.handleClose,"show-close":!1},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("div",{staticClass:"dialog-main"},[1==t.type?i("el-image",{attrs:{src:t.showUrl}}):t._e(),2==t.type?i("my-video-player",{ref:"MyVideoPlayer",attrs:{videoSrc:t.showUrl}}):t._e()],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.closeDialog}},[t._v("关闭")])],1)])],1)},n=[],r=i("2710"),s={components:{MyVideoPlayer:r["a"]},props:{fileObj:{type:Object,default:function(){return{}}},showDownLoad:{type:Boolean,default:function(){return!0}}},data:function(){return{fileIconUrl:i("a817"),dialogVisible:!1,type:1,showUrl:""}},mounted:function(){console.log("filePreview===",this.fileObj),"jpg"==this.extname(this.fileObj.url)||"jpeg"==this.extname(this.fileObj.url)||"png"==this.extname(this.fileObj.url)?this.type=1:"mp4"==this.extname(this.fileObj.url)?this.type=2:"zip"==this.extname(this.fileObj.url)?(this.type=3,this.fileIconUrl=i("cea1")):(this.type=3,this.fileIconUrl=i("a817"))},methods:{goToPreview:function(t){this.dialogVisible=!0,this.showUrl=t},goToPlay:function(t){var e=this;this.dialogVisible=!0,this.showUrl=t,setTimeout((function(){e.$refs.MyVideoPlayer.onPlayerPlay()}),1e3)},goToDownLoad:function(t){var e=document.createElement("iframe");e.src=t,e.style.display="none",document.body.appendChild(e)},closeDialog:function(){this.dialogVisible=!1,2==this.type&&this.$refs.MyVideoPlayer.onPlayerPause()},handleClose:function(t){}}},o=s,c=(i("f116"),i("623f")),l=Object(c["a"])(o,a,n,!1,null,"c2e53d78",null);e["a"]=l.exports},"28ce":function(t,e,i){"use strict";var a=i("07a2"),n=i.n(a);n.a},"28ef":function(t,e,i){"use strict";var a=i("08a1"),n=i.n(a);n.a},"28f0":function(t,e,i){"use strict";var a=i("a271"),n=i.n(a);n.a},"298d":function(t,e,i){"use strict";var a=i("abb1"),n=i.n(a);n.a},"29cb":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"create-activity-container"},[i("el-card",{staticStyle:{"min-height":"650px"}},[i("el-page-header",{on:{back:function(e){return t.back()}}}),i("el-divider"),i("div",{staticClass:"create-activity-body"},[[i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[i("el-table-column",{attrs:{prop:"name",label:"专家"}}),i("el-table-column",{attrs:{prop:"score",label:"评分"}}),i("el-table-column",{attrs:{prop:"comment",label:"评语","show-overflow-tooltip":""}})],1),i("el-table",{staticStyle:{width:"100%"},attrs:{"show-header":!1,data:t.averageScore,border:""}},[i("el-table-column",{attrs:{prop:"name"}}),i("el-table-column",{attrs:{prop:"average"}})],1)]],2),i("el-divider"),i("works-preview",{attrs:{id:t.id}})],1)],1)},n=[],r=i("46b4"),s=i.n(r),o=i("cfc6"),c=i("408b"),l=i("9e1e");function u(t,e,i,a,n,r,s){try{var o=t[r](s),c=o.value}catch(l){return void i(l)}o.done?e(c):Promise.resolve(c).then(a,n)}function d(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var r=t.apply(e,i);function s(t){u(r,a,n,s,o,"next",t)}function o(t){u(r,a,n,s,o,"throw",t)}s(void 0)}))}}var p={components:{MyEditor:o["a"],WorksPreview:l["a"]},data:function(){return{id:this.$route.query.id,tableData:[],averageScore:[{name:"综合评分",average:"95"}],workDetail:{},activityInfo:{}}},computed:{},mounted:function(){this.getWorksDetail()},methods:{getWorksDetail:function(){var t=d(s.a.mark((function t(){var e,i=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={},e.id=this.id,e.url=c["a"].enroll,e.expand="info,works,school,professional,award",t.next=6,this.axiosGet(e).then((function(t){if(i.tableData=t.professional,i.tableData.forEach((function(t){t.score<0?t.score=0:t.score=t.score/10})),t.professional.length>0){var e=0;t.professional.forEach((function(t){e+=parseInt(t.score)})),i.averageScore[0].average=e/t.professional.length}i.workDetail=t.works,i.activityInfo=t.info})).catch((function(t){return t}));case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),back:function(){this.$router.go(-1)}}},h=p,m=(i("5b85"),i("623f")),f=Object(m["a"])(h,a,n,!1,null,null,null);e["default"]=f.exports},"2a8e":function(t,e,i){t.exports=i.p+"img/ac2.6b4aa361.png"},"2b20":function(t,e,i){"use strict";var a=i("cdc2"),n=i.n(a);n.a},"2b88":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"audit-warrp"},[i("div",[i("div",{staticClass:"audit-center"},[i("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:"待审核的活动",name:"first"}},[i("div",{staticClass:"audit-buttom"},[i("el-button",{attrs:{type:"primary",disabled:0==t.checkedList1.length},on:{click:function(e){return t.choseprofrom("",1)}}},[t._v("审核通过")]),i("el-button",{attrs:{type:"primary",disabled:0==t.checkedList1.length},on:{click:function(e){return t.choseprofrom("",0)}}},[t._v("审核不通过")])],1),t._l(t.dataList,(function(e,a){return i("div",{key:a,staticClass:"audit-checkbox"},[i("el-checkbox",{on:{change:function(i){return t.onChange1(i,e)}},model:{value:e.checked,callback:function(i){t.$set(e,"checked",i)},expression:"item.checked"}}),i("div",{staticClass:"audit-box"},[i("img",{staticClass:"audit-image",attrs:{src:e.ActivityLogo}}),i("div",{staticClass:"audit-content"},[i("div",{staticClass:"audit-content-title"},[t._v(t._s(e.ActivityName))]),i("div",{staticClass:"audit-content-word",staticStyle:{width:"756px",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"}},[t._v(t._s(e.ActivityDesc))]),e.StartTime||e.EndTime?i("div",{staticClass:"audit-content-word"},[t._v("\n                  "+t._s(e.StartTime)+" - "+t._s(e.EndTime)+"\n                ")]):t._e()]),i("div",{staticClass:"audit-info"},[i("el-button",{attrs:{type:"text"},on:{click:function(i){return t.goToActDetail(e)}}},[t._v("详情")]),i("el-button",{attrs:{type:"text"},on:{click:function(i){return t.choseprofrom(e,1)}}},[t._v("通过")]),i("el-button",{attrs:{type:"text"},on:{click:function(i){return t.choseprofrom(e,0)}}},[t._v("不通过")])],1)])],1)})),i("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.total1,"page-size":t.PageSize1,"current-page":t.currentPage1},on:{"current-change":t.handleCurrentChange}})],2),i("el-tab-pane",{attrs:{label:"已审核的活动",name:"second"}},[i("div",{staticClass:"audit-buttom"},[i("el-button",{attrs:{type:"primary",disabled:0==t.checkedList2.length},on:{click:function(e){return t.offline()}}},[t._v("活动下线")])],1),t._l(t.dataList,(function(e,a){return i("div",{key:a,staticClass:"audit-checkbox"},[i("el-checkbox",{on:{change:function(i){return t.onChange2(i,e)}},model:{value:e.checked,callback:function(i){t.$set(e,"checked",i)},expression:"item.checked"}}),i("div",{staticClass:"audit-box"},[i("img",{staticClass:"audit-image",attrs:{src:e.ActivityLogo}}),i("div",{staticClass:"audit-content"},[i("div",{staticClass:"audit-content-title"},[t._v(t._s(e.ActivityName))]),i("div",{staticClass:"audit-content-word",staticStyle:{width:"756px",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"}},[t._v(t._s(e.ActivityDesc))]),e.StartTime||e.EndTime?i("div",{staticClass:"audit-content-word"},[t._v("\n                  "+t._s(e.StartTime)+"-"+t._s(e.EndTime)+"\n                ")]):t._e()]),i("div",{staticClass:"audit-info"},[i("el-button",{attrs:{type:"text"},on:{click:function(i){return t.goToActDetail(e)}}},[t._v("详情")]),i("el-button",{attrs:{type:"text"},on:{click:function(i){return t.offline(e.ActivityId)}}},[t._v("下线")])],1)])],1)})),i("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.total2,"page-size":t.PageSize2,"current-page":t.currentPage2},on:{"current-change":t.handleCurrentChange}})],2),i("el-tab-pane",{attrs:{label:"审核未通过的活动",name:"third"}},[i("div",{staticClass:"audit-buttom"},[i("el-button",{attrs:{type:"primary",disabled:0==t.checkedList3.length},on:{click:function(e){return t.passClick()}}},[t._v("审核通过")])],1),t._l(t.dataList,(function(e,a){return i("div",{key:a,staticClass:"audit-checkbox"},[i("el-checkbox",{on:{change:function(i){return t.onChange3(i,e)}},model:{value:e.checked,callback:function(i){t.$set(e,"checked",i)},expression:"item.checked"}}),i("div",{staticClass:"audit-box"},[i("img",{staticClass:"audit-image",attrs:{src:e.ActivityLogo}}),i("div",{staticClass:"audit-content"},[i("div",{staticClass:"audit-content-title"},[t._v(t._s(e.ActivityName))]),i("div",{staticClass:"audit-content-word",staticStyle:{width:"756px",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"}},[t._v(t._s(e.ActivityDesc))]),e.StartTime||e.EndTime?i("div",{staticClass:"audit-content-word"},[t._v("\n                  "+t._s(e.StartTime)+"-"+t._s(e.EndTime)+"\n                ")]):t._e()]),i("div",{staticClass:"audit-info"},[i("el-button",{attrs:{type:"text"},on:{click:function(i){return t.goToActDetail(e)}}},[t._v("详情")]),i("el-button",{attrs:{type:"text"},on:{click:function(i){return t.passClick(e.ActivityId)}}},[t._v("通过")])],1)])],1)})),i("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.total3,"page-size":t.PageSize3,"current-page":t.currentPage3},on:{"current-change":t.handleCurrentChange}})],2)],1)],1)]),i("el-dialog",{attrs:{title:"审核不通过",visible:t.noPassDialog,width:"30%"},on:{"update:visible":function(e){t.noPassDialog=e}}},[i("div",{staticClass:"dialog-title"},[t._v("请输入审核不通过的原因")]),i("el-input",{staticStyle:{width:"348px",height:"71px"},attrs:{type:"textarea"},model:{value:t.from.Message,callback:function(e){t.$set(t.from,"Message",e)},expression:"from.Message"}}),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.noPassDialog=!1}}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:t.confirmBtn}},[t._v("确 定")])],1)],1)],1)},n=[],r=i("46b4"),s=i.n(r);function o(t,e,i,a,n,r,s){try{var o=t[r](s),c=o.value}catch(l){return void i(l)}o.done?e(c):Promise.resolve(c).then(a,n)}function c(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var r=t.apply(e,i);function s(t){o(r,a,n,s,c,"next",t)}function c(t){o(r,a,n,s,c,"throw",t)}s(void 0)}))}}var l={data:function(){return{isShow:!0,onShow:!0,showMask:!1,Status:"ACTIVITY_WAITING_AUDIT",ActivityId:[],activeName:"first",dataList:[],from:{Status:"ACTIVITY_AUDIT_REJECT",Message:""},noPassDialog:!1,checkedList1:[],checkedList2:[],checkedList3:[],actionIdList:[],total1:0,total2:0,total3:0,PageSize1:10,PageSize2:10,PageSize3:10,currentPage1:1,currentPage2:1,currentPage3:1}},created:function(){this.init()},methods:{init:function(){var t=c(s.a.mark((function t(){var e,i,a,n,r=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.checkedList1=[],this.checkedList2=[],this.checkedList3=[],"ACTIVITY_WAITING_AUDIT"==this.Status?(e=this.PageSize1,i=this.currentPage1):"ACTIVITY_AUDIT_ACCEPT"==this.Status?(e=this.PageSize2,i=this.currentPage2):"ACTIVITY_AUDIT_REJECT"==this.Status&&(e=this.PageSize3,i=this.currentPage3),t.next=6,this.axiosGet({url:"/v1/activity/GetMyAuditActivityList",PageNum:i,PageSize:e,Status:this.Status}).catch((function(t){return t}));case 6:if(a=t.sent,"OK"==a.ErrorCode){t.next=9;break}return t.abrupt("return",this.$message.error(a.ErrorMsg));case 9:n=a.Data.ActivityList,n.forEach((function(t){t.StartTime=r.timeFormat(1e3*t.StartTime,"yyyy-MM-dd"),t.EndTime=r.timeFormat(1e3*t.EndTime,"yyyy-MM-dd"),t.checked=!1})),this.dataList=a.Data.ActivityList,this.total1=this.total2=this.total3=a.Data.Total;case 13:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),handleCurrentChange:function(t){this.currentPage1=this.currentPage2=this.currentPage3=t,this.init()},offline:function(){var t=c(s.a.mark((function t(e){var i;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosPost({url:"/v1/activity/AuditActivity",ActivityId:e?[e]:this.checkedList2,Status:"ACTIVITY_FORBIDDEN",Message:"活动下线"}).catch((function(t){return t}));case 2:if(i=t.sent,"OK"==i.ErrorCode){t.next=5;break}return t.abrupt("return",this.$message.error(i.ErrorMsg));case 5:this.$message.success("下线成功"),this.init();case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),passClick:function(){var t=c(s.a.mark((function t(e){var i;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosPost({url:"/v1/activity/AuditActivity",ActivityId:e?[e]:this.checkedList3,Status:"ACTIVITY_AUDIT_ACCEPT",Message:"通过"}).catch((function(t){return t}));case 2:if(i=t.sent,"OK"==i.ErrorCode){t.next=5;break}return t.abrupt("return",this.$message.error(i.ErrorMsg));case 5:this.$message.success("审核通过"),this.init();case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),handleClick:function(t,e){this.currentPage1=this.currentPage2=this.currentPage3=1,0==t.index?(this.Status="ACTIVITY_WAITING_AUDIT",this.init()):1==t.index?(this.Status="ACTIVITY_AUDIT_ACCEPT",this.init()):2==t.index&&(this.Status="ACTIVITY_AUDIT_REJECT",this.init())},onChange1:function(t,e){if(t)this.checkedList1.push(e.ActivityId);else{var i=this.checkedList1.indexOf(e.ActivityId);this.checkedList1.splice(i,1)}},onChange2:function(t,e){if(t)this.checkedList2.push(e.ActivityId);else{var i=this.checkedList1.indexOf(e.ActivityId);this.checkedList2.splice(i,1)}},onChange3:function(t,e){if(t)this.checkedList3.push(e.ActivityId);else{var i=this.checkedList3.indexOf(e.ActivityId);this.checkedList3.splice(i,1)}},confirmBtn:function(){var t=c(s.a.mark((function t(){var e;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosPost({url:"/v1/activity/AuditActivity",ActivityId:this.actionIdList,Status:"ACTIVITY_AUDIT_REJECT",Message:this.from.Message}).catch((function(t){return t}));case 2:if(e=t.sent,"OK"==e.ErrorCode){t.next=5;break}return t.abrupt("return",this.$messsage.error(e.ErrorMsg));case 5:this.noPassDialog=!1,this.$message.success("提交成功"),this.init();case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),choseprofrom:function(){var t=c(s.a.mark((function t(e,i){var a;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!=i){t.next=5;break}this.noPassDialog=!0,this.actionIdList=e?[e.ActivityId]:this.checkedList1,t.next=12;break;case 5:return t.next=7,this.axiosPost({url:"/v1/activity/AuditActivity",ActivityId:e?[e.ActivityId]:this.checkedList1,Status:"ACTIVITY_AUDIT_ACCEPT",Message:"通过"}).catch((function(t){return t}));case 7:if(a=t.sent,"OK"==a.ErrorCode){t.next=10;break}return t.abrupt("return",this.$message.error(a.ErrorMsg));case 10:this.$message.success("审核通过"),this.init();case 12:case"end":return t.stop()}}),t,this)})));function e(e,i){return t.apply(this,arguments)}return e}(),goToActDetail:function(t){this.$router.push({path:"/auditActivity/auditDetail",query:{id:t.ActivityId,name:t.ActivityName}})}}},u=l,d=(i("6cf9"),i("e59f"),i("623f")),p=Object(d["a"])(u,a,n,!1,null,null,null);e["default"]=p.exports},"2b8b":function(t,e,i){t.exports=i.p+"img/ac5.a705010f.png"},"2c4a":function(t,e,i){"use strict";var a=i("f7a1"),n=i.n(a);n.a},"2d46":function(t,e,i){},"2e20":function(t,e,i){},"2e27":function(t,e,i){"use strict";var a=i("4c33"),n=i.n(a);n.a},"2e5e":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"warrp"},[i("div",{staticClass:"audit-center"},[i("div",{staticClass:"audit-lable"},[i("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:"待评审的作品",name:"first"}},[i("div",{staticClass:"audit-table"},[i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[i("el-table-column",{attrs:{prop:"Title",label:"作品名称"}}),i("el-table-column",{attrs:{prop:"ActivityName",label:"活动名称"}}),i("el-table-column",{attrs:{prop:"Category",label:"类别"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                  "+t._s(t.typeMap[e.row.Category])+"\n                ")]}}])}),i("el-table-column",{attrs:{prop:"CreatedTime",label:"提交时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                  "+t._s(t.timeFormat(new Date(1e3*e.row.CreatedTime),"yyyy-MM-dd hh:mm:ss"))+"\n                ")]}}])}),i("el-table-column",{scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return t.goToWorkDetail(e.row,0)}}},[t._v("评审")])]}}])})],1)],1)]),i("el-tab-pane",{attrs:{label:"已评审的作品",name:"second"}},[i("div",{staticClass:"audit-table"},[i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[i("el-table-column",{attrs:{prop:"Title",label:"作品名称"}}),i("el-table-column",{attrs:{prop:"ActivityName",label:"活动名称"}}),i("el-table-column",{attrs:{prop:"Category",label:"类别"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                  "+t._s(t.typeMap[e.row.Category])+"\n                ")]}}])}),i("el-table-column",{attrs:{prop:"CreatedTime",label:"提交时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                  "+t._s(t.timeFormat(new Date(1e3*e.row.CreatedTime),"yyyy-MM-dd hh:mm:ss"))+"\n                ")]}}])}),i("el-table-column",{scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return t.goToWorkDetail(e.row,1)}}},[t._v("查看")])]}}])})],1)],1)]),i("el-pagination",{staticClass:"paging",attrs:{background:"","current-page":t.currentPage,"page-size":t.pageSize,layout:"prev, pager, next",total:t.total},on:{"current-change":t.handleCurrentPage}})],1)],1)])])},n=[],r=i("46b4"),s=i.n(r);function o(t,e,i,a,n,r,s){try{var o=t[r](s),c=o.value}catch(l){return void i(l)}o.done?e(c):Promise.resolve(c).then(a,n)}function c(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var r=t.apply(e,i);function s(t){o(r,a,n,s,c,"next",t)}function c(t){o(r,a,n,s,c,"throw",t)}s(void 0)}))}}var l={data:function(){return{select:!1,selector:!0,activeName:"first",currentPage:1,pageSize:10,total:0,scoreStatus:0,divisionId:1,tableData:[],workId:"",typeMap:{}}},mounted:function(){this.scoreStatus=location.hash.substr(1)||"0",this.activeName="0"==this.scoreStatus?"first":"second",this.getActivityType(),this.getJudgeWorkList()},methods:{getJudgeWorkList:function(){var t=c(s.a.mark((function t(){var e;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.tableData=[],t.next=3,this.axiosGet({url:"/v1/activity/GetWorkListByJudge",ScoreStatus:this.scoreStatus,PageNum:this.currentPage,PageSize:this.pageSize}).catch((function(t){return t}));case 3:if(e=t.sent,"OK"==e.ErrorCode){t.next=6;break}return t.abrupt("return",this.$message.error(e.ErrorMsg));case 6:this.tableData=e.Data.WorkList||[],this.total=e.Data.Total;case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),handleClick:function(){var t=c(s.a.mark((function t(e){return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.currentPage=0,"first"==e.name?this.scoreStatus=0:"second"==e.name&&(this.scoreStatus=1),location.hash=this.scoreStatus,this.getJudgeWorkList();case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),handleCurrentPage:function(t){this.currentPage=t,this.getJudgeWorkList()},goToWorkDetail:function(t,e){this.$router.push({path:"/expertReview/workDetail",query:{WorkId:t.WorkId,WorkName:t.Title,status:e,DivisionId:t.DivisionId}})},getActivityType:function(){var t=c(s.a.mark((function t(){var e,i,a=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/activity/GetActivityType"}).catch((function(t){return t}));case 2:if(e=t.sent,"OK"==e.ErrorCode){t.next=5;break}return t.abrupt("return");case 5:i=e.Data.ActivityTypeList||[],i.forEach((function(t){a.typeMap[t.Id]=t.Name}));case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},u=l,d=(i("4795"),i("a65a"),i("623f")),p=Object(d["a"])(u,a,n,!1,null,null,null);e["default"]=p.exports},"30a5":function(t,e,i){},"327b":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:[t.dataObj.isEdit?"active":"single-check-box-container",t.showOperation?"":"no-show"]},[t.canWrite?t._e():i("div",{staticClass:"mark"}),i("el-row",[i("el-col",{staticClass:"title",attrs:{span:17}},[t.dataObj.required?i("i",[t._v("*")]):t._e(),t._v("\n      "+t._s(t.dataObj.title)+" \n    ")]),t.showOperation?i("el-col",{staticClass:"operate-item",attrs:{span:4,offset:3}},[i("i",{staticClass:"el-icon-top",on:{click:t.toUp}}),i("i",{staticClass:"el-icon-bottom",on:{click:t.toDown}}),i("i",{staticClass:"el-icon-edit",on:{click:t.toEdit}}),i("i",{staticClass:"el-icon-delete",on:{click:t.delectItem}})]):t._e(),i("el-col",[i("el-radio-group",{on:{change:t.myValChange},model:{value:t.val,callback:function(e){t.val=e},expression:"val"}},[t._l(t.dataObj.options,(function(e,a){return[i("el-radio",{attrs:{label:e.value}},[t._v(t._s(e.text))])]}))],2)],1),""!=t.dataObj.description?i("el-col",{staticStyle:{color:"#7F7F7F","line-height":"25px"},attrs:{span:24}},[t._v("备注："+t._s(t.dataObj.description))]):t._e()],1)],1)},n=[],r={props:{showOperation:{type:Boolean,default:function(){return!1}},dataObj:{type:Object,default:function(){return{}}},canWrite:{type:Boolean,default:function(){return!0}},myVal:{}},data:function(){return{val:0}},mounted:function(){this.val=this.myVal},methods:{toUp:function(){this.$emit("toUp")},toDown:function(){this.$emit("toDown")},toEdit:function(){this.$emit("toEdit")},delectItem:function(){this.$emit("delectItem")},myValChange:function(){console.log(),this.$emit("myValChange",this.val)}}},s=r,o=(i("df18"),i("623f")),c=Object(o["a"])(s,a,n,!1,null,"15b27ae5",null);e["a"]=c.exports},"329f":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"activity-enroll"},[i("el-card",{directives:[{name:"show",rawName:"v-show",value:!t.showPreview,expression:"!showPreview"}],staticClass:"box-card"},[i("div",{staticClass:"title"},[i("p",[t._v("活动报名")])]),i("el-divider"),i("el-row",[i("el-col",{attrs:{span:20,offset:2}},[i("el-form",{ref:"form",attrs:{model:t.form,"label-width":"120px","label-position":"left"}},[i("el-form-item",{attrs:{label:"活动名称："}},[i("el-input",{staticStyle:{width:"400px"},attrs:{placeholder:"请输入活动名称",size:"small",disabled:!0},model:{value:t.form.activityName,callback:function(e){t.$set(t.form,"activityName",e)},expression:"form.activityName"}})],1),i("el-form-item",{attrs:{label:"活动项目："}},[i("el-input",{staticStyle:{width:"400px"},attrs:{placeholder:"请输入活动项目",size:"small",disabled:!0},model:{value:t.form.activityProject,callback:function(e){t.$set(t.form,"activityProject",e)},expression:"form.activityProject"}})],1),i("el-form-item",{attrs:{label:"学校：",rules:{required:!0,message:"请填写学校",trigger:"blur"}}},[i("el-select",{staticStyle:{width:"400px"},attrs:{filterable:"",placeholder:"请选择",size:"small"},on:{change:t.schoolChange},model:{value:t.form.school_id,callback:function(e){t.$set(t.form,"school_id",e)},expression:"form.school_id"}},t._l(t.schoolList,(function(t){return i("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})})),1)],1),i("el-form-item",{attrs:{label:"作者：",rules:{required:!0,message:"请填写作者",trigger:"blur"}}},[t._l(t.authorList,(function(e,a){return i("el-row",{key:a},[i("el-col",{attrs:{span:12}},[i("el-input",{staticStyle:{width:"400px"},attrs:{size:"small",placeholder:"请输入姓名"},model:{value:e.name,callback:function(i){t.$set(e,"name",i)},expression:"item.name"}})],1),i("el-col",{attrs:{span:12}},[i("i",{staticClass:"el-icon-circle-close",staticStyle:{"font-size":"18px",color:"red",cursor:"pointer"},on:{click:function(e){return t.deleteAuthor(a)}}})]),i("el-col"),i("el-col",{attrs:{span:18}},[i("el-input",{staticStyle:{width:"400px"},attrs:{placeholder:"请输入手机号码",size:"small",maxlength:"11"},on:{input:function(i){return t.mobileChange(e.mobile)}},model:{value:e.mobile,callback:function(i){t.$set(e,"mobile",i)},expression:"item.mobile"}})],1)],1)})),i("el-row",[i("el-col",[i("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.addAuthor()}}},[t._v("添加")]),i("span",{staticClass:"limit leftpad"},[t._v("限制"+t._s(t.author_limit)+"人")])],1)],1)],2),i("el-form-item",{attrs:{label:"作者邮箱：",rules:{required:!0,message:"请填写作者邮箱",trigger:"blur"}}},[i("el-input",{staticStyle:{width:"400px"},attrs:{placeholder:"请输入电子邮箱",size:"small"},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1),t.mentor_limit>0?i("el-form-item",{attrs:{label:"指导老师："}},[t._l(t.teacherList,(function(e,a){return i("el-row",{key:a},[i("el-col",{attrs:{span:12}},[i("el-input",{staticStyle:{width:"400px"},attrs:{size:"small",placeholder:"请输入姓名"},model:{value:e.name,callback:function(i){t.$set(e,"name",i)},expression:"item.name"}})],1),i("el-col",{attrs:{span:12}},[i("i",{staticClass:"el-icon-circle-close",staticStyle:{"font-size":"18px",color:"red",cursor:"pointer"},on:{click:function(e){return t.deleteTeacher(a)}}})]),i("el-col"),i("el-col",{attrs:{span:18}},[i("el-input",{staticStyle:{width:"400px"},attrs:{size:"small",placeholder:"请输入手机号",maxlength:"11"},on:{input:function(i){return t.mobileChange(e.mobile)}},model:{value:e.mobile,callback:function(i){t.$set(e,"mobile",i)},expression:"item.mobile"}})],1)],1)})),i("el-row",[i("el-col",[i("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.addTeacher()}}},[t._v("添加")]),i("span",{staticClass:"limit leftpad"},[t._v("限制"+t._s(t.mentor_limit)+"人")])],1)],1)],2):t._e(),i("el-form-item",{attrs:{label:"作品名称：",rules:{required:!0,message:"请输入作品名称",trigger:"blur"}}},[i("el-input",{staticStyle:{width:"400px"},attrs:{placeholder:"请输入作品名称",size:"small"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),""!=t.inputtext?i("div",{staticClass:"my-editerContain"},[i("P",[i("span",{staticStyle:{color:"red","font-size":"14px"}},[t._v("*")]),t._v("作品介绍:\n            ")]),i("my-editor",{attrs:{inputtext:t.inputtext},on:{editorChange:t.editorChange}})],1):t._e(),""!=t.production?i("el-form-item",{attrs:{label:"创作过程："}},[i("el-input",{staticStyle:{width:"715px"},attrs:{type:"textarea",rows:5,placeholder:"请填写创作过程"},model:{value:t.production,callback:function(e){t.production=e},expression:"production"}})],1):t._e(),""!=t.reference?i("el-form-item",{attrs:{label:"参考资源："}},[i("el-input",{staticStyle:{width:"715px"},attrs:{type:"textarea",rows:5,placeholder:"请填写参考资源"},model:{value:t.reference,callback:function(e){t.reference=e},expression:"reference"}})],1):t._e(),""!=t.environment?i("el-form-item",{attrs:{label:"制作用软件及运行环境："}},[i("el-input",{staticStyle:{width:"715px"},attrs:{type:"textarea",rows:5,placeholder:"请填写创作过程"},model:{value:t.environment,callback:function(e){t.environment=e},expression:"environment"}})],1):t._e(),""!=t.remark?i("el-form-item",{attrs:{label:"其他说明："}},[i("el-input",{staticStyle:{width:"715px"},attrs:{type:"textarea",rows:3,placeholder:"请填写其他说明"},model:{value:t.remark,callback:function(e){t.remark=e},expression:"remark"}})],1):t._e(),i("el-form-item",{attrs:{"label-width":"0"}},t._l(t.fields,(function(e,a){return i("div",{key:a},[1==e.type?i("single-text-box",{attrs:{dataObj:e,myVal:e.myVal},on:{myValChange:function(i){t.myValChange(i,e)}}}):t._e(),2==e.type?i("multi-text-box",{attrs:{dataObj:e,myVal:e.myVal},on:{myValChange:function(i){t.myValChange(i,e)}}}):t._e(),3==e.type?i("number-box",{attrs:{dataObj:e,myVal:e.myVal},on:{myValChange:function(i){t.myValChange(i,e)}}}):t._e(),9==e.type?i("select-box",{attrs:{dataObj:e,myVal:e.myVal},on:{myValChange:function(i){t.myValChange(i,e)}}}):t._e(),7==e.type?i("single-check-box",{attrs:{dataObj:e,myVal:e.myVal},on:{myValChange:function(i){t.myValChange(i,e)}}}):t._e(),8==e.type?i("multi-check-box",{attrs:{dataObj:e,myVal:e.myVal},on:{myValChange:function(i){t.myValChange(i,e)}}}):t._e()],1)})),0),i("el-form-item",{attrs:{label:"报名登记表：",rules:{required:!0,message:"请上传报名登记",trigger:"blur"}}},[i("upload-picture",{staticStyle:{"min-width":"200px"},attrs:{uploadType:"picture",max:10,myPictureList:t.form.registration,name:"上传登记表"},on:{uploadSuccess:t.registrationSuccess}}),i("span",{staticClass:"limit"},[t._v("仅支持JPG,PNG格式")])],1),i("el-form-item",{attrs:{label:"作品封面：",rules:{required:!0,message:"请上传作品封面",trigger:"blur"}}},[[i("upload-picture",{attrs:{uploadType:"picture",max:1,myPictureList:t.form.cover,name:"上传作品封面"},on:{uploadSuccess:t.coverSuccess}}),i("span",{staticClass:"limit"},[t._v("仅支持JPG,PNG格式")])]],2),i("el-form-item",{attrs:{label:"作品上传：",rules:{required:!0,message:"请上传作品",trigger:"blur"}}},t._l(t.activityProjectDetail.formats,(function(e,a){return i("div",{key:a,staticStyle:{width:"700px","margin-bottom":"20px"}},[i("upload-file",{attrs:{uploadType:t.uploadTypeObj[e.type],myFileList:e.fileList,name:"上传"+t.uploadTypeChar[e.type]+"格式作品",fileLimit:e.size},on:{uploadSuccess:function(i){return t.upsuccess(i,e.id,e.type)}}}),i("p",{staticClass:"limit"},[t._v(t._s(e.remark))])],1)})),0)],1),i("el-row",[i("el-col",{attrs:{span:5,offset:10}},[0==t.operate?i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.submitEnroll()}}},[t._v("预览")]):i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.submitEnroll()}}},[t._v("确认提交")]),i("el-button",{attrs:{type:"default",size:"small"},on:{click:function(e){return t.goback()}}},[t._v("取消")])],1)],1)],1)],1)],1),i("el-card",{directives:[{name:"show",rawName:"v-show",value:t.showPreview,expression:"showPreview"}],staticStyle:{"min-height":"600px"}},[i("div",{staticClass:"works-preview"},[i("div",{staticClass:"title"},[i("p",[t._v(t._s(t.detailObj.title))])]),i("el-divider"),i("el-row",[i("el-col",{attrs:{span:20,offset:2}},[i("div",{staticClass:"content-main"},[i("div",{staticClass:"content-item"},[i("div",{staticClass:"sub-title"},[t._v("作品封面")]),i("div",{staticClass:"content"},[i("el-image",{attrs:{src:t.detailObj.cover,fit:t.cover}})],1)]),""!=t.detailObj.content&&void 0!=t.detailObj.content?i("div",{staticClass:"content-item"},[i("div",{staticClass:"sub-title"},[t._v("作品介绍")]),i("div",{staticClass:"content ql-snow ql-editor",domProps:{innerHTML:t._s(t.detailObj.content)}})]):t._e(),""!=t.detailObj.production?i("div",{staticClass:"content-item"},[i("div",{staticClass:"sub-title"},[t._v("创作过程")]),i("div",{staticClass:"content"},[t._v(t._s(t.detailObj.production))])]):t._e(),""!=t.detailObj.reference?i("div",{staticClass:"content-item"},[i("div",{staticClass:"sub-title"},[t._v("参考资源")]),i("div",{staticClass:"content"},[t._v(t._s(t.detailObj.reference))])]):t._e(),""!=t.detailObj.environment?i("div",{staticClass:"content-item"},[i("div",{staticClass:"sub-title"},[t._v("制作用软件及运行环境")]),i("div",{staticClass:"content"},[t._v(t._s(t.detailObj.environment))])]):t._e(),""!=t.detailObj.remark?i("div",{staticClass:"content-item"},[i("div",{staticClass:"sub-title"},[t._v("其他说明")]),i("div",{staticClass:"content"},[t._v(t._s(t.detailObj.remark))])]):t._e(),t._l(t.fields,(function(e){return[1==e.type||2==e.type||3==e.type?i("div",{staticClass:"content-item"},[i("div",{staticClass:"sub-title"},[t._v(t._s(e.title))]),i("div",{staticClass:"content"},[t._v(t._s(e.myVal))])]):t._e(),7==e.type||9==e.type?i("div",{staticClass:"content-item"},[i("div",{staticClass:"sub-title"},[t._v(t._s(e.title))]),t._l(e.options,(function(a){return[e.myVal==a.value?i("div",{staticClass:"content"},[t._v(t._s(a.text))]):t._e()]}))],2):t._e(),8==e.type?i("div",{staticClass:"content-item"},[i("div",{staticClass:"sub-title"},[t._v(t._s(e.title))]),t._l(e.myVal,(function(a){return[t._l(e.options,(function(e){return[a==e.value?i("div",{staticClass:"content"},[t._v(t._s(e.text))]):t._e()]}))]}))],2):t._e()]})),i("div",{staticClass:"content-item",staticStyle:{width:"80%"}},[i("div",{staticClass:"sub-title"},[t._v("作品:")]),t._l(t.detailObj.attachment,(function(e,a){return i("div",{key:a,staticClass:"content"},[t._l(t.detailObj.attachment[a],(function(t){return[i("file-preview",{attrs:{fileObj:t}})]}))],2)}))],2),i("div",{staticClass:"content-item"},[i("div",{staticClass:"sub-title"},[t._v("报名登记表:")]),i("div",{staticClass:"content file-preview",staticStyle:{width:"475px"}},[t._l(t.detailObj.registration,(function(t){return[i("file-preview",{attrs:{fileObj:{url:t}}})]}))],2)]),i("el-divider"),i("div",{staticClass:"works-detail-main"},[i("div",{staticClass:"works-detail-item"},[t._v("活动名称："+t._s(t.form.activityName))]),i("div",{staticClass:"works-detail-item"},[t._v("活动项目："+t._s(t.form.activityProject))]),i("div",{staticClass:"works-detail-item"},[t._v("组别："+t._s(t.periodList[t.detailObj.period]))]),i("div",{staticClass:"works-detail-item"},[t._v("学校："+t._s(t.school))]),void 0!=t.detailObj.author?i("div",{staticClass:"works-detail-item"},[t._v("作者："+t._s(t.detailObj.author.map((function(t){return t.name+"("+t.mobile+")"})).join("、")))]):t._e(),void 0!=t.detailObj.mentor&&void 0!=t.detailObj.mentor[0]&&""!=t.detailObj.mentor[0].name?i("div",{staticClass:"works-detail-item"},[t._v("指导老师："+t._s(t.detailObj.mentor.map((function(t){return t.name+"("+t.mobile+")"})).join("、")))]):t._e(),i("div",{staticClass:"works-detail-item"},[t._v("邮箱："+t._s(t.detailObj.email))])])],2),i("el-row",[i("el-col",{staticStyle:{"margin-top":"30px"},attrs:{span:5,offset:10}},[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.previewSubmitEnroll()}}},[t._v("确认报名")]),i("el-button",{attrs:{size:"small"},on:{click:function(e){return t.closePreview()}}},[t._v("返回")])],1)],1)],1)],1)],1)])],1)},n=[],r=i("46b4"),s=i.n(r),o=i("408b"),c=i("cfc6"),l=i("0210"),u=i("e042"),d=i("8a99"),p=i("2847"),h=i("c944"),m=i("e205"),f=i("824b"),v=i("5f84"),g=i("327b"),y=i("8b55");function b(t,e,i,a,n,r,s){try{var o=t[r](s),c=o.value}catch(l){return void i(l)}o.done?e(c):Promise.resolve(c).then(a,n)}function w(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var r=t.apply(e,i);function s(t){b(r,a,n,s,o,"next",t)}function o(t){b(r,a,n,s,o,"throw",t)}s(void 0)}))}}var x={components:{MyEditor:c["a"],UploadPicture:u["a"],UploadFile:d["a"],FilePreview:p["a"],SingleTextBox:h["a"],MultiTextBox:m["a"],NumberBox:f["a"],SelectBox:v["a"],SingleCheckBox:g["a"],MultiCheckBox:y["a"]},data:function(){return{headers:{"x-api-key":Object(l["getCookie"])("x-api-key")},action:o["a"].uploadPic,uploadFile:o["a"].uploadFile,apipath:"http://api.huodong.eduinspector.com",form:{activityName:this.$route.query.activityName,activityProject:"",title:"",cover:[],registration:[],email:"",school_id:""},inputtext:"",registration:[],cover:"",authorTags:[],authorInputVisible:!1,authorInputValue:"",teacherTags:[],teacherInputVisible:!1,teacherInputValue:"",title:"",author_limit:"",mentor_limit:"",filename:"upFile",content:"",activityProjectId:this.$route.query.id,activityProjectDetail:{},formats:[],attachment:{},operate:this.$route.query.operate,uploadTypeObj:{1:"picture",2:"video",3:"work",4:"zip"},uploadTypeChar:{1:"图片",2:"视频",3:"普通文档",4:"压缩文件"},category_id:"",authorList:[{name:"",mobile:""}],authorIds:[],teacherList:[{name:"",mobile:""}],teacherIds:[],production:"",reference:"",environment:"",remark:"",schoolList:[],period:this.$route.query.period,works_id:"",school:"",periodList:{1:"幼教组",2:"小学组",4:"初中组",8:"高中组",16:"特教组",32:"中职组",64:"高教组"},showPreview:!1,detailObj:{},fields:[]}},created:function(){void 0!=this.$store.state.account.nowRole.school_id&&(this.form.school_id=this.$store.state.account.nowRole.school_id,this.school=this.$store.state.account.nowRole.school_title)},mounted:function(){0!=this.operate?this.getEnrollDetail():this.getObjectDetail(),this.getSchoolList()},watch:{},methods:{mobileChange:function(t){var e=/^[0-9]+.?[0-9]*$/,i=/^1[3456789]\d{9}$/;e.test(t)?t.length>=11&&!i.test(t)&&this.$message({message:"请输入正确的手机号码格式",type:"warning"}):this.$message({message:"请输入正确的手机号码格式",type:"warning"})},myValChange:function(t,e){for(var i in console.log("自定义内容类型val====",t,"item===",e),this.fields)this.fields[i].id==e.id&&(this.fields[i].myVal=t)},schoolChange:function(t){for(var e in this.schoolList)this.schoolList[e].id==t&&(this.school=this.schoolList[e].title)},getSchoolList:function(){var t=w(s.a.mark((function t(){var e,i=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={},e.url=o["a"].school,e.ball=1,t.next=5,this.axiosGet(e).then((function(t){i.schoolList=t.items})).catch((function(t){return t}));case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getEnrollDetail:function(){var t=w(s.a.mark((function t(){var e,i,a=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this,i={},i.url=o["a"].enroll,i.id=e.activityProjectId,i.expand="info,works,school,professional,award,fields",t.next=7,e.axiosGet(i).then((function(t){a.category_id=t.category_id,a.works_id=t.works.id,e.form.activityProject=t.info.project,e.form.title=t.works.title,null!=t.works.content&&(void 0!=t.works.content.content&&(e.inputtext=t.works.content.content),void 0!=t.works.content.production&&(e.production=t.works.content.production),void 0!=t.works.content.reference&&(e.reference=t.works.content.reference),void 0!=t.works.content.environment&&(e.environment=t.works.content.environment),void 0!=t.works.content.remark&&(e.remark=t.works.content.remark)),e.form.email=t.works.email,e.form.school_id=t.school_id,e.authorList=t.works.member.author,e.teacherList=t.works.member.mentor,e.period=t.period,e.activityProjectDetail.formats=[],e.author_limit=t.info.projectInfo.author_limit,e.mentor_limit=t.info.projectInfo.mentor_limit,e.fields=t.info.fields.map((function(t){return t.required=1==t.required,7==t.type||9==t.type?t.myVal=parseInt(t.data):t.myVal=t.data,t}));var i=function(i){var a=e.activityProjectDetail.formats.findIndex((function(e){return e.id==t.works.attachment[i].category_file_id}));if(-1==a){var n={};n.id=t.works.attachment[i].category_file_id,n.type=t.works.attachment[i].type,n.remark=t.works.attachment[i].remark,n.fileList=[{title:t.works.attachment[i].title,url:t.works.attachment[i].url}],e.activityProjectDetail.formats.push(n),e.attachment[n.id]=[{title:t.works.attachment[i].title,url:t.works.attachment[i].url}]}else for(var r in e.activityProjectDetail.formats)t.works.attachment[i].category_file_id==e.activityProjectDetail.formats[r].id&&(e.activityProjectDetail.formats[r].fileList.push({url:t.works.attachment[i].url,title:t.works.attachment[i].title}),e.attachment[t.works.attachment[i].category_file_id].push({url:t.works.attachment[i].url,title:t.works.attachment[i].title}))};for(var n in t.works.attachment)i(n);for(var r in e.form.cover.push({url:t.works.cover}),t.info.registrations)e.form.registration.push({url:t.info.registrations[r]});e.authorTags=t.info.author.map((function(t){return{id:t.id,name:t.name}})),e.teacherTags=t.info.mentor.map((function(t){return{id:t.id,name:t.name}}))}));case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getObjectDetail:function(){var t=w(s.a.mark((function t(){var e,i=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={},e.url=o["a"].activityCategory,e.id=this.activityProjectId,e.expand="content,formats,fields",t.next=6,this.axiosGet(e).then((function(t){i.activityProjectDetail=t,i.form.activityProject=t.title,i.author_limit=t.author_limit,i.mentor_limit=t.mentor_limit,i.fields=t.fields.map((function(t){return t.required=1==t.required,8==t.type?t.myVal=[]:t.myVal="",t}))})).catch((function(t){return t}));case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),coverSuccess:function(t){var e=this;t.forEach((function(t){e.cover=t.url}))},registrationSuccess:function(t){var e=this;this.form.registration=[],t.forEach((function(t){e.form.registration.push({url:t.url})}))},upsuccess:function(t,e,i){var a=this;console.log("data==",t,"id==",e,"type==",i);this.attachment[e]=[],t.forEach((function(t){var i={};i.url=t.url,void 0!=t.name&&(i.title=t.name),void 0!=t.title&&(i.title=t.title),a.attachment[e].push(i)}))},submitEnroll:function(){var t=w(s.a.mark((function t(){var e,i,a,n,r,c=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=this,i={},i.url=o["a"].works,i.category_id=this.activityProjectDetail.id,i.production=this.production,i.reference=this.reference,i.environment=this.environment,i.remark=this.remark,""==this.form.title){t.next=12;break}i.title=this.form.title,t.next=14;break;case 12:return this.$message({message:"请添加作品名称",type:"warning"}),t.abrupt("return");case 14:if(""==this.cover){t.next=18;break}i.cover=this.cover,t.next=24;break;case 18:if(0==this.form.cover.length||0==this.operate){t.next=22;break}i.cover=this.form.cover[0].url,t.next=24;break;case 22:return this.$message({message:"请上传作品封面",type:"warning"}),t.abrupt("return");case 24:if(!(this.form.registration.length>0)){t.next=28;break}i.registration=this.form.registration.map((function(t){return t.url})),t.next=30;break;case 28:return this.$message({message:"请上传报名登记表",type:"warning"}),t.abrupt("return");case 30:if(""!==this.content&&(i.content=this.content),!(this.authorList.length>0)){t.next=35;break}i.author=this.authorList,t.next=37;break;case 35:return this.$message({message:"请添加作者",type:"warning"}),t.abrupt("return");case 37:if(i.mentor=this.teacherList,""===this.form.email){t.next=42;break}i.email=this.form.email,t.next=44;break;case 42:return this.$message({message:"请添加邮箱",type:"warning"}),t.abrupt("return");case 44:if(""==this.form.school_id){t.next=48;break}i.school_id=this.form.school_id,t.next=50;break;case 48:return this.$message({message:"请选择学校",type:"warning"}),t.abrupt("return");case 50:i.fields={},t.t0=s.a.keys(this.fields);case 52:if((t.t1=t.t0()).done){t.next=65;break}if(a=t.t1.value,""==this.fields[a].myVal){t.next=60;break}n=this.fields[a].id,r=this.fields[a].myVal,i.fields[n]=r,t.next=63;break;case 60:if(1!=this.fields[a].required){t.next=63;break}return this.$message({message:this.fields[a].title+"是必填",type:"warning"}),t.abrupt("return");case 63:t.next=52;break;case 65:if(i.period=this.period,console.log("this.attachment===",this.attachment,"activityProjectDetail.formats===",this.activityProjectDetail.formats),!(Object.keys(this.attachment).length>=this.activityProjectDetail.formats.length)){t.next=71;break}i.attachment=this.attachment,t.next=73;break;case 71:return this.$message({message:"请按要求上传作品",type:"warning"}),t.abrupt("return");case 73:if(0!=this.operate){t.next=78;break}this.showPreview=!0,this.detailObj=i,t.next=83;break;case 78:return i.id=this.works_id,i.category_id=this.category_id,console.log("修改===",i),t.next=83,Object(l["axiosPut"])(i).then((function(t){-1==t.code?c.$message({message:t.message,type:"warning"}):void 0!=t.title&&""!=t.title?(c.$message({message:"修改成功！！",type:"success"}),setTimeout((function(){e.$router.go(-2)}),1e3)):e.$router.go(-2)})).catch((function(t){return t}));case 83:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),previewSubmitEnroll:function(){var t=w(s.a.mark((function t(){var e,i=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.detailObj,t.next=3,Object(l["axiosPost"])(e).then((function(t){-1==t.code?i.$message({message:t.message,type:"warning"}):void 0!=t.title&&""!=t.title?(i.$message({message:"报名成功！！",type:"success"}),i.$router.push({path:"/home/submitEnroll"})):that.$router.go(-1)})).catch((function(t){return t}));case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),closePreview:function(){this.showPreview=!1},editorChange:function(t){this.content=t},goback:function(){var t=this;this.$confirm("确定取消吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$router.go(-1)})).catch((function(){console.log("取消")}))},addAuthor:function(){if(this.authorList.length<this.author_limit){var t={name:"",mobile:""};this.authorList.push(t)}else this.$message({type:"warning",message:"人数已超出"})},deleteAuthor:function(t){this.authorList.splice(t,1)},addTeacher:function(){if(this.teacherList.length<this.mentor_limit){var t={name:"",mobile:""};this.teacherList.push(t)}else this.$message({type:"warning",message:"人数已超出"})},deleteTeacher:function(t){this.teacherList.splice(t,1)}}},k=x,_=(i("c356"),i("623f")),C=Object(_["a"])(k,a,n,!1,null,"f090d210",null);e["default"]=C.exports},3495:function(t,e,i){},"35b6":function(t,e,i){"use strict";var a=i("f90f"),n=i.n(a);n.a},"360c":function(t,e,i){"use strict";var a=i("896f"),n=i.n(a);n.a},"37fe":function(t,e,i){"use strict";var a=i("5106"),n=i.n(a);n.a},"38fd":function(t,e,i){"use strict";var a=i("f996"),n=i.n(a);n.a},"398a":function(t,e,i){"use strict";var a=i("d542"),n=i.n(a);n.a},"3a08":function(t,e,i){"use strict";var a=i("2d46"),n=i.n(a);n.a},"3dd2":function(t,e,i){"use strict";var a=i("6dbf"),n=i.n(a);n.a},"3dea":function(t,e,i){},"3e41":function(t,e,i){t.exports=i.p+"img/4.efeb7b34.png"},"3f02":function(t,e,i){},"3f49":function(t,e,i){t.exports=i.p+"img/video-play.ac9fe6e1.svg"},4015:function(t,e,i){},"408b":function(t,e,i){"use strict";var a="";a="localhost"===location.hostname?"/api":"";var n="".concat(a,"/login/captcha"),r="".concat(a,"/login/account"),s="".concat(a,"/role"),o="".concat(a,"/user"),c="".concat(a,"/award"),l="".concat(a,"/school"),u="".concat(a,"/user-admin/batch-delete"),d="".concat(a,"/user-admin/batch-disable"),p="".concat(a,"/login/test"),h="".concat(a,"/activity"),m="".concat(a,"/activity"),f="".concat(a,"/activity-category"),v="".concat(a,"/enroll"),g="".concat(a,"/works"),y="".concat(a,"/works-admin/assignment"),b="".concat(a,"/activity-notice"),w="".concat(a,"/works-admin/scoring"),x="".concat(a,"/works-admin/reject"),k="".concat(a,"/works-admin/recommend"),_="".concat(a,"/works-admin/awards"),C="".concat(a,"/works-admin/like"),S="".concat(a,"/user-admin/switch-token"),T="".concat(a,"/upload/get-cos-keys"),L="".concat(a,"/user-admin/remind-count"),A="",I="",P="";"localhost"===location.hostname||"huodong.eduinspector.com"===location.hostname?(A="https://api.huodong.eduinspector.com/upload/image",I="https://api.huodong.eduinspector.com/upload/cos-key",P="https://api.huodong.eduinspector.com/upload/file"):(A="https://cxyy.szdj.edu.cn/api/upload/image",I="https://cxyy.szdj.edu.cn/api/upload/cos-key",P="https://cxyy.szdj.edu.cn/api/upload/file");var D={captcha:n,account:r,role:s,user:o,award:c,school:l,deleteUsers:u,disableUsers:d,testLogin:p,uploadPic:A,uploadKey:I,uploadFile:P,activity:h,activityDetail:m,activityCategory:f,enroll:v,works:g,assignment:y,activityNotice:b,scoring:w,reject:x,recommend:k,awards:_,getCosKeys:T,like:C,switchToken:S,remindCount:L};e["a"]=D},"40ab":function(t,e,i){"use strict";var a=i("76e4"),n=i.n(a);n.a},"41aa":function(t,e,i){"use strict";var a=i("d349"),n=i.n(a);n.a},4357:function(t,e,i){},4359:function(t,e,i){"use strict";var a=i("8cdf"),n=i.n(a);n.a},4360:function(t,e,i){"use strict";var a=i("0261"),n=i("08c1"),r=(i("0210"),{state:{user:"",roles:[],nowRole:{},remindCount:0},mutations:{SET_USER:function(t,e){t.user=e},SET_ROLES:function(t,e){t.roles=e},SET_NOWROLE:function(t,e){t.nowRole=e},SET_REMINDCOUNT:function(t,e){t.remindCount=e}},actions:{INIT_USER:function(t,e){var i=t.commit;i("SET_USER",e)},INIT_ROLES:function(t,e){var i=t.commit;i("SET_ROLES",e)},INIT_NOWROLE:function(t,e){var i=t.commit;i("SET_NOWROLE",e)},INIT_REMINDCOUNT:function(t,e){var i=t.commit;i("SET_REMINDCOUNT",e)}}}),s={state:{show:!1},mutations:{SET_SHOW:function(t,e){t.show=e}},actions:{INIT_SHOW:function(t,e){var i=t.commit;i("SET_SHOW",e)}}};a["default"].use(n["a"]);e["a"]=new n["a"].Store({modules:{account:r,login:s}})},"43a9":function(t,e,i){},"43f5":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGEAAAApCAYAAAAlDUeiAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAA84SURBVGhD7VoJW1RHFs2vnm8mMypBwA2DxiCbDSKLoBgVRQUREFA2g9ggu+xREnf2ppcz59R71VQ/GmydmPH7wjHHV6/q1r237q3ttfkOFgmfFvbdZfwzGPOZ0EuE3PSeVtcBktg7CUHY9kxpk4EoqQQcJGEv7CTBgY1f/Iv/uDqiZMQ8DZiA1HaPf2ekTYKFF6DP/ZMaXLfewF8FQbm/M3aS4EYksF1EIpzN3N8zoTkC9kAsQsUHW9EupJ4JNgkMpoG/jWOd3MqQkne57TH2kU/B6D9IhovvkhNXQbGJYPDejwM3fppCZfYThI70mWemrPhhwLA8q9/jD4/xvGUVUCLWSCU1afjLoO6Z0GKv+oxh4/MV4CXBTYDOTwbpUf0m2i9s4N0Txm6YsRvzObo/V5/zSfnVIfZ7CnwY9FiZ9RTRCep+RSoZ/jm9J6xPaQbuBvNTtNipSzmh0iDQ5vqRxpfMYK2nx04SfIz0RFF5agJlRyYx1sIKBczeMLXd2LLlhk/NblFlTnrxfsUy+hpYeAvU5MyiJmsedTkLmHzIdm1V6RAYtHXfo/7otsWy2kjtnDHWeLTvbh+X6rtu6NVYqKxZIac0KN85+eAq0LuB3zf5bmEFXVidjt4ATBKS3ShzuXAUo21Aew3QWfdhZ8ZqH+fJq4PXHL52tGp3qTOA9mK/AcWHe9Ba+QrxeaA2bwZrYWCxAyg5zGWS3h9vYA6tf5Y22PslwbTpGaBn1M4Wr8aDynLeBkxPv912FuWTgd+WhCsUbLM690mCcdorG7nygsdY+BV4M8KEFAwhwVns6aZkYpt+kAmW/XfEfcb4HqWXSgJXwxK3sZJDI5hu5w40AFw/y0PmHeu7gcYSZiW9Px402ADdIRqqzqm3ibDvyb5JqNbOFCPxCVhZwupK6lP/YHDFTHWnIpmEeNzr3HV7CR0NjNYKcCm/H/PhTcS1vUjQJGHLEAlLRjxOxlhWEuQLJ9rNoiWUHZ4250RTyRLPmCVTf690AX03X3vJ+hScwRsffbr1u9osbEVANoVBpNSrs58EH3YXMJNw3ySImSN1O6KOLcanPL8Tf3AlDD+IorawG3GdCzoPNPWSwWcUzZPXnTipd4EiS8+AipxRPLhIldNAVd4IIjPAQu8mGou4RN5QLnV8fx5sIPeLg223smQiFsf2pgbJpm1V7mBjdRMJN76+bslvrm8gGmE7E+PStG9vI7oVMVTs4lGvPojUK6pkyKdtr3G7Ygr4g7eaHwcw2ruBmOJsHKGA2YbYwZS1Etb4oID6c7bfqZ7Gue8HsM4d6D5vWE0lr7BJddUnWzDVSaVKqmT3hTPaIOSHcq4nqbkQ14RUne3mdtUk1dVYVFmwMhq3Lxv3cpDUaW14O27CjD9JtTmwK8RNwiqTJ1i9wT4WySTEIuyovuT6SyB0vAtdDWsY5iFd9dMwVni1NMoko050xNCcB/KSZWJ2MI6SvEfouRHBHzx/Lx4dwarOl/ww+m9SiXToBmUNp4Ua7VIn+Jpg8EaHIhjneRV+zFsczxbL8CM+++PY4j3C+KdutBPnebbAa3LPzThaazfw6EYUL7lKkzuHIidTLL/mRSLcF8NYPzDOM0w23i56emQ7mABtAKvL1D9OY6qTjwkmipkTLTbog/G3j65xi0+HZBKiW9SkF5FGV3h2hvIGsNADXCt8iRFeKxOawXYAsiPq1qR3+tLVOIp5DrqjnmcKJ/wv+XPoqYvg+plJXDsXRkzfCEqC+qWu+ADkhCIpYwRfV6nyQmEHzh1vQ/HxQZTmzJBzKD42gqKTfSg9241Frjajl6sxwqDeCs3hPD8UGy8u486lD6gpeIG6M+NoqX3hqbbjpT/NV5dQdGyQfILS00+NzgtnB/Co5QO2OW4zi5nguPrRtfZbM5RpxfmTTd6kUiJsEvjU+9JkFMWnu3Aurx+l+cNGX1QxFGTXRzIJZh/UiwIqQwzWZHcEl7JHEf4FqM9dxFteMZMJkIzvmJ4RBrg49y7arnHzp5ND1UDDoWU0//yaZ8OcCYz6aKVy+02Of286n1QKrF5ky5/pnbVxVObywNHsly++H6bMul76XJ47hcknFFaAaF+T6PGND7h0cgAvBnjbkLzAvh31K6jM4y1CQWKXj5zlTfUvcS5nBJNcfdv2ckI9lefa0FA+iKqf+8xt0swXtfmemzLlK0514mHTAja5GrbfA4XHOnjpWTC3RE/ew86Z4Pc3jQq0P/BXXJ41WaNoPPUO5YdHsMEZlpIEmzQanR9gJ5YX6Vfdf5ZQ+88Z3CtkUnQQS4b67AVKZqzJ/ZgWVNBVE0V1zqSxawcU0RbEWfmaK+L8v1/g0VVWapZqMDq/6Kv8byybQP25Xi94PrpqN1GVy0NM+ignPdpuSo7PofVa3LuDSJ62pwc5cLY3X5lFwZH73upWHKzHbB5ujqA8uw+r3NrNgCnTc+8tQtkMjhJt5D3sToKoQUmxZi/9n+5exeVTY6g4Oo7G0EvEeIOyS9AkQpQs6yZ4hpR+P4fKQ1PoquSexP9ssrRvmiSQmSbB0sKUA0mQXsGchywPtH/ExZOTeMWVG6NP29ENXsHlgCcXbn2PqvxerHKBRnVYM7hdl9fMLc4mwRouPTWBe1c/mvMwtkVB1dN+lDFo46wuzu10Lhq+I2zvbVhHzYkRxLkqzVlK23M8jypzn2FNP9+kS4IZiKUUKlpbRrNRuslDqpJ7ZVleGA3F02a2mURIXpmmsfm+KC5kjSGUNYvnrayTIbVp8FRlkyD68cqYFqZMnemSYECbPfeXUZzDme4fhOtbq+S6uUPIl7ec8JqlY+3sSEf0C69JglaCAkr9Meqd52vh8X48e5TA+kfJqoHtGhflHl7/DaGTPDT98XkNBMV0IXlYrQwzdqsSYBfFMHcYc7xMpCTBf3qQrKhBuZQBKt7iXtZ14zUqTwwb6hBWe4KD7bm+gtJDg6gtGMMbZlp7YIoOGtVMle0ojUil6IpkynRJ0P1A0LbRdDmMivw+72ufUBKivNboZhPjZFnnCqji/m8mir+iFbCSf73ARBe3El5CHlxbR2FuL1fBrHerkbPJWcQy7bRemTN2zNVX7aaBoH+hI2GehXTOy4PB+1le04+NYeIBX/wJIez+lzU3CSqTKkb5Ra0VLWPLXOaNRW/RfIlrUkuNCB0NI3ybBQ3KBfvLd3sge5epmPFZtKY+h+mSYOoFDq6jkbemHH5k0r2Y2fdjiOiLXkI0usqbXwUP3FkuFhMM1rWE3qKYZ1gp6y+cDOPWpTcYU7s9N9TXGCIzSEJ51jAeVjEYqpcNQruHkj/PK7Vk9k6CYIIvhd6PYpJf4x3N+KEgc+C/3uKMq1gyH3FytIwHzkveIgSN1zxFdrLBdyldX8p0STDQk0afda6giNvNWzbvHL7ex5baJ3vWUJYzgHfaUv2+d0qXETrM/UcrmP5taRVJ3o+rEZQCyavuE0loKJhFcylnAROgHxTUbyGcwMWcsHfL/GQSDCSlOesl0tg2hgg6MNzCGXflDeL+Ug3l+kngoHWn1ge13ft1tGgLMtuQ6qhM+r6UcqjzcoRXSgZNV09TufOcfrqB0rwnGOnw3pPQ5OB2dPfSBIqPdmH7d69a6K6P8ObCK6qGLafpp4l5ctAKMA3IhgLCcbZcnUPotJ8EY5t/KbDU8aB6GXWnqU/XUU1c2p59ohXYjzXerPdNgj8OwkuCgSrJiL3fkoNNcdy7yE3ON1DJj6YPz1nWzJOT6kojSsbGlhLgVX3pKkgB9TfXraEwm4eS3LQwgnSO7TVnn6PixBje0UX5FJfvfI7zUKw5M4Fn7XyR7xSPciI112yiJHfUW9mCAuQHKcUL1SkGTP7d+hn8nMtDRHo4OPOxpjbG4wNXYc2pXrwZ4ztXq3izbArXi3gD08RVjKhSEydtEjxzfklG/QjO/BpDY/kIGkuncOX0FNqqeP+UAc6oyqxJ3CvexN3yBTxqmsW7l+zrq9DvVzYJftVnMwVUdLNmCT9mt5tG/YC2I8gyA7HJO351wSjKTnUh/HCFq2KFK2AK5SeGcCM0g5i+XRQwJZEBucWxFOb2m+02an7/oLJkEgKQHQa6rmIAp7PveR+C1GV+N1KbdFLF1fPdqP5xEEPNwP3qNwgd68FUL4UVMz8Y+yZBNFBBWaPSurOjuBNaxCiVhm/ygNYBI395XZth3SS/4J838vA5NYjRAd31OE46p9XgrQD90f+DJO7YyYQpoM6hxytovfXCvEYjHJiEFFT7pD19KD2+u4yy/HZUnulC9U/dGOxg9BUEQcFSoDm+IX4L6etWfaP6ncKxan2wNH1Y6OmcRcvtCe/w1yDNL4l8MsA6B9Y5ETquv8DF0734pWwUc0/ZJgXq78zITydBHZQEKi06MogVbsNjDHjpP8dR9o9p1GYv8It6EZezf8f1k3R+iYdc2Wt0N+tTkbZkjPB02n9e3CS9nyUyZQpYoY8w80unhYRkSwnQkz6brUW+693fMmwA42sJbK96CvQlrNls+ibhWdXfLoPQ+afPh0TMN6Ivc824KKVZNP8MoCQRusobH0RH6ScOZpE91IlOao+d4mE3z21wkl/rE3e4Avic5HPRr3vPr8LLZxfR38abgRKvINCQlp33C+MayS9Y8yfFl32ZAgVSNFDBj57bQVWiHbT7rqcr57YbqMITsGJBGsg0X8zHuDkMFC9W+PVJ2zvqPKb4n2kSpJ8Z1bK6kNeN0uwuXDjax5XxBKGccRTxTqzbiHjhxCgKsjrQ36EfmdiVKoyT8k17JjdT0fUpE6aHTYA/Ijt4S/ddcN9VFm3wg/U+bHWQBr6sOQcCMHVmi+IsNEvWj6Wj22J3EoJCelcmpUezWktL77ZesAPxbbrQDS/COvPvP7o9+HQHlAl3wzGaDqw2ffV0RVR2adW4xhx5t9rlLj2ibWTZG6cmnf33BQUr2TsF6ZOQjvpLG7xZdh62t72yvgOMOZ3CxMeVDV5LvbJMans0K8Eh//ss7kbSsbRI6e+K2W6WclNM6UD6CFZb7tLjNvJd8dDvAt6f3ZPOxXdJJZZB2Pqglv36uGC7WZqZyP4vCOi3btr64Lsra+DWu8wEafpZe3vRxecnwZXdj0HsVf9nIaA/ONjg+56wegL6PhfW3l508fWSEOTXxl9l5yvgIAnfAHYn4a/iAZI4SMI3gIMkfAM4SMI3gIMk/N8B/BeAvWLMV0Qf/QAAAABJRU5ErkJggg=="},4413:function(t,e,i){},"44a5":function(t,e,i){},"44cb":function(t,e,i){t.exports=i.p+"img/flower2.563778f9.svg"},"452e":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"create-activity-container"},[i("transition",[t.showEditBox?i("right-edit-box",{attrs:{fields:t.form.fields,editIndex:t.editIndex},on:{editConform:t.editConform}}):t._e()],1),i("el-card",{staticStyle:{"min-height":"650px"}},[i("el-page-header",{attrs:{content:"项目编辑"},on:{back:function(e){return t.back()}}}),i("el-divider"),i("div",{staticClass:"create-activity-body"},[i("el-form",{ref:"form",attrs:{model:t.form,"label-width":"120px",rules:t.rules}},[i("el-form-item",{attrs:{label:"项目名称:",prop:"title"}},[i("el-col",{attrs:{span:9}},[i("el-input",{attrs:{placeholder:"请输入项目名称",size:"small",type:"text"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1)],1),i("div",{staticClass:"my-editerContain",staticStyle:{"margin-left":"15px"}},[i("P",{staticStyle:{width:"60px","margin-left":"25px"}},[t._v("项目介绍:")]),i("my-editor",{attrs:{inputtext:this.form.content},on:{editorChange:t.editorChange}})],1),i("el-form-item",{attrs:{label:"作者人数上限:",prop:"author_limit"}},[i("el-col",{attrs:{span:9}},[i("el-input-number",{attrs:{min:0,"controls-position":"right",size:"medium"},model:{value:t.form.author_limit,callback:function(e){t.$set(t.form,"author_limit",e)},expression:"form.author_limit"}})],1)],1),i("el-form-item",{attrs:{label:"指导老师上限:",prop:"mentor_limit"}},[i("el-col",{attrs:{span:9}},[i("el-input-number",{attrs:{min:0,"controls-position":"right",size:"medium"},model:{value:t.form.mentor_limit,callback:function(e){t.$set(t.form,"mentor_limit",e)},expression:"form.mentor_limit"}})],1)],1),i("el-form-item",{attrs:{label:"组别设置 :"}},[i("el-checkbox-group",{on:{change:t.periodChange},model:{value:t.period,callback:function(e){t.period=e},expression:"period"}},t._l(t.periodList,(function(e,a){return i("el-checkbox",{key:a,attrs:{label:e}},[t._v(t._s(e.name))])})),1)],1),i("el-form-item",{attrs:{label:"报名内容格式 :",prop:"content_type"}},[i("el-select",{attrs:{placeholder:"请选择报名内容格式",size:"small"},on:{change:t.enrollTypeChange},model:{value:t.enrollType,callback:function(e){t.enrollType=e},expression:"enrollType"}},t._l(t.enrollTypeList,(function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),i("el-form-item",t._l(t.form.fields,(function(e,a){return i("div",{key:a},[1==e.type?i("single-text-box",{attrs:{dataObj:e,showOperation:!0},on:{delectItem:function(e){return t.delectItem(a)},toUp:function(e){return t.toUp(a)},toDown:function(e){return t.toDown(a)},toEdit:function(e){return t.toEdit(a)}}}):t._e(),2==e.type?i("multi-text-box",{attrs:{dataObj:e,showOperation:!0},on:{delectItem:function(e){return t.delectItem(a)},toUp:function(e){return t.toUp(a)},toDown:function(e){return t.toDown(a)},toEdit:function(e){return t.toEdit(a)}}}):t._e(),3==e.type?i("number-box",{attrs:{dataObj:e,showOperation:!0},on:{delectItem:function(e){return t.delectItem(a)},toUp:function(e){return t.toUp(a)},toDown:function(e){return t.toDown(a)},toEdit:function(e){return t.toEdit(a)}}}):t._e(),9==e.type?i("select-box",{attrs:{dataObj:e,showOperation:!0},on:{delectItem:function(e){return t.delectItem(a)},toUp:function(e){return t.toUp(a)},toDown:function(e){return t.toDown(a)},toEdit:function(e){return t.toEdit(a)}}}):t._e(),7==e.type?i("single-check-box",{attrs:{dataObj:e,showOperation:!0},on:{delectItem:function(e){return t.delectItem(a)},toUp:function(e){return t.toUp(a)},toDown:function(e){return t.toDown(a)},toEdit:function(e){return t.toEdit(a)}}}):t._e(),8==e.type?i("multi-check-box",{attrs:{dataObj:e,showOperation:!0},on:{delectItem:function(e){return t.delectItem(a)},toUp:function(e){return t.toUp(a)},toDown:function(e){return t.toDown(a)},toEdit:function(e){return t.toEdit(a)}}}):t._e()],1)})),0),t._l(t.form.formats,(function(e,a){return[i("el-form-item",{attrs:{label:"作品上传格式:",prop:"formats"}},[i("el-select",{attrs:{filterable:"",placeholder:"请选择",size:"small"},on:{change:function(e){t.ChangeFormatsType(e,a)}},model:{value:e.type,callback:function(i){t.$set(e,"type",i)},expression:"item.type"}},t._l(t.uploadFormatons,(function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),i("span",[t._v("大小限制：")]),i("el-select",{attrs:{filterable:"",placeholder:"请选择",size:"small"},on:{change:function(e){t.ChangeFormatsSize(e,a)}},model:{value:e.size,callback:function(i){t.$set(e,"size",i)},expression:"item.size"}},t._l(t.sizeRestriction,(function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),0!=a?i("i",{staticClass:"el-icon-circle-close",staticStyle:{"font-size":"25px",color:"red",cursor:"pointer","margin-left":"10px"},on:{click:function(e){return t.deleteUploadType(a)}}}):t._e()],1),i("el-form-item",[i("el-input",{staticStyle:{width:"900px"},attrs:{placeholder:"输入备注",type:"textarea",rows:2},on:{input:function(e){return t.ChangeFormatsRemark(a)}},model:{value:e.remark,callback:function(i){t.$set(e,"remark",i)},expression:"item.remark"}})],1)]})),i("el-form-item",[i("el-button",{attrs:{type:"primary",size:"small",plain:"",icon:"el-icon-plus"},on:{click:function(e){return t.addUploadType()}}},[t._v("添加上传入口")])],1),i("el-form-item",[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.onSubmit()}}},[t._v("确定")]),i("el-button",{attrs:{size:"small"},on:{click:function(e){return t.back()}}},[t._v("取消")])],1)],2)],1)],1)],1)},n=[],r=i("cfc6"),s=i("c944"),o=i("e205"),c=i("824b"),l=i("5f84"),u=i("327b"),d=i("8b55"),p=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"right-edit-box"},[i("div",{staticClass:"edit-box-top"},[i("p",[t._v(t._s(t.typeObj[t.fields[t.editIndex].type]))])]),i("div",{staticClass:"edit-box-body"},[t._m(0),i("el-divider"),i("el-row",{staticStyle:{"margin-top":"20px"}},[i("el-col",[t._v("标题")]),i("el-col",[i("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入标题",size:"small"},model:{value:t.fields[t.editIndex].title,callback:function(e){t.$set(t.fields[t.editIndex],"title",e)},expression:"fields[editIndex].title"}})],1)],1),i("el-row",[i("el-col",[t._v("备注信息")]),i("el-col",[i("el-input",{staticStyle:{width:"300px"},attrs:{type:"textarea",rows:3,placeholder:"请输入标注信息",size:"small"},model:{value:t.fields[t.editIndex].description,callback:function(e){t.$set(t.fields[t.editIndex],"description",e)},expression:"fields[editIndex].description"}})],1)],1),3==t.fields[t.editIndex].type?i("el-row",[i("el-col",{attrs:{span:5}},[t._v("最大值:")]),i("el-col",{attrs:{span:10}},[i("el-input-number",{attrs:{"controls-position":"right",size:"small"},model:{value:t.fields[t.editIndex].maxNumber,callback:function(e){t.$set(t.fields[t.editIndex],"maxNumber",e)},expression:"fields[editIndex].maxNumber"}})],1)],1):t._e(),3==t.fields[t.editIndex].type?i("el-row",[i("el-col",{attrs:{span:5}},[t._v("最小值:")]),i("el-col",{attrs:{span:10}},[i("el-input-number",{attrs:{"controls-position":"right",size:"small"},model:{value:t.fields[t.editIndex].minNumber,callback:function(e){t.$set(t.fields[t.editIndex],"minNumber",e)},expression:"fields[editIndex].minNumber"}})],1)],1):t._e(),7==t.fields[t.editIndex].type||8==t.fields[t.editIndex].type||9==t.fields[t.editIndex].type?i("el-row",[i("el-col",[t._v("选项")])],1):t._e(),t._l(t.fields[t.editIndex].options,(function(e,a){return 7==t.fields[t.editIndex].type||8==t.fields[t.editIndex].type||9==t.fields[t.editIndex].type?i("el-row",{key:a},[i("el-col",{attrs:{span:20}},[i("el-input",{staticStyle:{width:"250px"},attrs:{placeholder:"选项",size:"small"},model:{value:e.text,callback:function(i){t.$set(e,"text",i)},expression:"item.text"}})],1),i("el-col",{attrs:{span:4}},[i("i",{staticClass:"el-icon-circle-close",staticStyle:{"font-size":"25px",color:"red",cursor:"pointer","margin-left":"10px"},on:{click:function(e){return t.delectSubItem(a)}}})])],1):t._e()})),9==t.fields[t.editIndex].type||7==t.fields[t.editIndex].type||8==t.fields[t.editIndex].type?i("el-row",[i("el-col",{staticStyle:{"margin-top":"5px"}},[i("el-button",{attrs:{type:"primary",plain:"",size:"small"},on:{click:t.addOption}},[t._v("添加选项")])],1)],1):t._e(),9==t.fields[t.editIndex].type||7==t.fields[t.editIndex].type||8==t.fields[t.editIndex].type?i("el-divider"):t._e(),i("el-row",[7==t.fields[t.editIndex].type||8==t.fields[t.editIndex].type?i("el-radio-group",{model:{value:t.fields[t.editIndex].type,callback:function(e){t.$set(t.fields[t.editIndex],"type",e)},expression:"fields[editIndex].type"}},[i("el-radio",{attrs:{label:7}},[t._v("单选")]),i("el-radio",{attrs:{label:8}},[t._v("多选")])],1):t._e()],1),i("el-row",[i("el-col",[t._v("设置")])],1),i("el-divider"),i("el-row",[i("el-col",{attrs:{span:8}},[t._v("是否必填")]),i("el-col",{attrs:{span:3,offset:12}},[i("el-switch",{model:{value:t.fields[t.editIndex].required,callback:function(e){t.$set(t.fields[t.editIndex],"required",e)},expression:"fields[editIndex].required"}})],1)],1),i("el-row",{staticStyle:{"margin-top":"50px"}},[i("el-col",{attrs:{span:5}},[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.editConform}},[t._v("确定")])],1)],1)],2),i("div",{staticClass:"edit-box-bottom"})])},h=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"body-title"},[i("p",[t._v("编辑")])])}],m={props:{fields:{type:Array,default:function(){return[]}},editIndex:{type:Number,default:function(){return 0}}},data:function(){return{switchVal:!0,radioVal:1,typeObj:{1:"单行输入框",2:"多行输入框",3:"数字输入框",9:"单选下拉框",7:"单选框",8:"多选框"}}},mounted:function(){},methods:{delectSubItem:function(t){console.log("删除==="),this.fields[this.editIndex].options.splice(t,1)},addOption:function(){this.fields[this.editIndex].options.push({text:"选项"+(this.fields[this.editIndex].options.length+1),value:this.fields[this.editIndex].options.length+1})},editConform:function(){this.$emit("editConform")}}},f=m,v=(i("5242"),i("623f")),g=Object(v["a"])(f,p,h,!1,null,"64d10008",null),y=g.exports;function b(t){return b="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b(t)}var w={components:{MyEditor:r["a"],SingleTextBox:s["a"],NumberBox:c["a"],SelectBox:l["a"],RightEditBox:y,MultiTextBox:o["a"],SingleCheckBox:u["a"],MultiCheckBox:d["a"]},data:function(){return{rules:{title:[{required:!0,message:"标题必填，不能为空",trigger:"blur"}],author_limit:[{required:!0,message:"学生上限必填",trigger:"blur"}],content_type:[{required:!0,message:"报名内容格式必选",trigger:"blur"}],formats:[{type:"array",required:!0,message:"请选择作品格式"}]},periodList:[{name:"幼教组",id:1},{name:"小学组",id:2},{name:"初中组",id:4},{name:"高中组",id:8},{name:"特教组",id:16},{name:"中职组",id:32},{name:"高教组",id:64}],form:{title:"",type:2,content:"",author_limit:"1",mentor_limit:"0",formats:[{type:1,size:1,remark:"支持JPG、PNG等图片格式,大小不超过1MB",remark1:"支持JPG、PNG等图片格式",remark2:"大小不超过1MB"}],period:"",fields:[]},uploadFormatons:[{value:1,label:"图片"},{value:2,label:"视频"},{value:3,label:"普通文件"},{value:4,label:"压缩文件"}],sizeRestriction:[{value:1,label:"1MB"},{value:5,label:"5MB"},{value:10,label:"10MB"},{value:20,label:"50MB"},{value:100,label:"100MB"},{value:500,label:"500MB"},{value:700,label:"700MB"},{value:800,label:"800MB"},{value:1024,label:"1GB"},{value:2048,label:"2GB"}],flag:"",limitSet:!1,inputtext:"",period:[],size:"",remark:"",type:"",enrollTypeList:[{value:1,label:"单行文本框"},{value:2,label:"多行文本框"},{value:3,label:"数字输入框"},{value:7,label:"单选框"},{value:8,label:"多选框"},{value:9,label:"单选下拉框"}],enrollType:"",showEditBox:!1,editIndex:0}},watch:{flag:function(t){}},created:function(){if(0==this.$route.query.operate);else if(this.index=parseInt(this.$route.query.id),this.subIndex=parseInt(this.$route.query.subId),void 0!=b(this.subIndex)){var t=JSON.parse(sessionStorage.getItem("addActivityForm")),e=t.category[this.index].child[this.subIndex];this.form.title=e.title,this.form.content=e.content,this.inputtext=this.content,this.form.author_limit=e.author_limit,this.form.mentor_limit=e.mentor_limit,this.form.period=e.period,this.form.fields=e.fields;var i=[1,2,4,8,16,32,64],a=this.getSubSet(e.period,i);for(var n in this.periodList)for(var r in a)this.periodList[n].id==a[r]&&this.period.push(this.periodList[n]);console.log("this.period===",this.period),this.form.formats=e.formats}},computed:{},mounted:function(){},methods:{enrollTypeChange:function(t){this.enrollType="";var e={type:t,title:"请填写标题",description:"",required:!1,enable:1,visible:1,isEdit:!1};7!=t&&8!=t&&9!=t||(e.options=[{text:"选项1",value:1},{text:"选项2",value:2},{text:"选项3",value:3}]),3==t&&(e.maxNumber=10,e.minNumber=0,e.decimals=0),this.form.fields.push(e)},delectItem:function(t){for(var e in console.log("删除==",t),this.form.fields.splice(t,1),this.showEditBox=!1,this.editIndex=0,this.form.fields)this.form.fields[e].isEdit=!1},toUp:function(t){t>0&&(this.swapArray(this.form.fields,t-1,t),this.editIndex=t-1)},toDown:function(t){t<this.form.fields.length-1&&(this.swapArray(this.form.fields,t,t+1),this.editIndex=t+1)},swapArray:function(t,e,i){return t[e]=t.splice(i,1,t[e])[0],t},toEdit:function(t){for(var e in console.log("编辑==",t),this.showEditBox=!0,this.form.fields)this.form.fields[e].isEdit=!1;this.form.fields[t].isEdit=!0,this.editIndex=t},editConform:function(){this.showEditBox=!1,console.log("自定义内容列表===",this.form.fields)},addUploadType:function(){var t={type:1,size:1,remark:"支持JPG、PNG等图片格式,大小不超过1MB",remark1:"支持JPG、PNG等图片格式",remark2:"大小不超过1MB"};this.form.formats.push(t)},deleteUploadType:function(t){console.log("index==",t),this.form.formats.splice(t,1)},ChangeFormatsType:function(t,e){var i=["支持JPG、PNG等图片格式","支持mp4,avi,mpg,mpeg,flv,mov等常用视频格式","支持word、pdf,excel等常用格式","支持zip,rar等常用格式"];this.form.formats[e].remark1=i[t-1],this.form.formats[e].remark=this.form.formats[e].remark1+","+this.form.formats[e].remark2,console.log("index==",e,"value===",t),this.form.formats[e].type=t},ChangeFormatsSize:function(t,e){console.log(t,e);var i={0:"大小不超过1MB",5:"大小不超过5MB",10:"大小不超过10MB",20:"大小不超过50MB",100:"大小不超过100MB",500:"大小不超过500MB",700:"大小不超过700MB",800:"大小不超过800MB",1024:"大小不超过1GB",2048:"大小不超过2GB"};this.form.formats[e].remark2=i[t],this.form.formats[e].remark=this.form.formats[e].remark1+","+this.form.formats[e].remark2,console.log("index==",e,"value===",t),this.form.formats[e].size=t},ChangeFormatsRemark:function(t){},editorChange:function(t){this.form.content=t},back:function(){this.$router.go(-1)},periodChange:function(t){console.log("组别===",t),this.form.period="",this.period=t;var e=0;for(var i in this.period)e+=parseInt(this.period[i].id);this.form.period=e},onSubmit:function(){var t=this;if(""!=this.form.title)if(""!=this.form.author_limit)if(0!=this.period.length)if(0!=this.form.fields.length)if(0!=this.form.formats.length){var e=JSON.parse(sessionStorage.getItem("addActivityForm")),i=parseInt(this.$route.query.id);if(0==this.$route.query.operate)e.category[i].child.push(this.form);else if(1==this.$route.query.operate){var a=parseInt(this.$route.query.subId);e.category[i].child[a].title=this.form.title,e.category[i].child[a].type=this.form.type,e.category[i].child[a].content=this.form.content,e.category[i].child[a].author_limit=this.form.author_limit,e.category[i].child[a].mentor_limit=this.form.mentor_limit,e.category[i].child[a].formats=this.form.formats,e.category[i].child[a].period=this.form.period,e.category[i].child[a].fields=this.form.fields}sessionStorage.setItem("addActivityForm",JSON.stringify(e)),this.$message({type:"success ",message:"操作成功"}),setTimeout((function(){t.back()}),1e3)}else this.$message({message:"项目作品附件要求必填",type:"error"});else this.$message({message:"报名内容格式必填",type:"error"});else this.$message({message:"至少选择一个组",type:"error"});else this.$message({message:"学生上限未填写",type:"error"});else this.$message({message:"标题不能为空",type:"error"})}}},x=w,k=(i("298d"),Object(v["a"])(x,a,n,!1,null,null,null));e["default"]=k.exports},"45e8":function(t,e,i){t.exports=i.p+"img/ac6.3764a50d.png"},4632:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"expert-centainer"},[i("el-card",{staticStyle:{"min-height":"600px"}},[i("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:"专家管理",name:"expertManage"}},[i("el-row",[i("el-col",{attrs:{span:2}},[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.goToAddExpert}},[t._v("添加专家")])],1),i("el-col",{attrs:{span:2}},[i("el-button",{attrs:{type:"danger",plain:"",size:"small"},on:{click:t.goToBatchForbidden}},[t._v("批量禁用")])],1),i("el-col",{attrs:{span:10}},[i("el-button",{attrs:{type:"danger",plain:"",size:"small"},on:{click:t.goToBatchDelete}},[t._v("批量删除")])],1),i("el-col",{attrs:{span:8}},[i("el-input",{attrs:{placeholder:"请输入搜索内容",size:"small",clearable:""},on:{clear:t.clearInput},model:{value:t.searchVal,callback:function(e){t.searchVal=e},expression:"searchVal"}})],1),i("el-col",{attrs:{span:2}},[i("el-button",{attrs:{icon:"el-icon-search",type:"primary",size:"small"},on:{click:t.goToSearch}},[t._v("搜索")])],1)],1),i("el-row",[i("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"","header-cell-style":{background:"#EEEEEE",color:"#323232"},"tooltip-effect":"dark"},on:{"selection-change":t.tableSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"55"}}),i("el-table-column",{attrs:{label:"序号",type:"index",width:"160"}}),i("el-table-column",{attrs:{prop:"name",label:"姓名"}}),i("el-table-column",{attrs:{label:"介绍","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._l(e.row.roleInfo,(function(e){return 5==e.id?[t._v(t._s(e.description))]:t._e()}))]}}])}),i("el-table-column",{attrs:{label:"手机号"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.mobile))]}}])}),i("el-table-column",{attrs:{fixed:"right",label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.status?[i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return t.goToEdit(e.row)}}},[t._v("编辑")]),i("el-button",{staticStyle:{color:"red"},attrs:{type:"text",size:"small"},on:{click:function(i){return t.goToForbidden(e.row.id)}}},[t._v("禁用")])]:t._e(),0==e.row.status?[i("el-button",{staticStyle:{color:"#999"},attrs:{type:"text",size:"small"}},[t._v("已禁用")]),i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return t.goToRelieve(e.row.id)}}},[t._v("解禁")])]:t._e(),i("el-button",{staticStyle:{color:"red"},attrs:{type:"text",size:"small"},on:{click:function(i){return t.goToDelete(e.row.id)}}},[t._v("删除")])]}}])})],1)],1),i("el-row",{staticClass:"page-div"},[i("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[20,30,40,50,100],"page-size":t.perPage,layout:"total, sizes, prev, pager, next, jumper",total:t.totalCount},on:{"size-change":t.pageSizeChange,"current-change":t.pageCurrentChange}})],1)],1)],1)],1),i("el-dialog",{attrs:{center:"",title:"编辑",visible:t.editDialogVisible,width:"600px","before-close":t.editHandleClose},on:{"update:visible":function(e){t.editDialogVisible=e}}},[i("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,rules:t.rules,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"姓名",prop:"name"}},[i("el-input",{attrs:{placeholder:"请输入姓名",size:"small",disabled:!0},model:{value:t.ruleForm.name,callback:function(e){t.$set(t.ruleForm,"name",e)},expression:"ruleForm.name"}})],1),i("el-form-item",{attrs:{label:"电话号码",prop:"mobile"}},[i("el-input",{attrs:{placeholder:"请输入电话号码",size:"small",disabled:!0},model:{value:t.ruleForm.mobile,callback:function(e){t.$set(t.ruleForm,"mobile",e)},expression:"ruleForm.mobile"}})],1),i("el-form-item",{attrs:{label:"专家介绍",prop:"des"}},[i("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输填写专家介绍"},model:{value:t.ruleForm.des,callback:function(e){t.$set(t.ruleForm,"des",e)},expression:"ruleForm.des"}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.onUpdate()}}},[t._v("确定修改")]),i("el-button",{attrs:{type:"info",size:"small",plain:""},on:{click:function(e){return t.onCancel()}}},[t._v("取消")])],1)],1)],1)},n=[],r=i("46b4"),s=i.n(r),o=i("5c0a"),c=i("408b");function l(t,e,i,a,n,r,s){try{var o=t[r](s),c=o.value}catch(l){return void i(l)}o.done?e(c):Promise.resolve(c).then(a,n)}function u(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var r=t.apply(e,i);function s(t){l(r,a,n,s,o,"next",t)}function o(t){l(r,a,n,s,o,"throw",t)}s(void 0)}))}}var d={components:{TypeSelect:o["a"]},data:function(){return{activeName:"expertManage",searchVal:"",tableData:[],multipleSelection:[],perPage:20,currentPage:1,totalCount:0,editDialogVisible:!1,ruleForm:{name:"",mobile:"",des:""},id:"",role_id:[],area_id:[],rules:{name:[{required:!0,message:"请输入姓名",trigger:"blur"}],mobile:[{required:!0,message:"请输入电话号码",trigger:"blur"}],des:[{required:!0,message:"请填写专家介绍",trigger:"blur"}]}}},mounted:function(){var t={};this.getUserList(t)},methods:{getUserList:function(){var t=u(s.a.mark((function t(e){var i=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.url=c["a"].user,e.expand="memberAuth,memberInfo,roleInfo",""!=this.searchVal&&(e.name=this.searchVal),e.role_id=5,t.next=6,this.axiosGet(e).then((function(t){i.tableData=t.items,i.totalCount=t._meta.totalCount})).catch((function(t){return t}));case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),goToAddExpert:function(){this.$router.push({path:"/addExpert"})},goToImportExpert:function(){this.$router.push({path:"/importExpert"})},goToSearch:function(){var t={"per-page":this.perPage};t.page=this.currentPage,this.getUserList(t)},clearInput:function(){var t={"per-page":this.perPage};t.page=this.currentPage,this.getUserList(t)},goToEdit:function(t){for(var e in this.editDialogVisible=!0,console.log("data====",t),this.id=t.id,this.ruleForm.name=t.name,this.ruleForm.mobile=t.mobile,t.roleInfo)if(this.role_id.push(parseInt(t.roleInfo[e].id)),5==parseInt(t.roleInfo[e].id)&&(this.ruleForm.des=t.roleInfo[e].description),void 0!=t.roleInfo[e].areas)for(var i in t.roleInfo[e].areas)this.area_id.push(parseInt(t.roleInfo[e].areas[i].id))},onUpdate:function(){var t=u(s.a.mark((function t(){var e,i=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={},e.name=this.ruleForm.name,e.mobile=this.ruleForm.mobile,e.description=this.ruleForm.des,e.role_id=this.role_id,e.area_id=this.area_id,e.id=this.id,e.url=c["a"].user,t.next=10,this.axiosPut(e).then((function(t){i.$message({type:"success",message:"修改成功！"}),i.editDialogVisible=!1,i.ruleForm={name:"",mobile:"",des:""},i.id="",i.role_id=[],i.area_id=[];var e={"per-page":i.perPage};e.page=i.currentPage,i.getUserList(e)})).catch((function(t){return t}));case 10:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),onCancel:function(){this.editDialogVisible=!1,this.ruleForm={name:"",mobile:"",des:""},this.id="",this.role_id=[],this.area_id=[]},editHandleClose:function(){this.editDialogVisible=!1},tableSelectionChange:function(t){this.multipleSelection=t},pageSizeChange:function(t){this.perPage=t;var e={"per-page":this.perPage};e.page=this.currentPage,this.getUserList(e)},pageCurrentChange:function(t){this.currentPage=t;var e={"per-page":this.perPage};e.page=this.currentPage,this.getUserList(e)},goToForbidden:function(t){var e=0;this.open(t,e)},goToDelete:function(t){var e=-1;this.open(t,e)},open:function(t,e){var i=this,a="";0==e?a="禁止该用户使用改系统":-1==e&&(a="永久删除该用户"),this.$confirm("此操作将".concat(a,", 是否继续?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var a={};a.id=t,a.status=e,i.updateUser(a)})).catch((function(){i.$message({type:"info",message:"已取消！"})}))},updateUser:function(){var t=u(s.a.mark((function t(e){var i,a=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.url=c["a"].user,i="",0==e.status?i="禁用成功！":-1==e.status&&(i="删除成功！"),t.next=5,this.axiosPut(e).then((function(t){a.$message({type:"success",message:i});var e={"per-page":a.perPage};e.page=a.currentPage,e.name=a.searchVal,a.getUserList(e)})).catch((function(t){return t}));case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),goToRelieve:function(){var t=u(s.a.mark((function t(e){var i,a=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i={},i.id=e,i.status=1,i.url=c["a"].user,t.next=6,this.axiosPut(i).then((function(t){a.$message({type:"success",message:"解禁成功！"}),i={"per-page":a.perPage},i.page=a.currentPage,i.name=a.searchVal,a.getUserList(i)})).catch((function(t){return t}));case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),goToBatchForbidden:function(){var t=u(s.a.mark((function t(){var e,i,a,n=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(i in e=[],this.multipleSelection)e.push(this.multipleSelection[i].id);a={},a.ids=e,a.url=c["a"].disableUsers,this.$confirm("此操作将批量禁用用户使用该系统, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){n.batchForbidden(a)})).catch((function(){n.$message({type:"info",message:"已取消！"})}));case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),batchForbidden:function(){var t=u(s.a.mark((function t(e){var i=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosPost(e).then((function(t){i.$message({type:"success",message:"批量禁用成功！"});var e={"per-page":i.perPage};e.page=i.currentPage,i.getUserList(e)})).catch((function(t){return t}));case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),goToBatchDelete:function(){var t=this,e=[];for(var i in this.multipleSelection)e.push(this.multipleSelection[i].id);var a={};a.ids=e,a.url=c["a"].deleteUsers,this.$confirm("此操作将批量删除用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.batchDelete(a)})).catch((function(){t.$message({type:"info",message:"已取消！"})}))},batchDelete:function(){var t=u(s.a.mark((function t(e){var i=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosPost(e).then((function(t){i.$message({type:"success",message:"批量删除成功！"});var e={"per-page":i.perPage};e.page=i.currentPage,i.getUserList(e)})).catch((function(t){return t}));case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}},p=d,h=(i("c4ae"),i("623f")),m=Object(h["a"])(p,a,n,!1,null,"e830fa00",null);e["default"]=m.exports},4795:function(t,e,i){"use strict";var a=i("3dea"),n=i.n(a);n.a},"47c5":function(t,e,i){},"47ea":function(t,e,i){},"49da":function(t,e,i){t.exports=i.p+"img/video-demo.8c33d79a.png"},"49f6":function(t,e,i){"use strict";var a=i("53f2"),n=i.n(a);n.a},"4a0d":function(t,e,i){"use strict";var a=i("78cd"),n=i.n(a);n.a},"4b1a":function(t,e,i){t.exports=i.p+"img/ac4.645aacb8.png"},"4c33":function(t,e,i){},"4db1":function(t,e,i){"use strict";var a=i("4e3e"),n=i.n(a);n.a},"4de6":function(t,e,i){},"4e3e":function(t,e,i){},5054:function(t,e,i){},5106:function(t,e,i){},"511d":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"add-role-container"},[i("el-card",{staticStyle:{"min-height":"600px"}},[i("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:"添加角色",name:"addRole"}},[i("div",{staticClass:"add-role-item"},[i("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,rules:t.rules,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"手机号码",prop:"mobile"}},[i("el-input",{attrs:{placeholder:"请输入手机号码",maxlength:"11",size:"small",disabled:void 0!==t.id},on:{change:t.mobileChange},model:{value:t.ruleForm.mobile,callback:function(e){t.$set(t.ruleForm,"mobile",e)},expression:"ruleForm.mobile"}})],1),i("el-form-item",{attrs:{label:"姓名",prop:"name"}},[i("el-input",{attrs:{placeholder:"请输入姓名",size:"small",disabled:void 0!==t.id},model:{value:t.ruleForm.name,callback:function(e){t.$set(t.ruleForm,"name",e)},expression:"ruleForm.name"}})],1),i("el-form-item",{attrs:{label:"管理权限",prop:"type"}},[i("el-checkbox-group",{on:{change:t.typeChange},model:{value:t.ruleForm.type,callback:function(e){t.$set(t.ruleForm,"type",e)},expression:"ruleForm.type"}},[t._l(t.adminList,(function(e){return[i("el-checkbox",{attrs:{label:e.id,name:"type",value:e.id}},[t._v(t._s(e.name))])]}))],2)],1),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.ruleForm.type.indexOf(4)>-1,expression:"ruleForm.type.indexOf(4)>-1"}],attrs:{label:"管理区域"}},[i("el-checkbox-group",{on:{change:t.areaChange},model:{value:t.area,callback:function(e){t.area=e},expression:"area"}},[t._l(t.areaList,(function(e){return[i("el-checkbox",{attrs:{label:e.id,name:"area",value:e.id}},[t._v(t._s(e.name))])]}))],2)],1),i("el-form-item",[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.submitForm()}}},[t._v("保存")]),i("el-button",{attrs:{size:"small"},on:{click:function(e){return t.cancel()}}},[t._v("取消")])],1)],1)],1)])],1)],1)],1)},n=[],r=i("46b4"),s=i.n(r),o=i("408b");function c(t,e,i,a,n,r,s){try{var o=t[r](s),c=o.value}catch(l){return void i(l)}o.done?e(c):Promise.resolve(c).then(a,n)}function l(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var r=t.apply(e,i);function s(t){c(r,a,n,s,o,"next",t)}function o(t){c(r,a,n,s,o,"throw",t)}s(void 0)}))}}var u={data:function(){return{activeName:"addRole",ruleForm:{name:"",mobile:"",type:[]},adminList:[],rules:{name:[{required:!0,message:"请输入姓名",trigger:"change"}],mobile:[{required:!0,message:"请输入手机号码",trigger:"blur"}],type:[{required:!0,message:"请选择管理权限",trigger:"change"}]},areaList:[{id:732,pid:"77",type:"3",name:"市辖区"},{id:726,pid:"77",type:"3",name:"福田区"},{id:727,pid:"77",type:"3",name:"罗湖区"},{id:728,pid:"77",type:"3",name:"南山区"},{id:729,pid:"77",type:"3",name:"宝安区"},{id:730,pid:"77",type:"3",name:"龙岗区"},{id:731,pid:"77",type:"3",name:"盐田区"},{id:733,pid:"77",type:"3",name:"龙华区"},{id:734,pid:"77",type:"3",name:"坪山区"},{id:735,pid:"77",type:"3",name:"光明区"},{id:736,pid:"77",type:"3",name:"大鹏新区"},{id:3789,pid:"77",type:"3",name:"深汕特别合作区"}],area:[],id:this.$route.query.id}},mounted:function(){if(this.getRole(),void 0!=this.id){var t={};t.id=this.id,t.expand="memberAuth,memberInfo,roleInfo",this.getUserInfo(t)}},methods:{mobileChange:function(){var t=l(s.a.mark((function t(){var e,i=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e={},e.url=o["a"].user,e.expand="memberAuth,memberInfo,roleInfo",11!=this.ruleForm.mobile.length){t.next=7;break}return e.mobile=this.ruleForm.mobile,t.next=7,this.axiosGet(e).then((function(t){if(t.items.length>0){i.id=t.items[0].id,i.$message({type:"success",message:"该用户已存在，可以直接修改角色"});var e={};e.id=i.id,e.expand="memberAuth,memberInfo,roleInfo",i.getUserInfo(e)}console.log("res===",t)})).catch((function(t){return t}));case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getUserInfo:function(){var t=l(s.a.mark((function t(e){var i,a,n;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.url=o["a"].user,t.next=3,this.axiosGet(e).catch((function(t){return t}));case 3:if(i=t.sent,void 0!=i.roleInfo)for(a in this.ruleForm.name=i.name,this.ruleForm.mobile=i.mobile,i.roleInfo)if(this.ruleForm.type.push(parseInt(i.roleInfo[a].id)),void 0!=i.roleInfo[a].areas)for(n in i.roleInfo[a].areas)this.area.push(parseInt(i.roleInfo[a].areas[n].id));case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),getRole:function(){var t=l(s.a.mark((function t(){var e,i;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={},e.url=o["a"].role,t.next=4,this.axiosGet(e).catch((function(t){return t}));case 4:i=t.sent,this.adminList=i.items,console.log("adminList===",this.adminList);case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),typeChange:function(){var t=l(s.a.mark((function t(e){return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),areaChange:function(){var t=l(s.a.mark((function t(e){return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),submitForm:function(){var t=l(s.a.mark((function t(){var e,i,a,n=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e={},e.url=o["a"].user,""==this.ruleForm.name){t.next=6;break}e.name=this.ruleForm.name,t.next=8;break;case 6:return this.$message({type:"warning",message:"请填写姓名!"}),t.abrupt("return");case 8:if(""==this.ruleForm.mobile){t.next=12;break}e.mobile=this.ruleForm.mobile,t.next=14;break;case 12:return this.$message({type:"warning",message:"请填写手机号码!"}),t.abrupt("return");case 14:if(!(this.ruleForm.type.length>0)){t.next=18;break}e.role_id=this.ruleForm.type,t.next=20;break;case 18:return this.$message({type:"warning",message:"请选择角色!"}),t.abrupt("return");case 20:if(!(this.ruleForm.type.indexOf(4)>-1&&this.area.length<=0)){t.next=23;break}return this.$message({type:"warning",message:"请选择管理区域!"}),t.abrupt("return");case 23:if(this.ruleForm.type.indexOf(4)>-1&&this.ruleForm.type.indexOf(3)>-1&&this.area.length>0&&(e.area_id=this.area,-1==e.area_id.indexOf(77)&&e.area_id.push(77)),-1==this.ruleForm.type.indexOf(4)&&this.ruleForm.type.indexOf(3)>-1&&(e.area_id=[77],this.area=[77]),this.ruleForm.type.indexOf(4)>-1&&-1==this.ruleForm.type.indexOf(3)&&(this.area.indexOf(77)>-1&&this.area.splice(this.area.indexOf(77),1),e.area_id=this.area),-1==this.ruleForm.type.indexOf(4)&&-1==this.ruleForm.type.indexOf(3)&&(e.area_id=[],this.area=[]),void 0==this.id){t.next=35;break}return e.id=this.id,t.next=31,this.axiosPut(e).catch((function(t){return t}));case 31:i=t.sent,""!=i.name&&void 0!=i.name?(this.$message({type:"success",message:"编辑成功！"}),setTimeout((function(){n.$router.go(-1)}),1e3)):this.$message({type:"warning",message:i.message}),t.next=39;break;case 35:return t.next=37,this.axiosPost(e).catch((function(t){n.$message({type:"warning",message:t[0].message}),setTimeout((function(){n.$router.go(-1)}),1e3)}));case 37:a=t.sent,""!=a.name&&void 0!=a.name?this.$message({type:"success",message:"添加成功！"}):this.$message({type:"warning",message:a.message});case 39:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),cancel:function(){this.$router.go(-1)}}},d=u,p=(i("905a"),i("623f")),h=Object(p["a"])(d,a,n,!1,null,"f4f201f4",null);e["default"]=h.exports},"51db":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"see-information-container"},[i("el-card",{staticStyle:{"min-height":"600px"}},[i("div",{staticClass:"title"},[i("p",[t._v(t._s(t.form.title))]),i("p",{staticStyle:{"margin-top":"10px"}},[t._v(t._s(t.formatDateChar(1e3*t.form.time)))])]),i("el-divider"),i("div",{staticClass:"content ql-snow ql-editor",domProps:{innerHTML:t._s(t.form.content)}}),i("el-divider"),i("div",{staticClass:"attachment"},[i("p",[t._v("公告附件")]),i("div",{staticClass:"attachment-item"},[t._l(t.attachment,(function(t){return[i("file-preview",{attrs:{fileObj:t}})]}))],2)])],1)],1)},n=[],r=i("46b4"),s=i.n(r),o=i("408b"),c=i("2847");function l(t,e,i,a,n,r,s){try{var o=t[r](s),c=o.value}catch(l){return void i(l)}o.done?e(c):Promise.resolve(c).then(a,n)}function u(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var r=t.apply(e,i);function s(t){l(r,a,n,s,o,"next",t)}function o(t){l(r,a,n,s,o,"throw",t)}s(void 0)}))}}var d={components:{FilePreview:c["a"]},data:function(){return{id:this.$route.query.id,form:{title:"",content:"",time:""},attachment:[]}},mounted:function(){this.getAnnouncementDetail()},methods:{getAnnouncementDetail:function(){var t=u(s.a.mark((function t(){var e,i=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={},e.url=o["a"].activityNotice,e.id=this.id,e.expand="content,bcheck,attachment",t.next=6,this.axiosGet(e).then((function(t){i.form.title=t.title,i.form.content=t.content,i.form.time=t.created_at,t.attachment.length>0&&(i.attachment=t.attachment.map((function(t){return{title:t.title,url:t.url}})))})).catch((function(t){return t}));case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},p=d,h=(i("8a990"),i("623f")),m=Object(h["a"])(p,a,n,!1,null,"1134060a",null);e["default"]=m.exports},5242:function(t,e,i){"use strict";var a=i("a3b5"),n=i.n(a);n.a},"52c5":function(t,e,i){"use strict";var a=i("e363"),n=i.n(a);n.a},"52ef":function(t,e,i){"use strict";var a=i("30a5"),n=i.n(a);n.a},"53f2":function(t,e,i){},"554e":function(t,e,i){t.exports=i.p+"img/empty.11f1e315.png"},"56d7":function(t,e,i){"use strict";i.r(e);var a=i("0261"),n=i("2ca7"),r=i.n(n),s=i("9bfb");i("ba64"),i("46c6");function o(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var c=i("cf8e"),l=i("ab01"),u=i("769a"),d=i("d8f5"),p=i("9b12"),h=i("c5b3"),m=i("5fca"),f=i("d197"),v=i("f831"),g=(i("e95a"),i("af72")),y=i("a6f7"),b=i("452e"),w=i("29cb"),x=i("191b"),k=i("063c"),_=i("20e8"),C=i("7dd5"),S=i("fb4e"),T=i("2e5e"),L=i("ccab"),A=i("24a8"),I=i("2b88"),P=i("7938"),D=i("96d7"),j=i("16e7"),O=i("fda9"),E=i("5c8f"),N=i("eea6"),$=i("de55"),F=i("eb6a"),z=i("51db"),U=i("0f38"),R=i("329f"),V=i("7d50"),G=i("0ba1"),W=i("fccf"),M=i("0f4c"),q=i("9262"),B=i("de12"),J=i("8aab"),K=i("4632"),H=i("77d2"),Y=i("dd48"),Q=i("511d"),X=i("73cf"),Z=i("118c"),tt=i("15b1"),et=i("127b"),it=i("6a7a"),at=i("ae32"),nt=i("6914"),rt=i("e68a"),st=[{path:"/",components:c,children:[{path:"/",components:E},{path:"/myActivity",name:"已审核的活动列表",components:h,meta:{title:"已审核的活动列表",keepAlive:!1}},{path:"/myActivityDetail",name:"动管理与未发布详情",components:k,meta:{title:"动管理与未发布详情",keepAlive:!1}},{path:"/myActivity/index",name:"活动管理与已发布详情",components:D,meta:{title:"活动管理与已发布详情",keepAlive:!1}},{path:"/myActivity/workAuditDetail",name:"活动管理作品审核点击后详情",components:O,meta:{title:"活动管理作品审核点击后详情",keepAlive:!1}},{path:"/activityCenter",name:"活动中心",components:l,meta:{title:"活动中心",keepAlive:!1}},{path:"/publishManage",name:"活动发布编辑页",components:u,meta:{title:"活动发布编辑页",keepAlive:!1}},{path:"/excellence",name:"优秀作品展示",components:d,meta:{title:"优秀作品展示",keepAlive:!1}},{path:"/goodWorks",name:"活动优秀作品详情",components:q,meta:{title:"活动优秀作品详情",keepAlive:!1}},{path:"/userCenter",name:"个人中心",components:p,meta:{title:"个人中心",keepAlive:!1}},{path:"/activeManager",name:"活动管理",components:v,meta:{title:"活动管理",keepAlive:!1}},{path:"/activity/process",name:"活动各阶段",components:_,meta:{title:"活动各阶段",keepAlive:!1}},{path:"/newsBulletin",name:"消息公告",components:m,meta:{title:"消息公告",keepAlive:!1}},{path:"/newsBulletinDetail",name:"消息公告详情",components:f,meta:{title:"消息公告详情",keepAlive:!1}},{path:"/activeManager",name:"活动管理",components:v,meta:{title:"活动管理",keepAlive:!1}},{path:"/activeManager/createActivity",name:"创建活动",components:g,meta:{title:"创建活动",keepAlive:!1}},{path:"/activeManager/managerCenter",name:"活动管理中心",components:y,meta:{title:"活动管理中心",keepAlive:!1}},{path:"/activeManager/createActivity/activeEdit",name:"活动编辑",components:b,meta:{title:"编辑",keepAlive:!1}},{path:"/activeManager/managerCenter/EvaluationResultDetail",name:"市评审结果详情",components:w,meta:{title:"详情",keepAlive:!1}},{path:"/activeManager/managerCenter/releaseAnnouncement",name:"发布公告",components:x,meta:{title:"发布公告",keepAlive:!1}},{path:"/excellentWork/index",name:"优秀作品展示",components:C,meta:{title:"优秀作品展示",keepAlive:!1}},{path:"/excellentWork/excellentWorkDetail",name:"优秀作品展示详情",components:S,meta:{title:"优秀作品展示详情",keepAlive:!1}},{path:"/expertReview",name:"专家评审",components:T,meta:{title:"专家评审",keepAlive:!1}},{path:"/expertReview/workDetail",name:"专家评审点击后详情",components:L,meta:{title:"专家评审点击后详情",keepAlive:!1}},{path:"/expertStore",name:"专家库",components:A,meta:{title:"专家库",keepAlive:!1}},{path:"/auditActivity",name:"审核中心",components:I,meta:{title:"审核中心",keepAlive:!1}},{path:"/auditActivity/auditDetail",name:"活动审核点击后详情",components:P,meta:{title:"活动审核点击后详情",keepAlive:!1}},{path:"/msgcenter",name:"消息中心",components:j,meta:{title:"消息中心",keepAlive:!1}},{path:"/home",name:"首页",components:N,meta:{title:"首页"}},{path:"/home/activityIntroduction",name:"活动介绍",components:$,meta:{title:"活动介绍",keepAlive:!1}},{path:"/home/choiceActivity",name:"选择活动",components:F,meta:{title:"选择活动",keepAlive:!1}},{path:"/home/seeInformation",name:"查看信息",components:z,meta:{title:"查看信息",keepAlive:!1}},{path:"/home/activityProject",name:"活动项目",components:U,meta:{title:"活动项目",keepAlive:!1}},{path:"/home/activityEnroll",name:"活动报名",components:R,meta:o({title:"活动报名",keepAlive:!0},"keepAlive",!1)},{path:"/home/submitEnroll",name:"报名成功",components:G,meta:{title:"报名成功",keepAlive:!1}},{path:"/home/activityDetail",name:"活动详情",components:W,meta:{title:"活动详情",keepAlive:!1}},{path:"/userCenter/userEdit",name:"个人中心编辑",components:V,meta:{title:"个人中心编辑",keepAlive:!1}},{path:"/workShow",name:"活动详情展示",components:M,meta:{title:"活动详情展示",keepAlive:!1}},{path:"/admin",name:"用户管理",components:B,meta:{title:"用户管理",keepAlive:!1}},{path:"/roleManage",name:"角色管理",components:J,meta:{title:"角色管理",keepAlive:!1}},{path:"/expertManage",name:"专家管理",components:K,meta:{title:"专家管理",keepAlive:!1}},{path:"/expertAssign",name:"专家分配",components:H,meta:{title:"专家分配",keepAlive:!1}},{path:"/prizeManagement",name:"奖项管理",components:it,meta:{title:"奖项管理",keepAlive:!1}},{path:"/classifyManage",name:"类型管理",components:Y,meta:{title:"类型管理",keepAlive:!1}},{path:"/addRole",name:"添加角色",components:Q,meta:{title:"添加角色",keepAlive:!1}},{path:"/addExpert",name:"添加专家",components:X,meta:{title:"添加专家",keepAlive:!1}},{path:"/importExpert",name:"导入专家",components:Z,meta:{title:"导入专家",keepAlive:!1}},{path:"/addClassify",name:"添加分类",components:tt,meta:{title:"添加分类",keepAlive:!1}},{path:"/subClassify",name:"子分类",components:et,meta:{title:"子分类",keepAlive:!1}},{path:"/workReview",name:"专家评审",components:at,meta:{title:"专家评审",keepAlive:!1}},{path:"/workScore",name:"作品评分",components:nt,meta:{title:"作品评分",keepAlive:!1}},{path:"/importWorkList",name:"导入作品评分列表",components:rt,meta:{title:"导入作品评分列表",keepAlive:!1}}]},{path:"*",redirect:"/"}],ot=st,ct=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("keep-alive",[t.$route.meta.keepAlive?i("router-view"):t._e()],1),t.$route.meta.keepAlive?t._e():i("router-view")],1)},lt=[],ut=i("0b35"),dt={name:"uni-app",components:{tHeader:ut["a"]}},pt=dt,ht=(i("7c55"),i("623f")),mt=Object(ht["a"])(pt,ct,lt,!1,null,null,null),ft=mt.exports,vt=i("4360"),gt=i("e248"),yt=i.n(gt),bt=(i("7100"),i("217a"),i("0210"));for(var wt in a["default"].config.productiontip=!0,a["default"].use(s["a"]),a["default"].use(r.a),a["default"].use(yt.a),bt)a["default"].prototype[wt]=bt[wt];var xt=new s["a"]({routes:ot,mode:"history"});window.app=new a["default"]({el:"#app",store:vt["a"],render:function(t){return t(ft)},router:xt})},5734:function(t,e,i){},"578a":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-dialog",{staticClass:"login-dialog",attrs:{visible:t.show,width:"350px","modal-append-to-body":!1,"custom-class":"padding:0"},on:{"update:visible":function(e){t.show=e},close:t.onClose}},[i("el-tabs",{staticStyle:{height:"400px"},on:{"tab-click":t.goToClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:"手机登录",name:"phone"}},[i("div",{staticClass:"phone"},[i("el-row",[i("el-col",[i("el-input",{attrs:{type:"text",placeholder:"请输入电话号码",maxlength:"11"},on:{input:t.phoneChange},model:{value:t.phoneNum,callback:function(e){t.phoneNum=e},expression:"phoneNum"}})],1),i("el-col",{attrs:{span:13}},[i("el-input",{attrs:{type:"text",placeholder:"请输入验证码",maxlength:"6"},on:{input:t.codeChange},model:{value:t.phoneCode,callback:function(e){t.phoneCode=e},expression:"phoneCode"}})],1),i("el-col",{attrs:{span:8,offset:1}},[i("el-button",{attrs:{type:"primary",disabled:t.code},on:{click:t.goToGetCode}},[t._v(t._s(t.code?t.countDownNum:"")+t._s(t.btnTag))])],1),i("el-col",[i("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary",disabled:t.login},on:{click:t.goToLogin}},[t._v("登录")])],1)],1),i("p",[t._v("请使用电话号码获取验证码登录")])],1)]),i("el-tab-pane",{attrs:{label:"账号注册",name:"register"}},[i("div",{staticClass:"register"},[i("el-image",{attrs:{src:t.codeUrl}}),i("p",[t._v("请使用微信【扫一扫】扫码注册")])],1)])],1)],1)},n=[],r=i("46b4"),s=i.n(r),o=i("408b"),c=i("0210");function l(t,e,i,a,n,r,s){try{var o=t[r](s),c=o.value}catch(l){return void i(l)}o.done?e(c):Promise.resolve(c).then(a,n)}function u(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var r=t.apply(e,i);function s(t){l(r,a,n,s,o,"next",t)}function o(t){l(r,a,n,s,o,"throw",t)}s(void 0)}))}}var d={name:"login",data:function(){return{show:!1,activeName:"phone",codeUrl:i("7815"),phoneNum:"",phoneCode:"",login:!0,code:!0,btnTag:"获取验证码",timer:null,countDownNum:"",memberTypeObj:{0:"超级管理员",2:"市级管理员",3:"区级管理员",4:"专家",11:"老师",12:"学生",13:"家长"}}},computed:{},methods:{showDialog:function(){this.show=!0},goToClick:function(t){"wx"===t.name&&this.wxLogin()},phoneChange:function(){this.code=11!=this.phoneNum.length},codeChange:function(){this.login=4!=this.phoneCode.length},goToGetCode:function(){var t=u(s.a.mark((function t(){var e,i;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={},e.url=o["a"].captcha,e.account=this.phoneNum,t.next=5,this.axiosGet(e).catch((function(t){return t}));case 5:i=t.sent,"已发送"===i.msg||0==i.code?(this.code=!0,this.countDownNum=120,this.btnTag="s重新获取",this.countDown()):this.$message({message:i.message,type:"warning"});case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),countDown:function(){var t=this;this.timer=setInterval((function(){t.countDownNum--,t.countDownNum<=0&&(t.code=!1,t.btnTag="获取验证码",clearInterval(t.timer))}),1e3)},goToLogin:function(){var t=u(s.a.mark((function t(){var e,i=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={},e.url=o["a"].account,e.account=this.phoneNum,e.code=this.phoneCode,t.next=6,this.axiosGet(e).then((function(t){if(-1==t.code)i.$message({message:t.message,type:"warning"});else{i.$store.dispatch("INIT_SHOW",!1),void 0!=t.token&&Object(c["setCookie"])("x-api-key",t.token),i.$store.dispatch("INIT_USER",t);var e=JSON.stringify(t);localStorage.setItem("user",e);var a=t.members.map((function(t){var e={};if(e.type=t.type,e.name=i.memberTypeObj[t.type],void 0!=t.school_id&&(e.school_id=t.school_id),void 0!=t.school_title&&(e.school_title=t.school_title),void 0!=t.current){e.current=t.current;var a=JSON.stringify(e);localStorage.setItem("nowRole",a),i.$store.dispatch("INIT_NOWROLE",e)}return e})),n=JSON.stringify(a);localStorage.setItem("roles",n),i.$store.dispatch("INIT_ROLES",a);var r=i.$loading({lock:!0,text:"登录中。。",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});setTimeout((function(){r.close(),i.show=!1,i.phoneNum="",i.phoneCode=""}),2e3)}})).catch((function(t){return t}));case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),wxLogin:function(){var t="127.0.0.1"==location.hostname?"https://upclaass.educloud.tencent.com":location.protocol+"//"+location.host;"cxyy.educloud.tencent.com"!=location.hostname&&"cxyy.szdj.edu.cn"!=location.hostname?setTimeout((function(){new window.WxLogin({id:"weixin-code",appid:"wx34fc14711090d000",scope:"snsapi_login",redirect_uri:encodeURIComponent(t),state:(new Date).getTime()})})):location.href="".concat(t,"/edulogin/?redirectUrl=").concat(t,"&from=activity")},onClose:function(){this.$store.dispatch("INIT_SHOW",!1)},getUserInfo:function(){var t=u(s.a.mark((function t(e){var i,a,n,r;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.url=o["a"].user,t.next=3,this.axiosGet(e).catch((function(t){return t}));case 3:i=t.sent,console.log("userInfo===",i),this.$store.dispatch("INIT_USER",i),a=JSON.stringify(i),localStorage.setItem("user",a),n=JSON.stringify(i.roleInfo),localStorage.setItem("roles",n),r=JSON.stringify(i.roleInfo[0]),localStorage.setItem("nowRole",r),this.$store.dispatch("INIT_ROLES",i.roleInfo),this.$store.dispatch("INIT_NOWROLE",i.roleInfo[0]);case 14:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}},p=d,h=(i("7d57"),i("623f")),m=Object(h["a"])(p,a,n,!1,null,null,null);e["a"]=m.exports},"58d0":function(t,e,i){"use strict";var a=i("c191"),n=i.n(a);n.a},5992:function(t,e,i){"use strict";var a=i("b9c5"),n=i.n(a);n.a},"5b85":function(t,e,i){"use strict";var a=i("841e"),n=i.n(a);n.a},"5c0a":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.activityObjectList.length>0?i("div",{staticClass:"lable"},[i("div",{staticClass:"lable-title"},[t._v("活动对象:")]),i("div",{staticClass:"lable-aside"},t._l(t.activityObjectList,(function(e,a){return i("div",{key:a,staticClass:"lable-self",class:{"type-active":t.activityObjectIndex==a},on:{click:function(i){return t.anActivityObjectList(e.id,a)}}},[t._v(t._s(e.name))])})),0)]):t._e(),t.activityNameList.length>0?i("div",{staticClass:"lable"},[i("div",{staticClass:"lable-title"},[t._v("活动名称:")]),i("div",{staticClass:"lable-aside"},t._l(t.activityNameList,(function(e,a){return i("div",{key:a,staticClass:"lable-self",class:{"type-active":t.activityNameIndex==a},on:{click:function(i){return t.onActivityNameList(e.id,a)}}},[t._v(t._s(e.name))])})),0)]):t._e(),t.gradeList.length>0&&t.otherList.length<=0?i("div",{staticClass:"lable"},[i("div",{staticClass:"lable-title"},[t._v("组别:")]),i("div",{staticClass:"lable-aside"},t._l(t.gradeList,(function(e,a){return i("div",{key:a,staticClass:"lable-self",class:{"type-active":t.gradeIndex==a},on:{click:function(i){return t.onGradeList(e.id,a)}}},[t._v(t._s(e.name))])})),0)]):t._e(),t.activityTypleList.length>0?i("div",{staticClass:"lable"},[i("div",{staticClass:"lable-title"},[t._v("活动分类:")]),i("div",{staticClass:"lable-aside"},t._l(t.activityTypleList,(function(e,a){return i("div",{key:a,staticClass:"lable-self",class:{"type-active":t.activityTypleIndex==a},on:{click:function(i){return t.onActivityTypleList(e.id,a)}}},[t._v(t._s(e.name))])})),0)]):t._e(),t.activityProjectList.length>0?i("div",{staticClass:"lable"},[i("div",{staticClass:"lable-title"},[t._v("活动项目:")]),i("div",{staticClass:"lable-aside"},t._l(t.activityProjectList,(function(e,a){return i("div",{key:a,staticClass:"lable-self",class:{"type-active":t.activityProjectIndex==a},on:{click:function(i){return t.onActivityProjectList(e.id,a)}}},[t._v(t._s(e.name||e.title))])})),0)]):t._e(),t.regionList.length>0?i("div",{staticClass:"lable"},[i("div",{staticClass:"lable-title"},[t._v("区域:")]),i("div",{staticClass:"lable-aside"},t._l(t.regionList,(function(e,a){return i("div",{key:a,staticClass:"lable-self",class:{"type-active":t.regionIndex==a},on:{click:function(i){return t.onRegionList(e.id,a)}}},[t._v(t._s(e.name))])})),0)]):t._e(),t.otherList.length>0?i("div",{staticClass:"lable"},[""!=t.otherName&&void 0!=t.otherName?i("div",{staticClass:"lable-title"},[t._v(t._s(t.otherName)+":")]):t._e(),i("div",{staticClass:"lable-aside"},t._l(t.otherList,(function(e,a){return i("div",{key:a,staticClass:"lable-self",class:{"type-active":t.otherIndex==a},on:{click:function(i){return t.onOtherList(e.id,a)}}},[t._v(t._s(e.name||e.title))])})),0)]):t._e()])},n=[],r={props:{activityObjectList:{type:Array,default:function(){return[]}},activityNameList:{type:Array,default:function(){return[]}},activityTypleList:{type:Array,default:function(){return[]}},activityProjectList:{type:Array,default:function(){return[]}},regionList:{type:Array,default:function(){return[]}},otherList:{type:Array,default:function(){return[]}},otherName:{type:String,default:function(){return""}},gradeList:{type:Array,default:function(){return[]}}},data:function(){return{activityObjectIndex:0,activityNameIndex:0,gradeIndex:0,activityTypleIndex:0,activityProjectIndex:0,regionIndex:0,otherIndex:0,activityNameObject:{},activityTypleObject:{},gradeObject:{},activityProjectObject:{},activityObject:{},regionObject:{},otherObject:{}}},mounted:function(){},methods:{anActivityObjectList:function(t,e){this.activityObjectIndex=e,this.activityObject=this.activityObjectList[e].id,this.$emit("activityObject",this.activityObject)},onActivityNameList:function(t,e){this.activityNameIndex=e,this.activityNameObject=this.activityNameList[e].id,this.$emit("activityNameObject",this.activityNameObject)},onGradeList:function(t,e){this.gradeIndex=e,this.gradeObject=this.gradeList[e].id,this.$emit("gradeObject",this.gradeObject)},onActivityTypleList:function(t,e){this.activityTypleIndex=e,this.activityTypleObject=this.activityTypleList[e].id,this.$emit("activityTypleObject",this.activityTypleObject)},onActivityProjectList:function(t,e){this.activityProjectIndex=e,this.activityProjectObject=this.activityProjectList[e].id,this.$emit("activityProjectObject",this.activityProjectObject)},onRegionList:function(t,e){this.regionIndex=e,this.regionObject=this.regionList[e].id,this.$emit("regionObject",this.regionObject)},onOtherList:function(t,e){this.otherIndex=e,this.otherObject=this.otherList[e].id,this.$emit("otherObject",this.otherObject,this.otherList[e])}}},s=r,o=(i("4a0d"),i("623f")),c=Object(o["a"])(s,a,n,!1,null,"16779e18",null);e["a"]=c.exports},"5c8f":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div")},n=[],r={name:"switch-page",computed:{user:function(){return this.$store.state.account.user}},watch:{}},s=r,o=i("623f"),c=Object(o["a"])(s,a,n,!1,null,null,null);e["default"]=c.exports},"5c97":function(t,e,i){"use strict";var a=i("0649"),n=i.n(a);n.a},"5cb3":function(t,e,i){"use strict";var a=i("ff95"),n=i.n(a);n.a},"5d1c":function(t,e,i){},"5f84":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:[t.dataObj.isEdit?"active":"select-box-container",t.showOperation?"":"no-show"]},[t.canWrite?t._e():i("div",{staticClass:"mark"}),i("el-row",[i("el-col",{staticClass:"title",attrs:{span:3}},[t.dataObj.required?i("i",[t._v("*")]):t._e(),t._v(t._s(t.dataObj.title)+"： \n    ")]),i("el-col",{attrs:{span:12}},[i("el-select",{attrs:{placeholder:"请选择",size:"small"},on:{change:t.myValChange},model:{value:t.val,callback:function(e){t.val=e},expression:"val"}},t._l(t.dataObj.options,(function(t){return i("el-option",{key:t.value,attrs:{label:t.text,value:t.value}})})),1)],1),t.showOperation?i("el-col",{staticClass:"operate-item",attrs:{span:4,offset:5}},[i("i",{staticClass:"el-icon-top",on:{click:t.toUp}}),i("i",{staticClass:"el-icon-bottom",on:{click:t.toDown}}),i("i",{staticClass:"el-icon-edit",on:{click:t.toEdit}}),i("i",{staticClass:"el-icon-delete",on:{click:t.delectItem}})]):t._e(),""!=t.dataObj.description?i("el-col",{staticStyle:{color:"#7F7F7F","line-height":"25px"},attrs:{span:21,offset:3}},[t._v("备注："+t._s(t.dataObj.description))]):t._e()],1)],1)},n=[],r={props:{showOperation:{type:Boolean,default:function(){return!1}},dataObj:{type:Object,default:function(){return{}}},canWrite:{type:Boolean,default:function(){return!0}},myVal:{}},data:function(){return{val:0}},mounted:function(){this.val=this.myVal},methods:{toUp:function(){this.$emit("toUp")},toDown:function(){this.$emit("toDown")},toEdit:function(){this.$emit("toEdit")},delectItem:function(){this.$emit("delectItem")},myValChange:function(){console.log(),this.$emit("myValChange",this.val)}}},s=r,o=(i("4db1"),i("623f")),c=Object(o["a"])(s,a,n,!1,null,"3d951a91",null);e["a"]=c.exports},"5fca":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"news-bulletin"},[i("el-card",{staticClass:"box-card"},[i("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:"消息公告",name:"first"}},[i("el-form",{ref:"form",attrs:{model:t.form,inline:!0}},[i("el-form-item",{attrs:{label:"作者："}},[i("el-input",{attrs:{placeholder:"请输入"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),i("el-form-item",{attrs:{label:"报名时间："}},[i("el-date-picker",{attrs:{format:"yyyy-MM-dd",type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.form.enrolltime,callback:function(e){t.$set(t.form,"enrolltime",e)},expression:"form.enrolltime"}})],1),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.onSubmit()}}},[t._v("查询")])],1)],1),i("div",{staticStyle:{"margin-top":"16px"}},[[i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,stripe:"","header-cell-style":{background:"rgba(243,243,244,1)"}}},[i("el-table-column",{attrs:{prop:"name",label:"名称"}}),i("el-table-column",{attrs:{prop:"time",label:"提交时间"}}),i("el-table-column",{attrs:{fixed:"right",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"text"},on:{click:function(i){return t.handleClick(e.row)}}},[t._v("查看")])]}}])})],1)]],2)],1)],1)],1)],1)},n=[],r={data:function(){return{activeName:"first",form:{name:""},tableData:[{name:"绘画比赛获奖名单",time:"2019.10.30"},{name:"绘画比赛获奖名单",time:"2019.10.30"}]}},methods:{handleClick:function(t){this.$router.push({path:"/newsBulletinDetail"})}}},s=r,o=(i("f34b"),i("623f")),c=Object(o["a"])(s,a,n,!1,null,"81722940",null);e["default"]=c.exports},"5fdd":function(t,e,i){},6076:function(t,e,i){"use strict";var a=i("5734"),n=i.n(a);n.a},"60e6":function(t,e,i){"use strict";var a=i("6310"),n=i.n(a);n.a},"622c":function(t,e,i){"use strict";var a=i("02ff"),n=i.n(a);n.a},"623e":function(t,e,i){},"623f4":function(t,e,i){"use strict";var a=i("7222"),n=i.n(a);n.a},6310:function(t,e,i){},"635d":function(t,e,i){"use strict";var a=i("2244"),n=i.n(a);n.a},6459:function(t,e,i){},"64ed":function(t,e,i){"use strict";var a=i("4015"),n=i.n(a);n.a},"65c6":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFUAAAAiCAYAAAAu0pUjAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAA6nSURBVGhD7Zn5W5RHEsf9l/fZzW4uY0gUzaGuq8aNullds1EBAeUQ0USDFyAgKCCnyCHiwSFyDDPD1H4/1W/PvKASs8/ubxbW+77dXV3Ht6r77XfcZu/pf07vQf0/0HtQfwetJ7yZNvdvDWohYUh3JmbFy+Kl5L6a9OXFUXnawH9HiQZs8xjv8Tn69K6UmssNX/8bf9Pyb+JIbwcVx/MShfmXODT83KyuP2sVvVm7NWs2o76X4pwYAuC3xswAjKI0x35vrIlJlTTSJHqUw3n6NF6gwWC8bqLNDkQUxdxiUaxpdj5h9GzmEoUe/phPjHgZmb60/NagrkvUuTSxdWzNPq0etQ9qHtmO2l7b33TfKrumbECezmscOKBS2CmK4DGQ5tjvYKVAxShd3J0lvK6OBFSmRr/gIkV9EPeoR0I8AiicdR25hMPf60QfkzfaBNjIYRbXwFsu/5JYmLwkB6d1//Bcv31zc8muqHH05oR9dGHEdjRPWfVI1p5qfE4TgIZ5W1IMPrLPKAVQNA6/Jht8wg73CK7TZtmUDm6xwrzlCYJjb2QSC1PPKZ8iM684tzTG31tBRSRmIjqP4y/EP/SsWFnTmC/9KfEtDexrW7Y/nL5jJ9tnvC8jRn5LwshmAN7ABeREfqMvmRcrhjuciJVk0pzoohHqTUzVFyu/BOi6cwA0cAQtUVwEND0eZX4D1KXMmosmi9Hv0xo4/7Bgn1W22RNFtKI+lv1D9f+r84XtqO6xkx3P7Yn6MAcFU6/TuraWQqFQBG0zMZ7PKj3rQKaAEMyJI4IemBrckWHjj+CpmZd/hdTUfJYUMFE6c3oTsD+ntpPVfMbjZPqy/GJqiZinaZIFlYzswSs5tXx+YlT3LUGF53XhRTSwYHZt4KkNa95FLfud5zptbG7J1rJs+wHwIek+3b9if6zosdohGfSRkq40YX5RnQt6oKrRQjvNT5fztgRQRYf1pP6MHmnRS+JWSG5GLTo0Ho0RKnpfJRz2UQgBvFMLUNVG30Ku4L4gxyi6XRV6E6UL2TWXARPkKKjEs+QpH0BNfAjkCoJxJj9S+9iNWfvLT722++KEXZeXp8fMvqx5YKOzWctkgbPgATDnmXhv+7L9qbLXplEgQv8GGyKvevGl8Yz9ov3i8oRZ0+hGZuyRZFATq35Ohtofm1V1LVtF10ur6XlpHVoWBAeAHqCM4cuoOq5L9yXpuiZjP8vvYSkCjIx8ZpkDPbKeVPG4Gm3SRxz0Bb+RW3No8Puh+LL0Nk+ayW33LwCLpuwmUBNAaWN4VJL7myZte8WAfd+et4/PP7FaHakOdpmVVQ/ZE9kKeVZQKp+am702pOfrmgeozf2zbrCoP0U45wmo77Td1e32VeMDK7swLp60r2qG7dvaHtt/scvuq8TQQcBPpai6fdL213bbsV8m7N+tL+yvjYN24OKQnRYSxdOH4uBe0T1ve+R/WeWw7Wuctt3nBm2P5lb3PvaEAgERUJVUXn3nYztUd8++qury9wIYBN/ZY9cd5J45fL5r5efv2e66ftvX0OO6QtKBdhOoOe2h0IKiQHDPLy/sz9WP7LYyR3vvr/P2+c9L9kH1hB2/Pe9B4hiznut5b12vVSuNZPJ463P7+Mwd65ZngLKZsEk/jrI0eekdas3Yl/XTprx5P0EBDq4qFjvVNW87znZa5/grt0k/YFd0zdrXF3qt5eGqtyHmHdXLc+fFGT+RAPiI0DvT+cS+vvbIflVGV7wiwjZ17PxNO3n1sR25NGVHrky4D54grzTtn7re02XvpSFr7HtmUzIOJt9d7LazXdMbkiRQI6Qlwkh9/5J9VD9hP2npzEjvjBy4Kkc4Tm2vHbBrQoEAQsEHp8saHtnhzrxX4DWti79U3bdmHRcAbSsiNuYfup11UB2YvGBTwNl8wYMbUGdZ3bAdbZ23GRx0EiAKblCih6+M2dFfhosfItg83K45TXOuGx8ZY7nuEnjHO+kVZKvhZXxfQWo1W+Xdgh1ofOinnFAMpC7vSa7VXvTp+QH3BR8pqoZ7M7a/edCG1Q6gcvj3LxSNJksfA2Rpd02PHbkx6YZwBqVU05XRWTvVNmJ6byWZDISL37Zmbfvlea+qMQ1+WtNnlSMFn78xdYmxhCKoh1tztrPhSUjCOiERUBi/PPjSPjnbZTcULRUMcTpYkSoCrOp6bnu0Uu7KsQUvQbO/3TH77NJC0T7VjZ0d2i6+bydKUSbrYGDtkcydaJm1XefumT4WXwP18K0Xtqt53PEhfmQ6nmbti6pO65JTsXi2WV7R+3lNRjPr7iBVuKdx2K5r05yQRVzEqWVdUcZk5ELIASD6T2jd/7H+qRub0Ty+uE70LHogUUfgcFKMxNibQQ2551rb/Uz77qCN6HkuGDYVsQMFaDrF2a76AbswsGpLmgDwh9rWBeqirxza3FvGl+zDitt2UW8k91wFtarjE6CxTZzreuVbSXxBpkHdc2nMjvdkXG5mdd11dutLZ2f1PX8RIgMloIZqJVCq7MfedftY2WIJsEVnPWzcX5b6Vf2F96YDykFQDBB7b2es7OcFn/dEag9oDzh4Y9oBX5Poa6AmfYBGIl4HNVh5Ibl/tYxY+YW+4tsWAhTmc+ybUGN300OrGcj4loDOo7df2eeXXlqDJl3WieGnvlXbdaHbznRP+R5IVGhY0x8AkZyKtmcCqdvG9RxWIlI5H99ZP6RELfiKhSiEAW1F5SqeCwM6u4Zulr8mFQKoEIL7rs/ZzqaJZNkQGIwJckG90saYXC8EZvSL+od25M6qPdPQc/E3zSN2rGPO9YSzJQdqWFdVx2+DGkqSVVGjN3N5w5D1aUJxSxUhgc/3dSHoS0JDReTenWhbsrLGWTt09akdvPzQjt16bM3jORO+bgOZgpfMiv4K3lfRPm1f1HR5pYbKQyrnPnzZOKL4XnmRBCTMehXcLm2VHAkXybJom0PpeyqTwzJOgxrCDhyf/OryJVBp/a2xz1q0xqhUd6Lugf37QcaDXslywNbXk6o6cAKqOIJ6pH3dyhtnvCpilWKPhF0fXbTyJr21pcxBTwJYlgD6rwwt2he1faZCKpbBP9oytqNmPGxZMsL+i+4nyhe/TwRQ+YpaFKgZH6tqn7Cy2i4/waRBBYsDN57Z3panbm8h0dWpvWCnksAvdiQ7r5W/jYAiSATgy78vZ59W3fPJVAJ7F8Q47AF5ZevBl3/QAjDsN3D71Jo28DvWOJJxh5bXvD6lIJFPPim5xWo70p6z8otTG0DlqxTqm16zr3XcqdObEztr6kfihS58Ep/Rprqr8o4fm9CHR0fbVm1345RvD5ZTatxPnTdl0wEQh0pdUltfb2pXtT9Scjp8mwnLP2xWFElF34p9eb7fz7AklrhapwtWfu6W9Up4LgEqAVXZEKiZbM6zyhJiCYxqcE5yZCzEhhuEQvaSfRFyYJU5dfB7AHtOdeuYHTzX4oaDcxKhOgGVj3IHVzf8EOP09x1arvWD/hw/f/0rUqyc2A9XeTOPWq9QJQmRG+TvtzrOtQxqaYZcuM1/dmiPrxv1JGBGDjg7xrT9KXyiIs+LrLJtzD9GKIyATSDGW6fW7UBdj3Wp8kgk++6pG8P2w5V7fiKIlICKJ8EbssW5b3ftHTvb/dSXMllZXEtkCqiHQ2WnCecIoF/D2/951Zo7RlwGG9w3gJrXXZ2ACgPkiXYdWWo7g7xeniTeF4QQQHxSy/a7xjE7rD2sqWfebo0XrErnzX36fP6+eczmQgj+syvL+6T2Ar58KBSpCoQ93UqgBr+JiFgrbw3ZwbpOjyPIBCl2eL4gK1uG7GhTr9Xog6Oy47F9U3HV+mYLLo8OCnMbCtOgMsAWUHF/zj6rG7AWlVrYkyI0AKsqWkcyEMZp8YHA0tjXsug/ZA8zUcRvHUWAHEWADdHRxDKgXh3N2PnO8cQTkQaZg2jsG1WGG/Sxf6Cqw/bqrfvdxUG7PbLs9iEAXZIfUd85LWeeQ5yBAAjGHSiCitytkTm70v98A6hQjH5Sghfaxu1Q9W37R1OHtU0s+mp8IQF04KteVIji8pplcxl/YkmxUe9oGLS91yZ9f6GfScERtfzEIA0iKpnyp8LP3FuxP5wZsdP9wUnkMcTeGEBNsfq5xYCeKApODYs6Lzs58AW3vSJJmEAJEB85FrEMASjSqhCizeZBsPDssqo+qdVozwGgI7nH+F5IgIqlHtKJwC4yvKDQDejE/UxCrG5sum9aUhtA5a3MAJs41dqtWWXVnXpBDFuPJlOFGKPycvqa4XfERUU4IW8eaPzvdwr2yflJO9466/sqWl29CEBhmmnGcYLBUe456XbwGaCRgLrqoCCx7gE4WGLAZRy/0UGATEUF4DNGbjw/yViItiSX7id2GEubx6M+xtJMH2NRPvn2x6Wcg8q+hwMoxvEuec0Pz+WXRuykznA3p3P2SFoeiycl1Pd8XfvLvJXXDNkHZ4bt1P2Cb/LJyk/QDI9p597ELF0XCO6IAxJx3I9x0odYOjjOFfLeAYUZD/GEWNAbQA1zMRGZduRoNp0E9z15fheGElATZq9z1iccAKuXZUmFntUp9xOdA7fXjfiPCh9V9djHZ+7ahz+2+WfasV/H7K72AJJRXI78p2Hqw4Ir4KQB4dlDxRgCREUn7BEGNXAxamRFzMtLI5zTtQRyEAbsIqh0+eRgMepIE0lIsxPzYJppjv3FhxK/DqqfIQWLgKWXbAJUPEI0CbhT/Tmr1Ef4j90ZuyLEH8hXjiOORTSa1Uw/OmkwBSr6kIsAeAUSLFXoCNDUHcadxLXQn9yjDXVweOesCYDogkNFvg1UWU0qPuhIUbGoYA1GO5GjL8yNmXZdCScC/ntqiUJnicMVRwGApUXlRo7Ljb0MoIg3zBK5E7GnpCsyIxvkedocxGaOk3l+A8Xht1OUEKf1vo3SMpu5aOx1nW8B9X9NJZ2/WzuO/r8oAvQ2iuO/kzeB+p420BsAexd+D+pW9AbA3oXfg7oVvQGwd+H3oG5FbwDst9nsPzmErqaHdhaOAAAAAElFTkSuQmCC"},"665c":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAARySURBVEhLhZXLTxtXFMb5Y5omqcE84hDeMYYQQJCmUqs0iy4qdVN1ValSV11V7ToFP8bMeDy200VWrapG2dCWpFIiqhIo4U14GAgvg3n5gY3x1+9cA3Ua1I70zePeO785891z7i05ALBFrVGvirRxouI2kYw7lTyvUEsnV2nbppJUiTTedQ/glncEbdoMWv0v4fTOoVFbhMtYgcu/iBvGItr1ZTRrC2gNvMJ175JSs7aq5NJW0KFH8a5nFB/1PlYfLJniqdM3ijp9HZWBFMoDWZRZxyi1AHsgjdq+DdT1zKKxdwZN2jIqfTFUWTnY2X/ZLMhGOfjc0LeF294XmBXwNE8d2hhq9S0FtZt8ibL5Eqj3raJ3GBikX9N5YIRjPfMEGEsoN1O4SNjblFzLQkC1vo0u7xiEeQauDsQL0ECekWdx1R/HZ49SIAc56pgS/8TLb/kxGS/AtwgU2cLAVYI7fUXgm/4xODjQFhQwf8tI4boRhRUFNhlpOpXhqAJcJmaAs+3yb6A0CFyIFKQi7tsheKLYilFUmXFcFu8UOAGnMYcfCNhl/1E6JWeqcJ7kd25oG7SDNjDSC/cJDufPB59GXGrmURVIcCKi6GeIO+zPHeWRyxWilogXqVYtpsCXCL4Y4WSHjpV9Hd5xzLD/TTBVaSZQ41/FE/bFqEOxI5dV0cqHJJOc/h0FfocWXIocqUz6T7DNyqI8mFAT8eVTYJn9CUrMOKQWqN6/gCY9gQp6LBbYIsymUO5NKzq1EVQbuyfgQ9gJrrbSaPHM4jFTQXwWC6RKB/mFD/QpNOqpE3AOZRG+87/gUIrFkVJ53BGK46sfp7DOMVlKSvbrR1F06/OoM7IKbA8z2vAhKgi+pu+eA6YVpUEOsvZRFdxiRDHcMRfwO00WXyVigf9C+qcPomjzr6Oe2XMllIA9wuiLwGced2rP0RDZRxkH1gTjaHRP4JvfdtXsC1COY5aJFEqakgk1hvK4pU2hwhtFeSjJeTlCTWAPXdpkoUAk7C7tT7Q9SLIkY/jkYRL99HGeFMmCdFpQcpzWX6Fd/B7h4+f9SbSEY3CYyTOwZE2JlOx7vqeocU/ii2dMfj6r3KUymQySB3u8KzqEzc4sfZFMkRI3+e9NxhbqzP1/wPK773ufoPv+Cn7mvaTTPiV+ig1SFhKzRCiS9gzh+7yJMXSZWFmcnMamAovHCix5eofrcZv+Et+TMsjnIb44xutzapyaoF6cSO6lj6mMPyimOn6iaq2918GrPN11/8qFm4t8JI7bkRXV2c4Kcn03jJvuEXR6htDue8a2QbR7htHmGUeLd1q909A3hwr3LByhtAJL5Smw/IqAXaFNtcZeC6dh922iwTpQ1XeFBSMv1Vo7qLe2Uc9JqjWzzB4WhHmoxpfpcTjCx6+DN3n6uOchuriLNPcVtiN1ZUSya9Rx66n3r8HJbanFN4dmH7co75qSk9tTK7ewhnsT6Agsods/hQ97BsDVFiWSAacb5+kmKfr3Zlrcdp6kX4IUXgLA35OYGYfU4tl1AAAAAElFTkSuQmCC"},"66ad":function(t,e,i){"use strict";var a=i("6f4b"),n=i.n(a);n.a},"66f8":function(t,e,i){},"679f":function(t,e,i){"use strict";var a=i("6459"),n=i.n(a);n.a},"68b4":function(t,e,i){"use strict";var a=i("7c8f"),n=i.n(a);n.a},6914:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"work-score-container"},[i("el-card",{staticStyle:{"min-height":"600px"}},[i("works-preview",{ref:"WorksPreview",attrs:{id:t.queryId,inscore:"1",workDetail:!1}}),i("el-tabs",{model:{value:t.activeDetail,callback:function(e){t.activeDetail=e},expression:"activeDetail"}},[i("el-tab-pane",{attrs:{label:"评分信息",name:"detail"}},[i("div",{staticStyle:{width:"900px"}},[i("el-row",[i("el-form",{ref:"form",attrs:{model:t.form2,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"评分：",rules:{required:!0,message:"评分不能为空",trigger:"blur"}}},[i("el-input",{staticStyle:{width:"200px"},attrs:{onkeyup:"value=value.replace(/[^\\d]/g,'')",placeholder:"请输入0-100整数",clearable:"",size:"small",maxlength:"3"},on:{input:function(e){return t.checkScore(t.form2.score)}},model:{value:t.form2.score,callback:function(e){t.$set(t.form2,"score",e)},expression:"form2.score"}}),i("span",{staticStyle:{"padding-left":"10px"}},[t._v("分")]),i("span",{staticStyle:{color:"#999999","margin-left":"20px"}},[t._v("( 满分100，90以上优秀，80以上优良，70以上较好， 60以下较差 )")])],1),i("el-form-item",{attrs:{label:"评语：",rules:{required:!0,message:"评语不能为空",trigger:"blur"}}},[i("el-input",{attrs:{type:"textarea",rows:6,placeholder:"请输入评语"},model:{value:t.form2.comment,callback:function(e){t.$set(t.form2,"comment",e)},expression:"form2.comment"}})],1)],1)],1)],1)])],1),i("el-row",[i("el-col",{attrs:{span:2,offset:11}},[i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.goToScore(t.queryId)}}},[t._v("提交评分")])],1)],1)],1),i("el-dialog",{attrs:{title:"提示",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("span",[t._v("当前已评完，继续评分?")]),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){return t.$router.go(-1)}}},[t._v("返 回")]),i("el-button",{attrs:{type:"primary"},on:{click:t.open}},[t._v("下一份")])],1)])],1)},n=[],r=i("46b4"),s=i.n(r),o=i("408b"),c=i("0210"),l=i("9e1e"),u=i("f753"),d=i.n(u);function p(t,e,i,a,n,r,s){try{var o=t[r](s),c=o.value}catch(l){return void i(l)}o.done?e(c):Promise.resolve(c).then(a,n)}function h(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var r=t.apply(e,i);function s(t){p(r,a,n,s,o,"next",t)}function o(t){p(r,a,n,s,o,"throw",t)}s(void 0)}))}}var m={data:function(){return{activeName:"look",activeDetail:"detail",author:[],teacher:[],attachment:[],workDetail:{},form2:{score:parseInt(this.$route.query.score),comment:this.$route.query.comment.toString()},apiKey:Object(c["getCookie"])("x-api-key"),queryId:parseInt(this.$route.query.id),dialogVisible:!1,tableData:[]}},components:{WorksPreview:l["a"]},mounted:function(){this.getWorksList()},created:function(){},methods:{getWorksList:function(){var t=h(s.a.mark((function t(){var e,i;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this,i={},i.url=o["a"].enroll,i.inscore=1,i.scored=0,i.ball=1,i.expand="info,works,professional",t.next=9,this.axiosGet(i).then((function(t){e.tableData=[];var i=t.items;e.tableData=i;for(var a=0;a<e.tableData.length;a++)e.tableData[a].score=e.tableData[a].professional.map((function(t){return t.score<0?t.score=0:t.score/10})),e.tableData[a].comment=e.tableData[a].professional.map((function(t){return t.comment}))})).catch((function(t){}));case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),checkScore:function(t){var e=/^[0-9]+.?[0-9]*$/;e.test(t)?t>100&&this.$message({message:"请按照规则进行评分",type:"warning"}):this.$message({message:"请按照规则进行评分",type:"warning"})},goToScore:function(t){var e=this,i=/^[0-9]+.?[0-9]*$/,a={ids:[]};if(a.ids[0]=t,i.test(e.form2.score)&&parseInt(e.form2.score)<=100){a.score=10*parseInt(e.form2.score),a.comment=e.form2.comment;var n=[];n.push(a),d.a.post(o["a"].scoring,n,{headers:{"x-api-key":e.apiKey}}).then((function(t){-1==t.data.code?e.$message({type:"error",message:t.data.message}):0==t.data.code&&(e.dialogVisible=!0,e.getWorksList())}))}else this.$message({message:"请按照规则进行评分",type:"warning"})},open:function(){var t=this;this.tableData.length>0?(this.queryId=this.tableData[0].id,console.log("queryId===",this.queryId),this.$refs.WorksPreview.getActivityDetail(this.queryId),this.form2.score=0,this.form2.comment="",t.dialogVisible=!1):t.$message({type:"error",message:"已评完，没有下一份了"})},goback:function(){this.$router.push({path:"/workReview"})}}},f=m,v=(i("398a"),i("623f")),g=Object(v["a"])(f,a,n,!1,null,"4aa51476",null);e["default"]=g.exports},"691f":function(t,e,i){"use strict";var a=i("9a7a"),n=i.n(a);n.a},"6a5d":function(t,e,i){"use strict";var a=i("bf3d"),n=i.n(a);n.a},"6a7a":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"import-expert-container"},[i("el-dialog",{attrs:{center:"",title:"奖项",visible:t.dialogVisible,width:"400px","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("el-input",{attrs:{size:"small",placeholder:"请输入奖项"},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}}),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},["add"==t.operate?i("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.addPrize}},[t._v("确 定")]):t._e(),"edit"==t.operate?i("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.editPrize}},[t._v("确 定")]):t._e()],1)],1),i("el-card",{staticStyle:{"min-height":"600px"}},[i("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:"奖项设置",name:"importExpert"}},[i("el-row",[i("el-col",{attrs:{span:8}},[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.dialogVisible=!0,t.operate="add"}}},[t._v("添加奖项")])],1)],1),i("el-row",[i("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"","header-cell-style":{background:"#EEEEEE",color:"#323232"},"tooltip-effect":"dark"}},[i("el-table-column",{attrs:{type:"index",label:"序号",width:"100"}}),i("el-table-column",{attrs:{prop:"title",label:"奖项"}}),i("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return t.goToEdit(e.row)}}},[t._v("编辑")]),i("el-button",{staticStyle:{color:"red"},attrs:{type:"text",size:"small"},on:{click:function(i){return t.goToDelete(e.row.id)}}},[t._v("删除")])]}}])})],1)],1),i("el-row",{staticClass:"page-div"},[i("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[20,30,40,50,100],"page-size":t.perPage,layout:"total, sizes, prev, pager, next, jumper",total:t.totalCount},on:{"size-change":t.pageSizeChange,"current-change":t.pageCurrentChange}})],1)],1)],1)],1)],1)},n=[],r=i("46b4"),s=i.n(r),o=i("408b");function c(t,e,i,a,n,r,s){try{var o=t[r](s),c=o.value}catch(l){return void i(l)}o.done?e(c):Promise.resolve(c).then(a,n)}function l(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var r=t.apply(e,i);function s(t){c(r,a,n,s,o,"next",t)}function o(t){c(r,a,n,s,o,"throw",t)}s(void 0)}))}}var u={data:function(){return{dialogVisible:!1,activeName:"importExpert",tableData:[],multipleSelection:[],perPage:20,currentPage:1,totalCount:0,input:"",id:"",operate:"add"}},mounted:function(){var t={"per-page":this.perPage};t.page=this.currentPage,this.getAward(t)},methods:{getAward:function(){var t=l(s.a.mark((function t(e){var i=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.url=o["a"].award,t.next=3,this.axiosGet(e).then((function(t){i.tableData=t.items,i.totalCount=t._meta.totalCount})).catch((function(t){return t}));case 3:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),addPrize:function(){var t=l(s.a.mark((function t(){var e,i=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e={},""!=this.input){t.next=6;break}return this.$message({type:"warning",message:"请输入奖项名称"}),t.abrupt("return");case 6:return e.url=o["a"].award,e.title=this.input,t.next=10,this.axiosPost(e).then((function(t){i.$message({type:"success",message:"添加成功！"}),i.handleClose();var e={"per-page":i.perPage};e.page=i.currentPage,i.getAward(e)})).catch((function(t){return t}));case 10:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),goToEdit:function(t){this.dialogVisible=!0,this.input=t.title,this.operate="edit",this.id=t.id},editPrize:function(){var t=l(s.a.mark((function t(){var e,i=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={},e.id=this.id,e.title=this.input,e.url=o["a"].award,t.next=6,this.axiosPut(e).then((function(t){i.$message({type:"success",message:"编辑成功！"}),i.handleClose();var e={"per-page":i.perPage};e.page=i.currentPage,i.getAward(e)})).catch((function(t){return t}));case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),goToDelete:function(t){this.open(t)},open:function(t){var e=this;this.$confirm("此操作将永久删除该奖项, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.deleteItem(t)})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},deleteItem:function(){var t=l(s.a.mark((function t(e){var i,a=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i={},i.url=o["a"].award,i.id=e,t.next=5,this.axiosDelete(i).then((function(t){a.$message({type:"success",message:"删除成功!"});var e={"per-page":a.perPage};e.page=a.currentPage,a.getAward(e)})).catch((function(t){a.$message({type:"error",message:"无权限操作"})}));case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),pageSizeChange:function(t){this.perPage=t;var e={"per-page":this.perPage};e.page=this.currentPage,this.getAward(e)},pageCurrentChange:function(t){this.currentPage=t;var e={"per-page":this.perPage};e.page=this.currentPage,this.getAward(e)},handleClose:function(){this.input="",this.dialogVisible=!1}}},d=u,p=(i("d35c"),i("623f")),h=Object(p["a"])(d,a,n,!1,null,null,null);e["default"]=h.exports},"6b57":function(t,e,i){"use strict";var a=i("f2d8"),n=i.n(a);n.a},"6b6d":function(t,e,i){},"6c54":function(t,e,i){"use strict";var a=i("47c5"),n=i.n(a);n.a},"6c57":function(t,e,i){},"6cca":function(t,e,i){"use strict";var a=i("bf7b"),n=i.n(a);n.a},"6ccd":function(t,e,i){t.exports=i.p+"img/pen2.7472d30a.svg"},"6cf9":function(t,e,i){"use strict";var a=i("e4ea"),n=i.n(a);n.a},"6dbf":function(t,e,i){},"6df1":function(t,e,i){"use strict";var a=i("f0f7"),n=i.n(a);n.a},"6eea":function(t,e,i){},"6f4b":function(t,e,i){},7222:function(t,e,i){},7317:function(t,e,i){},7342:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"activity-list"},t._l(t.activityList,(function(e,a){return i("div",{key:a,staticClass:"activity-self",on:{click:function(i){return t.onActivityDetail(e)}}},[e.ActivityLogo?i("div",{staticClass:"activity-img"},[i("img",{attrs:{src:e.ActivityLogo,alt:""}})]):t._e(),i("div",{staticClass:"activity-tex"},[i("div",{staticClass:"avtive-title"},[i("span",{staticStyle:{"margin-right":"10px"}},[t._v(t._s(e.ActivityName))])])])])})),0)},n=[],r=i("46b4"),s=i.n(r);function o(t,e,i,a,n,r,s){try{var o=t[r](s),c=o.value}catch(l){return void i(l)}o.done?e(c):Promise.resolve(c).then(a,n)}function c(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var r=t.apply(e,i);function s(t){o(r,a,n,s,c,"next",t)}function c(t){o(r,a,n,s,c,"throw",t)}s(void 0)}))}}var l={props:{activityList:{type:Array,default:function(){}},goToDetail:String},data:function(){return{isShadeShow:!0,Current:"",activityStageList:[],newList:[],day:""}},methods:{onActivityDetail:function(){var t=c(s.a.mark((function t(e){return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:"excellentWork"==this.goToDetail?this.$router.push({path:"/excellentWork/index",query:{id:e.ActivityId,name:e.ActivityName}}):"activityDetail"==this.goToDetail?this.$router.push({path:"/activity/process",query:{ActivityId:e.ActivityId,stage:"STAGE_WORK_SHOW"}}):"excellentWorkDetail"==this.goToDetail&&this.$router.push({path:"/excellentWork/excellentWorkDetail",query:{WorkId:e.WorkId,WorkName:e.Title}});case 1:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),playVideo:function(t){event.target.paused?event.target.play():(event.target.pause(),t.tag=!0)},onShade:function(t,e){var i=document.getElementById(e);t.tag=!1,i.paused?(t.tag=!1,i.play()):i.pause()}}},u=l,d=(i("dc71"),i("623f")),p=Object(d["a"])(u,a,n,!1,null,"450a44cd",null);e["a"]=p.exports},"73cf":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"add-expert-container"},[i("el-card",{staticStyle:{"min-height":"600px"}},[i("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:"添加专家",name:"addExpert"}},[i("div",{staticClass:"add-expert-item"},[i("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,rules:t.rules,"label-width":"200px"}},[i("el-form-item",{attrs:{label:"电话号码",prop:"mobile"}},[i("el-input",{attrs:{placeholder:"请输入电话号码",maxlength:"11",size:"small",disabled:t.isHave},on:{change:t.mobileChange},model:{value:t.ruleForm.mobile,callback:function(e){t.$set(t.ruleForm,"mobile",e)},expression:"ruleForm.mobile"}})],1),i("el-form-item",{attrs:{label:"姓名",prop:"name"}},[i("el-input",{attrs:{placeholder:"请输入姓名",size:"small",disabled:t.isHave},model:{value:t.ruleForm.name,callback:function(e){t.$set(t.ruleForm,"name",e)},expression:"ruleForm.name"}})],1),i("el-form-item",{attrs:{label:"专家介绍",prop:"des"}},[i("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输填写专家介绍"},model:{value:t.ruleForm.des,callback:function(e){t.$set(t.ruleForm,"des",e)},expression:"ruleForm.des"}})],1),i("el-form-item",[t.isHave?t._e():[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.submitForm()}}},[t._v("确定")]),i("el-button",{attrs:{type:"info",size:"small",plain:""},on:{click:function(e){return t.onCancel()}}},[t._v("取消")])],t.isHave?[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.onUpdate()}}},[t._v("确定修改")]),i("el-button",{attrs:{type:"info",size:"small",plain:""},on:{click:function(e){return t.onCancel()}}},[t._v("取消")])]:t._e()],2)],1)],1)])],1)],1)],1)},n=[],r=i("46b4"),s=i.n(r),o=i("408b");function c(t,e,i,a,n,r,s){try{var o=t[r](s),c=o.value}catch(l){return void i(l)}o.done?e(c):Promise.resolve(c).then(a,n)}function l(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var r=t.apply(e,i);function s(t){c(r,a,n,s,o,"next",t)}function o(t){c(r,a,n,s,o,"throw",t)}s(void 0)}))}}var u={data:function(){return{activeName:"addExpert",ruleForm:{name:"",mobile:"",des:""},id:"",role_id:[5],area_id:[],isHave:null,rules:{name:[{required:!0,message:"请输入姓名",trigger:"change"}],mobile:[{required:!0,message:"请输入电话号码",trigger:"blur"}],des:[{required:!0,message:"请填写专家介绍",trigger:"change"}]}}},mounted:function(){},methods:{mobileChange:function(){var t=l(s.a.mark((function t(){var e,i=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e={},e.url=o["a"].user,e.expand="memberAuth,memberInfo,roleInfo",11!=this.ruleForm.mobile.length){t.next=7;break}return e.mobile=this.ruleForm.mobile,t.next=7,this.axiosGet(e).then((function(t){if(i.isHave=t.items.length>0,t.items.length>0){i.id=t.items[0].id,i.$message({type:"success",message:"该用户已存在，可以直接修改角色"}),i.ruleForm={name:"",mobile:"",des:""};var e={};e.id=i.id,e.expand="memberAuth,memberInfo,roleInfo",i.getUserInfo(e)}})).catch((function(t){return t}));case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getUserInfo:function(){var t=l(s.a.mark((function t(e){var i,a,n;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.url=o["a"].user,t.next=3,this.axiosGet(e).catch((function(t){return t}));case 3:if(i=t.sent,void 0!=i.roleInfo)for(a in this.ruleForm.name=i.name,this.ruleForm.mobile=i.mobile,i.roleInfo)if(this.role_id[0]!==parseInt(i.roleInfo[a].id)&&this.role_id.push(parseInt(i.roleInfo[a].id)),5==parseInt(i.roleInfo[a].id)&&(this.ruleForm.des=i.roleInfo[a].description),void 0!=i.roleInfo[a].areas)for(n in i.roleInfo[a].areas)this.area_id.push(parseInt(i.roleInfo[a].areas[n].id));case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),submitForm:function(){var t=l(s.a.mark((function t(){var e,i=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={},e.name=this.ruleForm.name,e.mobile=this.ruleForm.mobile,e.description=this.ruleForm.des,e.role_id=this.role_id,e.url=o["a"].user,t.next=8,this.axiosPost(e).then((function(t){void 0!=t.id&&""!=t.id?(i.$message({type:"success",message:"添加成功！"}),setTimeout((function(){i.$router.go(-1)}),1e3)):i.$message({type:"warning",message:"添加失败"})})).catch((function(t){return t}));case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),onUpdate:function(){var t=l(s.a.mark((function t(){var e,i=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={},e.name=this.ruleForm.name,e.mobile=this.ruleForm.mobile,e.description=this.ruleForm.des,e.role_id=this.role_id,e.area_id=this.area_id,e.id=this.id,e.url=o["a"].user,t.next=10,this.axiosPut(e).then((function(t){i.$message({type:"success",message:"修改成功！"}),setTimeout((function(){i.$router.go(-1)}),1e3)})).catch((function(t){return t}));case 10:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),onCancel:function(){this.$router.go(-1)}}},d=u,p=(i("c34b"),i("623f")),h=Object(p["a"])(d,a,n,!1,null,"6d6dc1ff",null);e["default"]=h.exports},"74e4":function(t,e,i){"use strict";var a=i("3495"),n=i.n(a);n.a},"74e7":function(t,e,i){t.exports=i.p+"img/ac3.1ac19d55.png"},7546:function(t,e,i){"use strict";var a=i("e5b6"),n=i.n(a);n.a},"75a6":function(t,e,i){t.exports=i.p+"img/2.eb48de81.png"},"769a":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"publish-manage"},[a("div",{staticClass:"action-bar"},[a("div",{staticClass:"icon",on:{click:function(e){return t.$router.back(-1)}}},[a("img",{staticClass:"el-icon-back",attrs:{src:i("ad0f")}})]),a("div",{staticClass:"btn"},[a("el-button",{attrs:{type:"primary",disabled:t.lockAction},on:{click:t.save}},[t._v("保存")]),a("el-button",{attrs:{disabled:t.lockAction},on:{click:t.preview}},[t._v("预览")])],1)]),a("div",{staticClass:"manage-content"},[a("div",{staticClass:"content-component"},[t._m(0),a("div",{staticClass:"component-list"},t._l(t.componentList,(function(e,i){return a("activity-component-list",{key:i,attrs:{type:e.type,name:e.name,text:e.text},nativeOn:{click:function(i){return t.addComponent(e)}}})})),1)]),a("div",{staticClass:"content-show"},[a("div",{staticClass:"activity-edit"},[0==t.selectedComponents.length?a("div",{staticStyle:{"text-align":"center"}},[t._v("请点击左侧组件进行添加")]):t._l(t.selectedComponents,(function(e,n){return a("component-item",{key:n,class:n==t.selectedIndex?"item-active":"",attrs:{type:e.type,name:e.name,text:e.text,url:e.url||"",styleType:e.styleType},nativeOn:{click:function(i){return t.editStyle(n,e)}}},[n==t.selectedIndex?a("div",{staticClass:"action-icon",attrs:{slot:"action"},slot:"action"},[a("img",{staticClass:"action-up",attrs:{src:i("e3ba")},on:{click:function(e){return e.stopPropagation(),t.moveUp(e)}}}),a("img",{staticClass:"action-down",attrs:{src:i("d47b")},on:{click:function(e){return e.stopPropagation(),t.moveDown(e)}}}),a("img",{staticClass:"action-delete",attrs:{src:i("9dc9")},on:{click:function(e){return e.stopPropagation(),t.deleteItem(e)}}})]):t._e()])}))],2)]),a("div",{staticClass:"content-style"},[a("div",{staticClass:"title"},[-1==t.fileType.indexOf(t.curEditComponent.type)?a("span",[t._v("样式选择")]):"picture"==t.curEditComponent.type?a("span",[t._v("图片源")]):"video"==t.curEditComponent.type?a("span",[t._v("视频源")]):"audio"==t.curEditComponent.type?a("span",[t._v("音频源")]):t._e()]),t.curEditComponent.show?a("style-edit",{ref:"styleEdit",attrs:{type:t.curEditComponent.type,name:t.curEditComponent.name,styleType:t.curEditComponent.styleType,text:t.curEditComponent.text,url:t.curEditComponent.url},on:{changeTypeText:t.changeTypeText,addFile:t.addFileComponent,uploading:t.changeStatus}}):t._e()],1)]),a("el-dialog",{attrs:{title:"预览",visible:t.dialog.preview.show,width:"350px"},on:{"update:visible":function(e){return t.$set(t.dialog.preview,"show",e)}}},[a("div",{staticClass:"preview-box"},[a("vue-qr",{attrs:{size:200,dotScale:1,text:t.previewUrl}}),a("div",[t._v("预览二维码仅限于查看编辑效果，短期内会失效。")])],1)])],1)},n=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"title"},[i("span",[t._v("组件")])])}],r=i("46b4"),s=i.n(r),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"activity-component"},[a("el-card",{staticClass:"activity-component-card"},[a("div",{staticClass:"activity-component-content"},["picture"==t.type?a("div",{staticClass:"component-video"},[a("img",{staticClass:"video-img",attrs:{src:i("49da")}})]):"video"==t.type?a("div",{staticClass:"component-video"},[a("img",{staticClass:"video-img",attrs:{src:i("49da")}}),a("img",{staticClass:"play-img",attrs:{src:i("3f49")}})]):"audio"==t.type?a("div",{staticClass:"component-audio"},[a("div",{staticClass:"time-left"},[t._v("00:20")]),a("div",{staticClass:"timeline"},[a("div",{staticClass:"time-use"})]),a("div",{staticClass:"time-total"},[t._v("02:20")])]):a("component-item",{attrs:{type:t.type,name:t.name,text:t.text,styleType:t.styleType}})],1),a("div",{staticClass:"divider"}),a("div",{staticClass:"type-name"},[t._v(t._s(t.name))])])],1)},c=[],l=i("b6cc"),u={props:{type:{type:String,required:!0},name:{type:String,required:!0},text:{type:String}},components:{ComponentItem:l["a"]},data:function(){return{videoUrl:"https://courseware-1259194201.cos.ap-guangzhou.myqcloud.com/1113/4/1566364986-7547264871797397412",audioUrl:"https://saas-develop-1255701415.cos.ap-guangzhou.myqcloud.com/gouzhong.mp3",styleType:2}}},d=u,p=(i("9bc0"),i("623f")),h=Object(p["a"])(d,o,c,!1,null,null,null),m=h.exports,f=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"component-style-edit"},[t.showInputList.indexOf(t.type)>-1?i("div",[i("div",{staticClass:"edit-title"},[t._v("文本内容编辑")]),i("el-input",{staticClass:"text-input",attrs:{type:"textarea",placeholder:"内容编辑"},model:{value:t.myText,callback:function(e){t.myText=e},expression:"myText"}}),i("div",{staticClass:"edit-title"},[t._v("样式风格选择")]),t._l(t.styleTypeList,(function(e){return i("el-card",{key:e,staticClass:"card-item"},[i("component-item",{attrs:{"style-type":e,type:t.type,name:t.name,text:t.myText},nativeOn:{click:function(i){return t.selectStyle(e)}}}),t.selectedStyleType==e?i("i",{staticClass:"select el-icon-circle-check"}):t._e()],1)}))],2):i("div",{staticClass:"upload-action"},["picture"==t.type?i("div",[i("el-button",{on:{click:t.uploadFile}},[t._v(t._s(t.myUrl?"更换图片":"上传图片"))]),i("span",{staticClass:"tip"},[t._v("支持jpg、jpeg、png格式，不超过2M")])],1):t._e(),"video"==t.type?i("div",[i("el-button",{on:{click:t.uploadFile}},[t._v(t._s(t.myUrl?"更换视频":"上传视频"))]),i("span",{staticClass:"tip"},[t._v("支持mp4格式")])],1):t._e(),"audio"==t.type?i("div",[i("el-button",{on:{click:t.uploadFile}},[t._v(t._s(t.myUrl?"更换音频":"上传音频"))]),i("span",{staticClass:"tip"},[t._v("支持mp3格式")])],1):t._e(),t.myUrl?i("div",{staticClass:"file-list"},[t._v("\n      "+t._s(t.myText)+"\n    ")]):t._e(),"audio"==t.type?i("div",[i("div",{staticClass:"edit-title",staticStyle:{"margin-top":"20px"}},[t._v("样式风格选择")]),t._l(t.styleTypeList,(function(e){return i("el-card",{key:e,staticClass:"card-item"},[i("component-item",{attrs:{"style-type":e,type:t.type,name:t.name,text:t.myText,static:!0},nativeOn:{click:function(i){return t.selectStyle(e)}}}),t.selectedStyleType==e?i("i",{staticClass:"select el-icon-circle-check"}):t._e()],1)}))],2):t._e()]),i("cos",{ref:"cos",attrs:{"valid-list":t.validList,limit:t.fileLimit},on:{success:t.uploadSuccess,start:t.uploadStart}})],1)},v=[],g=i("af32"),y={components:{Cos:g["a"],ComponentItem:l["a"]},props:{type:{type:String,required:!0},name:{type:String,required:!0},styleType:{type:Number,default:2},text:{type:String,default:""},url:{type:String}},data:function(){return{myText:"",selectedStyleType:"",myUrl:"",styleTypeList:[1,2,3],maxLength:30,showInputList:["title","secTitle","content","button"],validList:["mp4"],fileLimit:200}},watch:{myText:function(t){this.$emit("changeTypeText",{type:this.selectedStyleType,url:this.myUrl,text:t})},text:function(t){this.myText=t},url:function(t){this.myUrl=t},type:function(t){this.maxLength="content"==t?600:10,this.styleTypeList="title"==t?[1,2,3,4]:[1,2,3],this.setFileType(t)}},mounted:function(){this.myText=this.text,this.myUrl=this.url,this.selectedStyleType=this.styleType,"title"==this.type?this.styleTypeList=[1,2,3,4]:this.styleTypeList=[1,2,3],this.setFileType(this.type)},methods:{selectStyle:function(t,e,i){this.selectedStyleType=t,"undefined"!=typeof e&&(this.myText=e),"undefined"!=typeof i&&(this.myUrl=i),this.$emit("changeTypeText",{type:this.selectedStyleType,text:this.myText,url:this.myUrl})},uploadSuccess:function(t){var e="https://"+t.Location;this.myUrl=e,this.myText=t.filename,this.$emit("addFile",{url:e,name:this.name,filename:t.filename,styleType:this.selectedStyleType,type:this.type})},clearUrlAndText:function(){this.myText="",this.myUrl=""},setFileType:function(t){"picture"==t?(this.validList=["png","jpg","jpeg"],this.fileLimit=2):"video"==t?(this.validList=["mp4"],this.fileLimit=200):"audio"==t&&(this.validList=["mp3"],this.fileLimit=100)},uploadStart:function(){this.$emit("uploading",!0)},uploadFile:function(){this.$refs.cos.$refs.fileEle.dispatchEvent(new MouseEvent("click"))}}},b=y,w=(i("679f"),Object(p["a"])(b,f,v,!1,null,null,null)),x=w.exports,k=i("0210"),_=i("4579"),C=i.n(_);function S(t,e,i,a,n,r,s){try{var o=t[r](s),c=o.value}catch(l){return void i(l)}o.done?e(c):Promise.resolve(c).then(a,n)}function T(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var r=t.apply(e,i);function s(t){S(r,a,n,s,o,"next",t)}function o(t){S(r,a,n,s,o,"throw",t)}s(void 0)}))}}var L={name:"activity-center",components:{ActivityComponentList:m,ComponentItem:l["a"],StyleEdit:x,VueQr:C.a},data:function(){return{msg:"活动发布与管理",componentList:[{type:"title",name:"主标题",text:"这是一个标题"},{type:"content",name:"内容",text:"这是内容这是内容这是内容这是内容这是内容这是内容这是内容这是内容这是内容这是内容这是内容这是"},{type:"secTitle",name:"段落标题",text:"赛事流程安排"},{type:"video",name:"视频",text:""},{type:"audio",name:"音频",text:""},{type:"picture",name:"图片",text:""},{type:"button",name:"按钮",text:"报名入口"}],videoUrl:"https://courseware-1259194201.cos.ap-guangzhou.myqcloud.com/1113/4/1566364986-7547264871797397412",audioUrl:"https://saas-develop-1255701415.cos.ap-guangzhou.myqcloud.com/gouzhong.mp3",styleType:2,selectedComponents:[],curEditComponent:{index:0,show:!1,name:"",styleType:"",text:"",type:"",url:""},selectedIndex:0,fileType:["picture","video","audio"],dialog:{preview:{show:!1},publish:{show:!1}},previewUrl:"",ActivityId:"",previewPageId:"",uploading:!1}},computed:{lockAction:function(){return 0==this.selectedComponents.length}},mounted:function(){this.ActivityId=this.$route.query.id||"",this.getPage()},methods:{changeStatus:function(t){this.uploading=t},addComponent:function(t){var e=this;t.styleType=2,t.url="",this.selectedComponents.push(t),this.editStyle(this.selectedComponents.length-1,t),setTimeout((function(){e.fileType.indexOf(t.type)>-1&&e.$refs.styleEdit.clearUrlAndText()}))},addFileComponent:function(t){this.uploading=!1;var e=this.selectedComponents[this.selectedIndex];e.text=t.filename,e.url=t.url,this.$set(this.selectedComponents,this.selectedIndex,e)},editStyle:function(t,e){var i=this;if(this.uploading)return this.$message.error("请先等待上传完成");if(e){for(var a in e)this.curEditComponent[a]=e[a];this.curEditComponent.show=!0,this.selectedIndex=t,setTimeout((function(){i.$refs.styleEdit.selectStyle(e.styleType,e.text,e.url)}))}},changeTypeText:function(t){var e={name:this.curEditComponent.name,styleType:t.type,text:t.text,type:this.curEditComponent.type,url:t.url};this.$set(this.selectedComponents,this.selectedIndex,e)},moveUp:function(){this.uploading||0!=this.selectedIndex&&(Object(k["swapItems"])(this.selectedComponents,this.selectedIndex,this.selectedIndex-1),this.selectedIndex-=1)},moveDown:function(){this.uploading||this.selectedIndex!=this.selectedComponents.length-1&&(Object(k["swapItems"])(this.selectedComponents,this.selectedIndex,this.selectedIndex+1),this.selectedIndex+=1)},deleteItem:function(){if(!this.uploading){this.selectedComponents.splice(this.selectedIndex,1),0!=this.selectedIndex&&(this.selectedIndex-=1);var t=this.selectedComponents[this.selectedIndex];this.editStyle(this.selectedIndex,t)}},preview:function(){var t=T(s.a.mark((function t(){var e;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosPost({url:"/v1/page/SavePreviewPage",ActivityId:this.ActivityId,Content:JSON.stringify(this.selectedComponents)}).catch((function(t){return t}));case 2:e="127.0.0.1"==location.hostname?"https://upclass.educloud.tencent.com":location.protocol+"//"+location.host,this.previewUrl="".concat(e,"/h5/?ActivityId=").concat(this.ActivityId,"&preview=1"),this.dialog.preview.show=!0;case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),save:function(){var t=T(s.a.mark((function t(){var e;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.checkComponents()){t.next=2;break}return t.abrupt("return",this.$message.error("请讲内容补充完整"));case 2:return t.next=4,this.axiosPost({url:"/v1/page/SavePage",ActivityId:this.ActivityId,PageId:this.PageId,Content:JSON.stringify(this.selectedComponents)}).catch((function(t){return t}));case 4:if(e=t.sent,"OK"==e.ErrorCode){t.next=7;break}return t.abrupt("return");case 7:this.$message.success("保存成功");case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getPage:function(){var t=T(s.a.mark((function t(){var e,i,a=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/page/GetPage",ActivityId:this.ActivityId}).catch((function(t){return t}));case 2:if(e=t.sent,"OK"==e.ErrorCode){t.next=5;break}return t.abrupt("return");case 5:if(i=e.Data.Content,i){t.next=8;break}return t.abrupt("return");case 8:this.selectedComponents=JSON.parse(i),setTimeout((function(){var t=a.selectedComponents[0];t&&a.editStyle(0,t)}));case 10:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),checkComponents:function(){var t=!0,e=!1,i=void 0;try{for(var a,n=this.selectedComponents[Symbol.iterator]();!(t=(a=n.next()).done);t=!0){var r=a.value;if(this.fileType.indexOf(r.type)>-1){if(!r.url)return!1}else if(!r.text)return!1}}catch(s){e=!0,i=s}finally{try{t||null==n.return||n.return()}finally{if(e)throw i}}return!0}}},A=L,I=(i("c607"),Object(p["a"])(A,a,n,!1,null,null,null));e["default"]=I.exports},"76c5":function(t,e,i){t.exports=i.p+"img/5.a1e12c3e.png"},"76e4":function(t,e,i){},7790:function(t,e,i){"use strict";var a=i("1de2"),n=i.n(a);n.a},"77d2":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"expert-assign-container"},[i("el-card",{staticStyle:{"min-height":"600px"}},[i("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:"专家分配",name:"expertAssign"}},[i("el-row",[i("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.formInline}},[i("el-form-item",{attrs:{label:"活动名称："}},[i("el-input",{attrs:{placeholder:"请输入活动名称",size:"small"},model:{value:t.formInline.activityName,callback:function(e){t.$set(t.formInline,"activityName",e)},expression:"formInline.activityName"}})],1),i("el-form-item",{attrs:{label:"活动组别："}},[i("el-input",{attrs:{placeholder:"请输入活动组别",size:"small"},model:{value:t.formInline.activityGroup,callback:function(e){t.$set(t.formInline,"activityGroup",e)},expression:"formInline.activityGroup"}})],1),i("el-form-item",{attrs:{label:""}},[i("el-input",{attrs:{placeholder:"输入姓名",size:"small"},model:{value:t.formInline.name,callback:function(e){t.$set(t.formInline,"name",e)},expression:"formInline.name"}})],1),i("el-form-item",[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.goToSearch}},[t._v("查找")])],1)],1)],1),i("el-row",[i("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"","header-cell-style":{background:"#EEEEEE",color:"#323232"},"tooltip-effect":"dark"}},[i("el-table-column",{attrs:{label:"序号",type:"index",width:"160"}}),i("el-table-column",{attrs:{prop:"activityName",label:"活动名称","show-overflow-tooltip":""}}),i("el-table-column",{attrs:{prop:"activityGroup",label:"活动组别"}}),i("el-table-column",{attrs:{prop:"expert",label:"分配专家"}}),i("el-table-column",{attrs:{fixed:"right",label:"评分情况",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",{staticStyle:{color:"#73AFF8","text-align":"center","font-size":"24px",cursor:"pointer"},on:{click:function(i){return t.goToDetail(e.row)}}},[i("p",{staticClass:"el-icon-s-data"})])]}}])})],1)],1),i("el-row",{staticClass:"page-div"},[i("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,20,30,40],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:40},on:{"size-change":t.pageSizeChange,"current-change":t.pageCurrentChange}})],1),i("el-dialog",{attrs:{title:"",visible:t.scoreTableVisible,width:"800px"},on:{"update:visible":function(e){t.scoreTableVisible=e}}},[i("div",{staticClass:"my-chart"},[i("high-charts",{attrs:{options:t.abilityOpt}})],1)])],1)],1)],1)],1)},n=[],r=i("11e2"),s={components:{HighCharts:r["a"]},data:function(){return{formInline:{activityName:"",activityGroup:"",name:""},input:"",activeName:"expertAssign",tableData:[{activityName:"深圳市创客大赛",activityGroup:"创客组",expert:"陆同学"},{activityName:"深圳市创客大赛",activityGroup:"创客组",expert:"陆同学"},{activityName:"深圳市创客大赛",activityGroup:"创客组",expert:"陆同学"},{activityName:"深圳市创客大赛",activityGroup:"创客组",expert:"陆同学"},{activityName:"深圳市创客大赛",activityGroup:"创客组",expert:"陆同学"},{activityName:"深圳市创客大赛",activityGroup:"创客组",expert:"陆同学"},{activityName:"深圳市创客大赛",activityGroup:"创客组",expert:"陆同学"}],multipleSelection:[],currentPage:1,scoreTableVisible:!1,abilityOpt:{}}},mounted:function(){var t=[{Name:"沟通能力",Value:80},{Name:"逻辑思维",Value:70},{Name:"实践创新",Value:80},{Name:"艺术",Value:60},{Name:"人文底蕴",Value:90}];this.$nextTick((function(){this.renderChart(t)}))},methods:{goToSearch:function(){},goToDelete:function(t,e){this.open(t,e)},open:function(t,e){var i=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.splice(t,1),i.$message({type:"success",message:"删除成功!"})})).catch((function(){i.$message({type:"info",message:"已取消删除"})}))},pageSizeChange:function(t){},pageCurrentChange:function(t){},goToDetail:function(t){this.scoreTableVisible=!0},renderChart:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t=["张专家","李专家","王专家","张专家","李专家","王专家"],e=[21,18,34,21,18,34],i=[30,45,23,30,45,23],a={show:!0,chart:{type:"column"},colors:["#D2D2D2","#73AFF8"],title:{text:"作品数评分情况"},xAxis:{categories:t,crosshair:!0},yAxis:{title:{text:"数量"},min:0},legend:{enabled:!0},plotOptions:{column:{borderWidth:0}},series:[{name:"待评分作品数",data:i},{name:"已评分作品数",data:e}]};this.abilityOpt=a}}},o=s,c=(i("b5ea"),i("623f")),l=Object(c["a"])(o,a,n,!1,null,"0f4af350",null);e["default"]=l.exports},7815:function(t,e,i){t.exports=i.p+"img/code.b5b59eb1.png"},"78cd":function(t,e,i){},7938:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"audit-detail"},[i("div",{staticClass:"active-title"},[i("el-breadcrumb",{attrs:{separator:"/"}},[i("el-breadcrumb-item",{nativeOn:{click:function(e){return t.$router.back(-1)}}},[i("span",{staticStyle:{color:"#337ab7"}},[t._v("审核中心")])]),i("el-breadcrumb-item",[t._v("活动_"+t._s(t.activityName))])],1)],1),i("setting-item",{attrs:{"read-only":!0,"hide-publish":!0}})],1)},n=[],r=i("ca41"),s={components:{SettingItem:r["a"]},data:function(){return{activityName:""}},mounted:function(){this.activityName=this.$route.query.name}},o=s,c=(i("cb57"),i("623f")),l=Object(c["a"])(o,a,n,!1,null,null,null);e["default"]=l.exports},7986:function(t,e,i){},"7a4d":function(t,e,i){"use strict";var a=i("1a30"),n=i.n(a);n.a},"7c1e":function(t,e,i){"use strict";var a=i("47ea"),n=i.n(a);n.a},"7c55":function(t,e,i){"use strict";var a=i("44a5"),n=i.n(a);n.a},"7c8f":function(t,e,i){},"7d50":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"user-edit-center"},[i("el-card",[i("div",{staticClass:"user-edit-wrap"},[i("div",{staticClass:"user-edit-top"},[i("p",[t._v("个人信息")])]),i("div",{staticClass:"user-edit-body"},[i("el-form",{ref:"form",attrs:{model:t.form,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"头像："}},[[i("div",{staticClass:"user-icom"},[""!=t.form.userIcon?i("el-image",{attrs:{src:t.form.userIcon,fit:"cover"}}):i("el-image",{attrs:{src:t.userIcon,fit:"cover"}})],1)]],2),i("el-form-item",{attrs:{label:"用户名称："}},[i("el-input",{staticStyle:{width:"215px"},attrs:{size:"small"},model:{value:t.form.userName,callback:function(e){t.$set(t.form,"userName",e)},expression:"form.userName"}})],1),11==t.nowRole.type||12==t.nowRole.type||13==t.nowRole.type?i("el-form-item",{attrs:{label:"所在区域："}},[i("el-select",{attrs:{filterable:"",placeholder:"请选择",size:"small"},on:{change:t.areaChange},model:{value:t.areaid,callback:function(e){t.areaid=e},expression:"areaid"}},t._l(t.areaList,(function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1):i("el-form-item",{attrs:{label:"所在区域："}},[i("el-input",{staticStyle:{width:"215px"},attrs:{disabled:"",size:"small"},model:{value:t.form.areaName,callback:function(e){t.$set(t.form,"areaName",e)},expression:"form.areaName"}})],1),11==t.nowRole.type||12==t.nowRole.type||13==t.nowRole.type?i("el-form-item",{attrs:{label:"所在单位："}},[i("el-select",{attrs:{filterable:"",placeholder:"请选择",size:"small"},on:{change:t.schoolChange},model:{value:t.school_id,callback:function(e){t.school_id=e},expression:"school_id"}},t._l(t.schoolList,(function(t){return i("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})})),1)],1):i("el-form-item",{attrs:{label:"所在单位："}},[i("el-input",{staticStyle:{width:"215px"},attrs:{disabled:"",size:"small"},model:{value:t.form.unitName,callback:function(e){t.$set(t.form,"unitName",e)},expression:"form.unitName"}})],1),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:2==t.flag,expression:"flag==2"}],attrs:{label:"所在学段："}},[i("el-select",{attrs:{filterable:"",placeholder:"请选择",size:"small"},on:{change:t.periodChange},model:{value:t.period_id,callback:function(e){t.period_id=e},expression:"period_id"}},t._l(t.periodArray,(function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:2==t.flag,expression:"flag==2"}],attrs:{label:"所在年级："}},[i("el-select",{attrs:{filterable:"",placeholder:"请选择",size:"small"},on:{change:t.gradeChange},model:{value:t.grade_id,callback:function(e){t.grade_id=e},expression:"grade_id"}},t._l(t.gradeArray,(function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:2==t.flag,expression:"flag==2"}],attrs:{label:"所在班级："}},[i("el-select",{attrs:{filterable:"",placeholder:"请选择",size:"small"},on:{change:t.classChange},model:{value:t.class_id,callback:function(e){t.class_id=e},expression:"class_id"}},t._l(t.classArray,(function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:3==t.flag,expression:"flag==3"}],attrs:{label:"关联学生："}},[i("el-select",{attrs:{filterable:"",placeholder:"请选择",size:"small"},on:{change:t.studentChange},model:{value:t.student_id,callback:function(e){t.student_id=e},expression:"student_id"}},t._l(t.studentArray,(function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),i("el-form-item",{attrs:{label:"身份角色："}},t._l(t.identityTags,(function(e,a){return i("el-tag",{key:a,attrs:{"disable-transitions":!1}},[t._v(t._s(e.name))])})),1),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:10!=t.flag,expression:"flag!=10"}]},[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.onSubmit()}}},[t._v("保存")]),i("el-button",{attrs:{size:"small"},on:{click:function(e){return t.cancel()}}},[t._v("取消")])],1)],1)],1)])])],1)},n=[],r=i("46b4"),s=i.n(r),o=i("408b"),c=i("8a99"),l=i("0210");function u(t,e,i,a,n,r,s){try{var o=t[r](s),c=o.value}catch(l){return void i(l)}o.done?e(c):Promise.resolve(c).then(a,n)}function d(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var r=t.apply(e,i);function s(t){u(r,a,n,s,o,"next",t)}function o(t){u(r,a,n,s,o,"throw",t)}s(void 0)}))}}var p={components:{UploadFile:c["a"]},data:function(){return{form:{userIcon:"",userName:"",unitName:"",areaName:"",className:""},school_id:"",period_id:"",grade_id:"",class_id:"",identityTags:[],flag:0,userIcon:i("fcb3"),nowRole:JSON.parse(localStorage.getItem("nowRole")),schoolList:[],areaid:"",areaList:[{id:732,pid:"77",type:"3",name:"市直属"},{id:726,pid:"77",type:"3",name:"福田区"},{id:727,pid:"77",type:"3",name:"罗湖区"},{id:728,pid:"77",type:"3",name:"南山区"},{id:729,pid:"77",type:"3",name:"宝安区"},{id:730,pid:"77",type:"3",name:"龙岗区"},{id:731,pid:"77",type:"3",name:"盐田区"},{id:733,pid:"77",type:"3",name:"龙华区"},{id:734,pid:"77",type:"3",name:"坪山区"},{id:735,pid:"77",type:"3",name:"光明区"},{id:736,pid:"77",type:"3",name:"大鹏新区"},{id:3789,pid:"77",type:"3",name:"深汕特别合作区"}],userInfo:{},periodArray:[{name:"幼教组",id:1},{name:"小学组",id:2},{name:"初中组",id:4},{name:"高中组",id:8},{name:"特教组",id:16},{name:"中职组",id:32},{name:"高教组",id:64}],gradeArray:[{name:"一年级",id:1},{name:"二年级",id:2},{name:"三年级",id:3},{name:"四年级",id:4},{name:"五年级",id:5},{name:"六年级",id:6}],classArray:[{name:"1班",id:1},{name:"2班",id:2},{name:"3班",id:3},{name:"4班",id:4},{name:"5班",id:5},{name:"6班",id:6},{name:"7班",id:7},{name:"8班",id:8},{name:"9班",id:9},{name:"10班",id:10},{name:"11班",id:11},{name:"12班",id:12},{name:"13班",id:13},{name:"14班",id:14},{name:"15班",id:15},{name:"16班",id:16},{name:"17班",id:17},{name:"18班",id:18},{name:"19班",id:19},{name:"20班",id:20}],studentArray:[],student_id:"",memberTypeObj:{0:"超级管理员",2:"市级管理员",3:"区级管理员",4:"专家",11:"老师",12:"学生",13:"家长"}}},created:function(){this.gitUserInfo()},methods:{gitUserInfo:function(){var t=d(s.a.mark((function t(){var e,i;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this,i={},i.url=o["a"].user,i.id=JSON.parse(localStorage.getItem("user")).id,i.expand="memberAuth,memberInfo,roleInfo",t.next=7,this.axiosGet(i).then((function(t){if(e.userInfo=t,e.form.userIcon=t.avatar,e.form.userName=t.name,11==e.nowRole.type||12==e.nowRole.type||13==e.nowRole.type){if(1==t.memberInfo[0].type){e.flag=1,e.form.unitName=t.memberInfo[0].school.title,e.form.areaName=t.memberInfo[0].school.areaName,e.identityTags=[{name:"老师"}],e.school_id=t.memberInfo[0].school.id,e.areaid=t.memberInfo[0].school.areaid;var i={"filter[areaid]":e.areaid};e.getSchoolList(i)}else if(2==t.memberInfo[0].type){e.flag=2,e.form.unitName=t.memberInfo[0].school.title,e.form.areaName=t.memberInfo[0].school.areaName,e.form.className=t.memberInfo[0].school.classes[0].class_alias,e.period_id=t.memberInfo[0].school.classes[0].period,e.grade_id=t.memberInfo[0].school.classes[0].grade,e.class_id=t.memberInfo[0].school.classes[0].class,e.identityTags=[{name:"学生"}],e.school_id=t.memberInfo[0].school.id,e.areaid=t.memberInfo[0].school.areaid;var a={"filter[areaid]":e.areaid};e.getSchoolList(a)}else if(3==t.memberInfo[0].type){e.flag=3,e.form.unitName=t.memberInfo[0].school.title,e.form.areaName=t.memberInfo[0].school.areaName,e.identityTags=[{name:"家长"}],e.school_id=t.memberInfo[0].school.id;var n={};n.school=e.school_id,e.getStudentList(n),e.areaid=t.memberInfo[0].school.areaid,n={"filter[areaid]":e.areaid},e.getSchoolList(n),e.student_id=t.memberInfo[0].students[0].id}}else e.flag=10,e.form.unitName="暂无",e.form.areaName="暂无",0==e.nowRole.type?e.identityTags=[{name:"超级管理员"}]:2==e.nowRole.type?e.identityTags=[{name:"市级管理员"}]:3==e.nowRole.type?e.identityTags=[{name:"区级管理员"}]:4==e.nowRole.type&&(e.identityTags=[{name:"专家"}])})).catch((function(t){return t}));case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getSchoolList:function(){var t=d(s.a.mark((function t(e){var i=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.url=o["a"].school,e.ball=1,t.next=4,this.axiosGet(e).then((function(t){i.schoolList=t.items})).catch((function(t){return t}));case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),areaChange:function(t){var e={"filter[areaid]":t};this.getSchoolList(e)},schoolChange:function(t){var e=this;e.student_id="";var i={};i.school=e.school_id,e.getStudentList(i)},periodChange:function(){},gradeChange:function(){},classChange:function(){},studentChange:function(){},getStudentList:function(){var t=d(s.a.mark((function t(e){var i;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=this,e.expand="memberAuth,memberInfo,roleInfo",e.ball=1,e.mtype=2,e.url=o["a"].user,t.next=7,this.axiosGet(e).then((function(t){var e=[];if(void 0!=t.items){for(var a in t.items)e.push({id:t.items[a].id,name:t.items[a].name});i.studentArray=e}})).catch((function(t){return t}));case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),onSubmit:function(){var t=d(s.a.mark((function t(){var e,i,a=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this,i={},i.url=o["a"].user,i.id=this.userInfo.id,i.name=this.form.userName,i.openid=this.userInfo.openid,i.mobile=this.userInfo.mobile,i.email=this.userInfo.email,i.avatar=this.userInfo.avatar,i.gender=this.userInfo.gender,i.birthday=this.userInfo.birthday,11==e.nowRole.type?i.identity=[{type:1,school:this.school_id}]:12==e.nowRole.type?i.identity=[{type:2,school:this.school_id,period:this.period_id,grade:this.grade_id,class:this.class_id}]:13==e.nowRole.type&&(i.identity=[{type:3,children:[e.student_id]}]),t.next=14,this.axiosPut(i).then((function(t){void 0!=t.id?(a.$message({type:"success",message:"修改成功"}),a.getRoleInfo(),setTimeout((function(){a.$router.go(-1)}),1e3)):a.$message({type:"warning",message:"修改失败"})})).catch((function(t){return t}));case 14:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),cancel:function(){this.$router.go(-1)},getRoleInfo:function(){var t=d(s.a.mark((function t(){var e,i,a=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this,i={},i.type=e.nowRole.type,i.url=o["a"].switchToken,t.next=6,this.axiosGet(i).then((function(t){void 0!=t.token&&Object(l["setCookie"])("x-api-key",t.token),e.$store.dispatch("INIT_USER",t);var i=JSON.stringify(t);localStorage.setItem("user",i);var n=t.members.map((function(t){var i={};if(i.type=t.type,i.name=e.memberTypeObj[t.type],void 0!=t.school_id&&(i.school_id=t.school_id),void 0!=t.school_title&&(i.school_title=t.school_title),void 0!=t.current){i.current=t.current;var n=JSON.stringify(i);localStorage.setItem("nowRole",n),a.$store.dispatch("INIT_NOWROLE",i),console.log("nowrole===",n)}return i})),r=JSON.stringify(n);localStorage.setItem("roles",r),e.$store.dispatch("INIT_ROLES",n)})).catch((function(t){return t}));case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},h=p,m=(i("52ef"),i("623f4"),i("623f")),f=Object(m["a"])(h,a,n,!1,null,"72927e2f",null);e["default"]=f.exports},"7d57":function(t,e,i){"use strict";var a=i("ff99"),n=i.n(a);n.a},"7dd5":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"elcellent-work"},[i("div",{staticClass:"elcellent-title"},[t._v("\n      资源展示 / "),i("span",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(t.ActivityName))]),t._v("优秀作品\n    ")]),i("div",{staticClass:"activity-lable"},[i("type-select",{attrs:{gradeList:t.gradeList,subjectList:t.subjectList,regionList:t.regionList,toPage:"elcellent"},on:{award:t.awardMgr,gradeGroup:t.gradeGroupMgr,subject:t.subjectMgr,region:t.regionMgr}})],1),i("div",{staticClass:"activity-content"},[i("activity-list",{attrs:{activityList:t.activityList,goToDetail:"excellentWorkDetail"}}),i("el-pagination",{attrs:{layout:"prev, pager, next",total:t.totalCount,"page-size":t.pagesize,"current-page":t.currentPage},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])},n=[],r=i("46b4"),s=i.n(r),o=i("5c0a"),c=i("7342");function l(t,e,i,a,n,r,s){try{var o=t[r](s),c=o.value}catch(l){return void i(l)}o.done?e(c):Promise.resolve(c).then(a,n)}function u(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var r=t.apply(e,i);function s(t){l(r,a,n,s,o,"next",t)}function o(t){l(r,a,n,s,o,"throw",t)}s(void 0)}))}}var d={components:{TypeSelect:o["a"],ActivityList:c["a"]},data:function(){return{gradeList:[],subjectList:[],regionList:[],award:0,region:0,gradeGroup:0,subject:0,activityList:[],ActivityId:"",ActivityName:"",SchoolSection:"",currentPage:1,pagesize:10,totalCount:0}},mounted:function(){this.ActivityId=this.$route.query.id,this.ActivityName=this.$route.query.name,this.getGradeGroup(),this.getSubjectList(),this.getAllDivision(),this.onExcellentWorkList()},methods:{onExcellentWorkList:function(){var t=u(s.a.mark((function t(){var e;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/activity/GetExcellentWorkList",ActivityId:this.ActivityId,GradeId:this.award,Subject:this.subject,SchoolSection:this.gradeGroup,DivisionId:this.region,PageNum:0,PageSize:this.pagesize}).catch((function(t){return t}));case 2:if(e=t.sent,"OK"==e.ErrorCode){t.next=5;break}return t.abrupt("return",this.$message.error(e.ErrorMsg));case 5:this.activityList=e.Data.WorkList,this.totalCount=e.Data.Total;case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getGradeGroup:function(){var t=u(s.a.mark((function t(){var e;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/activity/GetGradeGroup"}).catch((function(t){return t}));case 2:e=t.sent,this.gradeList=e.Data.GradeGroup||[];case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getSubjectList:function(){var t=u(s.a.mark((function t(){var e;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/activity/GetSubjectList"}).catch((function(t){return t}));case 2:e=t.sent,this.subjectList=e.Data.SubjectList||[];case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getAllDivision:function(){var t=u(s.a.mark((function t(){var e;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/activity/GetAllDivision"}).catch((function(t){return t}));case 2:e=t.sent,this.regionList=[{DivisionId:0,Name:"全部"}].concat(e.Data.DivisionList||[]);case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),awardMgr:function(){var t=u(s.a.mark((function t(e){return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.award=e,this.onExcellentWorkList();case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),gradeGroupMgr:function(){var t=u(s.a.mark((function t(e){return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.gradeGroup=e,this.onExcellentWorkList();case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),subjectMgr:function(){var t=u(s.a.mark((function t(e){return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.subject=e,this.onExcellentWorkList();case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),regionMgr:function(){var t=u(s.a.mark((function t(e){return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.region=e,this.onExcellentWorkList();case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),handleSizeChange:function(t){this.pagesize=t},handleCurrentChange:function(t){this.currentPage=t,this.onExcellentWorkList()}}},p=d,h=(i("f213"),i("623f")),m=Object(h["a"])(p,a,n,!1,null,"c6cf7ae4",null);e["default"]=m.exports},"7e77":function(t,e,i){"use strict";var a=i("d362"),n=i.n(a);n.a},"7f67":function(t,e,i){},"80f0":function(t,e,i){t.exports=i.p+"img/success.653e0f4e.png"},"81a3":function(t,e,i){t.exports=i.p+"img/3.fc8b045f.png"},"81ef":function(t,e,i){"use strict";var a=i("14d1"),n=i.n(a);n.a},"824b":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:[t.dataObj.isEdit?"active":"number-box-container",t.showOperation?"":"no-show"]},[t.canWrite?t._e():i("div",{staticClass:"mark"}),i("el-row",[i("el-col",{staticClass:"title",attrs:{span:3}},[t.dataObj.required?i("i",[t._v("*")]):t._e(),t._v(t._s(t.dataObj.title)+"： \n    ")]),i("el-col",{attrs:{span:12}},[i("el-input-number",{attrs:{"controls-position":"right",min:t.dataObj.minNumber,max:t.dataObj.maxNumber,size:"medium"},on:{change:t.myValChange},model:{value:t.val,callback:function(e){t.val=e},expression:"val"}})],1),t.showOperation?i("el-col",{staticClass:"operate-item",attrs:{span:4,offset:5}},[i("i",{staticClass:"el-icon-top",on:{click:t.toUp}}),i("i",{staticClass:"el-icon-bottom",on:{click:t.toDown}}),i("i",{staticClass:"el-icon-edit",on:{click:t.toEdit}}),i("i",{staticClass:"el-icon-delete",on:{click:t.delectItem}})]):t._e(),""!=t.dataObj.description?i("el-col",{staticStyle:{color:"#7F7F7F","line-height":"25px"},attrs:{span:21,offset:3}},[t._v("备注："+t._s(t.dataObj.description))]):t._e()],1)],1)},n=[],r={props:{showOperation:{type:Boolean,default:function(){return!1}},dataObj:{type:Object,default:function(){return{}}},canWrite:{type:Boolean,default:function(){return!0}},myVal:{}},data:function(){return{val:0}},mounted:function(){this.val=this.myVal},methods:{toUp:function(){this.$emit("toUp")},toDown:function(){this.$emit("toDown")},toEdit:function(){this.$emit("toEdit")},delectItem:function(){this.$emit("delectItem")},myValChange:function(){console.log(),this.$emit("myValChange",this.val)}}},s=r,o=(i("98ca"),i("623f")),c=Object(o["a"])(s,a,n,!1,null,"5acd7b14",null);e["a"]=c.exports},"82ec":function(t,e,i){},"82f8":function(t,e,i){},8368:function(t,e,i){"use strict";var a=i("b92d"),n=i.n(a);n.a},"841e":function(t,e,i){},"846f":function(t,e,i){},8474:function(t,e,i){},8562:function(t,e,i){},"863f":function(t,e,i){"use strict";var a=i("dc2f"),n=i.n(a);n.a},"872b":function(t,e,i){},8811:function(t,e,i){"use strict";var a=i("6c57"),n=i.n(a);n.a},"896f":function(t,e,i){},"89c2":function(t,e,i){t.exports=i.p+"img/1.3d0c8836.png"},"8a99":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container"},[i("div",{staticClass:"file-list"},t._l(t.fileList,(function(e,a){return i("div",{key:a,staticClass:"file-list-items"},[i("div",{staticClass:"name-img"},[i("el-image",{attrs:{src:t.fileIconUrl,fit:"cover"}}),i("div",{staticClass:"file-name"},[i("p",[t._v(t._s(e.name||e.title))])])],1),i("div",{staticClass:"file-operate"},[i("p",{on:{click:function(i){return t.goToPreview(e.url)}}},[t._v("下载")]),i("p",{staticStyle:{color:"red"},on:{click:function(e){return t.goToDelete(a)}}},[t._v("删除")])])])})),0),i("div",{staticClass:"file-operate-button"},[t.fileList.length<t.max?i("div",{staticClass:"file-button",on:{click:t.uploadFile}},[i("p",{staticClass:"el-icon-upload"}),i("span",[t._v(t._s(t.name))])]):t._e(),i("cos",{ref:"cos",attrs:{"valid-list":t.validList,limit:t.fileLimit},on:{success:t.uploadSuccess,start:t.uploadStart}})],1)])},n=[],r=i("af32"),s={components:{Cos:r["a"]},props:{myFileList:{type:Array,default:function(){return[]}},uploadType:{type:String,default:function(){return"work"}},fileLimit:{type:Number,default:function(){return 20}},max:{type:Number,default:function(){return 100}},name:{type:String,default:function(){return"上传文件"}}},data:function(){return{validList:["doc","docx","pdf","xls","xls"],fileList:[],fileIconUrl:""}},mounted:function(){var t=this;setTimeout((function(){t.myFileList.length>0&&(t.fileList=t.myFileList)}),3e3),"picture"==this.uploadType?(this.validList=["png","jpg","jpeg"],this.fileIconUrl=i("e970")):"video"==this.uploadType?(this.validList=["mp4","avi","mpg","mpeg","flv","mov"],this.fileIconUrl=i("a817")):"audio"==this.uploadType?(this.validList=["mp3"],this.fileIconUrl=i("a817")):"work"==this.uploadType?(this.validList=["doc","docx","pdf","xls","xlsx"],this.fileIconUrl=i("a817")):"zip"==this.uploadType?(this.validList=["zip","rar"],this.fileIconUrl=i("cea1")):"all"==this.uploadType&&(this.validList=["png","jpg","jpeg","mp4","avi","mpg","mpeg","flv","mov","zip","rar","mp3","doc","docx","pdf","xls","xls"],this.fileIconUrl=i("a817"))},methods:{uploadFile:function(){this.$refs.cos.$refs.fileEle.dispatchEvent(new MouseEvent("click"))},uploadStart:function(){this.$emit("uploading",!0)},uploadSuccess:function(t){var e={};e.url="https://"+t.Location,e.name=t.filename,this.fileList.push(e),this.$emit("uploadSuccess",this.fileList)},goToPreview:function(t){window.open(t)},goToDelete:function(t){this.fileList.splice(t,1)}}},o=s,c=(i("ee99"),i("623f")),l=Object(c["a"])(o,a,n,!1,null,null,null);e["a"]=l.exports},"8a990":function(t,e,i){"use strict";var a=i("a50a"),n=i.n(a);n.a},"8aab":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"role-centainer"},[i("el-card",{staticStyle:{"min-height":"600px"}},[i("el-row",[i("el-col",{attrs:{span:2}},[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.goToAddRole}},[t._v("添加角色")])],1),i("el-col",{attrs:{span:2}},[i("el-button",{attrs:{type:"danger",plain:"",size:"small"},on:{click:t.goToBatchForbidden}},[t._v("批量禁用")])],1),i("el-col",{attrs:{span:10}},[i("el-button",{attrs:{type:"danger",plain:"",size:"small"},on:{click:t.goToBatchDelete}},[t._v("批量删除")])],1),i("el-col",{attrs:{span:8}},[i("el-input",{attrs:{placeholder:"请输入搜索姓名",size:"small",clearable:""},on:{clear:t.clearInput},model:{value:t.searchVal,callback:function(e){t.searchVal=e},expression:"searchVal"}})],1),i("el-col",{attrs:{span:2}},[i("el-button",{attrs:{icon:"el-icon-search",type:"primary",size:"small"},on:{click:t.goToSearch}},[t._v("搜索")])],1)],1),i("el-row",[i("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.userList,border:"","header-cell-style":{background:"#EEEEEE",color:"#323232"},"tooltip-effect":"dark"},on:{"selection-change":t.tableSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"55"}}),i("el-table-column",{attrs:{prop:"name",label:"姓名"}}),i("el-table-column",{attrs:{label:"权限类型","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[[t._v(t._s(e.row.roleInfos.join("、")))]]}}])}),i("el-table-column",{attrs:{label:"区域"},scopedSlots:t._u([{key:"default",fn:function(e){return[[t._v(t._s(e.row.areas.join("、")))]]}}])}),i("el-table-column",{attrs:{prop:"operTime",label:"操作时间","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.formatDateChar(1e3*e.row.roleInfo[0].created_at)))]}}])}),i("el-table-column",{attrs:{label:"手机号"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.mobile))]}}])}),i("el-table-column",{attrs:{fixed:"right",label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.status?[i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return t.goToEdit(e.row.id)}}},[t._v("编辑")]),i("el-button",{staticStyle:{color:"red"},attrs:{type:"text",size:"small"},on:{click:function(i){return t.goToForbidden(e.row.id)}}},[t._v("禁用")])]:t._e(),0==e.row.status?[i("el-button",{staticStyle:{color:"#999"},attrs:{type:"text",size:"small"}},[t._v("已禁用")]),i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return t.goToRelieve(e.row.id)}}},[t._v("解禁")])]:t._e(),i("el-button",{staticStyle:{color:"red"},attrs:{type:"text",size:"small"},on:{click:function(i){return t.goToDelete(e.row.id)}}},[t._v("删除")])]}}])})],1)],1),i("el-row",{staticClass:"page-div"},[i("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[20,30,40,50,100],"page-size":t.perPage,layout:"total, sizes, prev, pager, next, jumper",total:t.totalCount},on:{"size-change":t.pageSizeChange,"current-change":t.pageCurrentChange}})],1)],1)],1)},n=[],r=i("46b4"),s=i.n(r),o=i("408b");function c(t,e,i,a,n,r,s){try{var o=t[r](s),c=o.value}catch(l){return void i(l)}o.done?e(c):Promise.resolve(c).then(a,n)}function l(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var r=t.apply(e,i);function s(t){c(r,a,n,s,o,"next",t)}function o(t){c(r,a,n,s,o,"throw",t)}s(void 0)}))}}var u={data:function(){return{searchVal:"",userList:[],multipleSelection:[],currentPage:1,perPage:20,totalCount:0}},mounted:function(){var t={"per-page":this.perPage};t.page=this.currentPage,t.role_id="1,3,4,5",t.expand="roleInfo",this.getUserList(t)},methods:{getUserList:function(){var t=l(s.a.mark((function t(e){var i,a,n,r,c,l;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return""!=this.searchVal&&(e.name=this.searchVal),e.url=o["a"].user,e.role_id="1,3,4",e.expand="roleInfo",t.next=6,this.axiosGet(e).catch((function(t){return t}));case 6:for(a in i=t.sent,this.userList=i.items,this.totalCount=i._meta.totalCount,this.userList){for(c in n=[],r=[],this.userList[a].roleInfo)if(r.push(this.userList[a].roleInfo[c].name),void 0!=this.userList[a].roleInfo[c].areas)for(l in this.userList[a].roleInfo[c].areas)n.push(this.userList[a].roleInfo[c].areas[l].name);this.userList[a].roleInfos=r,this.userList[a].areas=n}case 10:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),goToAddRole:function(){this.$router.push({path:"/addRole"})},goToSearch:function(){var t={"per-page":this.perPage};t.page=this.currentPage,this.getUserList(t)},clearInput:function(){console.log("清空");var t={"per-page":this.perPage};t.page=this.currentPage,this.getUserList(t)},goToEdit:function(t){this.$router.push({path:"/addRole",query:{id:t}})},goToForbidden:function(t){var e=0;this.open(t,e)},goToDelete:function(t){var e=-1;this.open(t,e)},open:function(t,e){var i=this,a="";0==e?a="禁止该用户使用改系统":-1==e&&(a="永久删除该用户"),this.$confirm("此操作将".concat(a,", 是否继续?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var a={};a.id=t,a.status=e,i.updateUser(a)})).catch((function(){i.$message({type:"info",message:"已取消！"})}))},updateUser:function(){var t=l(s.a.mark((function t(e){var i,a=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.url=o["a"].user,i="",0==e.status?i="禁用成功！":-1==e.status&&(i="删除成功！"),t.next=5,this.axiosPut(e).then((function(t){a.$message({type:"success",message:i});var e={"per-page":a.perPage};e.page=a.currentPage,a.getUserList(e)})).catch((function(t){return t}));case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),goToRelieve:function(){var t=l(s.a.mark((function t(e){var i,a=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i={},i.id=e,i.status=1,i.url=o["a"].user,t.next=6,this.axiosPut(i).then((function(t){a.$message({type:"success",message:"解禁成功！"}),i={"per-page":a.perPage},i.page=a.currentPage,a.getUserList(i)})).catch((function(t){return t}));case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),tableSelectionChange:function(t){this.multipleSelection=t},pageSizeChange:function(t){this.perPage=t;var e={"per-page":this.perPage};e.page=this.currentPage,this.getUserList(e)},pageCurrentChange:function(t){this.currentPage=t;var e={"per-page":this.perPage};e.page=this.currentPage,this.getUserList(e)},goToBatchForbidden:function(){var t=l(s.a.mark((function t(){var e,i,a,n=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(i in e=[],this.multipleSelection)e.push(this.multipleSelection[i].id);if(0!=e.length){t.next=5;break}return this.$message({type:"info",message:"请先选择需要禁用的用户"}),t.abrupt("return");case 5:a={},a.ids=e,a.url=o["a"].disableUsers,this.$confirm("此操作将批量禁用用户使用该系统, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){n.batchForbidden(a)})).catch((function(){n.$message({type:"info",message:"已取消！"})}));case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),batchForbidden:function(){var t=l(s.a.mark((function t(e){var i=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosPost(e).then((function(t){i.$message({type:"success",message:"批量禁用成功！"});var e={"per-page":i.perPage};e.page=i.currentPage,i.getUserList(e)})).catch((function(t){return t}));case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),goToBatchDelete:function(){var t=this,e=[];for(var i in this.multipleSelection)e.push(this.multipleSelection[i].id);if(0!=e.length){var a={};a.ids=e,a.url=o["a"].deleteUsers,this.$confirm("此操作将批量删除用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.batchDelete(a)})).catch((function(){t.$message({type:"info",message:"已取消！"})}))}else this.$message({type:"info",message:"请先选择需要删除的用户"})},batchDelete:function(){var t=l(s.a.mark((function t(e){var i=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosPost(e).then((function(t){i.$message({type:"success",message:"批量删除成功！"});var e={"per-page":i.perPage};e.page=i.currentPage,i.getUserList(e)})).catch((function(t){return t}));case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}},d=u,p=(i("7c1e"),i("623f")),h=Object(p["a"])(d,a,n,!1,null,"25a1400a",null);e["default"]=h.exports},"8ae4":function(t,e,i){t.exports=i.p+"img/pen.bac8162c.svg"},"8b55":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:[t.dataObj.isEdit?"active":"multi-check-box-container",t.showOperation?"":"no-show"]},[t.canWrite?t._e():i("div",{staticClass:"mark"}),i("el-row",[i("el-col",{staticClass:"title",attrs:{span:17}},[t.dataObj.required?i("i",[t._v("*")]):t._e(),t._v("\n      "+t._s(t.dataObj.title)+" \n    ")]),t.showOperation?i("el-col",{staticClass:"operate-item",attrs:{span:4,offset:3}},[i("i",{staticClass:"el-icon-top",on:{click:t.toUp}}),i("i",{staticClass:"el-icon-bottom",on:{click:t.toDown}}),i("i",{staticClass:"el-icon-edit",on:{click:t.toEdit}}),i("i",{staticClass:"el-icon-delete",on:{click:t.delectItem}})]):t._e(),i("el-col",[i("el-checkbox-group",{on:{change:t.myValChange},model:{value:t.val,callback:function(e){t.val=e},expression:"val"}},[t._l(t.dataObj.options,(function(e){return[i("el-checkbox",{attrs:{label:e.value}},[t._v(t._s(e.text))])]}))],2)],1),""!=t.dataObj.description?i("el-col",{staticStyle:{color:"#7F7F7F","line-height":"25px"},attrs:{span:24}},[t._v("备注："+t._s(t.dataObj.description))]):t._e()],1)],1)},n=[],r={props:{showOperation:{type:Boolean,default:function(){return!1}},dataObj:{type:Object,default:function(){return{}}},canWrite:{type:Boolean,default:function(){return!0}},myVal:{}},data:function(){return{val:[]}},mounted:function(){this.val=this.myVal},methods:{toUp:function(){this.$emit("toUp")},toDown:function(){this.$emit("toDown")},toEdit:function(){this.$emit("toEdit")},delectItem:function(){this.$emit("delectItem")},myValChange:function(){console.log(),this.$emit("myValChange",this.val)}}},s=r,o=(i("60e6"),i("623f")),c=Object(o["a"])(s,a,n,!1,null,"0ebe886c",null);e["a"]=c.exports},"8cdf":function(t,e,i){},"8d56":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"create-activity-container"},[i("div",{staticClass:"create-activity-body"},[i("el-form",{ref:"form",attrs:{model:t.addActivityForm,"label-width":"100px","label-position":"left"}},[i("el-form-item",{attrs:{label:"活动名称:"}},[i("el-col",{attrs:{span:9}},[i("el-input",{attrs:{placeholder:"请输入",size:"small"},on:{input:function(e){return t.changeTitle()}},model:{value:t.addActivityForm.title,callback:function(e){t.$set(t.addActivityForm,"title",e)},expression:"addActivityForm.title"}})],1)],1),i("el-form-item",{attrs:{label:"活动图:"}},[i("upload-picture",{attrs:{uploadType:"picture",max:1,myPictureList:t.cover,name:"上传活动封面图"},on:{uploadSuccess:t.coverSuccess}})],1),i("el-form-item",{attrs:{label:"banner图:"}},[i("upload-picture",{attrs:{uploadType:"picture",max:1,myPictureList:t.banner,name:"上传banner图(1920*460)"},on:{uploadSuccess:t.bannerSuccess}})],1),i("div",{staticClass:"my-editer"},[i("P",[t._v("活动介绍：")]),i("my-editor",{attrs:{inputtext:t.inputtext},on:{editorChange:t.editorChange}})],1),i("el-form-item",{attrs:{label:"活动指南:"}},[i("div",{staticStyle:{width:"710px"}},[i("upload-file",{attrs:{uploadType:"all",myFileList:t.attachment,max:50,name:"上传活动指南"},on:{uploadSuccess:t.attachmentSuccess}})],1)]),i("el-form-item",{attrs:{label:"活动对象 :"}},[i("el-checkbox-group",{on:{change:t.targetCheckedChange},model:{value:t.target,callback:function(e){t.target=e},expression:"target"}},t._l(t.targetList,(function(e){return i("el-checkbox",{key:e.id,attrs:{label:e}},[t._v(t._s(e.name))])})),1)],1),i("el-form-item",{attrs:{label:"活动类型 :"}},[i("span",{staticClass:"mybtn",on:{click:function(e){t.addclassFlag=!0,t.edit_1=!1}}},[t._v("+添加类别")]),t._l(t.addActivityForm.category,(function(e,a){return i("div",{key:a,staticClass:"myOut"},[i("div",{staticClass:"myTitle"},[i("span",[t._v(t._s(e.title))]),i("div",{staticClass:"myBtns"},[i("a",{staticStyle:{color:"#198AF3"},attrs:{href:"javascript:void(0);"},on:{click:function(e){return t.toCopy(a)}}},[t._v("复制")]),i("a",{staticStyle:{color:"#198AF3"},attrs:{href:"javascript:void(0);"},on:{click:function(e){return t.toEdit(a)}}},[t._v("编辑")]),i("a",{staticStyle:{color:"#FE5426"},attrs:{href:"javascript:void(0);"},on:{click:function(e){return t.deleteTitle(a)}}},[t._v("删除")])])]),i("div",[t._l(e.child,(function(e,n){return i("div",{key:n,staticClass:"content"},[i("span",[t._v(t._s(e.title))]),i("div",{staticClass:"myBtns"},[i("a",{staticStyle:{color:"#198AF3"},attrs:{href:"javascript:void(0);"},on:{click:function(e){return t.toCopyChild(a,n)}}},[t._v("复制")]),i("a",{staticStyle:{color:"#198AF3"},attrs:{href:"javascript:void(0);"},on:{click:function(e){return t.childEdit(a,n)}}},[t._v("编辑")]),i("a",{staticStyle:{color:"#FE5426"},attrs:{href:"javascript:void(0);"},on:{click:function(e){return t.childDelete(a,n)}}},[t._v("删除")])])])})),i("p",{staticClass:"addclass",on:{click:function(e){return t.toActiveEdit(a)}}},[i("span",[t._v("+")]),t._v("添加项目\n            ")])],2)])}))],2),i("el-form-item",{attrs:{label:"活动范围 :"}},[i("el-checkbox",{attrs:{indeterminate:t.isIndeterminate},on:{change:t.regionCheckAllChange},model:{value:t.checkAll,callback:function(e){t.checkAll=e},expression:"checkAll"}},[t._v("全选")]),i("el-checkbox-group",{staticStyle:{width:"800px"},on:{change:t.regionCheckedChange},model:{value:t.region,callback:function(e){t.region=e},expression:"region"}},t._l(t.regionList,(function(e){return i("el-checkbox",{key:e.id,attrs:{label:e}},[t._v(t._s(e.name))])})),1)],1),i("el-form-item",{attrs:{label:"作品上传 :"}},[i("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"timestamp"},on:{change:t.uploadChange},model:{value:t.upload,callback:function(e){t.upload=e},expression:"upload"}})],1),i("el-form-item",{attrs:{label:"区域推荐 :"}},[i("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"timestamp"},on:{change:t.recommendChange},model:{value:t.recommend,callback:function(e){t.recommend=e},expression:"recommend"}})],1),i("el-form-item",{attrs:{label:"市级评审 :"}},[i("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"timestamp"},on:{change:t.reviewChange},model:{value:t.review,callback:function(e){t.review=e},expression:"review"}})],1),i("el-form-item",{attrs:{label:"作品展示 :"}},[i("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"timestamp"},on:{change:t.exhibitChange},model:{value:t.exhibit,callback:function(e){t.exhibit=e},expression:"exhibit"}})],1),i("el-form-item",[0==t.id?[i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.onSubmit()}}},[t._v("保存并发布")]),i("el-button",{on:{click:function(e){return t.onCancel()}}},[t._v("取消")])]:[i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.onSubmit()}}},[t._v("确认修改并发布")])]],2)],1)],1),i("el-dialog",{attrs:{center:!0,title:0==t.edit_1?"添加类别":"修改类别",visible:t.addclassFlag,width:"30%"},on:{"update:visible":function(e){t.addclassFlag=e}}},[i("div",{staticStyle:{"":"display: inline-block"}},[i("span",[t._v("类别名称：")]),i("el-input",{attrs:{placeholder:"请输入类别名称"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.addclassFlag=!1,t.edit_1=!1}}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.addCategory()}}},[t._v("确 定")])],1)])],1)},n=[],r=i("46b4"),s=i.n(r),o=i("408b"),c=i("cfc6"),l=(i("0210"),i("e042")),u=i("8a99");function d(t,e,i,a,n,r,s){try{var o=t[r](s),c=o.value}catch(l){return void i(l)}o.done?e(c):Promise.resolve(c).then(a,n)}function p(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var r=t.apply(e,i);function s(t){d(r,a,n,s,o,"next",t)}function o(t){d(r,a,n,s,o,"throw",t)}s(void 0)}))}}var h={components:{MyEditor:c["a"],UploadPicture:l["a"],UploadFile:u["a"]},props:{id:{type:Number,default:function(){return 0}}},data:function(){return{inputtext:"",edit_1:!1,title:"",addclassFlag:!1,RegionIndex:"",checkAll:!1,isIndeterminate:!0,checkAll2:!1,isIndeterminate2:!0,targetList:[{name:"老师",id:1,checked:!1},{name:"学生",id:2,checked:!1}],addActivityForm:{title:"",content:"",cover:"",banner:[],attachment:[],target:"",region:[],upload:{},recommend:{},review:{},exhibit:{},category:[]},content:null,editorOption:{},value:"",regionList:[{id:"732",pid:"77",type:"3",name:"市直属"},{id:"726",pid:"77",type:"3",name:"福田区"},{id:"727",pid:"77",type:"3",name:"罗湖区"},{id:"728",pid:"77",type:"3",name:"南山区"},{id:"729",pid:"77",type:"3",name:"宝安区"},{id:"730",pid:"77",type:"3",name:"龙岗区"},{id:"731",pid:"77",type:"3",name:"盐田区"},{id:"733",pid:"77",type:"3",name:"龙华区"},{id:"734",pid:"77",type:"3",name:"坪山区"},{id:"735",pid:"77",type:"3",name:"光明区"},{id:"736",pid:"77",type:"3",name:"大鹏新区"},{id:"3789",pid:"77",type:"3",name:"深汕特别合作区"}],filename:"upFile",url:"",datas:{},editIndex:"",cover:[],banner:[],attachment:[],region:[],target:[],upload:[],recommend:[],review:[],exhibit:[]}},watch:{},created:function(){0!=this.id&&null==JSON.parse(sessionStorage.getItem("addActivityForm"))?this.getActivityDetail():this.getData()},computed:{},mounted:function(){},methods:{getData:function(){if(null!=JSON.parse(sessionStorage.getItem("addActivityForm"))){for(var t in this.addActivityForm=JSON.parse(sessionStorage.getItem("addActivityForm")),""!=this.addActivityForm.cover&&this.cover.push({name:this.addActivityForm.cover,url:this.addActivityForm.cover}),this.addActivityForm.banner)this.banner.push({name:this.addActivityForm.banner[t],url:this.addActivityForm.banner[t]});for(var e in this.addActivityForm.attachment){var i={};void 0!=this.addActivityForm.attachment[e].name?i.name=this.addActivityForm.attachment[e].name:void 0!=this.addActivityForm.attachment[e].title&&(i.name=this.addActivityForm.attachment[e].title),i.url=this.addActivityForm.attachment[e].url,this.attachment.push(i)}for(var a in this.addActivityForm.region)for(var n in this.regionList)this.addActivityForm.region[a]==this.regionList[n].id&&this.region.push(this.regionList[n]);if(this.checkAll=this.region.length==this.regionList.length,this.isIndeterminate=!(this.region.length==this.regionList.length),""!=this.addActivityForm.target){var r=[1,2],s=this.getSubSet(this.addActivityForm.target,r);for(var o in s)for(var c in this.targetList)this.targetList[c].id==s[o]&&this.target.push(this.targetList[c])}this.inputtext=this.addActivityForm.content,void 0!=this.addActivityForm.upload.stime&&(this.upload.push(1e3*this.addActivityForm.upload.stime),this.upload.push(1e3*this.addActivityForm.upload.etime)),void 0!=this.addActivityForm.recommend.stime&&(this.recommend.push(1e3*this.addActivityForm.recommend.stime),this.recommend.push(1e3*this.addActivityForm.recommend.etime)),void 0!=this.addActivityForm.review.stime&&(this.review.push(1e3*this.addActivityForm.review.stime),this.review.push(1e3*this.addActivityForm.review.etime)),void 0!=this.addActivityForm.exhibit.stime&&(this.exhibit.push(1e3*this.addActivityForm.exhibit.stime),this.exhibit.push(1e3*this.addActivityForm.exhibit.etime))}},getActivityDetail:function(){var t=p(s.a.mark((function t(){var e,i=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={},e.id=this.id,e.url=o["a"].activity,e.expand="detail,region,node,attachment,banner,category,categoryDetail",t.next=6,this.axiosGet(e).then((function(t){for(var e in i.addActivityForm.title=t.title,i.addActivityForm.content=t.detail.content,i.addActivityForm.cover=t.cover,i.addActivityForm.target=t.target,t.categoryDetail)for(var a in t.categoryDetail[e].child)t.categoryDetail[e].child[a].fields=t.categoryDetail[e].child[a].fields.map((function(t){return t.isEdit=!1,t.required=1==t.required,t}));i.addActivityForm.category=t.categoryDetail,i.addActivityForm.region=[],t.region.forEach((function(t){i.addActivityForm.region.push(t.id)})),i.addActivityForm.attachment=[],t.attachment.forEach((function(t){i.addActivityForm.attachment.push({url:t.url,name:t.title})})),i.addActivityForm.banner=[],t.banner.forEach((function(t){i.addActivityForm.banner.push(t.url)})),i.addActivityForm.upload=t.node[0],i.addActivityForm.recommend=t.node[1],i.addActivityForm.review=t.node[2],i.addActivityForm.exhibit=t.node[3],sessionStorage.setItem("addActivityForm",JSON.stringify(i.addActivityForm)),i.getData()})).catch((function(t){return t}));case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),changeTitle:function(){sessionStorage.setItem("addActivityForm",JSON.stringify(this.addActivityForm))},childDelete:function(t,e){var i=JSON.parse(sessionStorage.getItem("addActivityForm"));i.category.forEach((function(i,a){a==t&&i.child.forEach((function(t,a){e==a&&i.child.splice(a,1)}))})),this.addActivityForm=i,sessionStorage.setItem("addActivityForm",JSON.stringify(this.addActivityForm))},childEdit:function(t,e){this.$router.push({path:"/activeManager/createActivity/activeEdit",query:{id:t,subId:e,operate:1}})},toCopyChild:function(t,e){var i=JSON.parse(sessionStorage.getItem("addActivityForm"));i.category.forEach((function(i,a){a==t&&i.child.forEach((function(t,a){if(e==a){var n=i.child[a];for(var r in delete n.activity_id,delete n.id,delete n.pid,n.fields)delete n.fields[r].id;for(var s in n.formats)delete n.formats[s].id,delete n.formats[s].category_id,delete n.formats[s].created_at,delete n.formats[s].created_by,delete n.formats[s].updated_at,delete n.formats[s].updated_by;i.child.push(n)}}))})),this.addActivityForm=i,sessionStorage.setItem("addActivityForm",JSON.stringify(this.addActivityForm))},addCategory:function(){if(0==this.edit_1){var t=[];this.addActivityForm.category.push({title:this.title,type:1,child:t}),sessionStorage.setItem("addActivityForm",JSON.stringify(this.addActivityForm))}else this.addActivityForm=JSON.parse(sessionStorage.getItem("addActivityForm")),this.addActivityForm.category[this.editIndex].title=this.title,sessionStorage.setItem("addActivityForm",JSON.stringify(this.addActivityForm)),this.edit_1=!1;this.addclassFlag=!1,this.title=""},toEdit:function(t){console.log("编辑===",t),this.edit_1=!0,this.addclassFlag=!0,this.editIndex=t,this.title=this.addActivityForm.category[t].title},toCopy:function(t){var e=this.addActivityForm.category[t];for(var i in delete e.activity_id,delete e.id,delete e.pid,delete e.fields,e.child){for(var a in delete e.child[i].activity_id,delete e.child[i].id,delete e.child[i].pid,e.child[i].fields)delete e.child[i].fields[a].id;for(var n in e.child[i].formats)delete e.child[i].formats[n].id,delete e.child[i].formats[n].category_id,delete e.child[i].formats[n].created_at,delete e.child[i].formats[n].created_by,delete e.child[i].formats[n].updated_at,delete e.child[i].formats[n].updated_by}this.addActivityForm.category.push(e),sessionStorage.setItem("addActivityForm",JSON.stringify(this.addActivityForm)),console.log("this.addActivityForm",this.addActivityForm.category)},deleteTitle:function(t){this.addActivityForm.category.splice(t,1),sessionStorage.setItem("addActivityForm",JSON.stringify(this.addActivityForm))},toActiveEdit:function(t){this.$router.push({path:"/activeManager/createActivity/activeEdit",query:{id:t,operate:0}})},beforeupload:function(t){},coverSuccess:function(t){var e=this;console.log("活动图===",t),this.addActivityForm.cover="",t.forEach((function(t){e.addActivityForm.cover=t.url})),sessionStorage.setItem("addActivityForm",JSON.stringify(this.addActivityForm))},bannerSuccess:function(t){var e=this;this.addActivityForm.banner=[],t.forEach((function(t){e.addActivityForm.banner.push(t.url)})),sessionStorage.setItem("addActivityForm",JSON.stringify(this.addActivityForm))},attachmentSuccess:function(t){var e=this;this.addActivityForm.attachment=[],t.forEach((function(t){var i={};i.url=t.url,i.title=t.name,e.addActivityForm.attachment.push(i)})),sessionStorage.setItem("addActivityForm",JSON.stringify(this.addActivityForm))},handlePreview:function(t){window.open(t.url)},back:function(){this.$router.go(-1)},regionCheckAllChange:function(t){for(var e in this.region=t?this.regionList:[],this.addActivityForm.region=[],this.region)this.addActivityForm.region.push(this.region[e].id);this.isIndeterminate=!1,sessionStorage.setItem("addActivityForm",JSON.stringify(this.addActivityForm))},regionCheckedChange:function(t){this.addActivityForm.region=[];var e=t.length;for(var i in this.checkAll=e===this.regionList.length,this.isIndeterminate=e>0&&e<this.regionList.length,this.region=t,this.region)this.addActivityForm.region.push(this.region[i].id);sessionStorage.setItem("addActivityForm",JSON.stringify(this.addActivityForm))},targetCheckedChange:function(t){this.target=t;var e=0;for(var i in this.target)e+=parseInt(this.target[i].id);this.addActivityForm.target=e,console.log("val===",this.addActivityForm,"target====",this.target),sessionStorage.setItem("addActivityForm",JSON.stringify(this.addActivityForm))},onSubmit:function(){var t=p(s.a.mark((function t(){var e,i,a,n=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(i in e=JSON.parse(sessionStorage.getItem("addActivityForm")),e.category)for(a in e.category[i].child)e.category[i].child[a].fields=e.category[i].child[a].fields.map((function(t){return delete t.isEdit,t.required=1==t.required?1:0,t}));if(console.log("params===",e),e.url=o["a"].activity,""!=e.title){t.next=7;break}return this.$message({type:"warning",message:"请添加活动标题"}),t.abrupt("return");case 7:if(""!=e.content){t.next=10;break}return this.$message({type:"warning",message:"请添加活动介绍"}),t.abrupt("return");case 10:if(""!=e.cover){t.next=13;break}return this.$message({type:"warning",message:"请添加活动图"}),t.abrupt("return");case 13:if(""!=e.target){t.next=16;break}return this.$message({type:"warning",message:"请选择活动对象"}),t.abrupt("return");case 16:if(!(e.region.length<=0)){t.next=19;break}return this.$message({type:"warning",message:"请选择活动区域"}),t.abrupt("return");case 19:if(void 0!=e.upload.stime){t.next=22;break}return this.$message({type:"warning",message:"请选择上传作品时间"}),t.abrupt("return");case 22:if(void 0!=e.recommend.stime){t.next=25;break}return this.$message({type:"warning",message:"请选择去推荐时间"}),t.abrupt("return");case 25:if(void 0!=e.review.stime){t.next=28;break}return this.$message({type:"warning",message:"请选择市级审核时间"}),t.abrupt("return");case 28:if(void 0!=e.exhibit.stime){t.next=31;break}return this.$message({type:"warning",message:"请选择作品展示时间"}),t.abrupt("return");case 31:if(!(e.category.length<=0)){t.next=34;break}return this.$message({type:"warning",message:"请添加活动类别"}),t.abrupt("return");case 34:if(0!=this.id){t.next=39;break}return t.next=37,this.axiosPost(e).then((function(t){""!=t.title&&void 0!=t.title?(n.$message({type:"success",message:"添加活动成功"}),n.addActivityForm=null,sessionStorage.setItem("addActivityForm",JSON.stringify(n.addActivityForm)),n.$router.go(-1)):-1==t.code&&n.$message({type:"warning",message:t.message})})).catch((function(t){return t}));case 37:t.next=42;break;case 39:return e.id=this.id,t.next=42,this.axiosPut(e).then((function(t){""!=t.title&&void 0!=t.title?(n.$message({type:"success",message:"修改成功！！"}),setTimeout((function(){n.$router.push({path:"/activeManager"})}),500)):-1==t.code&&n.$message({type:"warning",message:t.message})})).catch((function(t){return t}));case 42:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),onCancel:function(){this.addActivityForm=null,sessionStorage.setItem("addActivityForm",JSON.stringify(this.addActivityForm)),this.$router.go(-1)},editorChange:function(t){this.addActivityForm.content=t,sessionStorage.setItem("addActivityForm",JSON.stringify(this.addActivityForm))},uploadChange:function(t){this.addActivityForm.upload.stime=t[0]/1e3,this.addActivityForm.upload.etime=t[1]/1e3,sessionStorage.setItem("addActivityForm",JSON.stringify(this.addActivityForm))},recommendChange:function(t){this.addActivityForm.recommend.stime=t[0]/1e3,this.addActivityForm.recommend.etime=t[1]/1e3,sessionStorage.setItem("addActivityForm",JSON.stringify(this.addActivityForm))},reviewChange:function(t){this.addActivityForm.review.stime=t[0]/1e3,this.addActivityForm.review.etime=t[1]/1e3,sessionStorage.setItem("addActivityForm",JSON.stringify(this.addActivityForm))},exhibitChange:function(t){this.addActivityForm.exhibit.stime=t[0]/1e3,this.addActivityForm.exhibit.etime=t[1]/1e3,sessionStorage.setItem("addActivityForm",JSON.stringify(this.addActivityForm))}}},m=h,f=(i("635d"),i("623f")),v=Object(f["a"])(m,a,n,!1,null,"322deffb",null);e["a"]=v.exports},"8f1f":function(t,e,i){},"905a":function(t,e,i){"use strict";var a=i("7317"),n=i.n(a);n.a},9262:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"good-work-container"},[i("el-card",{staticStyle:{"min-height":"600px"}},[i("works-preview",{attrs:{id:t.activity_id,award:!0,showDownLoad:!1}}),i("div",{staticClass:"like_counts"},[i("p",{staticClass:"el-icon-thumb",on:{click:t.onlike}},[t._v("点赞")])])],1)],1)},n=[],r=i("46b4"),s=i.n(r),o=i("f753"),c=i.n(o),l=i("408b"),u=i("9e1e"),d=i("0210");function p(t,e,i,a,n,r,s){try{var o=t[r](s),c=o.value}catch(l){return void i(l)}o.done?e(c):Promise.resolve(c).then(a,n)}function h(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var r=t.apply(e,i);function s(t){p(r,a,n,s,o,"next",t)}function o(t){p(r,a,n,s,o,"throw",t)}s(void 0)}))}}var m={data:function(){return{id:this.$route.query.id,activity_id:this.$route.query.activity_id,workDetail:{},author:[],teacher:[],attachment:[],category:"",project:"",like_counts:0,apiKey:Object(d["getCookie"])("x-api-key")}},components:{WorksPreview:u["a"]},created:function(){this.goodWorkDetail()},methods:{goodWorkList:function(){var t=h(s.a.mark((function t(){var e,i;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this,i={},i.url=l["a"].enroll,i.id=this.id,i.expand="works,info",t.next=7,this.axiosGet(i).then((function(t){e.like_counts=t.like_counts,e.project=t.info.project,e.category=t.info.category})).catch((function(t){return t}));case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),goodWorkDetail:function(){var t=h(s.a.mark((function t(){var e,i;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this,i={},i.url=l["a"].works,i.id=e.id,i.expand="member,attachment,content",t.next=7,this.axiosGet(i).then((function(t){e.workDetail=t,e.author=t.member.author.map((function(t){return t.name})),e.teacher=t.member.mentor.map((function(t){return t.name})),0!=t.attachment.length&&e.attachment.push(t.attachment.map((function(t){return{title:t.title,url:t.url}}))),console.log("哈哈",e.attachment)})).catch((function(t){return t}));case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),onlike:function(){var t=h(s.a.mark((function t(){var e,i;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=this,i={},i.id=this.id,c.a.get(l["a"].like,{params:i,headers:{"x-api-key":e.apiKey}}).then((function(t){0==t.data.code?(e.like_counts++,e.$message({type:"success",message:"点赞成功!"})):e.$message.error("点赞失败")}));case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},f=m,v=(i("d0b8"),i("8368"),i("623f")),g=Object(v["a"])(f,a,n,!1,null,"14bc4bcc",null);e["default"]=g.exports},9265:function(t,e,i){t.exports=i.p+"img/icon_close.a94e02b7.svg"},9322:function(t,e,i){},"933f":function(t,e,i){t.exports=i.p+"img/logo.7eb02757.png"},9451:function(t,e,i){"use strict";var a=i("b74a"),n=i.n(a);n.a},9586:function(t,e,i){"use strict";var a=i("82ec"),n=i.n(a);n.a},9648:function(t,e,i){"use strict";var a=i("623e"),n=i.n(a);n.a},"96d7":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"warrp"},[i("div",{staticClass:"active-warrp"},[i("div",{staticClass:"active-title"},[i("el-breadcrumb",{attrs:{separator:"/"}},[i("el-breadcrumb-item",{nativeOn:{click:function(e){return t.goToMyAct(e)}}},[i("span",{staticClass:"link-btn"},[t._v("我发布的活动")])]),i("el-breadcrumb-item",[t._v("活动_"+t._s(t.activityName))])],1)],1),i("div",{staticClass:"active-tab"},[i("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:"活动设置",name:"first"}}),i("el-tab-pane",{attrs:{label:"报名信息",name:"second"}}),i("el-tab-pane",{attrs:{label:"作品审核",name:"third"}}),i("el-tab-pane",{attrs:{label:"作品评奖",name:"fourth"}}),i("el-tab-pane",{attrs:{label:"活动统计",name:"five"}}),i("el-tab-pane",{attrs:{label:"用户反馈",name:"six"}})],1),"first"==t.activeName?i("activity-setting"):t._e(),"second"==t.activeName?i("apply-message"):t._e(),"third"==t.activeName?i("production-message"):t._e(),"fourth"==t.activeName?i("works-in"):t._e(),"five"==t.activeName?i("statistics"):t._e(),"six"==t.activeName?i("feed-back"):t._e()],1)])])},n=[],r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"activity-setting"},[i("setting-item",{attrs:{"hide-publish":!0}})],1)},s=[],o=i("ca41"),c={components:{SettingItem:o["a"]},data:function(){return{}}},l=c,u=i("623f"),d=Object(u["a"])(l,r,s,!1,null,null,null),p=d.exports,h=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[i("el-table-column",{attrs:{prop:"UserName",label:"报名人姓名",width:"180"}}),i("el-table-column",{attrs:{prop:"Phone",label:"联系电话",width:"180"}}),i("el-table-column",{attrs:{prop:"DivisionName",label:"区域"}}),i("el-table-column",{attrs:{prop:"School",label:"所在学校"}}),i("el-table-column",{attrs:{prop:"ApplyTime",label:"报名时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(t.timeFormat(1e3*e.row.ApplyTime,"yyyy-MM-dd"))+"\n      ")]}}])})],1),i("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.total,"page-size":t.PageSize,"current-page":t.currentPage},on:{"current-change":t.handleCurrentChange}})],1)},m=[],f=i("46b4"),v=i.n(f);function g(t,e,i,a,n,r,s){try{var o=t[r](s),c=o.value}catch(l){return void i(l)}o.done?e(c):Promise.resolve(c).then(a,n)}function y(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var r=t.apply(e,i);function s(t){g(r,a,n,s,o,"next",t)}function o(t){g(r,a,n,s,o,"throw",t)}s(void 0)}))}}var b={prop:{type:String,required:!0},data:function(){return{currentPage:1,PageSize:10,total:0,ActivityId:"",tableData:[]}},created:function(){this.ActivityId=+this.$route.query.id,this.getList()},methods:{getList:function(){var t=y(v.a.mark((function t(){var e;return v.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/activity/GetApplyUserList",ActivityId:this.ActivityId,PageNum:this.currentPage,PageSize:this.PageSize}).catch((function(t){return t}));case 2:e=t.sent,this.tableData=e.Data.ApplyUserList,this.total=e.Data.Total;case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),handleCurrentChange:function(t){this.currentPage=t,this.getList()}}},w=b,x=Object(u["a"])(w,h,m,!1,null,null,null),k=x.exports,_=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"production-message"},[i("div",{staticClass:"work-warrp"},[i("div",{staticClass:"activity-lable"},[i("type-select",{attrs:{gradeList:t.gradeList,subjectList:t.subjectList,regionList:t.regionList,"hide-region":t.IsDivisionAdmin,"hide-award":!0,toPage:"elcellent"},on:{gradeGroup:t.gradeGroupMgr,subject:t.subjectMgr,region:t.regionMgr}})],1)]),i("el-tabs",{staticStyle:{width:"330px"},on:{"tab-click":t.filterData},model:{value:t.curStatus,callback:function(e){t.curStatus=e},expression:"curStatus"}},[i("el-tab-pane",{attrs:{label:"待审核",name:"1"}}),i("el-tab-pane",{attrs:{label:"审核通过",name:"2"}}),i("el-tab-pane",{attrs:{label:"未审核通过",name:"3"}})],1),1==t.curStatus?i("div",{staticClass:"audit-pass"},[i("el-button",{attrs:{disabled:0==t.checkedList.length},on:{click:function(e){return t.changeStatus(1)}}},[t._v("通过")]),i("el-button",{attrs:{disabled:0==t.checkedList.length},on:{click:function(e){return t.changeStatus(2)}}},[t._v("不通过")])],1):t._e(),2==t.curStatus?i("div",{staticClass:"audit-pass"},[i("el-button",{attrs:{disabled:0==t.checkedList.length},on:{click:function(e){return t.changeStatus(2)}}},[t._v("不通过")])],1):t._e(),3==t.curStatus?i("div",{staticClass:"audit-pass"},[i("el-button",{attrs:{disabled:0==t.checkedList.length},on:{click:function(e){return t.changeStatus(1)}}},[t._v("通过")])],1):t._e(),i("div",{staticClass:"activity-conts"},t._l(t.arr,(function(e,a){return i("div",{key:a,staticClass:"acitivity-self"},[i("el-checkbox",{on:{change:function(i){return t.checkChange(i,e)}},model:{value:e.checked,callback:function(i){t.$set(e,"checked",i)},expression:"item.checked"}}),e.ResourceList.length>0?i("video",{attrs:{controls:"controls",src:e.ResourceList[0].ResourceContent}}):t._e(),i("div",{staticClass:"activity-tex"},[i("div",{staticClass:"avtive-title"},[t._v(t._s(e.TeamName))]),i("div",{staticClass:"activity-time"},[e.School.length>8?i("el-tooltip",{attrs:{effect:"dark",content:e.School,placement:"top"}},[i("span",[t._v(t._s(e.School.substr(0,8)))])]):i("span",[t._v(t._s(e.School))])],1),i("a",{staticClass:"detail-tip",on:{click:function(i){return t.auditClick(e)}}},[t._v("详情")])])],1)})),0),i("el-pagination",{staticClass:"paging",attrs:{background:"",layout:"prev, pager, next",total:t.total,"page-size":t.PageSize,"current-page":t.currentPage},on:{"current-change":t.handleCurrentChange}})],1)},C=[],S=i("5c0a");function T(t,e,i,a,n,r,s){try{var o=t[r](s),c=o.value}catch(l){return void i(l)}o.done?e(c):Promise.resolve(c).then(a,n)}function L(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var r=t.apply(e,i);function s(t){T(r,a,n,s,o,"next",t)}function o(t){T(r,a,n,s,o,"throw",t)}s(void 0)}))}}var A={props:{type:String,required:!0},components:{TypeSelect:S["a"]},data:function(){return{gradeList:[],subjectList:[],regionList:[],isShadeShow:!1,show:!0,total:0,currentPage:1,PageSize:12,passIndex:1,list:[],WorkId:"",Status:1,auditShow:!1,arr:[],activityId:"",checkedList:[],curStatus:"",region:0,gradeGroup:0,subject:0,IsActivityAdmin:!1,IsDivisionAdmin:!1}},created:function(){this.getGradeGroup(),this.getSubjectList(),this.getAllDivision(),this.activityId=this.$route.query.id,this.getAdmin(),this.curStatus=this.$route.query.curStatus||"1",this.getWorkList()},methods:{getAdmin:function(){var t=L(v.a.mark((function t(){var e;return v.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/activity/IsActivityAdmin",ActivityId:this.activityId}).catch((function(t){return t}));case 2:if(e=t.sent,"OK"==e.ErrorCode){t.next=5;break}return t.abrupt("return",this.$message.error(e.ErrorMsg));case 5:this.IsActivityAdmin=e.Data.IsActivityAdmin,this.IsDivisionAdmin=e.Data.IsDivisionAdmin;case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getWorkList:function(){var t=L(v.a.mark((function t(){var e,i,a,n;return v.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.checkedList=[],e=4==this.curStatus?"1":this.curStatus,i={url:"/v1/activity/GetWorkListByAdmin",Status:e,PageNum:this.currentPage,PageSize:this.PageSize,ActivityId:this.activityId,DivisionId:this.region,SubjectId:this.subject,SchoolSection:this.gradeGroup},4==this.curStatus&&(i.PushStatus="PUSH"),t.next=6,this.axiosGet(i).catch((function(t){return t}));case 6:if(a=t.sent,"OK"==a.ErrorCode){t.next=9;break}return t.abrupt("return",this.$message.error(a.ErrorMsg));case 9:n=a.Data.WorkList||[],n.forEach((function(t){return t.checked=!1})),this.arr=n,this.total=a.Data.Total;case 13:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),filterData:function(t){this.curStatus=t.name,this.getWorkList()},handleCurrentChange:function(t){this.currentPage=t,this.getWorkList()},changeStatus:function(){var t=L(v.a.mark((function t(e){var i,a;return v.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!=this.checkedList.length){t.next=2;break}return t.abrupt("return",this.$message.error("请先选择作品"));case 2:if(1!=e){t.next=11;break}return t.next=5,this.axiosPost({url:"/v1/activity/AuditWork",WorkIdList:this.checkedList,ActivityId:this.activityId,Status:"WORK_AUDIT_ACCEPT",Message:"审核通过"}).catch((function(t){return t}));case 5:if(i=t.sent,"OK"==i.ErrorCode){t.next=8;break}return t.abrupt("return",this.$message.error(i.ErrorMsg));case 8:this.$message.success("审核通过"),t.next=18;break;case 11:if(2!=e){t.next=18;break}return t.next=14,this.axiosPost({url:"/v1/activity/AuditWork",WorkIdList:this.checkedList,ActivityId:this.activityId,Status:"WORK_AUDIT_REJECT",Message:"审核未通过"}).catch((function(t){return t}));case 14:if(a=t.sent,"OK"==a.ErrorCode){t.next=17;break}return t.abrupt("return",this.$message.error(a.ErrorMsg));case 17:this.$message.success("审核未通过");case 18:this.getWorkList();case 19:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),checkChange:function(t,e){if(t)this.checkedList.push(e.WorkId);else{var i=this.checkedList.indexOf(e.WorkId);this.checkedList.splice(i,1)}},auditClick:function(t){this.$router.push({path:"/myActivity/workAuditDetail",query:{workId:t.WorkId,activityId:this.activityId,title:this.$route.query.title,curStatus:this.curStatus}})},getGradeGroup:function(){var t=L(v.a.mark((function t(){var e;return v.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/activity/GetGradeGroup"}).catch((function(t){return t}));case 2:e=t.sent,this.gradeList=e.Data.GradeGroup||[];case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getSubjectList:function(){var t=L(v.a.mark((function t(){var e;return v.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/activity/GetSubjectList"}).catch((function(t){return t}));case 2:e=t.sent,this.subjectList=e.Data.SubjectList||[];case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getAllDivision:function(){var t=L(v.a.mark((function t(){var e;return v.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/activity/GetAllDivision"}).catch((function(t){return t}));case 2:e=t.sent,this.regionList=[{DivisionId:0,Name:"全部"}].concat(e.Data.DivisionList||[]);case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),gradeGroupMgr:function(){var t=L(v.a.mark((function t(e){return v.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.gradeGroup=e,this.getWorkList();case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),subjectMgr:function(){var t=L(v.a.mark((function t(e){return v.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.subject=e,this.getWorkList();case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),regionMgr:function(){var t=L(v.a.mark((function t(e){return v.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.region=e,this.getWorkList();case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}},I=A,P=(i("38fd"),Object(u["a"])(I,_,C,!1,null,null,null)),D=P.exports,j=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"work-warrp"},[i("div",{staticClass:"activity-lable"},[i("type-select",{attrs:{gradeList:t.gradeList,subjectList:t.subjectList,regionList:t.regionList,"hide-region":t.IsDivisionAdmin,toPage:"elcellent"},on:{award:t.awardMgr,gradeGroup:t.gradeGroupMgr,subject:t.subjectMgr,region:t.regionMgr}})],1)]),i("div",{staticClass:"work-box"},[t._l(t.list,(function(e,a){return i("el-button",{key:a,attrs:{disabled:0==t.selectedList.length},on:{click:function(i){return t.action(a,e.key)}}},[t._v(t._s(e.name))])})),i("el-button",{on:{click:t.download}},[t._v("导出作品信息")]),i("div",{staticClass:"work-box-title"},[t._v("已选择数量："+t._s(t.selectedList.length))])],2),i("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelect}},[i("el-table-column",{attrs:{type:"selection",width:"55"}}),i("el-table-column",{attrs:{label:"优秀作品","show-overflow-tooltip":"",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.Title))]}}])}),i("el-table-column",{attrs:{prop:"TeamName",label:"提交人"}}),i("el-table-column",{attrs:{prop:"CreatedTime",label:"提交时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(t.timeFormat(1e3*e.row.CreatedTime,"yyyy-MM-dd hh:mm:ss"))+"\n      ")]}}])}),i("el-table-column",{attrs:{prop:"Score",label:"评分"}}),i("el-table-column",{attrs:{prop:"GradeName",label:"奖项"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.GradeName||"无")+"\n      ")]}}])}),i("el-table-column",{attrs:{label:"是否推荐到市"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(1==e.row.PushCity?"是":"否")+"\n      ")]}}])})],1),i("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.total,"page-size":t.PageSize,"current-page":t.currentPage},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)},O=[];function E(t,e,i,a,n,r,s){try{var o=t[r](s),c=o.value}catch(l){return void i(l)}o.done?e(c):Promise.resolve(c).then(a,n)}function N(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var r=t.apply(e,i);function s(t){E(r,a,n,s,o,"next",t)}function o(t){E(r,a,n,s,o,"throw",t)}s(void 0)}))}}var $={props:{type:String,required:!0},components:{TypeSelect:S["a"]},data:function(){return{gradeList:[],subjectList:[],regionList:[],award:0,region:0,gradeGroup:0,subject:0,PageSize:10,currentPage:1,list:[{id:1,name:"设为优秀作品",key:"优秀奖"},{id:3,name:"设为一等奖",key:"一等奖"},{id:4,name:"设为二等奖",key:"二等奖"},{id:5,name:"设为三等奖",key:"三等奖"},{id:6,name:"取消奖项",key:"未得奖"}],tableData:[],ActivityId:"",total:0,curFilter:0,selectedList:[],IsActivityAdmin:!1,IsDivisionAdmin:!1}},mounted:function(){this.ActivityId=this.$route.query.id,this.getAdmin(),this.getGradeGroup(),this.getSubjectList(),this.getAllDivision(),this.ActivityId&&this.getAwardsList()},methods:{getAdmin:function(){var t=N(v.a.mark((function t(){var e,i;return v.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/activity/IsActivityAdmin",ActivityId:this.ActivityId}).catch((function(t){return t}));case 2:if(e=t.sent,"OK"==e.ErrorCode){t.next=5;break}return t.abrupt("return",this.$message.error(e.ErrorMsg));case 5:this.IsActivityAdmin=e.Data.IsActivityAdmin,this.IsDivisionAdmin=e.Data.IsDivisionAdmin,i=[{id:1,name:"设为优秀作品",key:"优秀奖"},{id:3,name:"设为一等奖",key:"一等奖"},{id:4,name:"设为二等奖",key:"二等奖"},{id:5,name:"设为三等奖",key:"三等奖"},{id:6,name:"取消奖项",key:"未得奖"}],this.IsDivisionAdmin&&(i=i.concat([{id:7,name:"推荐到市",key:"push"},{id:7,name:"取消推荐",key:"unpush"}])),this.list=i;case 10:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getAwardsList:function(){var t=N(v.a.mark((function t(){var e;return v.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/activity/GetWorkAwardsList",ActivityId:this.ActivityId,DivisionId:this.region,Subject:this.subject,SchoolSection:this.gradeGroup,PageSize:this.PageSize,PageNum:this.currentPage,GradeId:this.award}).catch((function(t){return t}));case 2:if(e=t.sent,"OK"==e.ErrorCode){t.next=5;break}return t.abrupt("return",this.$message.error(e.ErrorMsg));case 5:this.tableData=e.Data.AwardsList,this.total=e.Data.Total;case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),action:function(){var t=N(v.a.mark((function t(e,i){var a,n;return v.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=this.selectedList.map((function(t){return t.WorkId})),"push"!=i){t.next=7;break}return t.next=4,this.axiosPost({url:"/v1/activity/PushCityByAdmin",ActivityId:this.ActivityId,WorkIdList:a,STATUS:"PUSH"}).catch((function(t){return t}));case 4:n=t.sent,t.next=16;break;case 7:if("unpush"!=i){t.next=13;break}return t.next=10,this.axiosPost({url:"/v1/activity/PushCityByAdmin",ActivityId:this.ActivityId,WorkIdList:a,STATUS:"UNPUSH"}).catch((function(t){return t}));case 10:n=t.sent,t.next=16;break;case 13:return t.next=15,this.axiosPost({url:"/v1/activity/SetWorkAwards",WorkIdList:a,Awards:i}).catch((function(t){return t}));case 15:n=t.sent;case 16:if("OK"==n.ErrorCode){t.next=18;break}return t.abrupt("return",this.$message.error(n.ErrorMsg));case 18:this.$message.success("设置成功"),this.getAwardsList();case 20:case"end":return t.stop()}}),t,this)})));function e(e,i){return t.apply(this,arguments)}return e}(),download:function(){var t=N(v.a.mark((function t(){var e,i;return v.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/activity/DownloadWorkInfoList",ActivityId:this.ActivityId}).catch((function(t){return t}));case 2:if(e=t.sent,"OK"==e.ErrorCode){t.next=5;break}return t.abrupt("return",this.$message.error(e.ErrorMsg));case 5:i=e.Data.CosUrl,window.open(i);case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),handleSelect:function(t){this.selectedList=t},handleSizeChange:function(t){this.PageSize=t,this.getAwardsList()},handleCurrentChange:function(t){this.currentPage=t,this.getAwardsList()},getGradeGroup:function(){var t=N(v.a.mark((function t(){var e;return v.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/activity/GetGradeGroup"}).catch((function(t){return t}));case 2:e=t.sent,this.gradeList=e.Data.GradeGroup||[];case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getSubjectList:function(){var t=N(v.a.mark((function t(){var e;return v.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/activity/GetSubjectList"}).catch((function(t){return t}));case 2:e=t.sent,this.subjectList=e.Data.SubjectList||[];case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getAllDivision:function(){var t=N(v.a.mark((function t(){var e;return v.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/activity/GetAllDivision"}).catch((function(t){return t}));case 2:e=t.sent,this.regionList=[{DivisionId:0,Name:"全部"}].concat(e.Data.DivisionList||[]);case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),awardMgr:function(){var t=N(v.a.mark((function t(e){return v.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.award=e,this.getAwardsList();case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),gradeGroupMgr:function(){var t=N(v.a.mark((function t(e){return v.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.gradeGroup=e,this.getAwardsList();case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),subjectMgr:function(){var t=N(v.a.mark((function t(e){return v.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.subject=e,this.getAwardsList();case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),regionMgr:function(){var t=N(v.a.mark((function t(e){return v.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.region=e,this.getAwardsList();case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}},F=$,z=(i("7e77"),Object(u["a"])(F,j,O,!1,null,"622d1dfa",null)),U=z.exports,R=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[i("el-table-column",{attrs:{prop:"Content",label:"内容","show-overflow-tooltip":""}}),i("el-table-column",{attrs:{prop:"UserName",label:"姓名",width:"150"}}),i("el-table-column",{attrs:{prop:"CreateTime",label:"日期",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(t.timeFormat(1e3*e.row.CreateTime,"yyyy-MM-dd hh:mm:ss"))+"\n      ")]}}])})],1),i("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.total,"page-size":t.PageSize,"current-page":t.currentPage},on:{"current-change":t.handleCurrentChange}})],1)},V=[];function G(t,e,i,a,n,r,s){try{var o=t[r](s),c=o.value}catch(l){return void i(l)}o.done?e(c):Promise.resolve(c).then(a,n)}function W(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var r=t.apply(e,i);function s(t){G(r,a,n,s,o,"next",t)}function o(t){G(r,a,n,s,o,"throw",t)}s(void 0)}))}}var M={props:{type:String,required:!0},data:function(){return{activityId:"",currentPage:1,PageSize:10,total:0,tableData:[]}},mounted:function(){this.activityId=this.$route.query.id,this.activityId&&this.init()},methods:{init:function(){var t=W(v.a.mark((function t(){var e;return v.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/activity/GetFeedbackList",ActivityId:this.activityId,PageNum:this.currentPage-1,PageSize:this.PageSize}).catch((function(t){return t}));case 2:if(e=t.sent,"OK"==e.ErrorCode){t.next=5;break}return t.abrupt("return",this.$message.error(e.ErrorMsg));case 5:this.tableData=e.Data.FeedbackList,this.total=e.Data.Total;case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),handleCurrentChange:function(t){this.currentPage=t,this.init(this.PageSize,this.currentPage)}}},q=M,B=Object(u["a"])(q,R,V,!1,null,null,null),J=B.exports,K=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"activity-statistic"},[i("el-card",{staticClass:"apply-num"},[i("high-charts",{attrs:{options:t.applyNumOpt}})],1),i("el-card",{staticClass:"learn"},[i("div",{staticClass:"xueke"},[i("high-charts",{attrs:{options:t.xuekeOpt}})],1),i("div",{staticClass:"xueduan"},[i("high-charts",{attrs:{options:t.xueduanOpt}})],1)]),i("el-card",{staticClass:"activity-table"},[i("div",{staticClass:"quyu-table"},[i("el-table",{attrs:{data:t.areaData,height:"400",width:"95%"}},[i("el-table-column",{attrs:{prop:"DivisionName",label:"区"}}),i("el-table-column",{attrs:{prop:"ApplyNum",label:"报名数"}}),i("el-table-column",{attrs:{prop:"WorkNum",label:"作品数"}})],1)],1),i("div",{staticClass:"school-table"},[i("el-table",{attrs:{data:t.schoolData,height:"400",width:"95%"}},[i("el-table-column",{attrs:{prop:"DivisionName",label:"学校"}}),i("el-table-column",{attrs:{prop:"ApplyNum",label:"报名数"}}),i("el-table-column",{attrs:{prop:"WorkNum",label:"作品数"}})],1)],1)])],1)},H=[],Y=i("11e2"),Q=i("0210");function X(t,e,i,a,n,r,s){try{var o=t[r](s),c=o.value}catch(l){return void i(l)}o.done?e(c):Promise.resolve(c).then(a,n)}function Z(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var r=t.apply(e,i);function s(t){X(r,a,n,s,o,"next",t)}function o(t){X(r,a,n,s,o,"throw",t)}s(void 0)}))}}var tt={name:"activity-statistic",components:{HighCharts:Y["a"]},data:function(){return{applyNumOpt:{},xuekeOpt:{},xueduanOpt:{},areaData:[],schoolData:[],activityId:""}},mounted:function(){this.activityId=this.$route.query.id,this.getApplyNumData(),this.getXueKeData(),this.getXueDuanData(),this.getTableData()},methods:{getApplyNumData:function(){var t=Z(v.a.mark((function t(){var e,i,a,n,r,s,o,c,l,u,d,p;return v.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/activity/GetApplyUserNum",ActivityId:this.activityId}).catch((function(t){return t}));case 2:if(e=t.sent,"OK"==e.ErrorCode){t.next=5;break}return t.abrupt("return",this.$message.error(e.ErrorMsg));case 5:for(i=e.Data.DataList||[],a=[],n=[],r=!0,s=!1,o=void 0,t.prev=10,c=i[Symbol.iterator]();!(r=(l=c.next()).done);r=!0)u=l.value,d=new Date(1e3*u.datetime),a.push(Object(Q["timeFormat"])(d,"yyyy-MM-dd")),n.push(u.value);t.next=18;break;case 14:t.prev=14,t.t0=t["catch"](10),s=!0,o=t.t0;case 18:t.prev=18,t.prev=19,r||null==c.return||c.return();case 21:if(t.prev=21,!s){t.next=24;break}throw o;case 24:return t.finish(21);case 25:return t.finish(18);case 26:p={show:!0,chart:{type:"spline"},title:{text:null},yAxis:{title:{text:null}},xAxis:{categories:a},series:[{name:"报名人数",data:n}]},this.applyNumOpt=p;case 28:case"end":return t.stop()}}),t,this,[[10,14,18,26],[19,,21,25]])})));function e(){return t.apply(this,arguments)}return e}(),getXueKeData:function(){var t=Z(v.a.mark((function t(){var e,i,a,n,r,s,o,c,l,u;return v.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/activity/GetWorkCountBySubject",ActivityId:this.activityId}).catch((function(t){return t}));case 2:if(e=t.sent,"OK"==e.ErrorCode){t.next=5;break}return t.abrupt("return",this.$message.error(e.ErrorMsg));case 5:for(i=e.Data.SubjectList||[],a=[],n=!0,r=!1,s=void 0,t.prev=10,o=i[Symbol.iterator]();!(n=(c=o.next()).done);n=!0)l=c.value,a.push({name:l.Name,y:l.Num});t.next=18;break;case 14:t.prev=14,t.t0=t["catch"](10),r=!0,s=t.t0;case 18:t.prev=18,t.prev=19,n||null==o.return||o.return();case 21:if(t.prev=21,!r){t.next=24;break}throw s;case 24:return t.finish(21);case 25:return t.finish(18);case 26:u={show:!0,chart:{type:"pie"},title:{text:"学科分布"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!1},showInLegend:!0}},series:[{name:"学科",data:a}]},this.xuekeOpt=u;case 28:case"end":return t.stop()}}),t,this,[[10,14,18,26],[19,,21,25]])})));function e(){return t.apply(this,arguments)}return e}(),getXueDuanData:function(){var t=Z(v.a.mark((function t(){var e,i,a,n,r,s,o,c,l,u,d;return v.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/activity/GetWorkCountByTerm",ActivityId:this.activityId}).catch((function(t){return t}));case 2:if(e=t.sent,"OK"==e.ErrorCode){t.next=5;break}return t.abrupt("return",this.$message.error(e.ErrorMsg));case 5:for(i=e.Data.TermList||[],a=[],n=[],r=!0,s=!1,o=void 0,t.prev=10,c=i[Symbol.iterator]();!(r=(l=c.next()).done);r=!0)u=l.value,n.push(u.Name),a.push(u.Num);t.next=18;break;case 14:t.prev=14,t.t0=t["catch"](10),s=!0,o=t.t0;case 18:t.prev=18,t.prev=19,r||null==c.return||c.return();case 21:if(t.prev=21,!s){t.next=24;break}throw o;case 24:return t.finish(21);case 25:return t.finish(18);case 26:d={show:!0,chart:{type:"column"},title:{text:"组别分布"},yAxis:{title:{text:null}},xAxis:{categories:n},plotOptions:{column:{borderRadius:4,pointPadding:.3,borderWidth:0,stacking:"normal"}},series:[{name:"组别",data:a}]},this.xueduanOpt=d;case 28:case"end":return t.stop()}}),t,this,[[10,14,18,26],[19,,21,25]])})));function e(){return t.apply(this,arguments)}return e}(),getTableData:function(){var t=Z(v.a.mark((function t(){var e,i;return v.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/activity/GetDivisionStatistics",ActivityId:this.activityId}).catch((function(t){return t}));case 2:if(e=t.sent,"OK"==e.ErrorCode){t.next=5;break}return t.abrupt("return",this.$message.error(e.ErrorMsg));case 5:i=e.Data,this.areaData=i.AreaData,this.schoolData=i.SchoolData;case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},et=tt,it=(i("28f0"),Object(u["a"])(et,K,H,!1,null,null,null)),at=it.exports,nt={components:{ActivitySetting:p,ApplyMessage:k,ProductionMessage:D,WorksIn:U,FeedBack:J,Statistics:at},data:function(){return{activeName:"",activityName:""}},watch:{activeName:function(t){location.hash=t}},mounted:function(){this.activeName=location.hash.substr(1)||"first",this.activityName=this.$route.query.title||"活动名称"},methods:{goToMyAct:function(){this.$router.push("/myActivity")}}},rt=nt,st=(i("360c"),i("6cca"),Object(u["a"])(rt,a,n,!1,null,"1331a42c",null));e["default"]=st.exports},"98ca":function(t,e,i){"use strict";var a=i("2760"),n=i.n(a);n.a},"9a7a":function(t,e,i){},"9b12":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"user-center"},[a("el-card",[a("div",{staticClass:"user-wrap"},[a("div",{staticClass:"user-content"},[a("div",{staticClass:"user-left"},[a("div",{staticClass:"block"},[a("div",{staticClass:"user-text"},[t._v("我参加的活动")]),a("el-table",{staticStyle:{width:"100%","font-size":"12px"},attrs:{data:t.tableData,height:"460px"}},[a("el-table-column",{attrs:{width:"40px"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.remind_counts>0?a("p",{staticClass:"el-icon-message-solid",staticStyle:{color:"red","font-size":"16px"}}):t._e()]}}])}),a("el-table-column",{attrs:{label:"活动名称","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.info.activity))]}}])}),a("el-table-column",{attrs:{label:"项目","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                  "+t._s(e.row.info.project)+"\n                  ")]}}])}),a("el-table-column",{attrs:{label:"组别"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.gradeObj[e.row.period]))]}}])}),a("el-table-column",{attrs:{label:"作者","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[[t._v(t._s(e.row.works.member.author.map((function(t){return t.name})).join("、")))]]}}])}),a("el-table-column",{attrs:{label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",{staticStyle:{color:"#1985F3"}},[t._v(t._s(e.row.process))])]}}])}),a("el-table-column",{attrs:{label:"报名日期"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.timeFormat(1e3*e.row.created_at,"yyyy-MM-dd")))]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(i){return t.goToActDetail(e.row.id)}}},[t._v("查看")]),a("el-button",{staticStyle:{color:"red"},attrs:{type:"text"},on:{click:function(i){return t.goToDelete(e.row.id)}}},[t._v("删除")])]}}])})],1),a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[20,30,40,50,100],"page-size":t.perPage,layout:"total, sizes, prev, pager, next, jumper",total:t.totalCount},on:{"size-change":t.pageSizeChange,"current-change":t.pageCurrentChange}})],1)]),a("div",{staticClass:"user-right"},[a("div",{staticClass:"user-edit"},[a("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:t.goToUserEdit}},[t._v("编辑")])],1),t.user?a("div",{staticClass:"user-info-wrap"},[a("div",{staticClass:"user-head-left"},[""!=t.user.avatar?a("img",{attrs:{src:t.user.avatar}}):a("img",{attrs:{src:i("fcb3")}})]),a("div",{staticClass:"user-head-right"},[a("div",{staticClass:"user-name"},[t._v("\n                "+t._s(t.user.name)+"\n                "),a("p",{staticStyle:{color:"#666","font-size":"12px","margin-left":"10px"}},[t._v(t._s(t.nowRole.name))])]),a("div",{staticClass:"user-tel"},[t._v(t._s(t.user.mobile))]),a("div",{staticClass:"user-tel"},[t._v(t._s(t.nowRole.school_title))])])]):t._e()])])])])],1)},n=[],r=i("46b4"),s=i.n(r),o=i("11e2"),c=i("408b");i("0210");function l(t,e,i,a,n,r,s){try{var o=t[r](s),c=o.value}catch(l){return void i(l)}o.done?e(c):Promise.resolve(c).then(a,n)}function u(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var r=t.apply(e,i);function s(t){l(r,a,n,s,o,"next",t)}function o(t){l(r,a,n,s,o,"throw",t)}s(void 0)}))}}var d={name:"activity-center",components:{HighCharts:o["a"]},data:function(){return{currentPage:1,perPage:20,totalCount:0,tableData:[],statusMap:{},abilityOpt:{},gradeObj:{1:"幼教组",2:"小学组",4:"初中组",8:"高中组",16:"特教组",32:"中职组",64:"高教组"},nowRole:JSON.parse(localStorage.getItem("nowRole"))}},computed:{user:function(){return this.$store.state.account.user}},created:function(){},mounted:function(){this.$store.dispatch("INIT_REMINDCOUNT",0);var t=[{Name:"沟通能力",Value:0},{Name:"逻辑思维",Value:0},{Name:"实践创新",Value:0},{Name:"艺术",Value:0},{Name:"人文底蕴",Value:0}];this.$nextTick((function(){this.renderChart(t)}));var e={};this.getActivityList(e)},methods:{getActivityList:function(){var t=u(s.a.mark((function t(e){var i=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.url=c["a"].enroll,e.bself=1,e.expand="info,works,school,professional,award",t.next=5,this.axiosGet(e).then((function(t){for(var e in i.tableData=t.items,i.totalCount=t._meta.totalCount,i.tableData)i.tableData[e].award.length>0?i.tableData[e].process="已获奖":i.tableData[e].score>0?i.tableData[e].process="已评分":0==i.tableData[e].status?i.tableData[e].process="已退回":i.tableData[e].process="已提交"})).catch((function(t){return t}));case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),pageSizeChange:function(t){this.perPage=t;var e={"per-page":this.perPage};e.page=this.currentPage,this.getActivityList(e)},pageCurrentChange:function(t){this.currentPage=t;var e={"per-page":this.perPage};e.page=this.currentPage,this.getActivityList(e)},renderChart:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=[],i=[];t.forEach((function(t){e.push(t.Name),i.push(t.Value)}));var a={show:!0,chart:{polar:!0,type:"line"},title:{text:"我的能力图谱"},pane:{size:"65%"},xAxis:{categories:e,tickmarkPlacement:"on",lineWidth:0},yAxis:{gridLineInterpolation:"polygon",lineWidth:0,min:0},legend:{enabled:!1},series:[{name:"能力值",data:i,pointPlacement:"on"}]};this.abilityOpt=a},goToActDetail:function(t){this.$router.push({path:"/home/activityDetail",query:{id:t,look:1}})},goToDelete:function(t){this.open(t)},open:function(t){var e=this;this.$confirm("此操作将永久删除该报名记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var i={};i.id=t,e.deleteConfirm(i)})).catch((function(){e.$message({type:"info",message:"已取消！"})}))},deleteConfirm:function(){var t=u(s.a.mark((function t(e){var i=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.url=c["a"].enroll,e.status=-1,t.next=4,this.axiosPut(e).then((function(t){if(void 0!=t.id){i.$message({type:"success",message:"删除成功"});var e={"per-page":i.perPage};e.page=i.currentPage,i.getActivityList(e)}else i.$message({type:"warning",message:"删除失败"})})).catch((function(t){return t}));case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),goToUserEdit:function(){this.$router.push({path:"/userCenter/userEdit"})}}},p=d,h=(i("52c5"),i("623f")),m=Object(h["a"])(p,a,n,!1,null,"23029605",null);e["default"]=m.exports},"9bc0":function(t,e,i){"use strict";var a=i("66f8"),n=i.n(a);n.a},"9bd8":function(t,e,i){},"9dc9":function(t,e,i){t.exports=i.p+"img/delete.a63b27d3.svg"},"9e1e":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"works-preview"},[i("div",{staticClass:"title"},[i("el-button",{staticStyle:{position:"absolute",left:"0"},attrs:{type:"defualt",size:"mini"},on:{click:t.goback}},[t._v("返回")]),i("p",[t._v(t._s(t.activityDetail.works.title))]),i("span",{staticStyle:{position:"absolute",right:"50px",color:"#999999","font-size":"12px"}},[t._v("作品编号:"+t._s(t.activityDetail.serial_id))])],1),i("el-divider"),i("el-row",[i("el-col",{attrs:{span:20,offset:2}},[i("div",{staticClass:"content-main"},[t.rejectReason?i("div",{staticClass:"content-item"},[i("div",{staticClass:"sub-title",staticStyle:{color:"red","font-weight":"700"}},[t._v("退回详情")]),i("div",{staticClass:"content ql-snow ql-editor",staticStyle:{color:"red","font-weight":"700"},domProps:{innerHTML:t._s(t.activityDetail.comment)}})]):t._e(),void 0!=t.activityDetail.works&&void 0!=t.activityDetail.works.cover&&""!=t.activityDetail.works.cover?i("div",{staticClass:"content-item"},[i("div",{staticClass:"sub-title"},[t._v("作品封面")]),i("div",{staticClass:"content"},[i("el-image",{attrs:{src:t.activityDetail.works.cover,fit:t.cover}})],1)]):t._e(),null!=t.activityDetail.works.content&&""!=t.activityDetail.works.content.content?i("div",{staticClass:"content-item"},[i("div",{staticClass:"sub-title"},[t._v("作品介绍")]),i("div",{staticClass:"content ql-snow ql-editor",domProps:{innerHTML:t._s(t.activityDetail.works.content.content)}})]):t._e(),null!=t.activityDetail.works.content&&""!=t.activityDetail.works.content.production?i("div",{staticClass:"content-item"},[i("div",{staticClass:"sub-title"},[t._v("创作过程")]),i("div",{staticClass:"content"},[t._v(t._s(t.activityDetail.works.content.production))])]):t._e(),null!=t.activityDetail.works.content&&""!=t.activityDetail.works.content.reference?i("div",{staticClass:"content-item"},[i("div",{staticClass:"sub-title"},[t._v("参考资源")]),i("div",{staticClass:"content"},[t._v(t._s(t.activityDetail.works.content.reference))])]):t._e(),null!=t.activityDetail.works.content&&""!=t.activityDetail.works.content.environment?i("div",{staticClass:"content-item"},[i("div",{staticClass:"sub-title"},[t._v("制作用软件及运行环境")]),i("div",{staticClass:"content"},[t._v(t._s(t.activityDetail.works.content.environment))])]):t._e(),null!=t.activityDetail.works.content&&""!=t.activityDetail.works.content.remark?i("div",{staticClass:"content-item"},[i("div",{staticClass:"sub-title"},[t._v("其他说明")]),i("div",{staticClass:"content"},[t._v(t._s(t.activityDetail.works.content.remark))])]):t._e(),t._l(t.fields,(function(e){return[1==e.type||2==e.type||3==e.type?i("div",{staticClass:"content-item"},[i("div",{staticClass:"sub-title"},[t._v(t._s(e.title))]),i("div",{staticClass:"content"},[t._v(t._s(e.data))])]):t._e(),7==e.type||9==e.type?i("div",{staticClass:"content-item"},[i("div",{staticClass:"sub-title"},[t._v(t._s(e.title))]),t._l(e.options,(function(a){return[e.data==a.value?i("div",{staticClass:"content"},[t._v(t._s(a.text))]):t._e()]}))],2):t._e(),8==e.type?i("div",{staticClass:"content-item"},[i("div",{staticClass:"sub-title"},[t._v(t._s(e.title))]),t._l(e.data,(function(a){return[t._l(e.options,(function(e){return[a==e.value?i("div",{staticClass:"content"},[t._v(t._s(e.text))]):t._e()]}))]}))],2):t._e()]})),i("div",{staticClass:"content-item",staticStyle:{width:"80%"}},[i("div",{staticClass:"sub-title"},[t._v("作品:")]),i("div",{staticClass:"content"},[t._l(t.activityDetail.works.attachment,(function(e){return[i("file-preview",{attrs:{fileObj:e,showDownLoad:t.showDownLoad}})]}))],2)]),t.award?t._e():i("div",{staticClass:"content-item"},[i("div",{staticClass:"sub-title"},[t._v("报名登记表:")]),i("div",{staticClass:"content filePreview"},[t._l(t.activityDetail.registration,(function(t){return[i("file-preview",{attrs:{fileObj:t}})]}))],2)]),t.workDetail?i("el-divider"):t._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:t.workDetail,expression:"workDetail"}],staticClass:"works-detail-main"},[i("div",{staticClass:"works-detail-item",staticStyle:{color:"red","font-weight":"700"}},[t._v("获奖信息："+t._s(t.getAward||"暂未获奖"))]),i("div",{staticClass:"works-detail-item"},[t._v("活动名称："+t._s(t.activityDetail.info.activity))]),i("div",{staticClass:"works-detail-item"},[t._v("活动项目："+t._s(t.activityDetail.info.project))]),i("div",{staticClass:"works-detail-item"},[t._v("组别："+t._s(t.periodList[t.activityDetail.period]))]),i("div",{staticClass:"works-detail-item"},[t._v("学校："+t._s(t.activityDetail.school.title))]),t.award?t._e():[void 0!=t.activityDetail.works.member.author?i("div",{staticClass:"works-detail-item"},[t._v("作者："+t._s(t.activityDetail.works.member.author.map((function(t){return t.name+"("+t.mobile+")"})).join("、")))]):t._e(),void 0!=t.activityDetail.works.member.mentor&&void 0!=t.activityDetail.works.member.mentor[0]&&""!=t.activityDetail.works.member.mentor[0].name?i("div",{staticClass:"works-detail-item"},[t._v("指导老师："+t._s(t.activityDetail.works.member.mentor.map((function(t){return t.name+"("+t.mobile+")"})).join("、")))]):t._e()],t.award?[void 0!=t.activityDetail.works.member.author?i("div",{staticClass:"works-detail-item"},[t._v("作者："+t._s(t.activityDetail.works.member.author.map((function(t){return t.name})).join("、")))]):t._e(),void 0!=t.activityDetail.works.member.mentor&&void 0!=t.activityDetail.works.member.mentor[0]&&""!=t.activityDetail.works.member.mentor[0].name?i("div",{staticClass:"works-detail-item"},[t._v("指导老师："+t._s(t.activityDetail.works.member.mentor.map((function(t){return t.name})).join("、")))]):t._e()]:t._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.award,expression:"!award"}],staticClass:"works-detail-item"},[t._v("邮箱："+t._s(t.activityDetail.works.email))])],2)],2)])],1)],1)},n=[],r=i("46b4"),s=i.n(r),o=i("408b"),c=(i("0210"),i("2847")),l=i("c944"),u=i("e205"),d=i("824b"),p=i("5f84"),h=i("327b"),m=i("8b55");function f(t,e,i,a,n,r,s){try{var o=t[r](s),c=o.value}catch(l){return void i(l)}o.done?e(c):Promise.resolve(c).then(a,n)}function v(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var r=t.apply(e,i);function s(t){f(r,a,n,s,o,"next",t)}function o(t){f(r,a,n,s,o,"throw",t)}s(void 0)}))}}var g={components:{FilePreview:c["a"],SingleTextBox:l["a"],MultiTextBox:u["a"],NumberBox:d["a"],SelectBox:p["a"],SingleCheckBox:h["a"],MultiCheckBox:m["a"]},props:{id:{type:Number,default:function(){return 0}},inscore:{type:String,default:function(){return""}},award:{type:Boolean,default:function(){return!1}},workDetail:{type:Boolean,default:function(){return!0}},rejectReason:{type:Boolean,default:function(){return!1}},showDownLoad:{type:Boolean,default:function(){return!0}}},data:function(){return{activityDetail:{},periodList:{1:"幼教组",2:"小学组",4:"初中组",8:"高中组",16:"特教组",32:"中职组",64:"高教组"},getAward:"",fields:[]}},mounted:function(){var t=this;this.$nextTick((function(){t.getActivityDetail(t.id)}))},methods:{getActivityDetail:function(){var t=v(s.a.mark((function t(e){var i,a=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("进来"),i={},i.url=o["a"].enroll,i.id=e,""!=this.inscore&&(i.inscore=this.inscore),i.expand="info,works,school,professional,award,process",t.next=8,this.axiosGet(i).then((function(t){for(var e in a.activityDetail=t,0!=a.activityDetail.award.length&&(a.getAward=a.activityDetail.award[0].title),a.activityDetail.registration=[],t.info.registrations)a.activityDetail.registration.push({name:"",url:t.info.registrations[e]});a.fields=t.info.fields.map((function(t){return t.required=1==t.required,7==t.type||9==t.type?t.myVal=parseInt(t.data):t.myVal=t.data,t}))})).catch((function(t){return t}));case 8:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),goback:function(){this.$router.go(-1),this.$emit("goback")}}},y=g,b=(i("5992"),i("623f")),w=Object(b["a"])(y,a,n,!1,null,"c2dbcefe",null);e["a"]=w.exports},"9e9b":function(t,e,i){"use strict";var a=i("8474"),n=i.n(a);n.a},a271:function(t,e,i){},a3b5:function(t,e,i){},a50a:function(t,e,i){},a65a:function(t,e,i){"use strict";var a=i("5fdd"),n=i.n(a);n.a},a6f7:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"home-center"},[i("el-card",{staticStyle:{"min-height":"650px"}},[i("div",{staticClass:"home-wrap"},[i("el-tabs",{on:{"tab-click":t.tabClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[3!=t.$store.state.account.nowRole.type?i("el-tab-pane",{attrs:{label:"活动设置",name:"first"}},[i("activity-setting",{attrs:{id:t.id}})],1):t._e(),i("el-tab-pane",{attrs:{label:"作品管理",name:"third"}},[i("works-management",{attrs:{id:t.id}})],1),3!=t.$store.state.account.nowRole.type?i("el-tab-pane",{attrs:{label:"评审结果",name:"fourth"}},[i("evaluation-result",{attrs:{id:t.id}})],1):t._e(),3!=t.$store.state.account.nowRole.type?i("el-tab-pane",{attrs:{label:"消息公告",name:"fifth"}},[i("el-row",[i("el-col",[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.goToRelease()}}},[t._v("发布公告")])],1)],1),i("el-row",[[i("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"","header-cell-style":{background:"#EEEEEE",color:"#323232"},"tooltip-effect":"dark"},on:{"selection-change":t.tableSelectionChange}},[i("el-table-column",{attrs:{label:"序号",type:"index",width:"160"}}),i("el-table-column",{attrs:{prop:"title",label:"名称"}}),i("el-table-column",{attrs:{label:"提交时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.formatDateChar(1e3*e.row.created_at)))]}}],null,!1,2839588626)}),i("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"text"},on:{click:function(i){return t.goToEdit(e.row.id)}}},[t._v("编辑")]),i("el-button",{staticStyle:{color:"red"},attrs:{type:"text"},on:{click:function(i){return t.goToDeleteItem(e.row.id)}}},[t._v("删除")])]}}],null,!1,2734149580)})],1)]],2),i("el-row",{staticClass:"page-div"},[i("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[20,30,40,50,100],"page-size":t.perPage,layout:"total, sizes, prev, pager, next, jumper",total:t.totalCount},on:{"size-change":t.pageSizeChange,"current-change":t.pageCurrentChange}})],1)],1):t._e()],1)],1)])],1)},n=[],r=i("46b4"),s=i.n(r),o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{clear:"both","text-align":"left"}},[i("el-form",{ref:"form",attrs:{model:t.form,inline:!0}},[i("el-form-item",{attrs:{label:"所在地区："}},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.addr,callback:function(e){t.$set(t.form,"addr",e)},expression:"form.addr"}},t._l(t.AddrList,(function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),i("el-form-item",{attrs:{label:"所在学校："}},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.schoolname,callback:function(e){t.$set(t.form,"schoolname",e)},expression:"form.schoolname"}},t._l(t.SchoolList,(function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),i("el-form-item",{attrs:{label:"报名时间："}},[i("el-date-picker",{attrs:{format:"yyyy-MM-dd",type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.form.enrolltime,callback:function(e){t.$set(t.form,"enrolltime",e)},expression:"form.enrolltime"}})],1),i("el-form-item",{attrs:{label:"电话："}},[i("el-input",{attrs:{placeholder:"请输入电话"},model:{value:t.form.phone,callback:function(e){t.$set(t.form,"phone",e)},expression:"form.phone"}})],1),i("el-form-item",{attrs:{label:"报名人："}},[i("el-input",{attrs:{placeholder:"请输入"},model:{value:t.form.enrollpersonl,callback:function(e){t.$set(t.form,"enrollpersonl",e)},expression:"form.enrollpersonl"}})],1),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.onSubmit()}}},[t._v("查询")])],1)],1),i("div",{staticStyle:{"margin-top":"16px"}},[[i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,stripe:""}},[i("el-table-column",{attrs:{label:"序号",type:"index",width:"180",align:"center"}}),i("el-table-column",{attrs:{prop:"date",label:"报名时间",width:"180"}}),i("el-table-column",{attrs:{prop:"name",label:"报名人",width:"180"}}),i("el-table-column",{attrs:{prop:"phone",label:"联系电话",width:"180"}}),i("el-table-column",{attrs:{prop:"address",label:"所在地区",width:"180"}}),i("el-table-column",{attrs:{prop:"schoolname",label:"所在学校",width:"180"}})],1)]],2),i("div",{staticClass:"block"},[i("el-pagination",{attrs:{"current-page":t.currentPage1,"page-sizes":[10],"page-size":100,layout:"total, sizes, prev, pager, next, jumper",total:10},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)},c=[],l={data:function(){return{form:{addr:"",schoolname:"",enrolltime:"",phone:"",enrollpersonl:""},AddrList:[{id:1,name:"宝安"},{id:2,name:"福田"},{id:3,name:"南山"}],SchoolList:[{id:1,name:"一中"},{id:2,name:"二中"},{id:3,name:"三中"}],tableData:[],currentPage1:1}},created:function(){this.tableData=[{date:"2019-12-20",name:"赵四",phone:"133131655",address:"罗湖区",schoolname:"罗湖中学"},{date:"2019-12-20",name:"赵四",phone:"133131655",address:"罗湖区",schoolname:"罗湖中学"},{date:"2019-12-20",name:"赵四",phone:"133131655",address:"罗湖区",schoolname:"罗湖中学"},{date:"2019-12-20",name:"赵四",phone:"133131655",address:"罗湖区",schoolname:"罗湖中学"},{date:"2019-12-20",name:"赵四",phone:"133131655",address:"罗湖区",schoolname:"罗湖中学"},{date:"2019-12-20",name:"赵四",phone:"133131655",address:"罗湖区",schoolname:"罗湖中学"},{date:"2019-12-20",name:"赵四",phone:"133131655",address:"罗湖区",schoolname:"罗湖中学"},{date:"2019-12-20",name:"赵四",phone:"133131655",address:"罗湖区",schoolname:"罗湖中学"},{date:"2019-12-20",name:"赵四",phone:"133131655",address:"罗湖区",schoolname:"罗湖中学"},{date:"2019-12-20",name:"赵四",phone:"133131655",address:"罗湖区",schoolname:"罗湖中学"}]},methods:{handleSizeChange:function(t){console.log("每页 ".concat(t," 条"))},handleCurrentChange:function(t){console.log("当前页: ".concat(t))}}},u=l,d=(i("58d0"),i("623f")),p=Object(d["a"])(u,o,c,!1,null,"d9f53c56",null),h=p.exports,m=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container"},[i("el-row",[i("type-select",{attrs:{gradeList:t.gradeList,activityProjectList:t.activityProjectList,activityTypleList:t.activityTypleList,regionList:t.regionList},on:{gradeObject:t.gradeObject,activityProjectObject:t.activityProjectObject,activityTypleObject:t.activityTypleObject,regionObject:t.regionObject}})],1),i("el-form",{ref:"form",attrs:{model:t.form,inline:!0}},[i("el-row",[i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"所在学校："}},[i("el-input",{staticStyle:{width:"260px"},attrs:{placeholder:"请输入",size:"small"},model:{value:t.form.school,callback:function(e){t.$set(t.form,"school",e)},expression:"form.school"}})],1)],1),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"作者："}},[i("el-input",{staticStyle:{width:"260px"},attrs:{placeholder:"请输入作者",size:"small"},model:{value:t.form.author,callback:function(e){t.$set(t.form,"author",e)},expression:"form.author"}})],1)],1),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"指导老师："}},[i("el-input",{staticStyle:{width:"260px"},attrs:{placeholder:"请输入指导老师",size:"small"},model:{value:t.form.mentor,callback:function(e){t.$set(t.form,"mentor",e)},expression:"form.mentor"}})],1)],1),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"作品名称："}},[i("el-input",{staticStyle:{width:"260px"},attrs:{placeholder:"请输入作品名称",size:"small"},model:{value:t.form.works_title,callback:function(e){t.$set(t.form,"works_title",e)},expression:"form.works_title"}})],1)],1),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"作品编号："}},[i("el-input",{staticStyle:{width:"260px"},attrs:{placeholder:"请输入作品编号",size:"small"},model:{value:t.form.work_id,callback:function(e){t.$set(t.form,"work_id",e)},expression:"form.work_id"}})],1)],1),i("el-col",{attrs:{span:2}},[i("el-form-item",[i("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:function(e){return t.goToSearch()}}},[t._v("查询")])],1)],1)],1)],1),i("el-row",[3==t.$store.state.account.nowRole.type?i("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.goToRecommmend()}}},[t._v("推荐市级")]):t._e(),3!=t.$store.state.account.nowRole.type?i("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.distributionWorks()}}},[t._v("分配作品")]):t._e(),i("el-button",{attrs:{size:"small"},on:{click:function(e){return t.downloadWorks()}}},[t._v("下载作品")]),i("el-button",{attrs:{size:"small"},on:{click:function(e){return t.exportWorks()}}},[t._v("导出excel")]),3==t.$store.state.account.nowRole.type?i("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:function(e){return t.returnWorksDialog()}}},[t._v("退回作品")]):t._e()],1),i("div",{staticStyle:{"margin-top":"16px"}},[[i("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"","header-cell-style":{background:"#EEEEEE",color:"#323232"},"tooltip-effect":"dark"},on:{"selection-change":t.tableSelectionChange}},[t._v("\n        >\n        "),i("el-table-column",{attrs:{type:"selection",width:"55"}}),i("el-table-column",{attrs:{prop:"",width:"130",label:"作品编号"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.serial_id))]}}])}),i("el-table-column",{attrs:{prop:"works.title",label:"作品名称","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"text"},on:{click:function(i){return t.goToActDetail(e.row)}}},[t._v(t._s(e.row.works.title))])]}}])}),i("el-table-column",{attrs:{prop:"author_",label:"作者","show-overflow-tooltip":""}}),i("el-table-column",{attrs:{prop:"mentor_",label:"指导老师","show-overflow-tooltip":""}}),i("el-table-column",{attrs:{prop:"school.areaName",label:"所在地区","show-overflow-tooltip":""}}),i("el-table-column",{attrs:{prop:"school.title",label:"所在学校","show-overflow-tooltip":""}}),i("el-table-column",{attrs:{prop:"info.category",label:"活动分类","show-overflow-tooltip":""}}),i("el-table-column",{attrs:{prop:"info.project",label:"活动项目","show-overflow-tooltip":""}}),i("el-table-column",{attrs:{label:"组别","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.gradeObj[e.row.period]))]}}])}),3!=t.$store.state.account.nowRole.type?i("el-table-column",{attrs:{label:"分配专家","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.professional.length>0?[t._v(t._s(e.row.professionalArr.join("、")))]:[t._v("未分配")]]}}],null,!1,4254215425)}):t._e(),3==t.$store.state.account.nowRole.type?i("el-table-column",{attrs:{width:"160",label:"推荐市级","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.position?[i("el-button",{attrs:{type:"text"},on:{click:function(i){return t.goToRecommmendItem(e.row.id)}}},[t._v("推荐市级")])]:[t._v("\n              已推荐市级\n              "),i("el-button",{staticStyle:{color:"red"},attrs:{type:"text"},on:{click:function(i){return t.goToDisRecommmendItem(e.row.id,e.row.award,e.row.professional)}}},[t._v("取消推荐")])]]}}],null,!1,1386874842)}):t._e(),0==t.$store.state.account.nowRole.type?i("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{staticStyle:{color:"red"},attrs:{type:"text"},on:{click:function(i){return t.goToDelete(e.row.id)}}},[t._v("删除")])]}}],null,!1,4040829847)}):t._e()],1)]],2),i("el-row",{staticClass:"page-div"},[i("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[20,30,40,50,100],"page-size":t.perPage,layout:"total, sizes, prev, pager, next, jumper",total:t.totalCount},on:{"size-change":t.pageSizeChange,"current-change":t.pageCurrentChange}})],1),t.dialogVisible?i("div",{staticClass:"mask"},[i("div",{staticClass:"box"},[i("my-transfer",{attrs:{workList:t.multipleSelection},on:{edit:t.edit,Noedit:t.Noedit}})],1)]):t._e(),i("el-dialog",{attrs:{title:"退回原因",visible:t.RejectVisible,width:"30%"},on:{"update:visible":function(e){t.RejectVisible=e}}},[i("el-input",{attrs:{placeholder:"请输入退回原因"},model:{value:t.rejectReason,callback:function(e){t.rejectReason=e},expression:"rejectReason"}}),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.RejectVisible=!1}}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:t.returnWorks}},[t._v("确 定")])],1)],1)],1)},f=[],v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("span",{staticClass:"countnum",staticStyle:{"margin-left":"33px"}},[t._v("共"+t._s(t.count)+"个作品")]),a("span",{staticClass:"title",staticStyle:{"margin-left":"244px"}},[t._v("分配作品")]),a("el-divider"),a("div",{staticClass:"div1",staticStyle:{overflow:"auto"}},[a("el-input",{staticClass:"inputclass",staticStyle:{},attrs:{placeholder:"请输入搜索名称"},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}}),a("div",{staticStyle:{"margin-top":"21px"}},t._l(t.checkedUserList,(function(e,i){return a("div",{key:i,staticStyle:{"margin-bottom":"10px"}},[a("img",{staticStyle:{width:"20px",height:"20px","margin-left":"30px"},attrs:{src:t.url}}),a("span",{staticStyle:{"margin-left":"56px","margin-top":"-25px",display:"block"}},[t._v(t._s(e.name))]),a("span",{staticStyle:{"margin-left":"301px",display:"block","margin-top":"-19px"},on:{change:function(e){return t.JudgeAdd(i)}}},[a("el-checkbox",{model:{value:t.userList[i].checked,callback:function(e){t.$set(t.userList[i],"checked",e)},expression:"userList[index].checked"}})],1)])})),0)],1),a("div",{staticClass:"div2",staticStyle:{overflow:"auto"}},[a("span",{staticStyle:{"font-size":"14px","font-family":"PingFang","font-weight":"500",color:"rgba(153,153,153,1)","line-height":"70px","margin-left":"30px"}},[t._v("请选择您要添加的人员")]),a("div",t._l(t.addList,(function(e,n){return a("div",{key:n},[a("div",{staticStyle:{width:"130px",height:"30px",background:"rgba(255,255,255,1)",border:"1px solid rgba(229,229,229,1)","border-radius":"4px","margin-left":"30px","margin-bottom":"5px"}},[a("p",{staticStyle:{"font-size":"14px",color:"rgba(51,51,51,1)","line-height":"30px","text-align":"center"}},[t._v(t._s(e.name))]),a("img",{staticStyle:{margin:"-24px 0 0 257px",display:"block"},attrs:{src:i("9dc9")},on:{click:function(e){return t.delet(n)}}})])])})),0),a("div",{staticClass:"bottom"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.commit()}}},[t._v("确认")]),a("el-button",{attrs:{size:"small"},on:{click:function(e){return t.Noedit()}}},[t._v("取消")])],1)])],1)},g=[],y=i("408b"),b=i("0210");function w(t,e,i,a,n,r,s){try{var o=t[r](s),c=o.value}catch(l){return void i(l)}o.done?e(c):Promise.resolve(c).then(a,n)}function x(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var r=t.apply(e,i);function s(t){w(r,a,n,s,o,"next",t)}function o(t){w(r,a,n,s,o,"throw",t)}s(void 0)}))}}var k={props:["workList"],data:function(){return{input:"",checkedUserList:[],userList:[],addList:[],url:i("665c"),count:""}},created:function(){this.getUserList(),this.count=this.workList.length},methods:{commit:function(){var t=x(s.a.mark((function t(){var e,i,a,n=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=[],i=[],this.addList.forEach((function(t){i.push(t.id)})),this.workList.forEach((function(t){e.push(t.id)})),a={},a.url=y["a"].assignment,a.enroll_ids=e,a.user_ids=i,t.next=10,this.axiosPost(a).then((function(t){0==t.code?(n.$message({type:"success",message:"分配成功！！"}),setTimeout((function(){n.$emit("edit",!1)}),1e3)):-1==t.code&&(n.$message({type:"error",message:t.message}),setTimeout((function(){n.$emit("Noedit",!1)}),1e3))})).catch((function(t){return t}));case 10:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getUserList:function(){var t=x(s.a.mark((function t(){var e,i;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={},e.url=y["a"].user,e.role_id=5,t.next=5,Object(b["axiosGet"])(e).catch((function(t){return t}));case 5:i=t.sent,0!=i.items.length&&(this.userList=i.items,this.checkedUserList=this.userList);case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),Noedit:function(){this.$emit("Noedit",!1)},JudgeAdd:function(t){var e=[];this.userList.forEach((function(t){1==t.checked&&e.push(t)})),this.addList=e,console.log(e)},delet:function(t){console.log(t);var e=[];this.addList[t].checked=!1,this.addList.forEach((function(t){1==t.checked&&e.push(t)})),this.addList=e},search:function(t){var e=[];if(""!=t){for(var i=0;i<this.userList.length;i++)this.userList[i].name.indexOf(t)>=0&&e.push(this.userList[i]);this.checkedUserList=e}}},watch:{input:function(t){console.log("input==",t),""!=t?(this.input=t,this.search(this.input)):this.checkedUserList=this.userList}}},_=k,C=(i("ae52"),Object(d["a"])(_,v,g,!1,null,"0fbb74fa",null)),S=C.exports,T=i("5c0a"),L=i("f753"),A=i.n(L);function I(t,e,i,a,n,r,s){try{var o=t[r](s),c=o.value}catch(l){return void i(l)}o.done?e(c):Promise.resolve(c).then(a,n)}function P(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var r=t.apply(e,i);function s(t){I(r,a,n,s,o,"next",t)}function o(t){I(r,a,n,s,o,"throw",t)}s(void 0)}))}}var D={components:{MyTransfer:S,TypeSelect:T["a"]},props:{id:{type:Number,default:function(){return 0}}},data:function(){return{activityProjectList:[{id:0,name:"全部"}],activityTypleList:[{id:0,name:"全部"}],regionList:[{id:0,name:"全部"}],multipleSelection:[],form:{school:"",works_title:"",mentor:"",author:"",work_id:""},tableData:[],dialogVisible:!1,totalCount:0,perPage:20,currentPage:1,region:"",item_id:"",period:"",category_id:"",ids:[],excelSteam:"",rejectReason:"",RejectVisible:!1,gradeObj:{1:"幼教组",2:"小学组",4:"初中组",8:"高中组",16:"特教组",32:"中职组",64:"高教组"},gradeList:[{id:0,name:"全部"}],ClassList:[{name:"幼教组",id:1},{name:"小学组",id:2},{name:"初中组",id:4},{name:"高中组",id:8},{name:"特教组",id:16},{name:"中职组",id:32},{name:"高教组",id:64}]}},watch:{id:function(t){console.log(t,"id")}},created:function(){var t={};this.getEnrollList(t)},mounted:function(){this.getActivityDetail()},methods:{getActivityDetail:function(){var t=P(s.a.mark((function t(){var e,i=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.activityProjectList=[{id:0,name:"全部"}],this.activityTypleList=[{id:0,name:"全部"}],e={},e.url=y["a"].activity,e.id=this.id,e.expand="detail,region,node,attachment,banner,category,categoryDetail",t.next=8,Object(b["axiosGet"])(e).then((function(t){var e=[1,2,4,8,16,32,64],a=i.getSubSet(t.period,e);for(var n in a)for(var r in i.ClassList)a[n]==i.ClassList[r].id&&i.gradeList.push(i.ClassList[r]);if(t.categoryDetail.length>0){for(var s in t.categoryDetail){var o={};for(var c in o.id=t.categoryDetail[s].id,o.name=t.categoryDetail[s].title,o.activityProjectList=[],t.categoryDetail[s].child){var l={};l.id=t.categoryDetail[s].child[c].id,l.name=t.categoryDetail[s].child[c].title,o.activityProjectList.push(l)}i.activityTypleList.push(o)}for(var u in i.activityTypleList)void 0!=i.activityTypleList[u].activityProjectList&&i.activityTypleList[u].activityProjectList.length>0&&(i.activityProjectList=i.activityProjectList.concat(i.activityTypleList[u].activityProjectList));t.region.forEach((function(t){i.regionList.push({id:t.id,name:t.area_name})}))}})).catch((function(t){return t}));case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),gradeObject:function(){var t=P(s.a.mark((function t(e){var i;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.period=e,i={"per-page":this.perPage},i.page=this.currentPage,this.getEnrollList(i);case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),activityProjectObject:function(){var t=P(s.a.mark((function t(e){var i;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.item_id=e,i={"per-page":this.perPage},i.page=this.currentPage,this.getEnrollList(i);case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),activityTypleObject:function(){var t=P(s.a.mark((function t(e){var i,a,n;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!=e){for(i in this.activityTypleList)e==this.activityTypleList[i].id&&(this.activityProjectList=this.activityTypleList[i].activityProjectList);this.item_id=this.activityProjectList[0].id}else if(0==e){for(a in this.activityProjectList=[{id:0,name:"全部"}],this.activityTypleList)void 0!=this.activityTypleList[a].activityProjectList&&this.activityTypleList[a].activityProjectList.length>0&&(this.activityProjectList=this.activityProjectList.concat(this.activityTypleList[a].activityProjectList));this.item_id=0}this.category_id=e,n={"per-page":this.perPage},n.page=this.currentPage,this.getEnrollList(n);case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),regionObject:function(){var t=P(s.a.mark((function t(e){var i;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.region=e,i={"per-page":this.perPage},i.page=this.currentPage,this.getEnrollList(i);case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),tableSelectionChange:function(t){this.multipleSelection=t},goToSearch:function(){var t={"per-page":this.perPage};t.page=this.currentPage,this.getEnrollList(t)},downloadWorks:function(){var t=P(s.a.mark((function t(){var e;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:({}),e=[],this.multipleSelection.forEach((function(t){e.push(t.id)})),A.a.get(y["a"].enroll,{params:{id:e.join(","),bdownload:"1",expand:"works"},headers:{"x-api-key":Object(b["getCookie"])("x-api-key")}}).then((function(t){0==t.data.code&&window.open(t.data.url)}));case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),exportWorks:function(){var t=P(s.a.mark((function t(){var e,i=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if({},e=[],this.multipleSelection.forEach((function(t){e.push(t.id)})),0!=e.length){t.next=5;break}return t.abrupt("return",this.$message({type:"error",message:"请先勾选需要导出的作品"}));case 5:A.a.get(y["a"].enroll,{params:{id:e.join(","),bexport:"1",expand:"info,works,school,professional,award"},responseType:"blob",headers:{"x-api-key":Object(b["getCookie"])("x-api-key")}}).then((function(t){if(200!=t.status)return i.$message({type:"error",message:"出错了"});var e=t.headers["content-disposition"].split("=")[1];i.downloadFile(e,t.data)}));case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),downloadFile:function(t,e){if(e){var i=window.URL.createObjectURL(new Blob([e])),a=document.createElement("a");a.style.display="none",a.href=i,a.setAttribute("download",t),document.body.appendChild(a),a.click()}},returnWorksDialog:function(){var t=this,e=this;this.multipleSelection.forEach((function(e){t.ids.push(e.id)}));for(var i=0;i<this.tableData.length;i++)for(var a=0;a<this.ids.length;a++)if(this.ids[a]==this.tableData[i].id&&(0!=this.tableData[i].award||0!=this.tableData[i].professional))return e.$message({type:"error",message:"您选择的作品中包含已评分不能退回的作品"});if(0==e.ids.length)return e.$message({type:"error",message:"请先勾选需要退回的作品"});e.RejectVisible=!0},returnWorks:function(){var t=P(s.a.mark((function t(){var e,i,a=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=this,""!=e.rejectReason){t.next=3;break}return t.abrupt("return",e.$message({type:"error",message:"请先填写退回理由"}));case 3:return i={},i.url=y["a"].reject,i.ids=e.ids,i.rejectReason=e.rejectReason,t.next=9,this.axiosPost(i).then((function(t){if(0==t.code){e.RejectVisible=!1,a.$message({type:"success",message:"退回成功"});var i={"per-page":a.perPage};i.page=a.currentPage,a.getEnrollList(i)}else-1==t.code&&a.$message({type:"warning",message:t.message})})).catch((function(t){return t}));case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),goToRecommmend:function(){var t=P(s.a.mark((function t(){var e,i=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.ids=[],this.multipleSelection.forEach((function(t){i.ids.push(t.id)})),e={},e.url=y["a"].recommend,e.ids=this.ids,e.position=1,e.value=1,t.next=9,this.axiosPost(e).then((function(t){if(0==t.code){i.$message({type:"success",message:"推荐成功！！"});var e={"per-page":i.perPage};e.page=i.currentPage,i.getEnrollList(e)}else-1==t.code&&i.$message({type:"warning",message:t.message})})).catch((function(t){return t}));case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),goToRecommmendItem:function(){var t=P(s.a.mark((function t(e){var i,a=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.ids=[],this.ids.push(e),i={},i.url=y["a"].recommend,i.ids=this.ids,i.position=1,i.value=1,t.next=9,this.axiosPost(i).then((function(t){if(0==t.code){a.$message({type:"success",message:"推荐成功！！"});var e={"per-page":a.perPage};e.page=a.currentPage,a.getEnrollList(e)}else-1==t.code&&a.$message({type:"warning",message:t.message})})).catch((function(t){return t}));case 9:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),goToDisRecommmendItem:function(){var t=P(s.a.mark((function t(e,i,a){var n,r=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0==i.length&&0==a.length){t.next=2;break}return t.abrupt("return",this.$message({type:"warning",message:"作品已分配专家评分不能取消推荐市级"}));case 2:return this.ids=[],this.ids.push(e),n={},n.url=y["a"].recommend,n.ids=this.ids,n.position=1,n.value=0,t.next=11,this.axiosPost(n).then((function(t){if(0==t.code){r.$message({type:"success",message:"推荐成功！！"});var e={"per-page":r.perPage};e.page=r.currentPage,r.getEnrollList(e)}else-1==t.code&&r.$message({type:"warning",message:t.message})})).catch((function(t){return t}));case 11:case"end":return t.stop()}}),t,this)})));function e(e,i,a){return t.apply(this,arguments)}return e}(),goToDelete:function(t){this.open(t)},open:function(t){var e=this;this.$confirm("此操作将永久删除该报名记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var i={};i.id=t,e.deleteConfirm(i)})).catch((function(){e.$message({type:"info",message:"已取消！"})}))},deleteConfirm:function(){var t=P(s.a.mark((function t(e){var i=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.url=y["a"].enroll,e.status=-1,t.next=4,this.axiosPut(e).then((function(t){if(void 0!=t.id){i.$message({type:"success",message:"删除成功"});var e={"per-page":i.perPage};e.page=i.currentPage,i.getEnrollList(e)}else i.$message({type:"warning",message:"删除失败"})})).catch((function(t){return t}));case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),getEnrollList:function(){var t=P(s.a.mark((function t(e){var i=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return""!=this.form.school&&(e.school=this.form.school),""!=this.form.works_title&&(e.works_title=this.form.works_title),""!=this.form.mentor&&(e.mentor=this.form.mentor),""!=this.form.author&&(e.author=this.form.author),""!=this.form.work_id&&(e.serial_id=this.form.work_id),0!=this.period&&""!=this.period&&(e.period=this.period),0!=this.category_id&&""!=this.category_id&&(e.category_id=this.category_id),0!=this.item_id&&""!=this.item_id&&(e.item_id=this.item_id),0!=this.region&&"77"!=this.region&&(e.region=this.region),3!=this.$store.state.account.nowRole.type&&(e.position=1),e.url=y["a"].enroll,e.expand="info,works,school,professional,award",e.activity_id=this.id,t.next=15,this.axiosGet(e).then((function(t){i.tableData=[],i.tableData=t.items,i.tableData.map((function(t){t.professionalArr=t.professional.map((function(t){return void 0!=t.name?t.name:[]}))}));for(var e=0;e<i.tableData.length;e++){var a=i.tableData[e].info.author.map((function(t){return t.name})),n=i.tableData[e].info.mentor.map((function(t){return t.name}));i.tableData[e].author_=a.join("、"),i.tableData[e].mentor_=n.join("、")}i.totalCount=t._meta.totalCount})).catch((function(t){return t}));case 15:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),edit:function(t){this.dialogVisible=t;var e={"per-page":this.perPage};e.page=this.currentPage,this.getEnrollList(e)},Noedit:function(t){this.dialogVisible=t},handleClose:function(t){this.$confirm("确认关闭？").then((function(e){t()})).catch((function(t){}))},distributionWorks:function(){this.dialogVisible=!this.dialogVisible},pageSizeChange:function(t){this.perPage=t;var e={"per-page":this.perPage};e.page=this.currentPage,this.getEnrollList(e)},pageCurrentChange:function(t){this.currentPage=t;var e={"per-page":this.perPage};e.page=this.currentPage,this.getEnrollList(e)},goToActDetail:function(t){console.log(t),this.$router.push({path:"/home/activityDetail",query:{id:t.id,look:0}})}}},j=D,O=(i("7546"),Object(d["a"])(j,m,f,!1,null,"200f18ea",null)),E=O.exports,N=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container"},[i("el-row",[i("type-select",{attrs:{gradeList:t.gradeList,activityProjectList:t.activityProjectList,activityTypleList:t.activityTypleList,regionList:t.regionList},on:{gradeObject:t.gradeObject,activityProjectObject:t.activityProjectObject,activityTypleObject:t.activityTypleObject,regionObject:t.regionObject}})],1),i("el-form",{ref:"form",attrs:{model:t.form,inline:!0}},[i("el-row",[i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"所在学校："}},[i("el-input",{staticStyle:{width:"260px"},attrs:{placeholder:"请输入",size:"small"},model:{value:t.form.school,callback:function(e){t.$set(t.form,"school",e)},expression:"form.school"}})],1)],1),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"作者："}},[i("el-input",{staticStyle:{width:"260px"},attrs:{placeholder:"请输入作者",size:"small"},model:{value:t.form.author,callback:function(e){t.$set(t.form,"author",e)},expression:"form.author"}})],1)],1),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"指导老师："}},[i("el-input",{staticStyle:{width:"260px"},attrs:{placeholder:"请输入指导老师",size:"small"},model:{value:t.form.mentor,callback:function(e){t.$set(t.form,"mentor",e)},expression:"form.mentor"}})],1)],1),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"作品名称："}},[i("el-input",{staticStyle:{width:"260px"},attrs:{placeholder:"请输入作品名称",size:"small"},model:{value:t.form.works_title,callback:function(e){t.$set(t.form,"works_title",e)},expression:"form.works_title"}})],1)],1),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"作品编号："}},[i("el-input",{staticStyle:{width:"260px"},attrs:{placeholder:"请输入作品编号",size:"small"},model:{value:t.form.work_id,callback:function(e){t.$set(t.form,"work_id",e)},expression:"form.work_id"}})],1)],1),i("el-col",{attrs:{span:2}},[i("el-form-item",[i("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:function(e){return t.goToSearch()}}},[t._v("查询")])],1)],1)],1)],1),i("div",{staticClass:"buttonenum"},[i("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.goToSetAwardMore()}}},[t._v("设置奖项")]),i("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(e){return t.goToRecommmend()}}},[t._v("推荐省级")]),i("el-button",{attrs:{size:"small"},on:{click:function(e){return t.downloadWorks()}}},[t._v("下载作品")]),i("el-button",{attrs:{size:"small"},on:{click:function(e){return t.goToDownload()}}},[t._v("导出excel")]),i("el-button",{attrs:{size:"small"},on:{click:function(e){return t.goToShowWorkMore()}}},[t._v("开启作品展示")])],1),i("div",{staticStyle:{"margin-top":"16px"}},[[i("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"","header-cell-style":{background:"#EEEEEE",color:"#323232"},"tooltip-effect":"dark"},on:{"selection-change":t.tableSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"55"}}),i("el-table-column",{attrs:{prop:"",width:"130",label:"作品编号"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(e.row.serial_id)+"\n          ")]}}])}),i("el-table-column",{attrs:{prop:"works.title",label:"作品名称","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"text"},on:{click:function(i){return t.goToActDetail(e.row)}}},[t._v(" "+t._s(e.row.works.title))])]}}])}),i("el-table-column",{attrs:{prop:"author_",label:"作者","show-overflow-tooltip":""}}),i("el-table-column",{attrs:{prop:"mentor_",label:"指导老师","show-overflow-tooltip":""}}),i("el-table-column",{attrs:{prop:"school.areaName",label:"所在地区","show-overflow-tooltip":""}}),i("el-table-column",{attrs:{prop:"school.title",label:"所在学校","show-overflow-tooltip":""}}),i("el-table-column",{attrs:{label:"得分",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return t.goToScoreDetail(e.row.id)}}},[t._v(t._s(e.row.score))])]}}])}),i("el-table-column",{attrs:{label:"作品展示",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.position<4?[i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return t.goToShowWork(e.row.id,1)}}},[t._v("开启作品展示")])]:[i("el-button",{staticStyle:{color:"red"},attrs:{type:"text",size:"small"},on:{click:function(i){return t.goToShowWork(e.row.id,0)}}},[t._v("关闭作品展示")])]]}}])}),i("el-table-column",{attrs:{label:"获奖",width:"100","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.award.length>0?[i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return t.goToSetAward(e.row.id)}}},[t._v("修改")]),t._l(e.row.award,(function(e){return[t._v("\n                "+t._s(e.title)+"\n              ")]}))]:[i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return t.goToSetAward(e.row.id)}}},[t._v("设置奖项")])]]}}])}),i("el-table-column",{attrs:{label:"推荐省级",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.position||5==e.row.position?[i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return t.goToRecommmendItem(e.row.id)}}},[t._v("推荐省级")])]:[t._v("\n              已推荐省级\n              "),i("el-button",{staticStyle:{color:"red"},attrs:{type:"text",size:"small"},on:{click:function(i){return t.goToDisRecommmendItem(e.row.id)}}},[t._v("取消推荐")])]]}}])})],1)]],2),i("el-row",{staticClass:"page-div"},[i("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[20,30,40,50,100],"page-size":t.perPage,layout:"total, sizes, prev, pager, next, jumper",total:t.totalCount},on:{"size-change":t.pageSizeChange,"current-change":t.pageCurrentChange}})],1),i("el-dialog",{attrs:{title:"设置奖项",visible:t.awardDialogVisible,width:"200",center:""},on:{"update:visible":function(e){t.awardDialogVisible=e}}},[i("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"center"}},[i("el-col",{attrs:{offset:5}},[i("el-checkbox-group",{on:{change:t.awardCheckedChange},model:{value:t.award_ids,callback:function(e){t.award_ids=e},expression:"award_ids"}},t._l(t.awardList,(function(e){return i("el-checkbox",{key:e.id,attrs:{label:e.id}},[t._v(t._s(e.title))])})),1)],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:t.submitSetAward}},[t._v("确 定")])],1)],1)],1)},$=[];function F(t,e,i,a,n,r,s){try{var o=t[r](s),c=o.value}catch(l){return void i(l)}o.done?e(c):Promise.resolve(c).then(a,n)}function z(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var r=t.apply(e,i);function s(t){F(r,a,n,s,o,"next",t)}function o(t){F(r,a,n,s,o,"throw",t)}s(void 0)}))}}var U={components:{TypeSelect:T["a"]},props:{id:{type:Number,default:function(){return 0}}},data:function(){return{currentPage:1,perPage:20,totalCount:0,multipleSelection:[],activityProjectList:[{id:0,name:"全部"}],activityTypleList:[{id:0,name:"全部"}],regionList:[{id:0,name:"全部"}],form:{school:"",works_title:"",mentor:"",author:"",work_id:""},tableData:[],awardList:[],ids:[],awardDialogVisible:!1,enroll_ids:[],award_ids:[],gradeObj:{1:"幼教组",2:"小学组",4:"初中组",8:"高中组",16:"特教组",32:"中职组",64:"高教组"},gradeList:[{id:0,name:"全部"}],ClassList:[{name:"幼教组",id:1},{name:"小学组",id:2},{name:"初中组",id:4},{name:"高中组",id:8},{name:"特教组",id:16},{name:"中职组",id:32},{name:"高教组",id:64}]}},created:function(){var t={};this.getEnrollList(t)},mounted:function(){this.getActivityDetail(),this.getAwardList()},methods:{getActivityDetail:function(){var t=z(s.a.mark((function t(){var e,i=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.activityProjectList=[{id:0,name:"全部"}],this.activityTypleList=[{id:0,name:"全部"}],e={},e.url=y["a"].activity,e.id=this.id,e.expand="detail,region,node,attachment,banner,category,categoryDetail",t.next=8,Object(b["axiosGet"])(e).then((function(t){var e=[1,2,4,8,16,32,64],a=i.getSubSet(t.period,e);for(var n in a)for(var r in i.ClassList)a[n]==i.ClassList[r].id&&i.gradeList.push(i.ClassList[r]);if(t.categoryDetail.length>0){for(var s in t.categoryDetail){var o={};for(var c in o.id=t.categoryDetail[s].id,o.name=t.categoryDetail[s].title,o.activityProjectList=[],t.categoryDetail[s].child){var l={};l.id=t.categoryDetail[s].child[c].id,l.name=t.categoryDetail[s].child[c].title,o.activityProjectList.push(l)}i.activityTypleList.push(o)}for(var u in i.activityTypleList)void 0!=i.activityTypleList[u].activityProjectList&&i.activityTypleList[u].activityProjectList.length>0&&(i.activityProjectList=i.activityProjectList.concat(i.activityTypleList[u].activityProjectList));t.region.forEach((function(t){i.regionList.push({id:t.id,name:t.area_name})}))}})).catch((function(t){return t}));case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),gradeObject:function(){var t=z(s.a.mark((function t(e){var i;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.period=e,i={"per-page":this.perPage},i.page=this.currentPage,this.getEnrollList(i);case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),activityProjectObject:function(){var t=z(s.a.mark((function t(e){var i;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.item_id=e,i={"per-page":this.perPage},i.page=this.currentPage,this.getEnrollList(i);case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),activityTypleObject:function(){var t=z(s.a.mark((function t(e){var i,a,n;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!=e){for(i in this.activityTypleList)e==this.activityTypleList[i].id&&(this.activityProjectList=this.activityTypleList[i].activityProjectList);this.item_id=this.activityProjectList[0].id}else if(0==e){for(a in this.activityProjectList=[{id:0,name:"全部"}],this.activityTypleList)void 0!=this.activityTypleList[a].activityProjectList&&this.activityTypleList[a].activityProjectList.length>0&&(this.activityProjectList=this.activityProjectList.concat(this.activityTypleList[a].activityProjectList));this.item_id=0}this.category_id=e,n={"per-page":this.perPage},n.page=this.currentPage,this.getEnrollList(n);case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),regionObject:function(){var t=z(s.a.mark((function t(e){var i;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.region=e,i={"per-page":this.perPage},i.page=this.currentPage,this.getEnrollList(i);case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),goToSearch:function(){var t={"per-page":this.perPage};t.page=this.currentPage,this.getEnrollList(t)},getEnrollList:function(){var t=z(s.a.mark((function t(e){var i=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return""!=this.form.school&&(e.school=this.form.school),""!=this.form.works_title&&(e.works_title=this.form.works_title),""!=this.form.mentor&&(e.mentor=this.form.mentor),""!=this.form.author&&(e.author=this.form.author),""!=this.form.work_id&&(e.serial_id=this.form.work_id),0!=this.period&&""!=this.period&&(e.period=this.period),0!=this.category_id&&""!=this.category_id&&(e.category_id=this.category_id),0!=this.item_id&&""!=this.item_id&&(e.item_id=this.item_id),0!=this.region&&"77"!=this.region&&(e.region=this.region),e.url=y["a"].enroll,e.expand="info,works,school,professional,award",e.activity_id=this.id,e.scored=1,e.position=1,t.next=16,this.axiosGet(e).then((function(t){i.tableData=[],i.tableData=t.items,console.log("ces",i.tableData),i.tableData.forEach((function(t){t.score=t.score/10;var e=t.info.author.map((function(t){return t.name})),i=t.info.mentor.map((function(t){return t.name}));t.author_=e.join("、"),t.mentor_=i.join("、")})),i.totalCount=t._meta.totalCount})).catch((function(t){return t}));case 16:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),getAwardList:function(){var t=z(s.a.mark((function t(){var e,i=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={},e.url=y["a"].award,e.ball=1,t.next=5,this.axiosGet(e).then((function(t){i.awardList=t.items})).catch((function(t){return t}));case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),goToDownload:function(){var t=this,e=[];if(this.multipleSelection.forEach((function(t){e.push(t.id)})),0==e.length)return this.$message({type:"error",message:"请先勾选需要导出的作品"});A.a.get(y["a"].enroll,{params:{id:e.join(","),bexport:"1",expand:"info,works,school,professional,award"},responseType:"blob",headers:{"x-api-key":Object(b["getCookie"])("x-api-key")}}).then((function(e){if(console.log("res===",e),200!=e.status)return-1==e.code?t.$message({type:"error",message:e.message}):t.$message({type:"error",message:"导出出错"});var i=e.headers["content-disposition"].split("=")[1];t.downloadFile(i,e.data)}))},downloadFile:function(t,e){if(e){var i=window.URL.createObjectURL(new Blob([e])),a=document.createElement("a");a.style.display="none",a.href=i,a.setAttribute("download",t),document.body.appendChild(a),a.click()}},downloadWorks:function(){var t=z(s.a.mark((function t(){var e;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:({}),e=[],this.multipleSelection.forEach((function(t){e.push(t.id)})),A.a.get(y["a"].enroll,{params:{id:e.join(","),bdownload:"1",expand:"works"},headers:{"x-api-key":Object(b["getCookie"])("x-api-key")}}).then((function(t){0==t.data.code&&window.open(t.data.url)}));case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),goToScoreDetail:function(t){this.$router.push({path:"/activeManager/managerCenter/EvaluationResultDetail",query:{id:t}})},goToShowWorkMore:function(){var t=z(s.a.mark((function t(){var e,i=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.ids=[],this.multipleSelection.forEach((function(t){i.ids.push(t.id)})),e={},e.url=y["a"].recommend,e.ids=this.ids,e.position=4,e.value=1,t.next=9,this.axiosPost(e).then((function(t){if(0==t.code){i.$message({type:"success",message:"开启成功！！"});var e={"per-page":i.perPage};e.page=i.currentPage,i.getEnrollList(e)}else-1==t.code&&i.$message({type:"warning",message:t.message})})).catch((function(t){return t}));case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),goToShowWork:function(){var t=z(s.a.mark((function t(e,i){var a,n,r=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a="",this.ids=[],this.ids.push(e),n={},n.url=y["a"].recommend,n.ids=this.ids,n.position=4,1==i?(n.value=i,a="开启成功！！"):0==i&&(n.value=i,a="关闭成功！！"),t.next=10,this.axiosPost(n).then((function(t){if(0==t.code){r.$message({type:"success",message:a});var e={"per-page":r.perPage};e.page=r.currentPage,r.getEnrollList(e)}else-1==t.code&&r.$message({type:"warning",message:t.message})})).catch((function(t){return t}));case 10:case"end":return t.stop()}}),t,this)})));function e(e,i){return t.apply(this,arguments)}return e}(),goToSetAwardMore:function(){var t=this;this.awardDialogVisible=!0,this.enroll_ids=[],this.multipleSelection.forEach((function(e){t.enroll_ids.push(e.id)}))},goToSetAward:function(t){this.awardDialogVisible=!0,this.enroll_ids=[],this.enroll_ids.push(t)},awardCheckedChange:function(t){},submitSetAward:function(){var t=z(s.a.mark((function t(){var e,i=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e={},e.url=y["a"].awards,!(this.enroll_ids.length>0)){t.next=6;break}e.enroll_ids=this.enroll_ids,t.next=8;break;case 6:return this.$message({type:"warning",message:"请选择对象"}),t.abrupt("return");case 8:return this.award_ids.length>0?e.award_ids=this.award_ids:this.$message({type:"warning",message:"请选择奖项"}),t.next=11,this.axiosPost(e).then((function(t){if(0==t.code){i.$message({type:"success",message:"颁奖成功！！"}),i.awardDialogVisible=!1;var e={"per-page":i.perPage};e.page=i.currentPage,i.getEnrollList(e)}else-1==t.code&&i.$message({type:"warning",message:t.message})})).catch((function(t){return t}));case 11:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),goToRecommmend:function(){var t=z(s.a.mark((function t(){var e,i=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.ids=[],this.multipleSelection.forEach((function(t){i.ids.push(t.id)})),e={},e.url=y["a"].recommend,e.ids=this.ids,e.position=2,e.value=1,t.next=9,this.axiosPost(e).then((function(t){if(0==t.code){i.$message({type:"success",message:"推荐成功！！"});var e={"per-page":i.perPage};e.page=i.currentPage,i.getEnrollList(e)}else-1==t.code&&i.$message({type:"warning",message:t.message})})).catch((function(t){return t}));case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),goToRecommmendItem:function(){var t=z(s.a.mark((function t(e){var i,a=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.ids=[],this.ids.push(e),i={},i.url=y["a"].recommend,i.ids=this.ids,i.position=2,i.value=1,t.next=9,this.axiosPost(i).then((function(t){if(0==t.code){a.$message({type:"success",message:"推荐成功！！"});var e={"per-page":a.perPage};e.page=a.currentPage,a.getEnrollList(e)}else-1==t.code&&a.$message({type:"warning",message:t.message})})).catch((function(t){return t}));case 9:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),goToDisRecommmendItem:function(){var t=z(s.a.mark((function t(e){var i,a=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.ids=[],this.ids.push(e),i={},i.url=y["a"].recommend,i.ids=this.ids,i.position=2,i.value=0,t.next=9,this.axiosPost(i).then((function(t){if(0==t.code){a.$message({type:"success",message:"取消推荐成功！！"});var e={"per-page":a.perPage};e.page=a.currentPage,a.getEnrollList(e)}else-1==t.code&&a.$message({type:"warning",message:t.message})})).catch((function(t){return t}));case 9:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),handleClose:function(t){this.$confirm("确认关闭？").then((function(e){t()})).catch((function(t){}))},tableSelectionChange:function(t){this.multipleSelection=t},pageSizeChange:function(t){this.perPage=t;var e={"per-page":this.perPage};e.page=this.currentPage,this.getEnrollList(e)},pageCurrentChange:function(t){this.currentPage=t;var e={"per-page":this.perPage};e.page=this.currentPage,this.getEnrollList(e)},goToActDetail:function(t){this.$router.push({path:"/home/activityDetail",query:{id:t.id,look:0}})}}},R=U,V=(i("c9a6"),Object(d["a"])(R,N,$,!1,null,"6603a154",null)),G=V.exports,W=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"usercolumn"},[i("p",{staticStyle:{"margin-bottom":"40px"}},[t._v("报名统计")]),i("high-charts",{attrs:{options:t.enrollSta}})],1),i("div",{staticStyle:{"margin-top":"40px",height:"490px","margin-buttom":"30px"}},[i("p",{staticStyle:{"margin-bottom":"40px"}},[t._v("获奖统计")]),i("div",[i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,stripe:"","header-cell-style":{background:"#AFE9D9"}}},[i("el-table-column",{attrs:{prop:"Name",label:"序号"}}),i("el-table-column",{attrs:{prop:"one",label:"一等奖"}}),i("el-table-column",{attrs:{prop:"two",label:"二等奖"}}),i("el-table-column",{attrs:{prop:"three",label:"三等奖"}})],1)],1)]),i("div",{staticClass:"buttom"},[i("div",{staticClass:"left"},[i("img",{attrs:{src:t.url1}}),i("span",[t._v("报名学校")]),i("div",{staticStyle:{"margin-left":"30px"}},[i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData2,stripe:"","header-cell-style":{background:"rgba(185,223,255,1)"}}},[i("el-table-column",{attrs:{type:"index",label:"序号"}}),i("el-table-column",{attrs:{prop:"Name",label:"学校"}}),i("el-table-column",{attrs:{prop:"addr",label:"所在区"}}),i("el-table-column",{attrs:{prop:"peopNum",label:"报名人数"}})],1)],1)]),i("div",{staticClass:"left"},[i("img",{attrs:{src:t.url2}}),i("span",[t._v("获奖学校")]),i("div",{staticStyle:{"margin-left":"30px"}},[i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData2,stripe:"","header-cell-style":{background:"rgba(214,195,244,1)"}}},[i("el-table-column",{attrs:{type:"index",label:"序号"}}),i("el-table-column",{attrs:{prop:"Name",label:"学校"}}),i("el-table-column",{attrs:{prop:"addr",label:"所在区"}}),i("el-table-column",{attrs:{prop:"peopNum",label:"获奖数"}})],1)],1)])]),i("div",{staticClass:"buttom2"},[i("div",{staticClass:"left"},[i("span",{staticStyle:{color:"#AA76FE","line-height":"48px","font-size":"16px"}},[t._v("TOP5")]),i("span",{staticStyle:{color:"#666666","line-height":"48px","font-size":"16px","margin-left":"10px"}},[t._v("获奖学校")]),i("div",{staticStyle:{"margin-left":"30px"}},[i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData2,stripe:"","header-cell-style":{background:"rgba(185,223,255,1)"}}},[i("el-table-column",{attrs:{type:"index",label:"序号"}}),i("el-table-column",{attrs:{prop:"Name",label:"学校"}}),i("el-table-column",{attrs:{prop:"addr",label:"所在区"}}),i("el-table-column",{attrs:{prop:"peopNum",label:"报名人数"}})],1)],1)]),i("div",{staticClass:"left"},[i("span",{staticStyle:{color:"#66B9FF","line-height":"48px","font-size":"16px"}},[t._v("TOP5")]),i("span",{staticStyle:{color:"#666666","line-height":"48px","font-size":"16px","margin-left":"10px"}},[t._v("获奖学校")]),i("div",{staticStyle:{"margin-left":"30px"}},[i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData2,stripe:"","header-cell-style":{background:"rgba(185,223,255,1)"}}},[i("el-table-column",{attrs:{type:"index",label:"序号"}}),i("el-table-column",{attrs:{prop:"Name",label:"学校"}}),i("el-table-column",{attrs:{prop:"addr",label:"所在区"}}),i("el-table-column",{attrs:{prop:"peopNum",label:"报名人数"}})],1)],1)])])])},M=[],q=i("11e2"),B={components:{HighCharts:q["a"]},data:function(){return{url1:i("65c6"),url2:i("43f5"),enrollSta:{},tableData:[{Name:"福田区",one:1},{Name:"罗湖区",two:2},{Name:"南山区",three:3},{Name:"宝安区",Value:""},{Name:"龙华区",Value:""},{Name:"福田区",Value:""},{Name:"罗湖区",Value:""},{Name:"南山区",Value:""},{Name:"宝安区",Value:""},{Name:"龙华区",Value:""}],tableData2:[{Name:"南山小学",addr:"南山区",peopNum:"160"},{Name:"福田中学",addr:"福田区",peopNum:"98"},{Name:"南山中学",addr:"南山区",peopNum:"9"},{Name:"南山小学",addr:"南山区",peopNum:"160"},{Name:"福田中学",addr:"福田区",peopNum:"98"},{Name:"南山中学",addr:"南山区",peopNum:"9"},{Name:"南山小学",addr:"南山区",peopNum:"160"},{Name:"福田中学",addr:"福田区",peopNum:"98"},{Name:"南山中学",addr:"南山区",peopNum:"9"},{Name:"南山小学",addr:"南山区",peopNum:"160"}]}},mounted:function(){var t=[{Name:"福田区",Value:320},{Name:"罗湖区",Value:360},{Name:"南山区",Value:520},{Name:"宝安区",Value:330},{Name:"龙华区",Value:380},{Name:"福田区",Value:320},{Name:"罗湖区",Value:360},{Name:"南山区",Value:520},{Name:"宝安区",Value:330},{Name:"龙华区",Value:380}];this.$nextTick((function(){this.renderChart(t)}))},methods:{renderChart:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=[],i=[];t.forEach((function(t){e.push(t.Name),i.push(t.Value)}));var a={show:!0,chart:{type:"column"},title:{text:""},pane:{size:"25%"},xAxis:{categories:e},yAxis:{title:{text:""},min:0},legend:{enabled:!1},series:[{name:"报名人数",data:i,dataLabels:{enabled:!0,color:"#333333",align:"center"}}]};this.enrollSta=a}}},J=B,K=(i("d8dc"),Object(d["a"])(J,W,M,!1,null,"74d1fa93",null)),H=K.exports,Y=i("8d56"),Q=i("5bbc"),X=i.n(Q);function Z(t,e,i,a,n,r,s){try{var o=t[r](s),c=o.value}catch(l){return void i(l)}o.done?e(c):Promise.resolve(c).then(a,n)}function tt(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var r=t.apply(e,i);function s(t){Z(r,a,n,s,o,"next",t)}function o(t){Z(r,a,n,s,o,"throw",t)}s(void 0)}))}}var et={components:{EnrollInfo:h,WorksManagement:E,EvaluationResult:G,ActivityStatistics:H,TypeSelect:T["a"],ActivitySetting:Y["a"]},data:function(){return{id:parseInt(this.$route.query.id),activeName:this.$route.query.activeName,tableData:[],multipleSelection:[],perPage:20,currentPage:1,totalCount:0}},created:function(){var t={"per-page":this.perPage,"filter[activity_id]":this.id};t.page=this.currentPage,this.getActivityNoticeList(t)},methods:{tabClick:function(t){this.activeName=t.name,this.$router.push({query:X()(this.$route.query,{activeName:t.name})})},goToRelease:function(){this.$router.push({path:"/activeManager/managerCenter/releaseAnnouncement",query:{id:this.id,edit:0}})},getActivityNoticeList:function(){var t=tt(s.a.mark((function t(e){var i=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.url=y["a"].activityNotice,e.expand="content,bcheck",t.next=4,this.axiosGet(e).then((function(t){i.tableData=t.items,i.totalCount=t._meta.totalCount})).catch((function(t){return t}));case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),goToDelete:function(t){},goToEdit:function(t){this.$router.push({path:"/activeManager/managerCenter/releaseAnnouncement",query:{id:t,edit:1}})},goToDeleteItem:function(){var t=tt(s.a.mark((function t(e){var i,a=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i={},i.url=y["a"].activityNotice,i.id=e,t.next=5,this.axiosDelete(i).then((function(t){var e={"per-page":a.perPage,"filter[activity_id]":a.id};e.page=a.currentPage,a.getActivityNoticeList(e)})).catch((function(t){return t}));case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),tableSelectionChange:function(t){this.multipleSelection=t},pageSizeChange:function(t){this.perPage=t;var e={"per-page":this.perPage,"filter[activity_id]":this.id};e.page=this.currentPage,this.getActivityNoticeList(e)},pageCurrentChange:function(t){this.currentPage=t;var e={"per-page":this.perPage,"filter[activity_id]":this.id};e.page=this.currentPage,this.getActivityNoticeList(e)}},beforeDestroy:function(){}},it=et,at=(i("5c97"),Object(d["a"])(it,a,n,!1,null,"2f1a6956",null));e["default"]=at.exports},a817:function(t,e,i){t.exports=i.p+"img/default.960d9a7a.svg"},a9eb:function(t,e,i){t.exports=i.p+"img/empty.11f1e315.png"},aaba:function(t,e,i){},ab01:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"activity-center"},[i("el-card",{staticStyle:{"min-height":"650px"}},[i("div",{staticClass:"activity-wrap"},[i("el-tabs",{attrs:{type:"card"},on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:"活动中心",name:"first"}},[i("div",{staticClass:"activity-lable"},[t.gradeList.length>0&&t.regionList.length>0?i("type-select",{attrs:{gradeList:t.gradeList,regionList:t.regionList},on:{activityObject:t.activityObjectMgr,gradeGroup:t.gradeGroupMgr,region:t.regionMgr}}):t._e()],1),t.activityList.length>0?i("div",{staticClass:"activity-content"},[i("activity-list",{attrs:{activityList:t.activityList,goToDetail:t.excellentWork}})],1):t._e(),i("div",{staticClass:"activity-page"},[i("el-pagination",{staticClass:"paging",attrs:{background:"","current-page":t.currentPage,"page-size":t.pageSize,layout:"prev, pager, next",total:t.total},on:{"current-change":t.handleCurrentPage}})],1)]),i("el-tab-pane",{attrs:{label:"优秀作品",name:"second"}},[i("div",{staticClass:"activity-lable"},[t.gradeList.length>0&&t.regionList.length>0?i("type-select",{attrs:{gradeList:t.gradeList,regionList:t.regionList},on:{activityObject:t.activityObjectMgr,gradeGroup:t.gradeGroupMgr,region:t.regionMgr}}):t._e()],1),t.activityList.length>0?i("div",{staticClass:"activity-content"},[i("activity-list",{attrs:{activityList:t.activityList,goToDetail:t.excellentWork}})],1):t._e(),i("div",{staticClass:"activity-page"},[i("el-pagination",{staticClass:"paging",attrs:{background:"","current-page":t.currentPage,"page-size":t.pageSize,layout:"prev, pager, next",total:t.total},on:{"current-change":t.handleCurrentPage}})],1)])],1)],1)])],1)},n=[],r=i("46b4"),s=i.n(r),o=i("5c0a"),c=i("7342");function l(t,e,i,a,n,r,s){try{var o=t[r](s),c=o.value}catch(l){return void i(l)}o.done?e(c):Promise.resolve(c).then(a,n)}function u(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var r=t.apply(e,i);function s(t){l(r,a,n,s,o,"next",t)}function o(t){l(r,a,n,s,o,"throw",t)}s(void 0)}))}}var d={name:"activity-center",components:{TypeSelect:o["a"],ActivityList:c["a"]},data:function(){return{activeName:"first",gradeList:[],subjectList:[],regionList:[{DivisionId:0,Name:"全部"}],region:"",gradeGroup:"",activityObject:"",activityList:[],excellentWork:"activityDetail",dialogVisible:!1,wechatVisible:!1,currentPage:1,pageSize:12,total:0,filter:{Role:0,GradeGroup:0,District:0}}},created:function(){var t=u(s.a.mark((function t(){return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.getGradeGroupList(),this.getRegionList(),this.getActivityList();case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),methods:{handleClick:function(t,e){console.log(t,e)},getActivityList:function(){var t=u(s.a.mark((function t(){var e;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.total=1,e=[{ActivityLogo:i("89c2"),ActivityName:"电脑绘图",ActivityId:1},{ActivityLogo:i("75a6"),ActivityName:"电脑动画"},{ActivityLogo:i("81a3"),ActivityName:"电脑艺术计"},{ActivityLogo:i("3e41"),ActivityName:"电子板报"},{ActivityLogo:i("76c5"),ActivityName:"艺术设计"},{ActivityLogo:i("f261"),ActivityName:"创客项目"}],this.activityList=e;case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getGradeGroupList:function(){var t=u(s.a.mark((function t(){return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:console.log("1"),this.gradeList=[{Id:0,Name:"全部"},{Id:1,Name:"小学组"},{Id:2,Name:"初中组"},{Id:3,Name:"高中组"}];case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getRegionList:function(){var t=u(s.a.mark((function t(){var e;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=[{Id:0,Name:"全部"},{Id:1,Name:"罗湖区"},{Id:2,Name:"南山区"},{Id:3,Name:"宝安区"},{Id:4,Name:"罗湖区"},{Id:5,Name:"盐田区"},{Id:6,Name:"龙岗区"}],this.regionList=[{DivisionId:0,Name:"全部"}].concat(e);case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),activityObjectMgr:function(){var t=u(s.a.mark((function t(e){return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.filter.Role=e,this.currentPage=1,this.getActivityList();case 3:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),gradeGroupMgr:function(){var t=u(s.a.mark((function t(e){return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.filter.GradeGroup=e,this.currentPage=1,this.getActivityList();case 3:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),regionMgr:function(){var t=u(s.a.mark((function t(e){return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.filter.District=e,this.currentPage=1,this.getActivityList();case 3:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),handleCurrentPage:function(t){this.currentPage=t,this.getActivityList()}}},p=d,h=(i("26c7"),i("b2ba"),i("623f")),m=Object(h["a"])(p,a,n,!1,null,"327b0588",null);e["default"]=m.exports},abb1:function(t,e,i){},ad0f:function(t,e,i){t.exports=i.p+"img/return.0f1ef035.svg"},ae32:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"work-review-container"},[i("el-card",{staticStyle:{"min-height":"600px"}},[i("el-tabs",{model:{value:t.workReview,callback:function(e){t.workReview=e},expression:"workReview"}},[i("el-tab-pane",{attrs:{label:"作品评审",name:"workReview"}},[i("el-row",[i("el-col",[i("type-select",{attrs:{gradeList:t.gradeList,activityNameList:t.activityNameList,activityTypleList:t.activityTypleList,activityProjectList:t.activityProjectList},on:{activityNameObject:t.activityNameObject,gradeObject:t.gradeObject,activityTypleObject:t.activityTypleObject,activityProjectObject:t.activityProjectObject}})],1)],1),i("el-row",[i("el-col",{attrs:{span:2}},[i("el-button",{attrs:{type:"primary",plain:"",size:"small"},on:{click:t.downloadWork}},[t._v("下载作品")])],1),i("el-col",{attrs:{span:2}},[i("el-button",{attrs:{type:"primary",plain:"",size:"small"},on:{click:t.goToDownload}},[t._v("下载评分表")])],1),i("el-col",{attrs:{span:10,offset:4}},[i("el-form",{staticClass:"demo-form-inline",staticStyle:{width:"900px"},attrs:{inline:!0,model:t.formInline}},[i("el-form-item",{attrs:{label:"作品编号："}},[i("el-input",{staticStyle:{width:"250px"},attrs:{placeholder:"输入作品编号",size:"small"},model:{value:t.formInline.work_id,callback:function(e){t.$set(t.formInline,"work_id",e)},expression:"formInline.work_id"}})],1),i("el-form-item",{attrs:{label:"作品名称："}},[i("el-input",{staticStyle:{width:"250px"},attrs:{placeholder:"输入作品名称",size:"small"},model:{value:t.formInline.activityName,callback:function(e){t.$set(t.formInline,"activityName",e)},expression:"formInline.activityName"}})],1),i("el-form-item",[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.goToSearch}},[t._v("查找")])],1)],1)],1)],1),i("el-row",[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"","header-cell-style":{background:"#EEEEEE",color:"#323232"},"tooltip-effect":"dark"},on:{"selection-change":t.tableSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"55"}}),i("el-table-column",{attrs:{prop:"serial_id",label:"作品编号","show-overflow-tooltip":""}}),i("el-table-column",{attrs:{prop:"info.activity",label:"活动名称","show-overflow-tooltip":""}}),i("el-table-column",{attrs:{prop:"info.category",label:"活动分类","show-overflow-tooltip":""}}),i("el-table-column",{attrs:{prop:"info.project",label:"活动项目","show-overflow-tooltip":""}}),i("el-table-column",{attrs:{label:"组别","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.gradeObj[e.row.period]))]}}])}),i("el-table-column",{attrs:{prop:"works.title",label:"作品名称","show-overflow-tooltip":""}}),i("el-table-column",{attrs:{label:"评分",prop:"score"}}),i("el-table-column",{attrs:{prop:"comment",label:"评语","show-overflow-tooltip":""}}),i("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.score&&""==e.row.comment?i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return t.goToLook(e.row)}}},[t._v("查看")]):i("el-button",{staticStyle:{color:"red"},attrs:{type:"text",size:"small"},on:{click:function(i){return t.goToLook(e.row)}}},[t._v("修改")])]}}])})],1)],1),i("el-row",{staticClass:"page-div"},[i("el-pagination",{attrs:{"current-page":t.pages.now_page,"page-sizes":[10,20,30,40],"page-size":t.searchParams.per_page,layout:"total, sizes, prev, pager, next, jumper",total:t.pages.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)],1)],1)],1)},n=[],r=i("46b4"),s=i.n(r),o=i("5c0a"),c=i("408b"),l=i("0210"),u=i("f753"),d=i.n(u);function p(t,e,i,a,n,r,s){try{var o=t[r](s),c=o.value}catch(l){return void i(l)}o.done?e(c):Promise.resolve(c).then(a,n)}function h(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var r=t.apply(e,i);function s(t){p(r,a,n,s,o,"next",t)}function o(t){p(r,a,n,s,o,"throw",t)}s(void 0)}))}}var m={components:{TypeSelect:o["a"]},data:function(){return{workReview:"workReview",userid:"",activityNameList:[],activityNameSelectID:"",activityTypleList:[],activityTypleSelectID:"",activityProjectList:[],activityProjectSelectID:"",gradeList:[],ClassList:[{name:"幼教组",id:1},{name:"小学组",id:2},{name:"初中组",id:4},{name:"高中组",id:8},{name:"特教组",id:16},{name:"中职组",id:32},{name:"高教组",id:64}],gradeSelectID:"",formInline:{activityName:"",activityType:"",work_id:""},tableData:[],multipleSelection:[],selectedCell:[],pages:{now_page:1,per_page:10,total:0},searchParams:{now_page:0,per_page:10},apiKey:Object(l["getCookie"])("x-api-key"),loading:!0,gradeObj:{1:"幼教组",2:"小学组",4:"初中组",8:"高中组",16:"特教组",32:"中职组",64:"高教组"}}},created:function(){this.userid=JSON.parse(localStorage.getItem("user")).id,this.getActivityList()},mounted:function(){},methods:{getActivityList:function(){var t=h(s.a.mark((function t(){var e,i,a=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this,i={},i.url=c["a"].activity,i.expand="category",i.inscore=1,t.next=7,this.axiosGet(i).then((function(t){for(var i in t.items){var n={},r=[],s=[];n.id=t.items[i].id,n.name=t.items[i].title;var o=[1,2,4,8,16,32,64],c=a.getSubSet(t.items[i].period,o);for(var l in c)for(var u in a.ClassList)c[l]==a.ClassList[u].id&&s.push(a.ClassList[u]);for(var d in n.gradeList=s,t.items[i].category){var p={},h=[];for(var m in p.id=t.items[i].category[d].id,p.name=t.items[i].category[d].title,t.items[i].category[d].child){var f={};f.id=t.items[i].category[d].child[m].id,f.name=t.items[i].category[d].child[m].title,h.push(f)}p.activityProjectList=h,r.push(p)}n.activityTypleList=r,e.activityNameList.push(n)}e.activityNameList.length>0?(void 0!=e.activityNameList[0].id&&(e.activityNameSelectID=e.activityNameList[0].id),void 0!=e.activityNameList[0].gradeList&&(e.gradeList=e.activityNameList[0].gradeList),void 0!=e.activityNameList[0].gradeList&&e.activityNameList[0].gradeList.length>0&&void 0!=e.activityNameList[0].gradeList[0].id&&(e.gradeSelectID=e.activityNameList[0].gradeList[0].id),void 0!=e.activityNameList[0].activityTypleList&&(e.activityTypleList=e.activityNameList[0].activityTypleList),void 0!=e.activityNameList[0].activityTypleList&&e.activityNameList[0].activityTypleList.length>0&&void 0!=e.activityNameList[0].activityTypleList[0].id&&(e.activityTypleSelectID=e.activityNameList[0].activityTypleList[0].id),void 0!=e.activityNameList[0].activityTypleList&&e.activityNameList[0].activityTypleList.length>0&&void 0!=e.activityNameList[0].activityTypleList[0].activityProjectList&&(e.activityProjectList=e.activityNameList[0].activityTypleList[0].activityProjectList),void 0!=e.activityNameList[0].activityTypleList&&e.activityNameList[0].activityTypleList.length>0&&e.activityNameList[0].activityTypleList[0].activityProjectList.length>0&&void 0!=e.activityNameList[0].activityTypleList[0].activityProjectList[0].id&&(e.activityProjectSelectID=e.activityNameList[0].activityTypleList[0].activityProjectList[0].id),e.getWorksList()):e.loading=!1}));case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getWorksList:function(){var t=h(s.a.mark((function t(){var e,i;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this,i={},i.url=c["a"].enroll,i.inscore=1,i.expand="info,works,professional",i.currentPage=e.pages.now_page,0!=e.pages.per_page&&(i.pagesize=e.pages.per_page),""!=e.activityNameSelectID&&(i.activity_id=e.activityNameSelectID),""!=e.gradeSelectID&&0!=e.gradeSelectID&&(i.period=e.gradeSelectID),""!=e.activityTypleSelectID&&0!=e.activityTypleSelectID&&(i.category_id=e.activityTypleSelectID),""!=e.activityProjectSelectID&&0!=e.activityProjectSelectID&&(i.item_id=e.activityProjectSelectID),""!=e.formInline.activityName&&(i.works_title=e.formInline.activityName),""!=e.formInline.work_id&&(i.serial_id=e.formInline.work_id),t.next=15,this.axiosGet(i).then((function(t){e.tableData=[];var i=t.items;e.tableData=i;for(var a=0;a<e.tableData.length;a++)e.tableData[a].score=e.tableData[a].professional.map((function(t){return t.score<0?t.score=0:t.score/10})),e.tableData[a].comment=e.tableData[a].professional.map((function(t){return t.comment}));e.pages.per_page=t._meta.pageCount,e.pages.now_page=t._meta.currentPage,e.pages.total=t._meta.totalCount,e.loading=!1})).catch((function(t){e.loading=!1}));case 15:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),goToSearch:function(){var t=this;t.getWorksList()},goToImport:function(){this.$router.push({path:"/importWorkList"})},goToDownload:function(){var t=this,e=[];if(this.multipleSelection.forEach((function(t){e.push(t.id)})),0==e.length)return this.$message({type:"error",message:"请先勾选需要导出的作品"});d.a.get(c["a"].enroll,{params:{id:e.join(","),bexport:"1",expand:"info,works,school,professional,award"},responseType:"blob",headers:{"x-api-key":Object(l["getCookie"])("x-api-key")}}).then((function(e){if(console.log("res===",e),200!=e.status)return-1==e.code?t.$message({type:"error",message:e.message}):t.$message({type:"error",message:"导出出错"});var i=e.headers["content-disposition"].split("=")[1];t.downloadFile(i,e.data)}))},downloadFile:function(t,e){if(e){var i=window.URL.createObjectURL(new Blob([e])),a=document.createElement("a");a.style.display="none",a.href=i,a.setAttribute("download",t),document.body.appendChild(a),a.click()}},downloadWork:function(){var t=this;d.a.get(c["a"].enroll,{params:{id:t.selectedCell.join(","),bdownload:"1",inscore:"1",expand:"works"},headers:{"x-api-key":t.apiKey}}).then((function(e){var i=e.data;if(0==i.code)return console.log("哈哈",i.url),void(window.location.href=i.url);t.selectedCell=[]}))},goToLook:function(t){console.log("row====",t),sessionStorage.setItem("tableData",JSON.stringify(this.tableData)),this.$router.push({path:"/workScore",query:{id:t.id,score:t.score,comment:t.comment}})},handleSizeChange:function(t){var e=this;e.searchParams.per_page=t,e.getWorksList()},handleCurrentChange:function(t){var e=this;e.searchParams.now_page=t,e.getWorksList()},open:function(t,e){var i=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.splice(t,1),i.$message({type:"success",message:"删除成功!"})})).catch((function(){i.$message({type:"info",message:"已取消删除"})}))},activityNameObject:function(){var t=h(s.a.mark((function t(e){var i,a;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(a in console.log("value====",e),i=this,i.activityNameSelectID=e,i.activityNameList)i.activityNameList[a].id==e&&(console.log("that.activityNameList[i]==",i.activityNameList[a]),i.gradeList=i.activityNameList[a].gradeList,void 0!=i.activityNameList[a].gradeList&&i.activityNameList[a].gradeList.length>0?i.gradeSelectID=i.activityNameList[a].gradeList[0].id:i.gradeSelectID="",i.activityTypleList=i.activityNameList[a].activityTypleList,void 0!=i.activityNameList[a].activityTypleList&&i.activityNameList[a].activityTypleList.length>0?i.activityTypleSelectID=i.activityNameList[a].activityTypleList[0].id:i.activityTypleSelectID="",i.activityNameList[a].activityTypleList.length>0&&void 0!=i.activityNameList[a].activityTypleList[0].activityProjectList&&(i.activityProjectList=i.activityNameList[a].activityTypleList[0].activityProjectList),void 0!=i.activityNameList[a].activityTypleList&&i.activityNameList[a].activityTypleList.length>0?i.activityProjectSelectID=i.activityNameList[a].activityTypleList[0].activityProjectList[0].id:i.activityProjectSelectID="");i.getWorksList();case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),activityTypleObject:function(){var t=h(s.a.mark((function t(e){var i,a,n;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(a in console.log("value===",e),i=this,i.activityTypleSelectID=e,i.activityNameList)if(i.activityNameSelectID==i.activityNameList[a].id)for(n in i.activityNameList[a].activityTypleList)i.activityNameList[a].activityTypleList[n].id==e&&(i.activityProjectList=i.activityNameList[a].activityTypleList[n].activityProjectList,i.activityProjectSelectID=i.activityNameList[a].activityTypleList[n].activityProjectList[0].id);i.getWorksList();case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),gradeObject:function(){var t=h(s.a.mark((function t(e){var i;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:i=this,i.gradeSelectID=e,i.getWorksList();case 3:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),activityProjectObject:function(){var t=h(s.a.mark((function t(e){var i;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:i=this,i.activityProjectSelectID=e,i.getWorksList();case 3:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),tableSelectionChange:function(){var t=h(s.a.mark((function t(e){var i,a;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:i=this,a=e,i.selectedCell=a.map((function(t){return t.id})),this.multipleSelection=e;case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}},f=m,v=(i("4359"),i("623f")),g=Object(v["a"])(f,a,n,!1,null,"99ab112a",null);e["default"]=g.exports},ae52:function(t,e,i){"use strict";var a=i("b663"),n=i.n(a);n.a},ae8d:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"card-item"},[i("div",{staticClass:"img-oper"},[i("img",{attrs:{src:t.cardDetail.imgUrl}}),i("div",{staticClass:"oper"},[i("div",{staticClass:"oper-icon"},[i("p",{staticClass:"el-icon-plus",on:{click:function(e){return t.goToAdd(t.cardDetail.id,t.cardDetail.title)}}}),i("p",{staticClass:"el-icon-edit",on:{click:function(e){return t.goToEdit(t.cardDetail.id,t.cardDetail.title)}}}),i("p",{staticClass:"el-icon-delete",on:{click:function(e){return t.goToDelete(t.cardDetail.id,t.cardDetail.title)}}})])])]),i("p",[t._v(t._s(t.cardDetail.title))])])},n=[],r={props:{cardDetail:{type:Object,default:function(){}}},data:function(){return{}},mounted:function(){},methods:{goToAdd:function(t,e){var i={};i.id=t,i.title=e,this.$emit("goToAdd",i)},goToEdit:function(t,e){var i={};i.id=t,i.title=e,this.$emit("goToEdit",i)},goToDelete:function(t,e){var i={};i.id=t,i.title=e,this.$emit("goToDelete",i)}}},s=r,o=(i("6a5d"),i("623f")),c=Object(o["a"])(s,a,n,!1,null,"5a7c625c",null);e["a"]=c.exports},af32:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"cos"},[i("input",{ref:"fileEle",staticStyle:{display:"none"},attrs:{type:"file"}}),i("div",{staticClass:"progress-show"},[i("el-dialog",{attrs:{visible:t.dialogVisible,width:"600px","show-close":!1,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("el-progress",{attrs:{"text-inside":!0,"stroke-width":20,percentage:t.percentVal}})],1)],1)])},n=[],r=i("46b4"),s=i.n(r),o=i("4e38"),c=i.n(o),l=i("f753"),u=i.n(l),d=location.protocol,p="",h="api.huodong.eduinspector.com",m="cxyy.szdj.edu.cn/api",f="",v={bucket:"",region:"ap-guangzhou"};"localhost"===location.hostname?(f=p,v.bucket="huodong-1257864005"):"huodong.eduinspector.com"===location.hostname?(f=h,v.bucket="huodong-1257864005"):"cxyy.szdj.edu.cn"===location.hostname&&(f=m,v.bucket="activity-1258011548");var g={protocol:d,host:f,protocolHost:"https://".concat(f),cosConfig:v},y=g,b=i("0210"),w=i("408b");function x(t,e,i,a,n,r,s){try{var o=t[r](s),c=o.value}catch(l){return void i(l)}o.done?e(c):Promise.resolve(c).then(a,n)}function k(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var r=t.apply(e,i);function s(t){x(r,a,n,s,o,"next",t)}function o(t){x(r,a,n,s,o,"throw",t)}s(void 0)}))}}var _={props:{validList:{type:Array},limit:{type:Number,default:200},page:{type:String}},data:function(){return{cos:"",dialog:"",myFile:"",cosConfig:y.cosConfig,fileList:[],dialogVisible:!1,percentVal:0}},watch:{file:function(t){this.myFile=t,this.upload()}},mounted:function(){var t=k(s.a.mark((function t(){var e;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.cos=new c.a({getAuthorization:function(t,e){var i=w["a"].getCosKeys;u.a.get(i,{headers:{"x-api-key":Object(b["getCookie"])("x-api-key")}}).then((function(t){var i=t.data.keys;e({TmpSecretId:i.credentials.tmpSecretId,TmpSecretKey:i.credentials.tmpSecretKey,XCosSecurityToken:i.credentials.sessionToken,ExpiredTime:i.expiredTime})})).catch((function(t){console.log(t)}))}}),e=this,this.$refs.fileEle.onchange=function(){e.myFile=this.files[0],e.upload()};case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),methods:{upload:function(){var t=k(s.a.mark((function t(){var e,i,a,n,r,o,c,l,u,d,p,h;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=this,i=this.myFile,i){t.next=4;break}return t.abrupt("return");case 4:if(e.$emit("start"),this.$refs.fileEle.value="",a=i.name,n=a.split("."),r=n[n.length-1],o=new Date,c=o.getFullYear(),l=o.getMonth()+1,u=o.getDate(),d="file/"+c+l+u+"/"+i.name,-1!=this.validList.indexOf(r.toLowerCase())){t.next=18;break}return p=this.validList.join("，"),this.$message({type:"error",duration:2e3,message:"必须上传文件必须是".concat(p,"类型")}),t.abrupt("return",this.$emit("fail"));case 18:if(h=parseInt(i.size/1038336,10),!(h>=this.limit)){t.next=22;break}return this.$message({type:"error",duration:2e3,message:"文件大小超出限制"}),t.abrupt("return",this.$emit("fail"));case 22:e.dialogVisible=!0,this.cos.sliceUploadFile({Bucket:e.cosConfig.bucket,Region:e.cosConfig.region,Key:d,Body:i,onProgress:function(t){console.log("上传进度 "+Math.round(t.loaded/t.total*1e4)/100),e.percentVal=Math.round(t.loaded/t.total*1e4)/100}},(function(t,i){i.filename=a,t?e.$emit("fail"):e.$emit("success",i),e.dialogVisible&&(e.dialogVisible=!1,setTimeout((function(){e.percentVal=0}),1e3))}));case 24:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},C=_,S=(i("af3c"),i("623f")),T=Object(S["a"])(C,a,n,!1,null,null,null);e["a"]=T.exports},af39:function(t,e,i){},af3c:function(t,e,i){"use strict";var a=i("4413"),n=i.n(a);n.a},af72:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"create-activity-container"},[i("el-card",{staticStyle:{"min-height":"650px"}},[i("el-page-header",{attrs:{title:"返回"},on:{back:function(e){return t.back()}}}),i("el-divider"),i("activity-setting")],1)],1)},n=[],r=i("cfc6"),s=i("8d56"),o=(i("4360"),{components:{MyEditor:r["a"],ActivitySetting:s["a"]},data:function(){return{}},created:function(){},computed:{},mounted:function(){},methods:{back:function(){this.$router.go(-1)}}}),c=o,l=(i("22e6"),i("623f")),u=Object(l["a"])(c,a,n,!1,null,"13f50589",null);e["default"]=u.exports},b277:function(t,e,i){},b2ba:function(t,e,i){"use strict";var a=i("6eea"),n=i.n(a);n.a},b441:function(t,e,i){"use strict";var a=i("8f1f"),n=i.n(a);n.a},b5ea:function(t,e,i){"use strict";var a=i("7986"),n=i.n(a);n.a},b663:function(t,e,i){},b6cc:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"component-item"},["title"==t.type?i("top-title",{attrs:{text:t.text,"style-type":t.styleType}}):"content"==t.type?i("text-content",{attrs:{text:t.text,"style-type":t.styleType}}):"secTitle"==t.type?i("sec-title",{attrs:{text:t.text,"style-type":t.styleType}}):"picture"==t.type?i("div",[t.url?i("img",{staticStyle:{width:"100%"},attrs:{src:t.url}}):i("div",{staticClass:"empty-tip"},[t._v("请在右侧上传图片")])]):"video"==t.type?i("div",[t.url?i("video",{staticStyle:{width:"100%"},attrs:{src:t.url,controls:""}}):i("div",{staticClass:"empty-tip"},[t._v("请在右侧上传视频")])]):"audio"==t.type?i("audio-content",{attrs:{url:t.url,"style-type":t.styleType,static:t.static}}):"button"==t.type?i("button-content",{attrs:{text:t.text,"style-type":t.styleType},nativeOn:{click:function(e){return t.btnClick(e)}}}):t._e(),t._t("action")],2)},n=[],r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"activity-edit-top-title"},[1==t.styleType?a("div",{attrs:{"style-type":t.styleType}},[a("span",[t._v(t._s(t.text))]),a("img",{staticClass:"img-left",attrs:{src:i("c39e8")}}),a("img",{staticClass:"img-right",attrs:{src:i("c39e")}})]):2==t.styleType?a("div",{attrs:{"style-type":t.styleType}},[a("img",{staticClass:"img-left",attrs:{src:i("c2c1")}}),a("img",{staticClass:"img-right",attrs:{src:i("44cb")}}),t._l(t.text,(function(e){return a("div",{staticClass:"block-text"},[a("div",{staticClass:"xian shuxian"}),a("div",{staticClass:"xian hengxian"}),a("span",[t._v(t._s(e))])])}))],2):3==t.styleType?a("div",{attrs:{"style-type":t.styleType}},[a("div",{staticClass:"text"},[t._v(t._s(t.text))]),a("img",{attrs:{src:i("8ae4"),alt:""}})]):4==t.styleType?a("div",{attrs:{"style-type":t.styleType}},[a("div",{staticClass:"text"},[t._v(t._s(t.text))])]):t._e()])},s=[],o={props:{styleType:{type:Number,default:1},text:{type:String,required:!0}},data:function(){return{textList:[]}}},c=o,l=(i("fbd0"),i("623f")),u=Object(l["a"])(c,r,s,!1,null,null,null),d=u.exports,p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"activity-edit-text-content"},[1==t.styleType?a("div",{staticClass:"container",attrs:{"style-type":t.styleType}},[a("span",{staticClass:"text"},[t._v(t._s(t.text))])]):t._e(),2==t.styleType?a("div",{staticClass:"container",attrs:{"style-type":t.styleType}},[a("div",{staticClass:"text"},[t._v(t._s(t.text))]),a("img",{attrs:{src:i("44cb")}})]):t._e(),3==t.styleType?a("div",{staticClass:"container",attrs:{"style-type":t.styleType}},[a("div",{staticClass:"text"},[t._v(t._s(t.text))]),a("img",{staticClass:"sanjiao",attrs:{src:i("09c2")}}),a("img",{attrs:{src:i("6ccd")}})]):t._e()])},h=[],m={props:{styleType:{type:Number,default:1},text:{type:String,required:!0}}},f=m,v=(i("6076"),Object(l["a"])(f,p,h,!1,null,null,null)),g=v.exports,y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"activity-edit-sec-title"},[1==t.styleType?a("div",{attrs:{"style-type":t.styleType}},[a("div",{staticClass:"content"},[a("img",{attrs:{src:i("c39e")}}),a("span",{staticClass:"text"},[t._v(t._s(t.text))]),a("div",{staticClass:"bottom-bg"})])]):t._e(),2==t.styleType?a("div",{attrs:{"style-type":t.styleType}},[a("span",{staticClass:"text"},[t._v(t._s(t.text))]),a("div",{staticClass:"line line1"}),a("div",{staticClass:"line line2"})]):t._e(),3==t.styleType?a("div",{attrs:{"style-type":t.styleType}},[a("div",{staticClass:"content"},[a("span",{staticClass:"text"},[t._v(t._s(t.text))]),a("img",{attrs:{src:i("6ccd")}}),a("div",{staticClass:"bottom-bg"})])]):t._e()])},b=[],w={props:{styleType:{type:Number,default:1},text:{type:String,required:!0}}},x=w,k=(i("b441"),Object(l["a"])(x,y,b,!1,null,null,null)),_=k.exports,C=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"activity-edit-video-content"},[i("video",{attrs:{src:t.src,controls:""}})])},S=[],T={props:{styleType:{type:Number,default:1},src:{type:String,required:!0}}},L=T,A=(i("3dd2"),Object(l["a"])(L,C,S,!1,null,null,null)),I=A.exports,P=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"activity-edit-video-content"},[t.static||t.url?i("div",{staticClass:"audio-box",attrs:{"style-type":t.styleType}},[t.static?[i("div",{staticClass:"num cur-step"},[t._v("00:20")]),i("div",{staticClass:"duration-box"},[i("div",{ref:"step",staticClass:"step-box",staticStyle:{width:"30%"}})]),i("div",{staticClass:"num duration"},[t._v("02:20")])]:[i("div",{staticClass:"play-icon",on:{click:function(e){return e.stopPropagation(),t.triggerAudio(e)}}},[1==t.status?i("i",{staticClass:"el-icon-video-play"}):t._e(),2==t.status?i("i",{staticClass:"el-icon-video-pause"}):t._e()]),i("div",{staticClass:"num cur-step"},[t._v(t._s(t.curStep))]),i("div",{staticClass:"duration-box"},[i("div",{ref:"step",staticClass:"step-box"})]),i("div",{staticClass:"num duration"},[t._v(t._s(t.durationStr))]),i("audio",{ref:"myAudio",staticStyle:{display:"none"},attrs:{src:t.url,controls:""}})]],2):i("div",{staticClass:"empty-tip"},[t._v("请在右侧上传音频")])])},D=[],j=i("0210"),O={props:{styleType:{type:Number,default:1},url:{type:String,default:""},static:{type:Boolean,default:!1}},data:function(){return{curStep:"00:00",duration:0,durationStr:"",status:1}},watch:{url:function(){var t=this;setTimeout((function(){t.bindAudioEvent()}))}},mounted:function(){this.bindAudioEvent()},methods:{bindAudioEvent:function(){var t=this;this.$refs.myAudio&&(this.reset(),this.$refs.myAudio.oncanplay=function(e){t.duration=parseInt(t.$refs.myAudio.duration,10),t.durationStr=Object(j["formatTime"])(t.duration)},this.$refs.myAudio.ontimeupdate=function(e){var i=parseInt(e.target.currentTime,10);t.curStep=Object(j["formatTime"])(i),t.$refs.step.style.width=i/t.duration*100+"%"})},triggerAudio:function(){1==this.status?(this.$refs.myAudio.play(),this.status=2):(this.$refs.myAudio.pause(),this.status=1)},reset:function(){this.curStep="00:00",this.$refs.step.style.width=0,this.status=1}}},E=O,N=(i("22ff"),Object(l["a"])(E,P,D,!1,null,null,null)),$=N.exports,F=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"activity-edit-button-content"},[1==t.styleType?i("div",{attrs:{"style-type":t.styleType}},[i("span",[t._v(t._s(t.text))])]):t._e(),2==t.styleType?i("div",{attrs:{"style-type":t.styleType}},[i("span",[t._v(t._s(t.text))])]):t._e(),3==t.styleType?i("div",{attrs:{"style-type":t.styleType}},[i("span",[t._v(t._s(t.text))])]):t._e()])},z=[],U={props:{styleType:{type:Number,default:1},text:{type:String,required:!0}}},R=U,V=(i("49f6"),Object(l["a"])(R,F,z,!1,null,null,null)),G=V.exports,W={props:{type:{type:String,required:!0},name:{type:String,required:!0},text:{type:String},styleType:{type:Number,default:1},url:{type:String},static:{type:Boolean,default:!1}},components:{TopTitle:d,TextContent:g,SecTitle:_,VideoContent:I,AudioContent:$,ButtonContent:G},methods:{btnClick:function(){this.$emit("btnClick")}}},M=W,q=(i("1e50"),Object(l["a"])(M,a,n,!1,null,null,null));e["a"]=q.exports},b6f0:function(t,e,i){},b719:function(t,e,i){},b74a:function(t,e,i){},b87d:function(t,e,i){},b92d:function(t,e,i){},b9c5:function(t,e,i){},ba64:function(t,e,i){},bdab:function(t,e,i){"use strict";var a=i("d4a4"),n=i.n(a);n.a},bdce:function(t,e,i){},beab:function(t,e,i){"use strict";var a=i("e91d"),n=i.n(a);n.a},bf3d:function(t,e,i){},bf7b:function(t,e,i){},c191:function(t,e,i){},c2c1:function(t,e,i){t.exports=i.p+"img/flower.b5f9a009.svg"},c34b:function(t,e,i){"use strict";var a=i("e05b"),n=i.n(a);n.a},c356:function(t,e,i){"use strict";var a=i("1631"),n=i.n(a);n.a},c39e:function(t,e,i){t.exports=i.p+"img/tree2.420fcd11.svg"},c39e8:function(t,e,i){t.exports=i.p+"img/tree.c2658914.svg"},c4ae:function(t,e,i){"use strict";var a=i("f2dd"),n=i.n(a);n.a},c5b3:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"my-activity"},[i("el-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:t.handleCreateAtivity}},[t._v("创建活动")]),t._l(t.activityList,(function(e,a){return i("div",{key:a,staticClass:"list",class:0!=a?"bordertop":"",on:{click:function(i){return t.handleRedirect(e)}}},[e.cover?i("img",{staticClass:"cover",attrs:{src:e.cover}}):t._e(),i("div",{staticClass:"title"},[i("span",{staticClass:"title-name"},[t._v(t._s(e.title))]),"ACTIVITY_DRAFT"==e.status?i("span",{staticClass:"status unpublished"},[t._v("未发布")]):t._e(),"ACTIVITY_WAITING_AUDIT"==e.status?i("span",{staticClass:"status inreview"},[t._v("审核中")]):t._e(),"ACTIVITY_AUDIT_REJECT"==e.status?i("span",{staticClass:"status fail"},[t._v("审核未通过")]):t._e(),"ACTIVITY_NOT_START"==e.status?i("span",{staticClass:"status abouttobegin"},[t._v("即将开始")]):t._e(),"ACTIVITY_RUNNING"==e.status?i("span",{staticClass:"status progress"},[t._v("进行中")]):t._e(),"ACTIVITY_FINISHED"==e.status?i("span",{staticClass:"status over"},[t._v("已结束")]):t._e()]),i("div",{staticClass:"desc"},[t._v(t._s(e.desc))]),i("div",{staticClass:"time"},[t._v(t._s(e.time))]),i("div",{staticClass:"vertical-line"}),i("div",{staticClass:"visit_num",class:3==e.status?"unpublished":""},[t._v(t._s(e.visitNum))])])})),i("el-pagination",{staticClass:"paging",attrs:{background:"","current-page":t.currentPage,"page-size":t.pageSize,layout:"prev, pager, next",total:t.total},on:{"current-change":t.handleCurrentPage}}),i("el-dialog",{attrs:{title:"创建活动",visible:t.dialogVisible,width:"545px"},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("el-form",{attrs:{"label-position":"top","label-width":"80px",model:t.form}},[i("el-form-item",{attrs:{label:"活动名称"}},[i("el-input",{attrs:{placeholder:"请输入活动名称",maxlength:20},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),i("el-form-item",{staticClass:"inline marginright",attrs:{label:"活动类型"}},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:t.typeValue,callback:function(e){t.typeValue=e},expression:"typeValue"}},t._l(t.typeOptions,(function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),i("el-form-item",{staticClass:"inline marginright",attrs:{label:"活动组别"}},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:t.groupValue,callback:function(e){t.groupValue=e},expression:"groupValue"}},t._l(t.groupOptions,(function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),i("el-form-item",{staticClass:"inline marginright",attrs:{label:"科目"}},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:t.subjectValue,callback:function(e){t.subjectValue=e},expression:"subjectValue"}},t._l(t.subjectOptions,(function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),i("el-form-item",{attrs:{label:"活动模板"}},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:t.tmplValue,callback:function(e){t.tmplValue=e},expression:"tmplValue"}},t._l(t.tmplOptions,(function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),i("el-form-item",{staticClass:"selectinline",attrs:{label:"活动发布范围（参加活动的人员所属范围）"}},[i("el-select",{staticClass:"marginright",attrs:{placeholder:"请选择"},on:{change:t.handleSelectProvince},model:{value:t.provinceValue,callback:function(e){t.provinceValue=e},expression:"provinceValue"}},t._l(t.provinceOptions,(function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),i("el-select",{staticClass:"marginright",attrs:{placeholder:"请选择"},on:{change:t.handleSelectCity},model:{value:t.cityValue,callback:function(e){t.cityValue=e},expression:"cityValue"}},t._l(t.cityOptions,(function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),i("el-select",{staticClass:"marginright",attrs:{placeholder:"请选择"},model:{value:t.districtValue,callback:function(e){t.districtValue=e},expression:"districtValue"}},t._l(t.districtOptions,(function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),i("el-form-item",{staticClass:"selectinline",attrs:{label:"活动面向对象"}},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:t.roleValue,callback:function(e){t.roleValue=e},expression:"roleValue"}},t._l(t.roleOptions,(function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:t.handleOk}},[t._v("继续创建活动流程")]),i("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")])],1)],1)],2)},n=[],r=i("46b4"),s=i.n(r),o=i("0210");function c(t,e,i,a,n,r,s){try{var o=t[r](s),c=o.value}catch(l){return void i(l)}o.done?e(c):Promise.resolve(c).then(a,n)}function l(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var r=t.apply(e,i);function s(t){c(r,a,n,s,o,"next",t)}function o(t){c(r,a,n,s,o,"throw",t)}s(void 0)}))}}var u={name:"myActivity",data:function(){return{activityList:[],currentPage:1,pageSize:6,total:0,dialogVisible:!1,form:{name:"",type:"",group:"",subject:"",tmpl:"",area:"",role:"",status:""},typeValue:"",typeOptions:[],groupValue:"",groupOptions:[],subjectValue:"",subjectOptions:[],tmplValue:"",tmplOptions:[],provinceValue:"",provinceOptions:[],cityValue:"",cityOptions:[],districtValue:"",districtOptions:[],roleValue:"",roleOptions:[{value:"11",label:"学生"},{value:"12",label:"老师"}],nameReg:/^[\u4e00-\u9fa5a-zA-Z0-9]*$/}},mounted:function(){this.getMyCreateActivityList(this.currentPage,this.pageSize),this.getActivityType(),this.getGradeGroup(),this.getSubjectList(),this.getTemplateList(),this.getProvince()},computed:{user:function(){return this.$store.state.account.user}},methods:{handleRedirect:function(t){var e="";e="ACTIVITY_DRAFT"==t.status?"/myActivityDetail?id=".concat(t.id,"&title=").concat(t.title):"/myActivity/index?id=".concat(t.id,"&title=").concat(t.title),this.$router.push(e)},handleCurrentPage:function(t){this.currentPage=t,this.getMyCreateActivityList(this.currentPage,this.pageSize)},getMyCreateActivityList:function(){var t=l(s.a.mark((function t(e,i){var a,n=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/activity/GetManageActivityList",PageNum:e,PageSize:i}).catch((function(t){return t}));case 2:if(a=t.sent,"OK"==a.ErrorCode){t.next=5;break}return t.abrupt("return");case 5:this.activityList=[],this.total=a.Data.Total,a.Data.ActivityList.forEach((function(t){n.activityList.push({id:t.ActivityId,visitNum:t.ViewCount,cover:t.ActivityLogo,status:t.Status,title:t.ActivityName,desc:t.ActivityDesc,time:"".concat(Object(o["timestampToTime"])(t.StartTime,{needUnit:1})," - ").concat(Object(o["timestampToTime"])(t.EndTime,{needUnit:1})),ActivityType:t.ActivityType,GradeGroup:t.GradeGroup,Sponsor:t.Sponsor,Subject:t.Subject})}));case 8:case"end":return t.stop()}}),t,this)})));function e(e,i){return t.apply(this,arguments)}return e}(),getActivityType:function(){var t=l(s.a.mark((function t(){var e,i=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/activity/GetActivityType"}).catch((function(t){return t}));case 2:if(e=t.sent,"OK"==e.ErrorCode){t.next=5;break}return t.abrupt("return");case 5:e.Data.ActivityTypeList.forEach((function(t){i.typeOptions.push({value:t.Id,label:t.Name})}));case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getGradeGroup:function(){var t=l(s.a.mark((function t(){var e,i=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/activity/GetGradeGroup"}).catch((function(t){return t}));case 2:if(e=t.sent,"OK"==e.ErrorCode){t.next=5;break}return t.abrupt("return");case 5:this.groupOptions=[],e.Data.GradeGroup.forEach((function(t){i.groupOptions.push({value:t.Id,label:t.Name})}));case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getSubjectList:function(){var t=l(s.a.mark((function t(){var e,i=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/activity/GetSubjectList"}).catch((function(t){return t}));case 2:if(e=t.sent,"OK"==e.ErrorCode){t.next=5;break}return t.abrupt("return");case 5:this.subjectOptions=[],e.Data.SubjectList.forEach((function(t){i.subjectOptions.push({value:t.Id,label:t.Name})}));case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getTemplateList:function(){var t=l(s.a.mark((function t(){var e,i=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/activity/GetTemplateList"}).catch((function(t){return t}));case 2:if(e=t.sent,"OK"==e.ErrorCode){t.next=5;break}return t.abrupt("return");case 5:this.tmplOptions=[],e.Data.TemplateList.forEach((function(t){i.tmplOptions.push({value:t.TemplateId,label:t.TemplateName})}));case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getProvince:function(){var t=l(s.a.mark((function t(){var e,i=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/activity/GetProvince"}).catch((function(t){return t}));case 2:if(e=t.sent,"OK"==e.ErrorCode){t.next=5;break}return t.abrupt("return");case 5:this.provinceOptions=[],e.Data.ProvinceList.forEach((function(t){i.provinceOptions.push({value:t.Id,label:t.Name})}));case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getCity:function(){var t=l(s.a.mark((function t(){var e,i=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/activity/GetCity",ProvinceId:this.provinceValue}).catch((function(t){return t}));case 2:if(e=t.sent,"OK"==e.ErrorCode){t.next=5;break}return t.abrupt("return");case 5:this.cityOptions=[],e.Data.CityList.forEach((function(t){i.cityOptions.push({value:t.Id,label:t.Name})}));case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getDistrict:function(){var t=l(s.a.mark((function t(){var e,i=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/activity/GetDistrict",ProvinceId:this.provinceValue,CityId:this.cityValue}).catch((function(t){return t}));case 2:e=t.sent,this.districtOptions=[],e.Data.DistrictList.forEach((function(t){i.districtOptions.push({value:t.Id,label:t.Name})}));case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),createActivity:function(){var t=l(s.a.mark((function t(){var e,i;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""!=this.form.name){t.next=4;break}return t.abrupt("return",this.$message.error("请输入活动名称"));case 4:if(this.nameReg.test(this.form.name)){t.next=6;break}return t.abrupt("return",this.$message.error("活动名称，只支持中英文数字"));case 6:if(""!=this.typeValue){t.next=8;break}return t.abrupt("return",this.$message.error("请选择活动类型"));case 8:if(""!==this.groupValue){t.next=10;break}return t.abrupt("return",this.$message.error("请选择活动组别"));case 10:if(""!==this.subjectValue){t.next=12;break}return t.abrupt("return",this.$message.error("请选择科目"));case 12:if(""!=this.cityValue){t.next=14;break}return t.abrupt("return",this.$message.error("请选择城市"));case 14:if(""!==this.districtValue){t.next=16;break}return t.abrupt("return",this.$message.error("请选择地区"));case 16:if(""!=this.provinceValue){t.next=18;break}return t.abrupt("return",this.$message.error("请选择省份"));case 18:if(""!=this.tmplValue){t.next=20;break}return t.abrupt("return",this.$message.error("请选择活动模板"));case 20:if(""!=this.roleValue){t.next=22;break}return t.abrupt("return",this.$message.error("请选择活动对象"));case 22:return e={url:"/v1/activity/CreateActivity",ActivityName:this.form.name,ActivityType:this.typeValue,GradeGroup:this.groupValue,Subject:this.subjectValue,ActivityRange:{City:this.cityValue,District:this.districtValue,Province:this.provinceValue},TemplateId:this.tmplValue.toString(),RoleList:[this.roleValue]},t.next=25,this.axiosPost(e).catch((function(t){return t}));case 25:if(i=t.sent,"OK"==i.ErrorCode){t.next=28;break}return t.abrupt("return",this.$message.error(i.ErrorMsg));case 28:this.$router.push("/myActivityDetail?id=".concat(i.Data.ActivityId));case 29:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),handleSelectProvince:function(){this.getCity()},handleSelectCity:function(){this.getDistrict()},handleCreateAtivity:function(){this.user?this.dialogVisible=!0:this.$store.dispatch("INIT_SHOW",!0)},handleOk:function(){this.createActivity()}}},d=u,p=(i("f45e"),i("ecde"),i("623f")),h=Object(p["a"])(d,a,n,!1,null,"3ed92676",null);e["default"]=h.exports},c607:function(t,e,i){"use strict";var a=i("b719"),n=i.n(a);n.a},c69b:function(t,e,i){},c6b0:function(t,e,i){},c725:function(t,e,i){"use strict";var a=i("ff58"),n=i.n(a);n.a},c944:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:[t.dataObj.isEdit?"active":"single-text-box-container",t.showOperation?"":"no-show"]},[t.canWrite?t._e():i("div",{staticClass:"mark"}),i("el-row",[i("el-col",{staticClass:"title",attrs:{span:3}},[t.dataObj.required?i("i",[t._v("*")]):t._e(),t._v(t._s(t.dataObj.title)+"： \n    ")]),i("el-col",{attrs:{span:12}},[i("el-input",{staticStyle:{width:"600px"},attrs:{placeholder:"请输入内容",size:"small"},on:{input:t.myValChange},model:{value:t.val,callback:function(e){t.val=e},expression:"val"}})],1),t.showOperation?i("el-col",{staticClass:"operate-item",attrs:{span:4,offset:5}},[i("i",{staticClass:"el-icon-top",on:{click:t.toUp}}),i("i",{staticClass:"el-icon-bottom",on:{click:t.toDown}}),i("i",{staticClass:"el-icon-edit",on:{click:t.toEdit}}),i("i",{staticClass:"el-icon-delete",on:{click:t.delectItem}})]):t._e(),""!=t.dataObj.description?i("el-col",{staticStyle:{color:"#7F7F7F","line-height":"25px"},attrs:{span:21,offset:3}},[t._v("备注："+t._s(t.dataObj.description))]):t._e()],1)],1)},n=[],r={props:{showOperation:{type:Boolean,default:function(){return!1}},dataObj:{type:Object,default:function(){return{}}},canWrite:{type:Boolean,default:function(){return!0}},myVal:{}},data:function(){return{val:""}},mounted:function(){this.val=this.myVal},methods:{toUp:function(){this.$emit("toUp")},toDown:function(){this.$emit("toDown")},toEdit:function(){this.$emit("toEdit")},delectItem:function(){this.$emit("delectItem")},myValChange:function(){this.$emit("myValChange",this.val)}}},s=r,o=(i("35b6"),i("623f")),c=Object(o["a"])(s,a,n,!1,null,"4a8f4938",null);e["a"]=c.exports},c995:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"card-list"},t._l(t.cardList,(function(e,a){return i("div",{key:a,staticClass:"card-item",on:{click:function(i){return t.toNext(e.id,e.activity_id)}}},[i("img",{attrs:{src:e.cover}}),t.isExcellent?t._e():i("div",{staticClass:"card-name"},[e.title.length<=15?i("p",[t._v(t._s(e.title))]):i("el-tooltip",{attrs:{content:e.title,placement:"top",effect:"dark"}},[i("p",[t._v(t._s(e.title))])])],1),t.isExcellent?i("div",{staticClass:"excellent-tag"},[i("div",{staticClass:"title"},[i("p",[t._v(t._s(e.name))])]),i("div",{staticClass:"flow-like"},[i("p",{staticClass:"el-icon-view"},[t._v(t._s(e.view_counts))]),i("p",{staticClass:"el-icon-thumb",on:{click:function(i){return t.onlike(e.id)}}},[t._v(t._s(e.like_counts))]),i("p",{staticClass:"award"},[t._v(t._s(e.award))])]),i("div",{staticClass:"school"},[t._v(t._s(e.school))]),i("div",{staticClass:"author"},[t._v("作者："+t._s(e.author))]),e.mentor.length>0?i("div",{staticClass:"teacher"},[t._v("指导老师："+t._s(e.mentor))]):t._e()]):t._e()])})),0)},n=[],r={props:{cardList:{type:Array,default:function(){return[]}},isExcellent:{type:Boolean,default:function(){return!1}}},data:function(){return{imgUrl:i("933f")}},mounted:function(){console.log("this.cardList==",this.cardList)},methods:{toNext:function(t,e){this.$emit("toNext",t,e)},onlike:function(t){this.$emit("onlike",t)}}},s=r,o=(i("ef66"),i("623f")),c=Object(o["a"])(s,a,n,!1,null,"50953a78",null);e["a"]=c.exports},c9a6:function(t,e,i){"use strict";var a=i("1734"),n=i.n(a);n.a},c9e5:function(t,e,i){},ca41:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"activity-setting-item"},[a("div",{staticClass:"logo_desc"},[a("div",{staticClass:"upload-logo",class:t.activityLogo?"logo":"",on:{click:t.chooseImg}},[a("span",{directives:[{name:"show",rawName:"v-show",value:!t.activityLogo,expression:"!activityLogo"}]},[t._v("+添加活动展示预览图")]),a("img",{directives:[{name:"show",rawName:"v-show",value:t.activityLogo,expression:"activityLogo"}],attrs:{src:t.activityLogo}}),a("input",{ref:"uploadImgElem",staticClass:"upload-file",staticStyle:{filter:"alpha(opacity=0)",opacity:"0",width:"0",height:"0"},attrs:{disabled:!t.canEdit,type:"file"},on:{change:t.uploadImg}})]),a("div",{staticClass:"detail-desc",style:t.detailDescWidth},[a("el-input",{attrs:{disabled:!t.canEdit,type:"textarea",rows:2,placeholder:"请输入活动内容介绍",maxlength:120,resize:"none","show-word-limit":""},model:{value:t.detailDescValue,callback:function(e){t.detailDescValue=e},expression:"detailDescValue"}})],1)]),a("p",{staticClass:"tips"},[t._v("根据活动流程需要添加所要展示的页面，设置各环节所需要的配置设置")]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.flow1.show,expression:"flow1.show"}],staticClass:"flow flow1"},[a("div",{staticClass:"line1"},[a("span",{staticClass:"flow-name"},[t._v(t._s(t.flow1.index)+". "+t._s(t.flow1.name))]),a("span",{staticClass:"time-name"},[t._v("对应时间段")]),a("el-date-picker",{attrs:{disabled:!t.canEdit,type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right","picker-options":t.pickerOptions},on:{change:function(e){return t.handleDateChange("1")}},model:{value:t.flow1.time,callback:function(e){t.$set(t.flow1,"time",e)},expression:"flow1.time"}})],1),a("div",{staticClass:"line"}),a("div",{staticClass:"line2"},[a("span",{staticClass:"title"},[t._v("活动介绍页")]),t.canEdit?a("el-button",{staticClass:"first",attrs:{type:"text"},on:{click:function(e){return t.goToFlow1EditPage()}}},[t._v("编辑页面")]):t._e(),t.showPagePreview?a("el-button",{staticClass:"second",attrs:{type:"text"},on:{click:function(e){return t.handleShowFlowQr(1)}}},[a("span",[t._v(t._s(t.flow1.previewName))]),a("vue-qr",{directives:[{name:"show",rawName:"v-show",value:t.flow1.showQr,expression:"flow1.showQr"}],staticClass:"flow-qr",attrs:{text:t.flow1.qrText,margin:4,dotScale:1}})],1):t._e()],1),a("div",{staticClass:"line"}),a("div",{staticClass:"line3"},[t.canEdit?[a("el-button",{staticStyle:{"margin-right":"10px"},on:{click:t.chooseAttachment}},[t._v("上传其他活动相关附件")]),a("span",{staticClass:"tip"},[t._v("支持excel/word/pdf三种格式")]),a("input",{ref:"uploadAttachmentElem",staticClass:"upload-file",staticStyle:{filter:"alpha(opacity=0)",opacity:"0",width:"0",height:"0"},attrs:{type:"file"},on:{change:t.uploadAttachment}}),t._l(t.flow1.fileList,(function(e,i){return a("div",{key:i+"_flow1",staticClass:"file",on:{mouseover:function(i){return t.handleFileOver(e)},mouseout:function(i){return t.handleFileOut(e)}}},[a("span",{staticClass:"file-name"},[t._v(t._s(e.name))]),a("span",{directives:[{name:"show",rawName:"v-show",value:e.showDeleteFileIcon,expression:"item.showDeleteFileIcon"}],staticClass:"close",on:{click:function(a){return t.handleDeleteFile(e,i)}}},[t._v("x")])])}))]:t._l(t.flow1.fileList,(function(e,i){return a("div",{key:i+"_flow1",staticClass:"file",on:{mouseover:function(i){return t.handleFileOver(e)},mouseout:function(i){return t.handleFileOut(e)}}},[a("span",{staticClass:"file-name"},[t._v(t._s(e.name))])])}))],2)]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.flow2.show,expression:"flow2.show"}],staticClass:"flow flow2"},[a("div",{staticClass:"line1"},[a("span",{staticClass:"flow-name"},[t._v(t._s(t.flow2.index)+". "+t._s(t.flow2.name))]),a("span",{staticClass:"time-name"},[t._v("对应时间段")]),a("el-date-picker",{attrs:{disabled:!t.canEdit,type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right","picker-options":t.pickerOptions},on:{change:function(e){return t.handleDateChange("2")}},model:{value:t.flow2.time,callback:function(e){t.$set(t.flow2,"time",e)},expression:"flow2.time"}})],1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.flow3.show,expression:"flow3.show"}],staticClass:"flow flow3"},[a("div",{staticClass:"line1"},[a("span",{staticClass:"flow-name"},[t._v(t._s(t.flow3.index)+". "+t._s(t.flow3.name))]),a("span",{staticClass:"time-name"},[t._v("对应时间段")]),a("el-date-picker",{attrs:{disabled:!t.canEdit,type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right","picker-options":t.pickerOptions},on:{change:function(e){return t.handleDateChange("3")}},model:{value:t.flow3.time,callback:function(e){t.$set(t.flow3,"time",e)},expression:"flow3.time"}})],1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.flow4.show,expression:"flow4.show"}],staticClass:"flow flow4"},[a("div",{staticClass:"line1"},[a("span",{staticClass:"flow-name"},[t._v(t._s(t.flow4.index)+". "+t._s(t.flow4.name))]),a("span",{staticClass:"time-name"},[t._v("对应时间段")]),a("el-date-picker",{attrs:{disabled:!t.canEdit,type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right","picker-options":t.pickerOptions},on:{change:function(e){return t.handleDateChange("4")}},model:{value:t.flow4.time,callback:function(e){t.$set(t.flow4,"time",e)},expression:"flow4.time"}})],1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.flow5.show,expression:"flow5.show"}],staticClass:"flow flow5"},[a("div",{staticClass:"line1"},[a("span",{staticClass:"flow-name"},[t._v(t._s(t.flow5.index)+". "+t._s(t.flow5.name))]),a("span",{staticClass:"time-name"},[t._v("对应时间段")]),a("el-date-picker",{attrs:{disabled:!t.canEdit,type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right","picker-options":t.pickerOptions},on:{change:function(e){return t.handleDateChange("5")}},model:{value:t.flow5.time,callback:function(e){t.$set(t.flow5,"time",e)},expression:"flow5.time"}})],1),a("div",{staticClass:"line"}),t._m(0),a("div",{staticClass:"line"}),t._l(t.flow5.areaAndSchoolList,(function(e,i){return a("div",{key:i+"_flow5",staticClass:"area-school"},[a("span",{staticClass:"name"},[t._v(t._s(e.name))]),a("el-input",{staticClass:"flow5-count",attrs:{disabled:!t.canEdit},on:{blur:function(i){return t.hanleInputBlur("commitCount",e.count)}},model:{value:e.count,callback:function(i){t.$set(e,"count",i)},expression:"item.count"}}),t.canEdit?a("el-button",{staticClass:"delete",attrs:{type:"text"},on:{click:function(e){return t.handleDeleteAreaAndSchool(i)}}},[t._v("删除")]):t._e(),a("div",{staticClass:"line"})],1)})),t.canEdit?a("el-button",{staticClass:"add-area-school",attrs:{type:"text"},on:{click:t.handleShowAddAreaAndSchool}},[t._v("+添加区域/学校")]):t._e()],2),a("div",{directives:[{name:"show",rawName:"v-show",value:t.flow6.show,expression:"flow6.show"}],staticClass:"flow flow6"},[a("div",{staticClass:"line1"},[a("span",{staticClass:"flow-name"},[t._v(t._s(t.flow6.index)+". "+t._s(t.flow6.name))]),a("span",{staticClass:"time-name"},[t._v("对应时间段")]),a("el-date-picker",{attrs:{disabled:!t.canEdit,type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right","picker-options":t.pickerOptions},on:{change:function(e){return t.handleDateChange("6")}},model:{value:t.flow6.time,callback:function(e){t.$set(t.flow6,"time",e)},expression:"flow6.time"}})],1),a("div",{staticClass:"line"}),t._l(t.flow6.expertList,(function(e,i){return a("div",{key:i+"_flow61",staticClass:"expert"},[a("span",{staticClass:"name"},[t._v(t._s(e.name))]),a("span",{staticClass:"phone"},[t._v(t._s(e.phone))]),t.readOnly?t._e():a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.handleDeleteExpert(i,e.id)}}},[t._v("删除")]),a("div",{staticClass:"line"})],1)})),t.readOnly?t._e():a("el-button",{staticClass:"add-expert",attrs:{type:"text"},on:{click:t.handleShowAddExpertDialog}},[t._v("+添加评委")]),a("p",{staticClass:"flow6-tips"},[t._v("设置评分项目")]),a("div",{staticClass:"line"}),a("div",t._l(t.flow6.markProjectList,(function(e,i){return a("div",{key:i+"_flow62",staticClass:"markproject"},[a("span",{staticClass:"name"},[t._v(t._s(e.name))]),a("span",{staticClass:"score"},[t._v(t._s(e.start))]),a("span",{staticClass:"score sperate"},[t._v("-")]),a("span",{staticClass:"score"},[t._v(t._s(e.end))]),t.canEdit?a("el-button",{staticClass:"delete",attrs:{type:"text"},on:{click:function(e){return t.handleDeleteMarkProject(i)}}},[t._v("删除")]):t._e(),a("div",{staticClass:"line"})],1)})),0),a("div",{directives:[{name:"show",rawName:"v-show",value:t.showAddMarkproject,expression:"showAddMarkproject"}],staticClass:"add-markproject-container"},[a("el-input",{staticClass:"addmp-name",attrs:{placeholder:"请输入评分内容"},model:{value:t.markproject.name,callback:function(e){t.$set(t.markproject,"name",e)},expression:"markproject.name"}}),a("el-input",{staticClass:"addmp-start",on:{blur:function(e){return t.hanleInputBlur("mpstart")}},model:{value:t.markproject.start,callback:function(e){t.$set(t.markproject,"start",e)},expression:"markproject.start"}}),a("span",{staticClass:"score sperate"},[t._v("-")]),a("el-input",{staticClass:"addmp-end",on:{blur:function(e){return t.hanleInputBlur("mpend")}},model:{value:t.markproject.end,callback:function(e){t.$set(t.markproject,"end",e)},expression:"markproject.end"}}),a("el-button",{staticClass:"add",attrs:{type:"text"},on:{click:t.handleAddMarkProject}},[t._v("确定")]),a("el-button",{staticClass:"delete",attrs:{type:"text"},on:{click:t.handleCancleMarkProject}},[t._v("取消")]),a("div",{staticClass:"line"})],1),t.canEdit?a("el-button",{staticClass:"add-markproject",attrs:{type:"text"},on:{click:t.handleShowAddMarkProject}},[t._v("+添加评分项目")]):t._e()],2),a("div",{directives:[{name:"show",rawName:"v-show",value:t.flow7.show,expression:"flow7.show"}],staticClass:"flow flow7"},[a("div",{staticClass:"line1"},[a("span",{staticClass:"flow-name"},[t._v(t._s(t.flow7.index)+". "+t._s(t.flow7.name))]),a("span",{staticClass:"time-name"},[t._v("对应时间段")]),a("el-date-picker",{attrs:{disabled:!t.canEdit,type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right","picker-options":t.pickerOptions},on:{change:function(e){return t.handleDateChange("7")}},model:{value:t.flow7.time,callback:function(e){t.$set(t.flow7,"time",e)},expression:"flow7.time"}})],1)]),t.canEdit&&!t.readOnly?a("div",{staticClass:"button-container"},[t.hidePublish?t._e():a("el-button",{staticClass:"save-publish",attrs:{type:"primary"},on:{click:t.handleSaveAndPublish}},[t._v("保存并发布")]),a("el-button",{staticClass:"save",on:{click:t.handleSave}},[t._v("保存")]),t.hidePublish?t._e():a("el-button",{staticClass:"cancel",on:{click:t.handleCancel}},[t._v("取消")])],1):t._e(),t._t("default"),a("el-dialog",{attrs:{title:"添加评委",visible:t.dialogVisible,width:"409px"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:t.expertValue,callback:function(e){t.expertValue=e},expression:"expertValue"}},t._l(t.expertOptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.handleAddExpert}},[t._v("确定")])],1)],1),a("el-dialog",{attrs:{title:"添加区域/学校",visible:t.areaAndSchoolDialogVisible,width:"409px"},on:{"update:visible":function(e){t.areaAndSchoolDialogVisible=e}}},[a("el-tabs",{model:{value:t.addAreaSchoolType,callback:function(e){t.addAreaSchoolType=e},expression:"addAreaSchoolType"}},[a("el-tab-pane",{attrs:{label:"区域",name:"2"}},[a("el-checkbox",{attrs:{indeterminate:t.areaOpt.isIndeterminate},on:{change:t.handleAreaCheckAll},model:{value:t.areaOpt.checkAll,callback:function(e){t.$set(t.areaOpt,"checkAll",e)},expression:"areaOpt.checkAll"}},[t._v("全选")]),a("el-checkbox-group",{on:{change:t.handleAreaCheckedChange},model:{value:t.checkedAreaSchool,callback:function(e){t.checkedAreaSchool=e},expression:"checkedAreaSchool"}},t._l(t.areaOptions,(function(e){return a("el-checkbox",{key:e.value,attrs:{label:e.value}},[t._v(t._s(e.label))])})),1)],1),a("el-tab-pane",{attrs:{label:"学校",name:"1"}},[a("el-checkbox",{attrs:{indeterminate:t.schoolOpt.isIndeterminate},on:{change:t.handleSchoolCheckAll},model:{value:t.schoolOpt.checkAll,callback:function(e){t.$set(t.schoolOpt,"checkAll",e)},expression:"schoolOpt.checkAll"}},[t._v("全选")]),a("el-checkbox-group",{on:{change:t.handleSchoolCheckedChange},model:{value:t.checkedAreaSchool,callback:function(e){t.checkedAreaSchool=e},expression:"checkedAreaSchool"}},t._l(t.schoolOptions,(function(e){return a("el-checkbox",{key:e.value,attrs:{label:e.value}},[t._v(t._s(e.label))])})),1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.areaAndSchoolDialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.handleAddAreaAndSchool}},[t._v("确定")])],1)],1),a("el-dialog",{attrs:{title:"裁剪",visible:t.cropImgShow,width:"500px",top:"80px"},on:{"update:visible":function(e){t.cropImgShow=e}}},[a("div",{staticClass:"icon-contain"},[a("img",{attrs:{src:i("dc34")},on:{click:t.bigger}}),a("img",{staticClass:"second",attrs:{src:i("1217")},on:{click:t.smaller}})]),a("vue-cropper",{ref:"cropper",staticStyle:{height:"400px",width:"90%","margin-left":"30px"},attrs:{img:t.croperOption.img,outputSize:t.croperOption.size,fixedBox:!0,outputType:t.croperOption.outputType,info:!0,canMoveBox:t.croperOption.canMoveBox,autoCrop:t.croperOption.autoCrop,autoCropWidth:t.croperOption.autoCropWidth,autoCropHeight:t.croperOption.autoCropHeight}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.cropImgShow=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.saveCropImg}},[t._v("确 定")])],1)],1)],2)},n=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("p",{staticClass:"flow5-tips"},[i("span",{staticClass:"head-name"},[t._v("区名称区学校")]),i("span",{staticClass:"head-count"},[t._v("可提交人数")])])}],r=i("46b4"),s=i.n(r),o=i("4c99"),c=i("0210"),l=i("4e38"),u=i.n(l),d=i("4579"),p=i.n(d);function h(t,e,i,a,n,r,s){try{var o=t[r](s),c=o.value}catch(l){return void i(l)}o.done?e(c):Promise.resolve(c).then(a,n)}function m(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var r=t.apply(e,i);function s(t){h(r,a,n,s,o,"next",t)}function o(t){h(r,a,n,s,o,"throw",t)}s(void 0)}))}}var f={name:"activitySettingItem",components:{VueCropper:o["VueCropper"],VueQr:p.a,SettingItem:b},props:{readOnly:{type:Boolean,default:!1},hidePublish:{type:Boolean,default:!1}},data:function(){return{croperOption:{img:"",size:1,outputType:"png",canMoveBox:!0,autoCrop:!0,autoCropWidth:320,autoCropHeight:180,fixed:!0,centerBox:!0},cropImgShow:!1,cosConfig:{bucket:"",region:""},cos:"",isSaveCropImging:!1,activityId:"",activityName:"",activityLogo:"",activityStatus:"",detailDescValue:"",detailDescWidth:"",flow1:{id:"STAGE_PREPARE",index:"",show:!1,name:"",time:"",config:{},fileList:[],showQr:!1,qrText:"",previewName:"预览",pageUrl:""},flow2:{id:"STAGE_WORK_UPLOAD",index:"",show:!1,name:"",time:"",config:{},showQr:!1,qrText:"",previewName:"预览"},flow3:{id:"STAGE_WORK_AUDIT",index:"",show:!1,name:"",time:"",config:{}},flow4:{id:"STAGE_WORK_SHOW",index:"",show:!1,name:"",time:"",config:{}},flow5:{id:"STAGE_WORK_PRE_JUDGE",index:"",show:!1,name:"",time:"",config:{},areaAndSchoolList:[]},flow6:{id:"STAGE_WORK_JUDGE",index:"",show:!1,name:"",time:"",config:{},expertList:[],markProjectList:[]},flow7:{id:"STAGE_EXCELLENT_WORK_SHOW",index:"",show:!1,name:"",time:"",config:{},showQr:!1,qrText:""},showAddMarkproject:!1,markproject:{name:"",start:0,end:10},dialogVisible:!1,expertValue:"",expertOptions:[],areaAndSchoolDialogVisible:!1,checkedAreaSchool:[],nameReg:/^[\u4e00-\u9fa5a-zA-Z0-9]*$/,numReg:/^\d*$/,saveTaskId:"",areaAndSchoolOptions:[],areaOptions:[],schoolOptions:[],areaOpt:{checkAll:!1,isIndeterminate:!1},schoolOpt:{checkAll:!1,isIndeterminate:!1},allAreaId:[],allSchoolId:[],showPagePreview:!1,pickerOptions:{disabledDate:function(t){var e=new Date,i=e.getFullYear(),a=e.getMonth()+1,n=e.getDate(),r=new Date(i+"/"+a+"/"+n+" 00:00:00");return t.getTime()<r.getTime()}},addAreaSchoolType:"2"}},computed:{canEdit:function(){return("ACTIVITY_DRAFT"==this.activityStatus||"ACTIVITY_WAITING_AUDIT"==this.activityStatus)&&!this.readOnly}},mounted:function(){this.activityId=this.$route.query.id,this.getActivityDetail(this.activityId),this.getCosBucket(),this.initCos(),this.getExpertList(),this.getQuickDivison()},destroyed:function(){clearInterval(this.saveTaskId)},methods:{hanleInputBlur:function(t,e){"mpstart"==t?this.numReg.test(this.markproject.start)||this.$message.warning("设置评分项目的起始值，只支持数字类型"):"mpend"==t?this.numReg.test(this.markproject.end)||this.$message.warning("设置评分项目的结束值，只支持数字类型"):"commitCount"==t&&(this.numReg.test(e)||this.$message.warning("可提交人数，只支持数字类型"))},goToFlow1EditPage:function(){this.handleSave("interval");var t="/publishManage?id=".concat(this.activityId);"undefined"!=typeof this.flow1.pageId&&(t="/publishManage?id=".concat(this.activityId,"&pageId=").concat(this.flow1.pageId,"&previewToken=").concat(this.flow1.previewToken)),this.$router.push(t)},handleShowFlowQr:function(){var t=m(s.a.mark((function t(e){var i,a;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this["flow"+e].showQr){t.next=11;break}return t.next=3,this.axiosGet({url:"/v1/page/GetPreviewCode",ActivityId:this.activityId}).catch((function(t){return t}));case 3:i=t.sent,a=i.Data.Code,this.flow1.qrText=this.flow1.qrText.replace("Code=","Code=".concat(a)),this["flow"+e].previewName="关闭",this["flow"+e].showQr=!0,console.log(this.flow1.qrText),t.next=13;break;case 11:this["flow"+e].previewName="预览",this["flow"+e].showQr=!1;case 13:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),getCosBucket:function(){var t=m(s.a.mark((function t(){var e;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/resource/costoken"}).catch((function(t){return t}));case 2:if(e=t.sent,"OK"==e.ErrorCode){t.next=5;break}return t.abrupt("return");case 5:this.cosConfig.bucket=e.Data.Name,this.cosConfig.region=e.Data.Region;case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getExpertList:function(){var t=m(s.a.mark((function t(){var e,i;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/activity/GetExpertList"}).catch((function(t){return t}));case 2:if(e=t.sent,"OK"==e.ErrorCode){t.next=5;break}return t.abrupt("return");case 5:i=[],e.Data.ExpertInfo.forEach((function(t){i.push({value:t.UserId,label:t.Username,phone:t.Phone})})),this.expertOptions=i;case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getQuickDivison:function(){var t=m(s.a.mark((function t(){var e,i=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/platform/GetQuickDivison",TagName:"sz_shuoke"}).catch((function(t){return t}));case 2:if(e=t.sent,"OK"==e.ErrorCode){t.next=5;break}return t.abrupt("return");case 5:e.Data.DivisonList.forEach((function(t){1==t.DivisionType?(i.schoolOptions.push({value:t.DivisionId+"",label:t.DivisionName}),i.allSchoolId.push(t.DivisionId+"")):2==t.DivisionType&&(i.areaOptions.push({value:t.DivisionId+"",label:t.DivisionName}),i.allAreaId.push(t.DivisionId+"")),i.areaAndSchoolOptions.push({value:t.DivisionId+"",label:t.DivisionName})}));case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),initCos:function(){var t=this;this.cos=new u.a({getAuthorization:function(e,i){t.axiosGet({url:"/v1/resource/costoken"}).then((function(t){var e=t.Data;i({TmpSecretId:e.TmpSecretId,TmpSecretKey:e.TmpSecretKey,XCosSecurityToken:e.SessionToken,ExpiredTime:e.ExpiredTime})})).catch((function(e){t.$message.error(e)}))}})},saveCropImg:function(){if(!this.isSaveCropImging){this.isSaveCropImging=!0;var t=this,e=t.$message({message:"裁剪并上传中...",duration:2e4});this.$refs.cropper.getCropBlob((function(i){var a=new window.File([i],t.uploadImgName,{type:t.uploadImgType});t.cos.sliceUploadFile({Bucket:t.cosConfig.bucket,Region:t.cosConfig.region,Key:Object(c["getCosKey"])(a),Body:a},(function(i,a){t.isSaveCropImging=!1,e.close(),i||(t.$message({message:"上传成功",type:"success"}),t.activityLogo=location.protocol+"//"+a.Location,t.cropImgShow=!1)}))}))}},bigger:function(){this.$refs.cropper.changeScale(1)},smaller:function(){this.$refs.cropper.changeScale(-1)},chooseImg:function(){this.$refs.uploadImgElem.dispatchEvent(new MouseEvent("click"))},uploadImg:function(){var t=this;if(this.$refs.uploadImgElem.files.length>0){var e=this.$refs.uploadImgElem.files[0],i=e.type;if("image/jpeg"!=i&&"image/jpg"!=i&&"image/png"!=i)return this.$message({message:"只支持 jpg/jpeg/png 三种格式的图片",type:"error"});this.uploadImgName=e.name,this.uploadImgType=i;var a=new FileReader;a.onload=function(e){t.croperOption.img=e.target.result,t.cropImgShow=!0},a.readAsDataURL(e)}},chooseAttachment:function(){this.$refs.uploadAttachmentElem.dispatchEvent(new MouseEvent("click"))},uploadAttachment:function(){if(this.$refs.uploadAttachmentElem.files.length>0){var t=this.$refs.uploadAttachmentElem.files[0],e=t.type;if("application/vnd.ms-excel"!=e&&"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"!=e&&"application/pdf"!=e&&"application/msword"!=e&&"application/vnd.openxmlformats-officedocument.wordprocessingml.document"!=e)return this.$message({message:"只支持 excel/word/pdf 三种格式的文件",type:"error"});var i=this;if(this.isUploadAttachmenting)return;this.isUploadAttachmenting=!0;var a=i.$message({message:"上传中...",duration:2e5});i.cos.sliceUploadFile({Bucket:i.cosConfig.bucket,Region:i.cosConfig.region,Key:Object(c["getCosKey"])(t),Body:t},(function(e,n){if(a.close(),i.isUploadAttachmenting=!1,!e){i.$message({message:"上传成功",type:"success"});var r=location.protocol+"//"+n.Location,s=t.name;i.flow1.fileList.push({name:s,url:r,showDeleteFileIcon:!1})}}))}},getActivityDetail:function(){var t=m(s.a.mark((function t(e){var i,a=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/activity/GetActivityDetail",ActivityId:e}).catch((function(t){return t}));case 2:if(i=t.sent,"OK"==i.ErrorCode){t.next=5;break}return t.abrupt("return");case 5:this.showPagePreview=i.Data.HasPage,this.activityStatus=i.Data.Status,("ACTIVITY_DRAFT"==this.activityStatus||"ACTIVITY_WAITING_AUDIT"==this.activityStatus&&!this.hidePublish)&&(this.saveTaskId=setInterval((function(){a.handleSave("interval")}),5e3)),this.activityName=i.Data.ActivityName,this.activityLogo=i.Data.ActivityLogo,this.activityType=i.Data.ActivityType,this.detailDescValue=i.Data.ActivityDesc,this.endTime=i.Data.EndTime,this.gradeGroup=i.Data.GradeGroup,this.startTime=i.Data.StartTime,this.subject=i.Data.Subject,i.Data.StageList.forEach((function(t,e){if(t.StageId==a.flow1.id){if(a.flow1.show=!0,a.flow1.index=e+1,a.flow1.name=t.StageName,a.flow1.startTime=t.StartTime,a.flow1.endTime=t.EndTime,a.flow1.time=[1e3*t.StartTime,1e3*t.EndTime],a.flow1.config=t.Config?JSON.parse(t.Config):null,a.flow1.config){a.flow1.config.Attachment&&a.flow1.config.Attachment.forEach((function(t){a.flow1.fileList.push({name:t.Name,url:t.URL,showDeleteFileIcon:!1})}));var i=location.protocol+"//"+location.host+"/h5/";"127.0.0.1"==location.hostname&&(i="https://upclass.educloud.tencent.com/h5/"),i+="?ActivityId=".concat(a.activityId,"&Code="),a.flow1.qrText=i}}else if(t.StageId==a.flow2.id)a.flow2.show=!0,a.flow2.index=e+1,a.flow2.name=t.StageName,a.flow2.startTime=t.StartTime,a.flow2.endTime=t.EndTime,a.flow2.time=[1e3*t.StartTime,1e3*t.EndTime],a.flow2.config=t.Config?JSON.parse(t.Config):null,a.flow2.config&&(a.flow2.qrText=a.flow2.config.PageURL?a.flow2.config.PageURL:"");else if(t.StageId==a.flow3.id)a.flow3.show=!0,a.flow3.index=e+1,a.flow3.name=t.StageName,a.flow3.startTime=t.StartTime,a.flow3.endTime=t.EndTime,a.flow3.time=[1e3*t.StartTime,1e3*t.EndTime],a.flow3.config=t.Config?JSON.parse(t.Config):null;else if(t.StageId==a.flow4.id)a.flow4.show=!0,a.flow4.index=e+1,a.flow4.name=t.StageName,a.flow4.startTime=t.StartTime,a.flow4.endTime=t.EndTime,a.flow4.time=[1e3*t.StartTime,1e3*t.EndTime],a.flow4.config=t.Config?JSON.parse(t.Config):null;else if(t.StageId==a.flow5.id)a.flow5.show=!0,a.flow5.index=e+1,a.flow5.name=t.StageName,a.flow5.startTime=t.StartTime,a.flow5.endTime=t.EndTime,a.flow5.time=[1e3*t.StartTime,1e3*t.EndTime],a.flow5.config=t.Config?JSON.parse(t.Config):null,a.flow5.config&&a.flow5.config.DivisionList&&a.flow5.config.DivisionList.forEach((function(t){a.flow5.areaAndSchoolList.push({name:t.DivisionName,count:t.WorkNum,id:t.DivisionID})}));else if(t.StageId==a.flow6.id){if(a.flow6.show=!0,a.flow6.index=e+1,a.flow6.name=t.StageName,a.flow6.startTime=t.StartTime,a.flow6.endTime=t.EndTime,a.flow6.time=[1e3*t.StartTime,1e3*t.EndTime],a.flow6.config=t.Config?JSON.parse(t.Config):null,a.flow6.config){if(a.flow6.config.JudgeList){var n=[];a.flow6.config.JudgeList.forEach((function(t){n.push({name:t.UserName,phone:t.Phone,id:t.UserID})})),a.flow6.expertList=n}if(a.flow6.config.EvaluationList){var r=[];a.flow6.config.EvaluationList.forEach((function(t){r.push({name:t.Name,start:t.MinScore,end:t.MaxScore})})),a.flow6.markProjectList=r}}}else t.StageId==a.flow7.id&&(a.flow7.show=!0,a.flow7.index=e+1,a.flow7.name=t.StageName,a.flow7.startTime=t.StartTime,a.flow7.endTime=t.EndTime,a.flow7.time=[1e3*t.StartTime,1e3*t.EndTime],a.flow7.config=t.Config?JSON.parse(t.Config):null,a.flow7.config&&(a.flow7.qrText=a.flow7.config.PageURL?a.flow7.config.PageURL:""))}));case 17:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),handleFileOver:function(t){t.showDeleteFileIcon=!0},handleFileOut:function(t){t.showDeleteFileIcon=!1},handleDeleteFile:function(t,e){this.flow1.fileList.splice(e,1)},handleSaveAndPublish:function(){this.handleSave("publish")},handleSave:function(){var t=m(s.a.mark((function t(e){var i,a,n,r,o,c,l,u,d=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i=[],a=!0,this.flow1.show&&(this.flow1.config.Attachment=[],this.flow1.fileList.forEach((function(t){d.flow1.config.Attachment.push({Name:t.name,URL:t.url})})),i.push({Config:JSON.stringify(this.flow1.config),EndTime:this.flow1.endTime,StageId:this.flow1.id,StageName:this.flow1.name,StartTime:this.flow1.startTime})),this.flow2.show&&i.push({Config:JSON.stringify(this.flow2.config),EndTime:this.flow2.endTime,StageId:this.flow2.id,StageName:this.flow2.name,StartTime:this.flow2.startTime}),this.flow3.show&&i.push({Config:JSON.stringify(this.flow3.config),EndTime:this.flow3.endTime,StageId:this.flow3.id,StageName:this.flow3.name,StartTime:this.flow3.startTime}),this.flow4.show&&i.push({Config:JSON.stringify(this.flow4.config),EndTime:this.flow4.endTime,StageId:this.flow4.id,StageName:this.flow4.name,StartTime:this.flow4.startTime}),!this.flow5.show){t.next=20;break}this.flow5.config.DivisionList=[],n=0;case 9:if(!(n<this.flow5.areaAndSchoolList.length)){t.next=16;break}if(this.numReg.test(this.flow5.areaAndSchoolList[n].count)){t.next=13;break}return a=!1,t.abrupt("break",16);case 13:n++,t.next=9;break;case 16:if(a){t.next=18;break}return t.abrupt("return",this.$message.error("可提交人数，只支持数字类型"));case 18:this.flow5.areaAndSchoolList.forEach((function(t){d.flow5.config.DivisionList.push({DivisionID:Number(t.id),DivisionName:t.name,WorkNum:Number(t.count)})})),i.push({Config:JSON.stringify(this.flow5.config),EndTime:this.flow5.endTime,StageId:this.flow5.id,StageName:this.flow5.name,StartTime:this.flow5.startTime});case 20:if(!this.flow6.show){t.next=37;break}this.flow6.config.JudgeList=[],this.flow6.expertList.forEach((function(t){d.flow6.config.JudgeList.push({UserName:t.name,Phone:t.phone,UserId:t.id})})),r=0;case 24:if(!(r<this.flow6.markProjectList.length)){t.next=32;break}if(o=this.flow6.markProjectList[r],this.numReg.test(o.start)&&this.numReg.test(o.end)){t.next=29;break}return a=!1,t.abrupt("break",32);case 29:r++,t.next=24;break;case 32:if(a){t.next=34;break}return t.abrupt("return",this.$message.error("设置评分项目的起始和结束，只支持数字类型"));case 34:this.flow6.config.EvaluationList=[],this.flow6.markProjectList.forEach((function(t){d.flow6.config.EvaluationList.push({Name:t.name,MinScore:Number(t.start),MaxScore:Number(t.end)})})),i.push({Config:JSON.stringify(this.flow6.config),EndTime:this.flow6.endTime,StageId:this.flow6.id,StageName:this.flow6.name,StartTime:this.flow6.startTime});case 37:if(this.flow7.show&&i.push({Config:JSON.stringify(this.flow7.config),EndTime:this.flow7.endTime,StageId:this.flow7.id,StageName:this.flow7.name,StartTime:this.flow7.startTime}),"interval"==e||this.activityLogo){t.next=40;break}return t.abrupt("return",this.$message.error("必须上传活动封面"));case 40:return c={url:"/v1/activity/UpdateActivity",ActivityId:Number(this.activityId),ActivityLogo:this.activityLogo,ActivityDesc:this.detailDescValue,ActivityName:this.activityName,ActivityType:Number(this.activityType),EndTime:this.endTime,GradeGroup:this.gradeGroup,StartTime:this.startTime,Subject:this.subject,StageList:i},l="保存成功","publish"==e&&(c.Status="ACTIVITY_WAITING_AUDIT",l="保存并发布成功"),t.next=45,this.axiosPost(c).catch((function(t){return t}));case 45:if(u=t.sent,"OK"==u.ErrorCode){t.next=49;break}return clearInterval(this.saveTaskId),t.abrupt("return",this.$message.error(u.ErrorMsg));case 49:"interval"!=e&&this.$message.success(l),"publish"==e&&setTimeout((function(){d.$router.back(-1)}),1500);case 51:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),handleCancel:function(){this.$router.push("/myActivity")},handleShowAddMarkProject:function(){this.markproject.Name="",this.showAddMarkproject=!0},handleAddMarkProject:function(){if(""==this.markproject.name)return this.$message.warning("请输入评分项目名称");this.nameReg.test(this.markproject.name)||this.$message.warning("评分项目名称，只支持中英文数字"),this.flow6.markProjectList.push({name:this.markproject.name,start:this.markproject.start,end:this.markproject.end}),this.markproject.name="",this.showAddMarkproject=!1},handleDeleteMarkProject:function(t){this.flow6.markProjectList.splice(t,1)},handleCancleMarkProject:function(){this.showAddMarkproject=!1},handleDeleteExpert:function(){var t=m(s.a.mark((function t(e,i){var a;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosPost({url:"/v1/activity/RemoveJudge",ActivityId:this.activityId,JudgeList:[{UserId:i}]}).catch((function(t){return t}));case 2:a=t.sent,"OK"==a.ErrorCode?(this.$message.success("删除评委成功"),this.flow6.expertList.splice(e,1)):this.$message.error("删除评委失败:[".concat(a.ErrorMsg,"][code=").concat(a.ErrorCode,"]"));case 4:case"end":return t.stop()}}),t,this)})));function e(e,i){return t.apply(this,arguments)}return e}(),handleShowAddExpertDialog:function(){this.dialogVisible=!0},handleAddExpert:function(){var t=m(s.a.mark((function t(){var e,i;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(this.expertValue.length>0)){t.next=11;break}return e=[],this.expertValue.forEach((function(t){e.push({UserId:t})})),t.next=5,this.axiosPost({url:"/v1/activity/AddJudge",ActivityId:this.activityId,JudgeList:e}).catch((function(t){return t}));case 5:if(i=t.sent,"OK"==i.ErrorCode){t.next=8;break}return t.abrupt("return",this.$message.error(i.ErrorMsg));case 8:this.expertValue=[],this.$message.success("添加评委成功"),this.getActivityDetail(this.activityId);case 11:this.dialogVisible=!1;case 12:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),handleShowAddAreaAndSchool:function(){this.areaAndSchoolDialogVisible=!0},handleAreaCheckAll:function(t){this.checkedAreaSchool=t?this.allAreaId:[],this.areaOpt.isIndeterminate=!1},handleSchoolCheckAll:function(t){this.checkedAreaSchool=t?this.allSchoolId:[],this.schoolOpt.isIndeterminate=!1},handleAreaCheckedChange:function(t){var e=t.length;this.areaOpt.checkAll=e===this.allAreaId.length,this.areaOpt.isIndeterminate=e>0&&e<this.allAreaId.length},handleSchoolCheckedChange:function(t){var e=t.length;this.schoolOpt.checkAll=e===this.allSchoolId.length,this.schoolOpt.isIndeterminate=e>0&&e<this.allSchoolId.length},handleAddAreaAndSchool:function(){var t=this,e=[];if(this.checkedAreaSchool.length>0){for(var i=0;i<this.flow5.areaAndSchoolList.length;i++)for(var a=0;a<this.checkedAreaSchool.length;a++)if(this.flow5.areaAndSchoolList[i].id==this.checkedAreaSchool[a]){this.checkedAreaSchool.splice(a,1);break}this.checkedAreaSchool.forEach((function(i){for(var a=0;a<t.areaAndSchoolOptions.length;a++)if(t.areaAndSchoolOptions[a].value==i){var n=t.areaAndSchoolOptions[a];e.push({name:n.label,count:n.count?n.count:0,id:n.value});break}})),this.flow5.areaAndSchoolList=this.flow5.areaAndSchoolList.concat(e)}this.areaAndSchoolDialogVisible=!1},handleDeleteAreaAndSchool:function(t){this.flow5.areaAndSchoolList.splice(t,1)},handleDateChange:function(t){var e=this["flow".concat(t)];e.startTime=Object(c["timestampToTime"])(Math.floor(e.time[0]/1e3),{dateZero:1}),e.endTime=Object(c["timestampToTime"])(Math.floor(e.time[1]/1e3),{dateZero:1}),e.startTime=Math.floor(new Date("".concat(e.startTime,"T00:00:00")).getTime()/1e3),e.endTime=Math.floor(new Date("".concat(e.endTime,"T23:59:59")).getTime()/1e3)}}},v=f,g=(i("28ef"),i("623f")),y=Object(g["a"])(v,a,n,!1,null,null,null),b=e["a"]=y.exports},cb57:function(t,e,i){"use strict";var a=i("c9e5"),n=i.n(a);n.a},ccab:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"excellent-work-detail"},[i("div",{staticClass:"work-title"},[i("span",{staticClass:"go-back",on:{click:function(e){return t.$router.back(-1)}}},[t._v("待评审的作品")]),t._v(" / "+t._s(t.workName))]),i("div",{staticClass:"work-detail-wrap"},[i("work-detail",{staticClass:"work-vido",attrs:{WorkId:parseInt(t.workId)},on:{Evaluation:t.evaluationListMgr}}),0==t.status?i("div",[i("div",{staticClass:"aduit-list"},[t._v("评分表")]),0==t.status?i("div",{staticClass:"aduit-bottom"},t._l(t.evaluationList,(function(e,a){return i("div",{key:a,staticClass:"box"},[i("p",{staticClass:"box-btn"},[t._v(t._s(e.Name))]),i("el-select",{staticStyle:{width:"100px"},model:{value:e.value,callback:function(i){t.$set(e,"value",i)},expression:"item.value"}},t._l(t.optionsList[a],(function(t){return i("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1)})),0):t._e()]):t._e(),1==t.status?i("div",{staticClass:"aduit-bottom"},[i("div",{staticClass:"aduit-list"},[t._v("评分表")]),t._l(t.evaluationList,(function(e,a){return i("div",{key:a,staticClass:"box"},[i("p",{staticClass:"box-btn"},[t._v(t._s(e.Name))]),i("span",{staticClass:"store"},[t._v(t._s(e.Score))])])}))],2):t._e(),0==t.status?i("el-button",{staticStyle:{"margin-top":"10px"},attrs:{type:"primary"},on:{click:t.subComment}},[t._v("提交评论")]):t._e()],1)])},n=[],r=i("46b4"),s=i.n(r),o=i("0865");function c(t,e,i,a,n,r,s){try{var o=t[r](s),c=o.value}catch(l){return void i(l)}o.done?e(c):Promise.resolve(c).then(a,n)}function l(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var r=t.apply(e,i);function s(t){c(r,a,n,s,o,"next",t)}function o(t){c(r,a,n,s,o,"throw",t)}s(void 0)}))}}var u={components:{WorkDetail:o["a"]},data:function(){return{workId:"",workName:"",fullStore:10,innovateStore:10,evaluationList:[],optionsList:[],workStatus:"",DivisionId:""}},created:function(){var t=l(s.a.mark((function t(){return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.workId=this.$route.query.WorkId,this.workName=this.$route.query.WorkName,this.status=this.$route.query.status,this.DivisionId=this.$route.query.DivisionId;case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),methods:{evaluationListMgr:function(t){if(t.ScoreList){this.evaluationList=t.ScoreList;var e=!0,i=!1,a=void 0;try{for(var n,r=this.evaluationList[Symbol.iterator]();!(e=(n=r.next()).done);e=!0){for(var s=n.value,o=s.MinScore,c=s.MaxScore,l=[],u=o;u<=c;u++)l.push(u);this.optionsList.push(l)}}catch(d){i=!0,a=d}finally{try{e||null==r.return||r.return()}finally{if(i)throw a}}}},subComment:function(){var t=l(s.a.mark((function t(){var e,i,a,n,r,o,c,l;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=[],i=!0,a=!1,n=void 0,t.prev=4,r=this.evaluationList[Symbol.iterator]();case 6:if(i=(o=r.next()).done){t.next=14;break}if(c=o.value,c.value){t.next=10;break}return t.abrupt("return",this.$message.error("请将评分表填写完整"));case 10:e.push({Name:c.Name,Score:c.value});case 11:i=!0,t.next=6;break;case 14:t.next=20;break;case 16:t.prev=16,t.t0=t["catch"](4),a=!0,n=t.t0;case 20:t.prev=20,t.prev=21,i||null==r.return||r.return();case 23:if(t.prev=23,!a){t.next=26;break}throw n;case 26:return t.finish(23);case 27:return t.finish(20);case 28:return t.next=30,this.axiosPost({url:"/v1/activity/SetWorkScore",WorkId:this.workId,ScoreList:e,DivisionId:this.DivisionId}).catch((function(t){return t}));case 30:if(l=t.sent,"OK"==l.ErrorCode){t.next=33;break}return t.abrupt("return",this.$message.error(l.ErrorMsg));case 33:this.$message.success("提交成功"),this.$router.back(-1);case 35:case"end":return t.stop()}}),t,this,[[4,16,20,28],[21,,23,27]])})));function e(){return t.apply(this,arguments)}return e}()}},d=u,p=(i("e72b"),i("623f")),h=Object(p["a"])(d,a,n,!1,null,"4c4cb79c",null);e["default"]=h.exports},cce7:function(t,e,i){"use strict";var a=i("c69b"),n=i.n(a);n.a},cdc2:function(t,e,i){},cdf4:function(t,e,i){"use strict";var a=i("d385"),n=i.n(a);n.a},cea1:function(t,e,i){t.exports=i.p+"img/zip.c7edf28a.svg"},cf3c:function(t,e,i){},cf8e:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"uni-app uni-layout"},[i("t-header"),i("div",{staticClass:"uni-layout-content"},[i("div",{staticClass:"pages"},[i("keep-alive",[t.$route.meta.keepAlive?i("router-view"):t._e()],1),t.$route.meta.keepAlive?t._e():i("router-view")],1)])],1)},n=[],r=i("0b35"),s=i("578a"),o={name:"uni-content",components:{tHeader:r["a"],Login:s["a"]},watch:{}},c=o,l=(i("6b57"),i("623f")),u=Object(l["a"])(c,a,n,!1,null,null,null);e["default"]=u.exports},cfc6:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"my-editer"},[i("quill-editor",{ref:"myQuillEditor",staticClass:"ql-editor",staticStyle:{height:"350px",width:"800px"},attrs:{options:t.editorOption},on:{change:t.editorChange},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}},[i("div",{attrs:{slot:"toolbar",id:"toolbar"},slot:"toolbar"},[i("button",{staticClass:"ql-bold",attrs:{title:"加粗"}},[t._v("Bold")]),i("button",{staticClass:"ql-italic",attrs:{title:"斜体"}},[t._v("Italic")]),i("button",{staticClass:"ql-underline",attrs:{title:"下划线"}},[t._v("underline")]),i("button",{staticClass:"ql-strike",attrs:{title:"删除线"}},[t._v("strike")]),i("button",{staticClass:"ql-blockquote",attrs:{title:"引用"}}),i("button",{staticClass:"ql-code-block",attrs:{title:"代码"}}),i("button",{staticClass:"ql-header",attrs:{value:"1",title:"标题1"}}),i("button",{staticClass:"ql-header",attrs:{value:"2",title:"标题2"}}),i("button",{staticClass:"ql-list",attrs:{value:"ordered",title:"有序列表"}}),i("button",{staticClass:"ql-list",attrs:{value:"bullet",title:"无序列表"}}),i("select",{staticClass:"ql-header",attrs:{title:"段落格式"}},[i("option",{attrs:{selected:""}},[t._v("段落")]),i("option",{attrs:{value:"1"}},[t._v("标题1")]),i("option",{attrs:{value:"2"}},[t._v("标题2")]),i("option",{attrs:{value:"3"}},[t._v("标题3")]),i("option",{attrs:{value:"4"}},[t._v("标题4")]),i("option",{attrs:{value:"5"}},[t._v("标题5")]),i("option",{attrs:{value:"6"}},[t._v("标题6")])]),i("select",{staticClass:"ql-size",attrs:{title:"字体大小"}},[i("option",{attrs:{value:"10px"}},[t._v("10px")]),i("option",{attrs:{value:"12px"}},[t._v("12px")]),i("option",{attrs:{value:"14px"}},[t._v("14px")]),i("option",{attrs:{value:"16px",selected:""}},[t._v("16px")]),i("option",{attrs:{value:"18px"}},[t._v("18px")]),i("option",{attrs:{value:"20px"}},[t._v("20px")])]),i("select",{staticClass:"ql-font",attrs:{title:"字体"}},[i("option",{attrs:{value:"SimSun"}},[t._v("宋体")]),i("option",{attrs:{value:"SimHei"}},[t._v("黑体")]),i("option",{attrs:{value:"Microsoft-YaHei"}},[t._v("微软雅黑")]),i("option",{attrs:{value:"KaiTi"}},[t._v("楷体")]),i("option",{attrs:{value:"FangSong"}},[t._v("仿宋")]),i("option",{attrs:{value:"Arial"}},[t._v("Arial")])]),i("select",{staticClass:"ql-color",attrs:{value:"color",title:"字体颜色"}}),i("select",{staticClass:"ql-background",attrs:{value:"background",title:"背景颜色"}}),i("select",{staticClass:"ql-align",attrs:{value:"align",title:"对齐"}}),i("button",{staticClass:"ql-clean",attrs:{title:"还原"}})])])],1)},n=[],r=i("b881"),s=(i("121a"),i("7e41"),i("96be"),i("b277"),r["Quill"].import("attributors/style/size"));s.whitelist=["10px","12px","14px","16px","18px","20px"],r["Quill"].register(s,!0);var o=["SimSun","SimHei","Microsoft-YaHei","KaiTi","FangSong","Arial","Times-New-Roman","sans-serif","宋体","黑体"],c=r["Quill"].import("formats/font");c.whitelist=o,r["Quill"].register(c,!0);var l={name:"FuncFormsEdit",components:{quillEditor:r["quillEditor"]},props:{inputtext:{type:String,default:function(){return""}}},data:function(){return{content:null,editorOption:{placeholder:"请输入",theme:"snow",modules:{toolbar:{container:"#toolbar"}}}}},created:function(){},mounted:function(){var t=this;this.$nextTick((function(){t.content=t.inputtext})),setTimeout((function(){t.content=t.inputtext}),3e3)},methods:{editorChange:function(){this.$emit("editorChange",this.content)}}},u=l,d=(i("e199"),i("623f")),p=Object(d["a"])(u,a,n,!1,null,null,null);e["a"]=p.exports},d0b8:function(t,e,i){"use strict";var a=i("dbac"),n=i.n(a);n.a},d197:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"news-bulletin-detail"},[i("el-card",{staticClass:"box-card"},[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("span",{staticStyle:{float:"left","margin-left":"30px"}},[t._v("发布公告")])]),i("div",[i("span",{staticClass:"title"},[t._v("绘画比赛获奖公告")]),i("br"),i("span",{staticClass:"date"},[t._v("2019.10.30")]),i("br"),i("p",{staticClass:"data"},[t._v("课堂是学校教育的主阵地，亦是常规管理的生命线。\n          因此，在每月督导过程中，都会深入课堂一线，通过观摩听课和交流反馈，\n          全面了解学校的课堂常规和师生的成长样态\n        ")]),i("br"),i("p",{staticClass:"data"},[t._v("\n          从督导情况来看，两所学校都注重夯实教学常规，着力提升课堂实效。尤其在教学常规管理方面，\n          广培小学重视课堂常规落实，在学科组、年级组内采取集体备课、集体说课等活动，\n          进一步提升课堂教学质量。锦明学校则注重课堂常规建设，近期正在开展小组合作式教学实践，\n          不断优化课堂教学模式，激发学生主动学习、探究合作。\n        ")])])])],1)},n=[],r=(i("cce7"),i("623f")),s={},o=Object(r["a"])(s,a,n,!1,null,"c8232616",null);e["default"]=o.exports},d349:function(t,e,i){},d35c:function(t,e,i){"use strict";var a=i("12c7"),n=i.n(a);n.a},d362:function(t,e,i){},d385:function(t,e,i){},d47b:function(t,e,i){t.exports=i.p+"img/down.ff62d073.svg"},d4a4:function(t,e,i){},d503:function(t,e,i){},d542:function(t,e,i){},d8dc:function(t,e,i){"use strict";var a=i("aaba"),n=i.n(a);n.a},d8f5:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"excellent-work-list"},[t.activityList.length>0?i("div",{staticClass:"work-show"},[i("activity-list",{attrs:{activityList:t.activityList,goToDetail:t.excellentWork}})],1):t._e()])},n=[],r=i("46b4"),s=i.n(r),o=i("7342");function c(t,e,i,a,n,r,s){try{var o=t[r](s),c=o.value}catch(l){return void i(l)}o.done?e(c):Promise.resolve(c).then(a,n)}function l(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var r=t.apply(e,i);function s(t){c(r,a,n,s,o,"next",t)}function o(t){c(r,a,n,s,o,"throw",t)}s(void 0)}))}}var u={name:"activity-center",components:{ActivityList:o["a"]},data:function(){return{activityList:[],excellentWork:"excellentWork"}},created:function(){var t=l(s.a.mark((function t(){var e;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=[],this.activityList=e;case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},d=u,p=(i("2b20"),i("623f")),h=Object(p["a"])(d,a,n,!1,null,null,null);e["default"]=h.exports},dbac:function(t,e,i){},dc2f:function(t,e,i){},dc34:function(t,e,i){t.exports=i.p+"img/big.3f69fe78.png"},dc71:function(t,e,i){"use strict";var a=i("5054"),n=i.n(a);n.a},dd48:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"classify-centainer"},[i("el-card",{staticStyle:{"min-height":"600px"}},[i("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:"分类管理",name:"classify"}},[i("el-row",[i("el-col",{attrs:{span:3}},[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.goToAddClassify}},[t._v("添加分类")])],1)],1),i("el-row",[i("el-col",[i("div",{staticClass:"card"},[t._l(t.cardList,(function(e){return[i("card",{attrs:{cardDetail:e},on:{goToAdd:t.goToAdd,goToEdit:t.goToEdit,goToDelete:t.goToDelete}})]}))],2)])],1)],1)],1)],1)],1)},n=[],r=i("ae8d"),s={components:{Card:r["a"]},data:function(){return{activeName:"classify",cardList:[{id:1,imgUrl:i("1617"),title:"深圳市中小学电脑制作大赛"},{id:2,imgUrl:i("2a8e"),title:"深圳市中小学电脑机器人活动"},{id:3,imgUrl:i("74e7"),title:"深圳市中小学网络夏令营"},{id:4,imgUrl:i("4b1a"),title:"深圳市中小学微课大赛"},{id:5,imgUrl:i("2b8b"),title:"深圳市中小学说课大赛"},{id:6,imgUrl:i("45e8"),title:"深圳市AI知识大赛"}]}},mounted:function(){},methods:{goToAddClassify:function(){this.$router.push({path:"/addClassify"})},goToAdd:function(t){console.log("添加id==",t),this.$router.push({path:"/subClassify",query:{id:t.id,title:t.title}})},goToEdit:function(t){console.log("编辑id==",t)},goToDelete:function(t){console.log("删除id==",t)}}},o=s,c=(i("40ab"),i("623f")),l=Object(c["a"])(o,a,n,!1,null,"2a449974",null);e["default"]=l.exports},de12:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"admin-centainer"},[i("el-card",{staticStyle:{"min-height":"600px"}},[i("el-tabs",{on:{"tab-click":t.tabClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:"教师",name:"teacher"}}),i("el-tab-pane",{attrs:{label:"学生",name:"student"}}),i("el-tab-pane",{attrs:{label:"家长",name:"parent"}})],1),i("div",[i("el-row",{staticClass:"teacher-top"},[2!=t.index?i("el-col",{attrs:{span:2}},[t._v("所在地区")]):t._e(),2!=t.index?i("el-col",{attrs:{span:6}},[i("el-select",{attrs:{placeholder:"请选择",size:"small"},on:{change:t.areaChange},model:{value:t.areaVal,callback:function(e){t.areaVal=e},expression:"areaVal"}},t._l(t.areaList,(function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1):t._e(),2!=t.index?i("el-col",{attrs:{span:2}},[t._v("所在学校")]):t._e(),2!=t.index?i("el-col",{attrs:{span:6}},[i("el-select",{attrs:{placeholder:"请选择",size:"small"},on:{change:t.schoolChange},model:{value:t.schoolVal,callback:function(e){t.schoolVal=e},expression:"schoolVal"}},t._l(t.schoolList,(function(t){return i("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})})),1)],1):t._e(),1==t.index?i("el-col",{attrs:{span:2}},[t._v("关联家长")]):t._e(),1==t.index?i("el-col",{attrs:{span:6}},[i("el-input",{attrs:{placeholder:"请输入关联家长",size:"small"},model:{value:t.parent,callback:function(e){t.parent=e},expression:"parent"}})],1):t._e(),2==t.index?i("el-col",{attrs:{span:2}},[t._v("关联学生")]):t._e(),2==t.index?i("el-col",{attrs:{span:6}},[i("el-input",{attrs:{placeholder:"请输入关联学生",size:"small"},model:{value:t.student,callback:function(e){t.student=e},expression:"student"}})],1):t._e()],1),i("el-row",{staticClass:"teacher-top"},[i("el-col",{attrs:{span:1}},[t._v("电话")]),i("el-col",{attrs:{span:6}},[i("el-input",{attrs:{placeholder:"请输入电话",size:"small"},model:{value:t.mobile,callback:function(e){t.mobile=e},expression:"mobile"}})],1),i("el-col",{attrs:{span:1,offset:1}},[t._v("姓名")]),i("el-col",{attrs:{span:6}},[i("el-input",{attrs:{placeholder:"请输入姓名",size:"small"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),i("el-col",{attrs:{span:2,offset:1}},[i("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:t.goToSearch}},[t._v("查询")])],1),i("el-col",{attrs:{span:2}},[i("el-button",{attrs:{type:"danger",plain:"",size:"small"},on:{click:t.goToBatchForbidden}},[t._v("批量禁用")])],1)],1),i("el-row",[i("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.userList,border:"","header-cell-style":{background:"#EEEEEE",color:"#323232"},"tooltip-effect":"dark"},on:{"selection-change":t.tableSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"55"}}),i("el-table-column",{attrs:{label:"序号",type:"index",width:"160"}}),i("el-table-column",{attrs:{prop:"name",label:"姓名"}}),i("el-table-column",{attrs:{label:"所在区域","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.areaName))]}}])}),i("el-table-column",{attrs:{label:"所在学校","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.schoolTitle))]}}])}),i("el-table-column",{attrs:{label:"手机号"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.mobile))]}}])}),1==this.index?i("el-table-column",{attrs:{label:"所关联的家长","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._l(e.row.memberInfo,(function(e){return[t._v(t._s(e.parent.join(",")))]}))]}}],null,!1,3292642182)}):t._e(),2==this.index?i("el-table-column",{attrs:{label:"所关联的学生","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._l(e.row.memberInfo,(function(e){return[t._v(t._s(e.student.join(",")))]}))]}}],null,!1,1905768371)}):t._e(),i("el-table-column",{attrs:{fixed:"right",label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.status?[i("el-button",{staticStyle:{color:"red"},attrs:{type:"text",size:"small"},on:{click:function(i){return t.goToForbidden(e.row.id)}}},[t._v("禁用")])]:t._e(),0==e.row.status?[i("el-button",{staticStyle:{color:"#999"},attrs:{type:"text",size:"small"}},[t._v("已禁用")]),i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return t.goToRelieve(e.row.id)}}},[t._v("解禁")])]:t._e(),i("el-button",{staticStyle:{color:"red"},attrs:{type:"text",size:"small"},on:{click:function(i){return t.goToDelete(e.row.id,e.row.openid)}}},[t._v("删除")])]}}])})],1)],1),i("el-row",{staticClass:"page-div"},[i("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[20,30,40,50,100],"page-size":t.perPage,layout:"total, sizes, prev, pager, next, jumper",total:t.totalCount},on:{"size-change":t.pageSizeChange,"current-change":t.pageCurrentChange}})],1)],1)],1)],1)},n=[],r=i("46b4"),s=i.n(r),o=i("408b");function c(t,e,i,a,n,r,s){try{var o=t[r](s),c=o.value}catch(l){return void i(l)}o.done?e(c):Promise.resolve(c).then(a,n)}function l(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var r=t.apply(e,i);function s(t){c(r,a,n,s,o,"next",t)}function o(t){c(r,a,n,s,o,"throw",t)}s(void 0)}))}}var u={data:function(){return{index:0,activeName:"teacher",areaList:[{id:"77",pid:"6",type:"2",name:"深圳"},{id:"726",pid:"77",type:"3",name:"福田区"},{id:"727",pid:"77",type:"3",name:"罗湖区"},{id:"728",pid:"77",type:"3",name:"南山区"},{id:"729",pid:"77",type:"3",name:"宝安区"},{id:"730",pid:"77",type:"3",name:"龙岗区"},{id:"731",pid:"77",type:"3",name:"盐田区"},{id:"732",pid:"77",type:"3",name:"市辖区"},{id:"733",pid:"77",type:"3",name:"龙华区"},{id:"734",pid:"77",type:"3",name:"坪山区"},{id:"735",pid:"77",type:"3",name:"光明区"},{id:"736",pid:"77",type:"3",name:"大鹏区"}],schoolList:[],areaVal:"",schoolVal:"",name:"",mobile:"",parent:"",student:"",tableParent:"",tableStudent:"",userList:[],multipleSelection:[],perPage:20,currentPage:1,totalCount:0}},mounted:function(){},created:function(){var t={"per-page":this.perPage};t.page=this.currentPage,t.mtype=parseInt(this.index)+1,this.getUserList(t),t={},this.getSchoolList(t)},methods:{getUserList:function(){var t=l(s.a.mark((function t(e){var i=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.url=o["a"].user,e.expand="memberInfo",""!=this.name&&(e.name=this.name),""!=this.mobile&&(e.mobile=this.mobile),""!=this.schoolVal&&(e.school=this.schoolVal),""!=this.parent&&(e.parent=this.parent),""!=this.student&&(e.student=this.student),t.next=9,this.axiosGet(e).then((function(t){i.userList=t.items,i.totalCount=t._meta.totalCount;for(var e=0;e<i.userList.length;e++)for(var a=0;a<i.userList[e].memberInfo.length;a++)void 0!=i.userList[e].memberInfo&&i.userList[e].memberInfo.length>0&&void 0!=i.userList[e].memberInfo[0].school&&void 0!=i.userList[e].memberInfo[0].school.areaName&&(i.userList[e].areaName=i.userList[e].memberInfo[0].school.areaName),void 0!=i.userList[e].memberInfo&&i.userList[e].memberInfo.length>0&&void 0!=i.userList[e].memberInfo[0].school&&void 0!=i.userList[e].memberInfo[0].school.title&&(i.userList[e].schoolTitle=i.userList[e].memberInfo[0].school.title),void 0!=i.userList[e].memberInfo[a].parents?i.userList[e].memberInfo[a].parent=i.userList[e].memberInfo[a].parents.map((function(t){return t.name})):i.userList[e].memberInfo[a].parent=[],void 0!=i.userList[e].memberInfo[a].students?i.userList[e].memberInfo[a].student=i.userList[e].memberInfo[a].students.map((function(t){return t.name})):i.userList[e].memberInfo[a].student=[]})).catch((function(t){return t}));case 9:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),getSchoolList:function(){var t=l(s.a.mark((function t(e){var i=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.url=o["a"].school,e.ball=1,t.next=4,this.axiosGet(e).then((function(t){i.schoolList=t.items})).catch((function(t){return t}));case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),areaChange:function(){var t=l(s.a.mark((function t(e){var i;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:console.log("area===",e),i={},77!=e&&(i={"filter[areaid]":this.areaVal}),this.schoolVal="",this.getSchoolList(i),i={"per-page":this.perPage},i.page=this.currentPage,i.mtype=parseInt(this.index)+1,this.getUserList(i);case 9:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),schoolChange:function(t){this.schoolVal=t;var e={"per-page":this.perPage};e.page=this.currentPage,e.mtype=parseInt(this.index)+1,this.getUserList(e)},tabClick:function(t,e){console.log(t.index,e),this.currentPage=1,this.index=t.index,0==this.index?this.parent="":2==this.index&&(this.schoolVal="",this.parent="");var i={"per-page":this.perPage};i.page=this.currentPage,i.mtype=parseInt(this.index)+1,this.getUserList(i)},pageSizeChange:function(t){this.perPage=t;var e={"per-page":this.perPage};e.mtype=parseInt(this.index)+1,e.page=this.currentPage,this.getUserList(e)},pageCurrentChange:function(t){this.currentPage=t;var e={"per-page":this.perPage};e.mtype=parseInt(this.index)+1,e.page=this.currentPage,this.getUserList(e)},tableSelectionChange:function(t){this.multipleSelection=t},goToDetail:function(t){},goToForbidden:function(t){var e=0;this.open(t,e)},goToDelete:function(t,e){var i="del_"+e+"_"+Date.parse(new Date)/1e3,a=-1;this.open(t,a,i)},open:function(t,e,i){var a=this,n="";0==e?n="禁止该用户使用改系统":-1==e&&(n="永久删除该用户"),this.$confirm("此操作将".concat(n,", 是否继续?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var i={};i.id=t,i.status=e,a.updateUser(i)})).catch((function(){a.$message({type:"info",message:"已取消！"})}))},updateUser:function(){var t=l(s.a.mark((function t(e){var i,a=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.url=o["a"].user,i="",0==e.status?i="禁用成功！":-1==e.status&&(i="删除成功！"),t.next=5,this.axiosPut(e).then((function(t){a.$message({type:"success",message:i});var e={"per-page":a.perPage};e.page=a.currentPage,e.mtype=parseInt(a.index)+1,a.getUserList(e)})).catch((function(t){return t}));case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),goToRelieve:function(){var t=l(s.a.mark((function t(e){var i,a=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i={},i.id=e,i.status=1,i.url=o["a"].user,t.next=6,this.axiosPut(i).then((function(t){a.$message({type:"success",message:"解禁成功！"}),i={"per-page":a.perPage},i.page=a.currentPage,i.mtype=parseInt(a.index)+1,a.getUserList(i)})).catch((function(t){return t}));case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),goToSearch:function(){var t=l(s.a.mark((function t(){var e;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e={"per-page":this.perPage},e.page=this.currentPage,e.mtype=parseInt(this.index)+1,this.getUserList(e);case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),goToBatchForbidden:function(){var t=l(s.a.mark((function t(){var e,i,a,n=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(i in e=[],this.multipleSelection)e.push(this.multipleSelection[i].id);if(0!=e.length){t.next=5;break}return this.$message({type:"info",message:"请先选择需要禁用的用户"}),t.abrupt("return");case 5:a={},a.ids=e,a.url=o["a"].disableUsers,this.$confirm("此操作将批量禁用用户使用该系统, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){n.batchForbidden(a)})).catch((function(){n.$message({type:"info",message:"已取消！"})}));case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),batchForbidden:function(){var t=l(s.a.mark((function t(e){var i=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosPost(e).then((function(t){i.$message({type:"success",message:"批量禁用成功！"});var e={"per-page":i.perPage};e.page=i.currentPage,e.mtype=parseInt(i.index)+1,i.getUserList(e)})).catch((function(t){return t}));case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),goToBatchDelete:function(){var t=this,e=[];for(var i in this.multipleSelection)e.push(this.multipleSelection[i].id);if(0!=e.length){var a={};a.ids=e,a.url=o["a"].deleteUsers,this.$confirm("此操作将批量删除用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.batchDelete(a)})).catch((function(){t.$message({type:"info",message:"已取消！"})}))}else this.$message({type:"info",message:"请先选择需要删除的用户"})},batchDelete:function(){var t=l(s.a.mark((function t(e){var i=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosPost(e).then((function(t){i.$message({type:"success",message:"批量删除成功！"});var e={"per-page":i.perPage};e.page=i.currentPage,e.mtype=parseInt(i.index)+1,i.getUserList(e)})).catch((function(t){return t}));case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}},d=u,p=(i("9586"),i("f1b7"),i("623f")),h=Object(p["a"])(d,a,n,!1,null,"2829d3ae",null);e["default"]=h.exports},de55:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"enrolment",staticClass:"activity-introduction-container"},[""!=t.bannerUrl?a("div",{staticClass:"banner-container"},[a("el-image",{attrs:{src:t.bannerUrl,fit:"cover"}})],1):t._e(),a("div",{staticClass:"sub-nav"},[a("div",{staticClass:"sub-nav-main"},[a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"活动介绍",name:"first"}},[a("el-card",{staticClass:"my-card"},[a("el-steps",{attrs:{active:t.process,"align-center":""}},[a("el-step",{attrs:{title:"作品报名",description:t.formatDateChar(1e3*t.activityObject.node[0].stime)+"--"+t.formatDateChar(1e3*t.activityObject.node[0].etime)}}),a("el-step",{attrs:{title:"区域推荐",description:t.formatDateChar(1e3*t.activityObject.node[1].stime)+"--"+t.formatDateChar(1e3*t.activityObject.node[1].etime)}}),a("el-step",{attrs:{title:"市级评审",description:t.formatDateChar(1e3*t.activityObject.node[2].stime)+"--"+t.formatDateChar(1e3*t.activityObject.node[2].etime)}}),a("el-step",{attrs:{title:"作品展示",description:t.formatDateChar(1e3*t.activityObject.node[3].stime)+"--"+t.formatDateChar(1e3*t.activityObject.node[3].etime)}})],1)],1),a("div",{staticClass:"my-card card-body"},[a("div",{staticClass:"title"},[t.activityObject.title.length<=75?a("p",[t._v(t._s(t.activityObject.title))]):a("el-tooltip",{attrs:{content:t.activityObject.title,placement:"top",effect:"dark"}},[a("p",[t._v(t._s(t.activityObject.title))])])],1),a("el-divider"),a("div",{staticClass:"activity-introduction-main"},[a("div",{staticClass:"activity-title"},[a("p",[t._v("活动介绍：")])]),a("div",{staticClass:"activity-int-item"},[a("div",{staticClass:"activity-int-content ql-snow ql-editor",domProps:{innerHTML:t._s(t.activityObject.detail.content)}})])]),a("div",{staticClass:"activity-annex"},[a("p",[t._v("相关附件：")]),t._l(t.activityObject.attachment,(function(t,e){return a("div",{key:e,staticClass:"annex"},[a("file-preview",{attrs:{fileObj:t}})],1)}))],2),a("div",{staticClass:"list-item"},[a("div",{staticClass:"list-item-title"},[a("p",[t._v("活动对象：")])]),t._l(t.activityObject.target,(function(e,i){return a("div",{key:i,staticClass:"list-item-content"},[t._v("【"+t._s(t.targetObj[e])+"】")])}))],2),a("div",{staticClass:"list-item"},[a("div",{staticClass:"list-item-title"},[a("p",[t._v("活动范围：")])]),t.activityObject.region.length<12?t._l(t.activityObject.region,(function(e,i){return a("div",{key:i,staticClass:"list-item-content"},[t._v("【"+t._s(e.area_name)+"】")])})):t._e(),[t.activityObject.region.length>=12?a("div",[t._v("【深圳市】")]):t._e()]],2),a("div",{staticClass:"enrolment"},[a("div",{staticClass:"enrolment-top"},[t.showEnrolment?t._e():a("p",{on:{click:function(e){return t.goToEnroment()}}},[t._v("我要报名")]),t.showEnrolment?a("span",[t._v("报名区域")]):t._e()]),t.showEnrolment?a("div",{staticClass:"enrolment-area"},[a("div",{staticClass:"tag"},[a("p",{staticStyle:{"font-size":"16px","font-weight":"700",color:"red"}},[t._v("请选择您所在的组别")])]),a("div",{staticStyle:{padding:"10px 30px","margin-bottom":"10px"}},[a("type-select",{attrs:{gradeList:t.activityObject.periodList},on:{gradeObject:t.PeriodgradeObject}})],1),a("div",{staticClass:"tag"},[a("p",{staticStyle:{"font-size":"16px","font-weight":"700",color:"red"}},[t._v("请选择您所要参加活动项目")])]),a("div",{staticClass:"list-item",staticStyle:{"margin-bottom":"0"}},[a("div",{staticClass:"list-item-title"},[a("p",[t._v("活动项目：")])]),a("div",{staticClass:"list-item-content"})]),t._l(t.activityObject.category,(function(e,i){return a("div",{key:i},[a("div",{staticClass:"list-project"},[a("div",{staticClass:"list-project-title"},[a("p",[t._v(t._s(e.title))])]),t.activityProjectList.length>0?a("div",{staticClass:"lable"},[a("div",{staticClass:"lable-aside"},t._l(e.child,(function(e,i){return a("div",{key:i,staticClass:"lable-self",class:{"type-active":e.periodList.indexOf(t.PeriodGradeObjectid)>-1,"not-click":-1==e.periodList.indexOf(t.PeriodGradeObjectid)},on:{click:function(a){return t.otherObjectOne(e.id,i)}}},[t._v(t._s(e.name||e.title))])})),0)]):t._e()])])}))],2):t._e()])],1)],1),a("el-tab-pane",{attrs:{label:"通知公告",name:"second"}},[a("el-card",{staticClass:"my-card",staticStyle:{"padding-bottom":"30px"}},[a("div",{staticClass:"title"},[a("p",[t._v("消息公告")])]),a("el-divider"),a("el-row",[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"","header-cell-style":{background:"#EEEEEE",color:"#323232"},"tooltip-effect":"dark"},on:{"selection-change":t.tableSelectionChange}},[a("el-table-column",{attrs:{label:"序号",type:"index",width:"100"}}),a("el-table-column",{attrs:{prop:"title",label:"公告通知名称","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.formatDateChar(1e3*e.row.created_at)))]}}])}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return t.goToLook(e.row.id)}}},[t._v("查看")])]}}])})],1)],1),a("el-row",{staticClass:"page-div"},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[20,30,40,50,100],"page-size":t.perPage,layout:"total, sizes, prev, pager, next, jumper",total:t.totalCount},on:{"size-change":t.pageSizeChange,"current-change":t.pageCurrentChange}})],1)],1)],1),a("el-tab-pane",{attrs:{label:"优秀作品",name:"third"}},[a("el-card",{staticClass:"my-card",staticStyle:{"padding-bottom":"30px"}},[a("el-row",[a("el-col",[a("type-select",{attrs:{gradeList:t.gradeListTwo,activityTypleList:t.activityTypleList,activityProjectList:t.activityProjectList},on:{gradeObject:t.gradeObject,activityTypleObject:t.activityTypleObject,activityProjectObject:t.activityProjectObject}})],1)],1),a("div",{staticClass:"workTotle"},[t._v("作品数量:"+t._s(t.workTotle)+"个")]),a("el-row",[a("el-col",[0==t.activityList.length?a("div",{staticClass:"emptyWork"},[a("img",{attrs:{src:i("a9eb")}}),a("p",[t._v("无相关作品")])]):t._e(),a("card-list",{attrs:{cardList:t.activityList,isExcellent:!0},on:{onlike:t.onlike,toNext:t.gotoGoodWorkDetail}})],1)],1)],1)],1)],1)],1)])])},n=[],r=i("46b4"),s=i.n(r),o=i("f753"),c=i.n(o),l=i("408b"),u=i("2847"),d=i("5c0a"),p=i("c995"),h=i("0210"),m=i("5bbc"),f=i.n(m);function v(t,e,i,a,n,r,s){try{var o=t[r](s),c=o.value}catch(l){return void i(l)}o.done?e(c):Promise.resolve(c).then(a,n)}function g(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var r=t.apply(e,i);function s(t){v(r,a,n,s,o,"next",t)}function o(t){v(r,a,n,s,o,"throw",t)}s(void 0)}))}}var y={components:{FilePreview:u["a"],TypeSelect:d["a"],CardList:p["a"]},data:function(){return{activeName:"first",bannerUrl:"",gradeList:[],tableData:[],multipleSelection:[],perPage:20,currentPage:1,totalCount:0,activityTypleList:[],activityProjectList:[],activityNameIndex:0,activityTypleSelectID:"",activityProjectSelectID:"",gradeListTwo:[{name:"全部",id:0}],activityObject:{},ClassList:[{name:"幼教组",id:1},{name:"小学组",id:2},{name:"初中组",id:4},{name:"高中组",id:8},{name:"特教组",id:16},{name:"中职组",id:32},{name:"高教组",id:64}],targetObj:{1:"老师",2:"学生",4:"家长"},targetList:[{name:"老师",id:1},{name:"学生",id:2},{name:"家长",id:4}],activityList:[],gradeObjectid:"",PeriodGradeObjectid:"",id:this.$route.query.id,apiKey:Object(h["getCookie"])("x-api-key"),process:1,workTotle:"",showEnrolment:!1}},created:function(){var t={"per-page":this.perPage,"filter[activity_id]":this.$route.query.id};t.page=this.currentPage,this.getActivityNoticeList(t),this.goodWorkList(),this.getActivityList()},mounted:function(){this.getActivityInfo(),void 0!=this.$route.query.activeName&&(this.activeName=this.$route.query.activeName)},watch:{getNowRole:function(t,e){var i=this;console.log("登录newval===",t,"登录oldval===",e),this.showEnrolment=!0,setTimeout((function(){var t=i.$refs["enrolment"];document.documentElement.scrollTop=t.scrollHeight}),3e3)}},computed:{getNowRole:function(){return this.$store.state.account.nowRole}},methods:{handleClick:function(t){this.activeName=t.name,this.$router.push({query:f()(this.$route.query,{activeName:t.name})})},getActivityList:function(){var t=g(s.a.mark((function t(){var e,i,a=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this,i={},i.url=l["a"].activity,i.expand="category,categoryDetail",i.id=e.id,t.next=7,this.axiosGet(i).then((function(t){if(t.categoryDetail.length>0){for(var e in t.categoryDetail){var i={};for(var n in i.id=t.categoryDetail[e].id,i.name=t.categoryDetail[e].title,i.activityProjectList=[],t.categoryDetail[e].child){var r={};r.id=t.categoryDetail[e].child[n].id,r.name=t.categoryDetail[e].child[n].title,i.activityProjectList.push(r)}a.activityTypleList.push(i)}for(var s in a.activityTypleList)void 0!=a.activityTypleList[s].activityProjectList&&a.activityTypleList[s].activityProjectList.length>0&&(a.activityProjectList=a.activityProjectList.concat(a.activityTypleList[s].activityProjectList))}}));case 7:e.activityTypleList.unshift({id:0,name:"全部"}),e.activityProjectList.unshift({id:0,name:"全部"});case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),goodWorkList:function(){var t=g(s.a.mark((function t(){var e,i;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this,i={},i.url=l["a"].enroll,i.activity_id=this.id,i.position=4,""!=e.gradeObjectid&&0!=e.gradeObjectid&&(i.period=e.gradeObjectid),""!=e.activityTypleSelectID&&0!=e.activityTypleSelectID&&(i.category_id=e.activityTypleSelectID),""!=e.activityProjectSelectID&&0!=e.activityProjectSelectID&&(i.item_id=e.activityProjectSelectID),i.expand="info,works,school,professional,award",t.next=11,this.axiosGet(i).then((function(t){console.log("优秀作品res===",t,"res.items==",t.items.length),t.items.length>0?(e.workTotle=t.items.length,e.activityList=t.items.map((function(t){var e=[],i=[],a=[];return t.info.author.length>0&&(e=t.info.author.map((function(t){return t.name}))),void 0!=t.info.mentor&&t.info.mentor.length>0&&(i=t.info.mentor.map((function(t){return t.name}))),t.award.length>0&&(a=t.award.map((function(t){return t.title}))),{id:t.works.id,activity_id:t.id,name:t.works.title,cover:t.works.cover,view_counts:t.view_counts,like_counts:t.like_counts,author:e.join("、"),mentor:i.join("、"),award:a.join("、"),school:t.school.title}})),console.log("优秀作品===",e.activityList)):(e.workTotle=0,e.activityList=[])})).catch((function(t){return t}));case 11:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getActivityInfo:function(){var t=g(s.a.mark((function t(){var e,i=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={},e.url=l["a"].activityDetail,e.id=this.$route.query.id,e.expand="detail,region,node,attachment,banner,category,categoryDetail,process",t.next=6,this.axiosGet(e).then((function(t){void 0!=t.banner[0]&&(i.bannerUrl=t.banner[0].url),i.activityObject=t,i.activityObject.periodList=[];var e=[1,2,4,8,16,32,64],a=i.getSubSet(t.period,e);for(var n in console.log("getSubSet===",i.getSubSet(t.period,e)),a)for(var r in i.ClassList)a[n]==i.ClassList[r].id&&(i.activityObject.periodList.push(i.ClassList[r]),i.gradeListTwo.push(i.ClassList[r]));for(var s in i.PeriodGradeObjectid=i.activityObject.periodList[0].id,i.activityObject.category)for(var o in i.activityObject.category[s].child)i.activityObject.category[s].child[o].periodList=i.getSubSet(i.activityObject.category[s].child[o].period,e);i.activityObject.target=i.getSubSet(i.activityObject.target,[1,2]);var c=Date.parse(new Date);1e3*t.node[0].stime<=c&&(i.process=1),1e3*t.node[1].stime<=c&&(i.process=2),1e3*t.node[2].stime<=c&&(i.process=3),1e3*t.node[3].stime<=c&&(i.process=4)})).catch((function(t){return t}));case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),gradeObject:function(t){var e=this;e.gradeObjectid=0==t?"":t,e.goodWorkList()},PeriodgradeObject:function(t){var e=this;e.PeriodGradeObjectid=t},activityTypleObject:function(t){if(0!=t){for(var e in this.activityTypleList)t==this.activityTypleList[e].id&&(this.activityProjectList=this.activityTypleList[e].activityProjectList);this.activityProjectSelectID=this.activityProjectList[0].id}else if(0==t){for(var i in this.activityProjectList=[{id:0,name:"全部"}],this.activityTypleList)void 0!=this.activityTypleList[i].activityProjectList&&this.activityTypleList[i].activityProjectList.length>0&&(this.activityProjectList=this.activityProjectList.concat(this.activityTypleList[i].activityProjectList));this.activityProjectSelectID=0}var a=this;a.activityTypleSelectID=t,a.goodWorkList()},activityProjectObject:function(t){var e=this;e.activityProjectSelectID=t,e.goodWorkList()},otherObjectOne:function(t,e){this.activityNameIndex=e,this.$router.push({path:"/home/choiceActivity",query:{period:this.PeriodGradeObjectid,id:t,activityName:this.activityObject.title,activeName:this.activeName}})},tableSelectionChange:function(){},onlike:function(){var t=g(s.a.mark((function t(e){var i,a;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:i=this,a={},a.id=e,c.a.get(l["a"].like,{params:a,headers:{"x-api-key":i.apiKey}}).then((function(t){if(0==t.data.code)for(var a=0;a<i.activityList.length;a++)i.activityList[a].id==e&&i.activityList[a].like_counts++;else i.$message.error("点赞失败")}));case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),gotoGoodWorkDetail:function(t,e){var i=this;i.$router.push({path:"/goodWorks",query:{id:t,activity_id:e,activeName:this.activeName}})},goToLook:function(t){this.$router.push({path:"/home/seeInformation",query:{id:t,activityName:this.activeName}})},getActivityNoticeList:function(){var t=g(s.a.mark((function t(e){var i=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.url=l["a"].activityNotice,e.expand="content,bcheck",t.next=4,this.axiosGet(e).then((function(t){i.tableData=t.items,i.totalCount=t._meta.totalCount})).catch((function(t){return t}));case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),pageSizeChange:function(t){this.perPage=t;var e={"per-page":this.perPage,"filter[activity_id]":this.$route.query.id};e.page=this.currentPage,this.getActivityNoticeList(e)},pageCurrentChange:function(t){this.perPage=t;var e={"per-page":this.perPage,"filter[activity_id]":this.$route.query.id};e.page=this.currentPage,this.getActivityNoticeList(e)},open:function(t,e){var i=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.splice(t,1),i.$message({type:"success",message:"删除成功!"})})).catch((function(){i.$message({type:"info",message:"已取消删除"})}))},goToEnroment:function(){var t=this;void 0!=JSON.parse(localStorage.getItem("user"))&&null!=JSON.parse(localStorage.getItem("user"))?this.process>1?this.$message({type:"warning",message:"该活动的报名时间已经结束"}):(this.showEnrolment=!0,this.$nextTick((function(){var e=t.$refs["enrolment"];document.documentElement.scrollTop=e.scrollHeight}))):(this.$store.dispatch("INIT_SHOW",!0),this.$message({type:"warning",message:"请登录后再进行操作"}))}}},b=y,w=(i("2e27"),i("f689"),i("623f")),x=Object(w["a"])(b,a,n,!1,null,"416c1ec8",null);e["default"]=x.exports},df18:function(t,e,i){"use strict";var a=i("e5aa"),n=i.n(a);n.a},e042:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container"},[i("div",{staticClass:"operate-button"},[i("div",{staticClass:"picture-list"},t._l(t.pictureList,(function(e,a){return i("div",{key:a,staticClass:"picture-list-items"},[i("el-image",{attrs:{src:e.url,fit:"contain"}}),i("div",{staticClass:"operate"},[i("p",{staticClass:"el-icon-zoom-in",on:{click:function(i){return t.goToPreview(e.url)}}}),i("p",{staticClass:"el-icon-delete",on:{click:function(e){return t.goToDelete(a)}}})])],1)})),0),t.pictureList.length<t.max?i("div",{staticClass:"my-button",on:{click:t.uploadFile}},[i("p",{staticClass:"el-icon-upload"}),i("span",{staticStyle:{"font-size":"14px"}},[t._v(t._s(t.name))])]):t._e(),i("cos",{ref:"cos",attrs:{"valid-list":t.validList,limit:t.fileLimit},on:{success:t.uploadSuccess,start:t.uploadStart}})],1)])},n=[],r=i("af32"),s={components:{Cos:r["a"]},props:{myPictureList:{type:Array,default:function(){return[]}},uploadType:{type:String,default:function(){return"picture"}},fileLimit:{type:Number,default:function(){return 20}},max:{type:Number,default:function(){return 100}},name:{type:String,default:function(){return"上传图片"}}},data:function(){return{validList:["png","jpg","jpeg"],pictureList:[]}},mounted:function(){var t=this;setTimeout((function(){t.myPictureList.length>0&&(t.pictureList=t.myPictureList)}),3e3),"picture"==this.uploadType?this.validList=["png","jpg","jpeg"]:"video"==this.uploadType?this.validList=["mp3"]:"audio"==this.uploadType?this.validList=["mp3"]:"work"==this.uploadType?this.validList=["doc","docx","pdf","xls","xls"]:"zip"==this.uploadType&&(this.validList=["zip"])},methods:{uploadFile:function(){this.$refs.cos.$refs.fileEle.dispatchEvent(new MouseEvent("click"))},uploadStart:function(){this.$emit("uploading",!0)},uploadSuccess:function(t){var e={};e.url="https://"+t.Location,e.name=t.filename,this.pictureList.push(e),this.$emit("uploadSuccess",this.pictureList),console.log(t)},goToPreview:function(t){window.open(t)},goToDelete:function(t){this.pictureList.splice(t,1),this.$emit("uploadSuccess",this.pictureList)}}},o=s,c=(i("7a4d"),i("623f")),l=Object(c["a"])(o,a,n,!1,null,null,null);e["a"]=l.exports},e05b:function(t,e,i){},e199:function(t,e,i){"use strict";var a=i("4de6"),n=i.n(a);n.a},e205:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:[t.dataObj.isEdit?"active":"multi-text-box-container",t.showOperation?"":"no-show"]},[t.canWrite?t._e():i("div",{staticClass:"mark"}),i("el-row",[i("el-col",{staticClass:"title",attrs:{span:3}},[t.dataObj.required?i("i",[t._v("*")]):t._e(),t._v(t._s(t.dataObj.title)+"： \n    ")]),i("el-col",{attrs:{span:12}},[i("el-input",{staticStyle:{width:"600px"},attrs:{type:"textarea",rows:4,placeholder:"请输入内容"},on:{input:t.myValChange},model:{value:t.val,callback:function(e){t.val=e},expression:"val"}})],1),t.showOperation?i("el-col",{staticClass:"operate-item",attrs:{span:4,offset:5}},[i("i",{staticClass:"el-icon-top",on:{click:t.toUp}}),i("i",{staticClass:"el-icon-bottom",on:{click:t.toDown}}),i("i",{staticClass:"el-icon-edit",on:{click:t.toEdit}}),i("i",{staticClass:"el-icon-delete",on:{click:t.delectItem}})]):t._e(),""!=t.dataObj.description?i("el-col",{staticStyle:{color:"#7F7F7F","line-height":"25px"},attrs:{span:21,offset:3}},[t._v("备注："+t._s(t.dataObj.description))]):t._e()],1)],1)},n=[],r={props:{showOperation:{type:Boolean,default:function(){return!1}},dataObj:{type:Object,default:function(){return{}}},canWrite:{type:Boolean,default:function(){return!0}},myVal:{}},data:function(){return{val:""}},mounted:function(){this.val=this.myVal},methods:{toUp:function(){this.$emit("toUp")},toDown:function(){this.$emit("toDown")},toEdit:function(){this.$emit("toEdit")},delectItem:function(){this.$emit("delectItem")},myValChange:function(){console.log(),this.$emit("myValChange",this.val)}}},s=r,o=(i("9e9b"),i("623f")),c=Object(o["a"])(s,a,n,!1,null,"02c3a5d0",null);e["a"]=c.exports},e363:function(t,e,i){},e3ba:function(t,e,i){t.exports=i.p+"img/up.39ce47f5.svg"},e4ea:function(t,e,i){},e59f:function(t,e,i){"use strict";var a=i("cf3c"),n=i.n(a);n.a},e5aa:function(t,e,i){},e5b6:function(t,e,i){},e68a:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"import-work-container"},[i("el-card",{staticStyle:{"min-height":"600px"}},[i("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:"导入评分",name:"importWork"}},[i("el-row",[i("el-col",{attrs:{span:3}},[i("el-button",{attrs:{type:"primary",size:"small"}},[t._v("导入评分表")])],1)],1),i("el-row",[i("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"","header-cell-style":{background:"#EEEEEE",color:"#323232"},"tooltip-effect":"dark"}},[i("el-table-column",{attrs:{prop:"fileName",label:"文件名"}}),i("el-table-column",{attrs:{prop:"status",label:"上传状态"}}),i("el-table-column",{attrs:{prop:"finishStatus",label:"完成状态"}}),i("el-table-column",{attrs:{prop:"operPeple",label:"操作人"}}),i("el-table-column",{attrs:{label:"导入时间",prop:"importTime"}}),i("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return t.goToExport(e.row)}}},[t._v("导出")]),i("el-button",{staticStyle:{color:"red"},attrs:{type:"text",size:"small"},on:{click:function(i){return t.goToDelete(e.$index,t.tableData)}}},[t._v("删除")])]}}])})],1)],1),i("el-row",{staticClass:"page-div"},[i("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,20,30,40],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:40},on:{"size-change":t.pageSizeChange,"current-change":t.pageCurrentChange}})],1)],1)],1)],1)],1)},n=[],r={data:function(){return{activeName:"importWork",tableData:[{fileName:"龙华区专家组",status:"上传完成",finishStatus:"完成",operPeple:"陆同学",importTime:"2019-11-18 16:26:35"},{fileName:"龙华区专家组",status:"上传完成",finishStatus:"完成",operPeple:"陆同学",importTime:"2019-11-18 16:26:35"},{fileName:"龙华区专家组",status:"上传完成",finishStatus:"完成",operPeple:"陆同学",importTime:"2019-11-18 16:26:35"},{fileName:"龙华区专家组",status:"上传完成",finishStatus:"完成",operPeple:"陆同学",importTime:"2019-11-18 16:26:35"},{fileName:"龙华区专家组",status:"上传完成",finishStatus:"完成",operPeple:"陆同学",importTime:"2019-11-18 16:26:35"},{fileName:"龙华区专家组",status:"上传完成",finishStatus:"完成",operPeple:"陆同学",importTime:"2019-11-18 16:26:35"},{fileName:"龙华区专家组",status:"上传完成",finishStatus:"完成",operPeple:"陆同学",importTime:"2019-11-18 16:26:35"}],multipleSelection:[],currentPage:1}},mounted:function(){},methods:{pageSizeChange:function(t){},pageCurrentChange:function(t){},goToDelete:function(t,e){this.open(t,e)},open:function(t,e){var i=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.splice(t,1),i.$message({type:"success",message:"删除成功!"})})).catch((function(){i.$message({type:"info",message:"已取消删除"})}))}}},s=r,o=(i("5cb3"),i("623f")),c=Object(o["a"])(s,a,n,!1,null,"6be90b50",null);e["default"]=c.exports},e72b:function(t,e,i){"use strict";var a=i("bdce"),n=i.n(a);n.a},e91d:function(t,e,i){},e95a:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"home-center"},[i("el-card",{staticStyle:{"min-height":"600px"}},[i("div",{staticClass:"home-wrap"},[t.activityList?i("div",{staticClass:"home-activity-list"},[i("card-list",{attrs:{cardList:t.activityList}})],1):t._e(),i("div",{staticClass:"add-activety-setting"},[i("p",{staticStyle:{"font-size":"16px",color:"rgba(51,51,51,1)","line-height":"48px"}},[t._v("活动类别")]),i("add-card-list",{attrs:{cardList:t.addactivityList}})],1)])])],1)},n=[],r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"card-list"},t._l(t.cardList,(function(e,a){return i("div",{key:a,staticClass:"card-item"},[i("img",{attrs:{src:e.imgUrl}}),i("p",[t._v(t._s(e.name))])])})),0)},s=[],o={props:{cardList:{type:Array,default:function(){}}},data:function(){return{}},methods:{toNext:function(t){this.$emit("toNext",t)}}},c=o,l=(i("1e9d"),i("623f")),u=Object(l["a"])(c,r,s,!1,null,"2c960562",null),d=u.exports,p=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"card-list"},[i("div",{staticClass:"addcard",on:{click:function(e){return t.addclick()}}},[i("div",{staticClass:"addclass"},[i("img",{attrs:{src:t.Addurl}}),i("p",{staticStyle:{"font-size":"14px"}},[t._v("创建活动")])])]),t._l(t.cardList,(function(e,a){return i("div",{key:a,staticClass:"card-item"},[i("img",{attrs:{src:e.imgUrl}}),i("p",[t._v(t._s(e.name))])])}))],2)},h=[],m={props:{cardList:{type:Array,default:function(){}}},data:function(){return{Addurl:i("f5ba")}},methods:{toNext:function(t){this.$emit("toNext",t)},addclick:function(){this.$router.push({path:"/activeManager/createActivity"})}}},f=m,v=(i("6df1"),Object(l["a"])(f,p,h,!1,null,"3496b83f",null)),g=v.exports,y={name:"home-center",components:{CardList:d,AddCardList:g},data:function(){return{activityList:[{id:1,name:"深圳市中小学电脑制作大赛",imgUrl:i("1617")},{id:2,name:"深圳市中小学电脑机器人活动",imgUrl:i("2a8e")},{id:3,name:"深圳市中小学网络夏令营",imgUrl:i("74e7")},{id:4,name:"深圳市中小学微课大赛",imgUrl:i("4b1a")},{id:5,name:"深圳市中小学说课大赛",imgUrl:i("2b8b")},{id:6,name:"深圳市AI知识大赛",imgUrl:i("45e8")}],addactivityList:[{id:1,name:"深圳市中小学电脑制作大赛",imgUrl:i("1617")},{id:2,name:"深圳市中小学电脑机器人活动",imgUrl:i("2a8e")},{id:3,name:"深圳市中小学网络夏令营",imgUrl:i("74e7")}]}},methods:{toNext:function(t){console.log("id==",t),this.$router.push({path:"/home/activityProject",query:{id:t}})}}},b=y,w=(i("7790"),Object(l["a"])(b,a,n,!1,null,"d5386d3a",null));e["default"]=w.exports},e970:function(t,e,i){t.exports=i.p+"img/image.52b563a4.svg"},eb6a:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"choice-activity-container"},[i("el-card",{staticStyle:{"min-height":"600px"}},[i("div",{staticClass:"title"},[i("el-button",{staticStyle:{position:"absolute",left:"0"},attrs:{type:"defualt",size:"mini"},on:{click:t.goback}},[t._v("返回")]),i("p",[t._v(t._s(t.objectDetail.title))])],1),i("el-divider"),i("el-row",[i("el-col",{attrs:{span:18,offset:3}},[i("div",{staticClass:"content ql-snow ql-editor",domProps:{innerHTML:t._s(t.objectDetail.content)}}),i("el-row",[i("el-col",{staticStyle:{"margin-top":"20px"},attrs:{span:3,offset:11}},[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.goToActivityEnroll}},[t._v("下一步")])],1)],1)],1)],1)],1)],1)},n=[],r=i("46b4"),s=i.n(r),o=(i("f753"),i("408b"));function c(t,e,i,a,n,r,s){try{var o=t[r](s),c=o.value}catch(l){return void i(l)}o.done?e(c):Promise.resolve(c).then(a,n)}function l(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var r=t.apply(e,i);function s(t){c(r,a,n,s,o,"next",t)}function o(t){c(r,a,n,s,o,"throw",t)}s(void 0)}))}}var u={data:function(){return{id:this.$route.query.id,period:this.$route.query.period,activityName:this.$route.query.activityName,objectDetail:{}}},created:function(){this.getObjectDetail()},mounted:function(){},methods:{goToActivityEnroll:function(){this.$router.push({path:"/home/activityEnroll",query:{id:this.id,activityName:this.activityName,operate:0,period:this.period}})},getObjectDetail:function(){var t=l(s.a.mark((function t(){var e,i=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={},e.url=o["a"].activityCategory,e.id=this.id,e.expand="content,formats",t.next=6,this.axiosGet(e).then((function(t){i.objectDetail=t,console.log(t)})).catch((function(t){return t}));case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),goback:function(){this.$router.go(-1)}}},d=u,p=(i("ee10"),i("623f")),h=Object(p["a"])(d,a,n,!1,null,"570e30f1",null);e["default"]=h.exports},ecb1:function(t,e,i){},ecde:function(t,e,i){"use strict";var a=i("6b6d"),n=i.n(a);n.a},ee10:function(t,e,i){"use strict";var a=i("ecb1"),n=i.n(a);n.a},ee99:function(t,e,i){"use strict";var a=i("2e20"),n=i.n(a);n.a},eea6:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home-center"},[a("el-card",{staticStyle:{"min-height":"650px"}},[a("div",{staticClass:"home-wrap"},[t.list.length>0?a("div",{staticClass:"home-activity-list"},[a("card-list",{attrs:{cardList:t.list},on:{toNext:t.toNext}})],1):a("div",{staticClass:"no-data"},[a("img",{attrs:{src:i("554e"),alt:""}}),a("div",[t._v("没有相关活动")])])])])],1)},n=[],r=i("46b4"),s=i.n(r),o=i("c995"),c=i("2710"),l=i("e042"),u=i("8a99"),d=i("2847"),p=i("5c0a"),h=i("408b");function m(t,e,i,a,n,r,s){try{var o=t[r](s),c=o.value}catch(l){return void i(l)}o.done?e(c):Promise.resolve(c).then(a,n)}function f(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var r=t.apply(e,i);function s(t){m(r,a,n,s,o,"next",t)}function o(t){m(r,a,n,s,o,"throw",t)}s(void 0)}))}}var v={name:"home-center",components:{CardList:o["a"],MyVideoPlayer:c["a"],FilePreview:d["a"],UploadFile:u["a"],TypeSelect:p["a"],UploadPicture:l["a"]},data:function(){return{activityObjectList:[{id:0,name:"全部"},{id:1,name:"老师"},{id:2,name:"学生"},{id:4,name:"家长"}],regionList:[{id:"77",pid:"6",type:"2",name:"深圳"},{id:"726",pid:"77",type:"3",name:"福田区"},{id:"727",pid:"77",type:"3",name:"罗湖区"},{id:"728",pid:"77",type:"3",name:"南山区"},{id:"729",pid:"77",type:"3",name:"宝安区"},{id:"730",pid:"77",type:"3",name:"龙岗区"},{id:"731",pid:"77",type:"3",name:"盐田区"},{id:"732",pid:"77",type:"3",name:"市辖区"},{id:"733",pid:"77",type:"3",name:"龙华区"},{id:"734",pid:"77",type:"3",name:"坪山区"},{id:"735",pid:"77",type:"3",name:"光明区"},{id:"736",pid:"77",type:"3",name:"大鹏区"}],activityList:[],list:[],gradeList:[{id:0,name:"全部"},{name:"幼教组",id:1},{name:"小学组",id:2},{name:"初中组",id:4},{name:"高中组",id:8},{name:"特教组",id:16},{name:"中职组",id:32},{name:"高教组",id:64}],activityObjectid:0,gradeObjectid:0,regionObjectid:"77"}},created:function(){this.selectActive()},methods:{selectActive:function(){var t=f(s.a.mark((function t(){var e,i;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={},e.url=h["a"].activityDetail,e.process=1,0!=this.activityObjectid&&(e.target=this.activityObjectid),0!=this.gradeObjectid&&(e.period=this.gradeObjectid),"77"!=this.regionObjectid&&(e.region=this.regionObjectid),t.next=8,this.axiosGet(e).catch((function(t){return t}));case 8:i=t.sent,this.list=i.items;case 10:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),toNext:function(t){this.$router.push({path:"/home/activityIntroduction",query:{id:t,activeName:"first"}})},activityObject:function(){var t=f(s.a.mark((function t(e){return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.activityObjectid=e,this.selectActive();case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),gradeObject:function(){var t=f(s.a.mark((function t(e){return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.gradeObjectid=e,this.selectActive();case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),regionObject:function(){var t=f(s.a.mark((function t(e){return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.regionObjectid=e,this.selectActive();case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}},g=v,y=(i("41aa"),i("623f")),b=Object(y["a"])(g,a,n,!1,null,"4531d0f2",null);e["default"]=b.exports},ef66:function(t,e,i){"use strict";var a=i("af39"),n=i.n(a);n.a},f0f7:function(t,e,i){},f116:function(t,e,i){"use strict";var a=i("9bd8"),n=i.n(a);n.a},f1b7:function(t,e,i){"use strict";var a=i("43a9"),n=i.n(a);n.a},f213:function(t,e,i){"use strict";var a=i("5d1c"),n=i.n(a);n.a},f261:function(t,e,i){t.exports=i.p+"img/6.7bd4a5dc.png"},f2d8:function(t,e,i){},f2dd:function(t,e,i){},f34b:function(t,e,i){"use strict";var a=i("7f67"),n=i.n(a);n.a},f45e:function(t,e,i){"use strict";var a=i("9322"),n=i.n(a);n.a},f5ba:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAqCAYAAADBNhlmAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAa8SURBVFhH7ZjbUxRHGMX3f0jyoHlQ4wVBJahVSaXKyh/hkxpNJSpa5iFJFV4jsjsLikneUpWLUTERguYlqFQE9SEVH4xRicAuAsttd7kIKN4VAXdPzunZ0QFmSaGkQlX81t9Md0/3N6e7p79u9GGylhSJZ6hAZU94E0pPof2jQKPHTqZMokZYlsAQr8PMPSC3WHyPPBnf4IVsciNoXpzgbwSPmLnB3KHfGpBXWotPS6+h7EIXy6fWJjnFUpjgbI7gLlMd5ONjf2F54DJyCuqRXxE15VNpkxBoi9PHpp+EtJJN5SEsCoaRaUWw42QXbrNsKu05BI6YSb7HVDvZcLQemYF6ZAUbsfNUfHoI1P0+r5piI9CiwMJrFBh9KTCtJfnT1GoFvxToshcXWFpHgbUU2PA/FahP/6kp44UxW2JSmy7R9hYlG7mLZFpXKTBkBN6xq3rjSqayHgWjzSWQKfchYCzmuWorPYSHvMbJxtIaCrxCgfXYdaqDAifwY2YgaeZA3TSiVKxMws5oADQQjvnsZKpmkk09SR1TVM2IfGz2YiOw7BIWBi8hs6geOysdgV4+CF8uicOso5zxJ3Hmkd6vJzqCGPnGUiOoqypIiBd6xjrqjenpsBnBGNlQdgUZwRpkFIWxo1JTzOeePogZHe3kvJpX8jIi9Mhu54ygHsvsRfJ06tKhxq4sLxKob/DDsjrMLyRFjdhW6Wx17rZjSfky/pjXyEm765GrpgS6i0Qa0yN7EEzaEbi+rAHzgg0U2EyBnbjFsglNr3O/0uXT4DwXNF+Sw5zgFDqfpr6SsehnplnToBMqecxbN9lc1owMqwkZe1uw83SPEeh+h0Na00s1xWPFpfDd4OU66WVe9Hig8n4yQG6z7h06U1mIrCuLYm6wA7OCbdjC45ZOOKo7Fh1uxU0iP7orr3QvO6wT+SDTQ/Q/zLS96JPwvX+wCWuPxLDuRxH1ZC1572gca0o7sY733JJ2rC+JYeWRXuR82YuZRf2Yuf8Gln11HStLolh9qNWTNYdbsPpwBKtLIlh1uA2rDnVizcFOfPB9O3K/C+GTAxdwOtRtvuNhCpVI3+KCRsaxKBYVxYju48ncG8P84i7M2d/Nexw5ha3I4YjNLohhZvAmXt13F68U38GMoj7Moa8F/lZP5vtbMM9qJk2Ya7Vgrj+OBfSxOL8RS3f9iXfzz+HAxaiZtceOwLf9l7GUB86lVgNyrEZPsoNNyOIiWLCvmWIbsDzIY75VhwV8yay9fZjx+X28VnyXYnuQEYhgSUGYNNj4G5BN3hSBMLLZbknwKqlFdiCEnEAtlhVcxPLPzmFFwSl8fbENnRQ46Agsro6gsKqNRGFVxT0JVMex50wcu8/GeO9AUXULrOp2bDvXixXf9GDWF7fwevEAVnzbg61VPcg/HUNBlY2f7YV8WNUxWGwfONNuCBpaUVjdBOvXehRVXcXZWD/63AJ7mOgizgLRyvRCvVJg1u5xnSjE1JO1xzvxBj+P2cEYNp3sQ5hlOkSorlNfqH1X6u6gvHC/R4tHBxFFCcVx30MGynsMH4+YEQ89eEDuE/0dIpSXoxay6Ri/rfwQ5uWHsfVkp+mknjs4PuRbq1R/liqGujGrl0jUI24ag0SbnkKfb3hokDsMtxbGorQwkCbICIdcgV9pCY7Q4fofwsjYXYdFgUbsruzCAMsTXIIJtntCVFdoujQiCqVuWMWEQBmzGGYj4Wx6DNR2Y9Pa8TYBydSerOOWBOaWtzIKcHX6uZNUxFJ/F+tVDsZ5WswmMIH5zHtZJ0mV9sAyavJUMRpu73pOceq1OqSpbiYby9u5k7QxZESw9UTMPiyw78/QGDnQl5lMobRTnt58I/SnKvaQjt/mhE4fzjciFEQVTCUwt7yNfxcrxjUjjyOob1NdHY9+8jZMhlIonUag+kl8Th+E+uSFxOlDdpBAnZxtgS3ICjBGMuDnVUTN9uX4c4+jjSS6Reo/AfTEwxyBbgdusW7cYpXXV6NQoFW8uTyCxdY1LGQg3lbRYUbQaWd/ZWOxR/PZ2EpJejMnage32LHouZzJqVIKDzoYbClvwhLuQpn+MLaf6DCnGad+OiaWNNpGCZwIu6dKcWy4ShTPFJA/Osat0Aojyx/CjhPtRuDYtm4mI072HAI5PmkEbqdAHZ/ccW68n8nZcwgk014g/01DgTJdmeNtmgqUMceMVvG0FqiAreNR3k81eMd/Hm/t+R3+X8Jmh/lPBArbuX1V0NZucr61Hz/XdON4TRf+iA6Yqfdq6/CvChTOC3R3tkBNt043Sk9lkAaAvwFgvKmp7IljTAAAAABJRU5ErkJggg=="},f689:function(t,e,i){"use strict";var a=i("872b"),n=i.n(a);n.a},f7a1:function(t,e,i){},f831:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"outter"},[i("el-card",{staticStyle:{"min-height":"650px"}},[i("div",{staticStyle:{position:"relative"}},[i("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:"活动中心",name:"first"}}),i("el-tab-pane",{attrs:{label:"历史记录",name:"second"}}),i("el-row",[i("el-form",{ref:"form",staticClass:"demo-form-inline",attrs:{inline:!0,model:t.form}},[i("el-form-item",{attrs:{label:"报名时间："}},[i("el-date-picker",{attrs:{format:"yyyy-MM-dd",size:"small",type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"timestamp",clearable:""},on:{clear:t.clearTime},model:{value:t.form.time,callback:function(e){t.$set(t.form,"time",e)},expression:"form.time"}})],1),i("el-form-item",{attrs:{label:"活动名称："}},[i("el-input",{attrs:{placeholder:"请输入活动名称",size:"small"},model:{value:t.form.acitvename,callback:function(e){t.$set(t.form,"acitvename",e)},expression:"form.acitvename"}})],1),i("el-form-item",[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.goToSearch()}}},[t._v("查询")])],1)],1),t._l(t.activityList,(function(e,a){return i("div",{key:a},[i("div",{staticClass:"count"},[i("div",{staticClass:"sc"},[i("div",{staticClass:"imglogo"},[i("img",{staticStyle:{width:"173px",height:"127px","border-radius":"8px"},attrs:{src:e.cover}})]),i("div",{staticClass:"activeclass"},[i("div",{staticClass:"active-title"},[e.title.length<=20?i("p",{staticClass:"font1"},[t._v(t._s(e.title))]):i("el-tooltip",{attrs:{content:e.title,placement:"top",effect:"dark"}},[i("p",{staticClass:"font1"},[t._v(t._s(e.title))])])],1),i("p",[t._v("\n                    活动对象：\n                    "),t._l(e.target,(function(e){return[t._v("\n                      【"+t._s(t.targetObj[e])+"】\n                    ")]}))],2),i("p",[t._v("活动范围：\n                    "),t._l(e.region,(function(a,n){return e.region.length<12?[i("span",[t._v("【"+t._s(a.area_name)+"】")])]:t._e()})),[e.region.length>=12?i("span",[t._v("【深圳市】")]):t._e()]],2),i("p",[t._v("发起时间："+t._s(t.formatDateChar(1e3*e.created_at)))])])]),i("div",{staticClass:"shenheclass"},[i("p",[t._v(t._s(e.progress))])]),i("div",{staticClass:"shenheclass2"},[i("el-button",{staticStyle:{display:"block","margin-left":"9px"},attrs:{type:"text"},on:{click:function(i){return t.goToManagerCenter(e.id)}}},[t._v("管理")]),i("el-button",{staticStyle:{display:"block"},attrs:{type:"text"},on:{click:function(i){return t.goToActivityDetail(e.id)}}},[t._v("查看详情>")]),3!=t.$store.state.account.nowRole.type?i("el-button",{staticStyle:{color:"red"},attrs:{type:"text"},on:{click:function(i){return t.deleteOne(e.id)}}},[t._v("删除")]):t._e()],1)])])}))],2)],1),0==t.$store.state.account.nowRole.type||2==t.$store.state.account.nowRole.type?i("el-button",{staticStyle:{position:"absolute",right:"0px",top:"0px"},attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.releaseActivity()}}},[t._v("+发起活动")]):t._e()],1)])],1)},n=[],r=i("46b4"),s=i.n(r),o=(i("f753"),i("408b"));i("0210");function c(t,e,i,a,n,r,s){try{var o=t[r](s),c=o.value}catch(l){return void i(l)}o.done?e(c):Promise.resolve(c).then(a,n)}function l(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var r=t.apply(e,i);function s(t){c(r,a,n,s,o,"next",t)}function o(t){c(r,a,n,s,o,"throw",t)}s(void 0)}))}}var u={data:function(){return{activityList:[],activeName:"first",process:1,form:{object:"",limit:"",time:[],acitvename:""},targetObj:{1:"老师",2:"学生",4:"家长"},time1:"",time2:""}},created:function(){this.getActivityList()},methods:{deleteOne:function(){var t=l(s.a.mark((function t(e){var i;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:i={},i.url=o["a"].activity,i.id=e,this.open(i);case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),open:function(t){var e=this;this.$confirm("此操作将永久删除该活动, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.deleteItem(t)})).catch((function(){e.$message({type:"info",message:"已取消！"})}))},deleteItem:function(){var t=l(s.a.mark((function t(e){var i=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosDelete(e).then((function(t){200==t.status&&i.$message({type:"success ",message:"删除成功"}),204==t.status&&i.$message({type:"success ",message:"无内容"}),i.getActivityList()})).catch((function(t){i.$message({type:"warning ",message:"删除失败，权限不够"})}));case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),handleClick:function(t){1==t.index?this.process=2:0==t.index&&(this.process=1),2==this.form.time.length&&(this.time1=this.form.time[0],this.time2=this.form.time[1]),this.getActivityList()},getActivityList:function(){var t=l(s.a.mark((function t(){var e,i=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={},e.process=this.process,""!=this.time1&&""!=this.time2&&(e.upload_stime=this.time1/1e3,e.upload_etime=this.time2/1e3),""!=this.form.acitvename&&(e.title=this.form.acitvename),e.url=o["a"].activityDetail,e.expand="detail,region,node,attachment,banner,category,categoryDetail,process,progress",3==this.$store.state.account.nowRole.type?e.inregion=1:2==this.$store.state.account.nowRole.type&&(e.created_by=this.$store.state.account.user.id),t.next=9,this.axiosGet(e).then((function(t){var e=[1,2];for(var a in t.items)t.items[a].target=i.getSubSet(t.items[a].target,e);i.activityList=t.items})).catch((function(t){return t}));case 9:t.sent;case 10:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),clearTime:function(){this.form.time=[]},goToSearch:function(){null!=this.form.time?(this.time1=this.form.time[0],this.time2=this.form.time[1]):(this.time1="",this.time2=""),this.getActivityList()},releaseActivity:function(){var t=null;sessionStorage.setItem("addActivityForm",JSON.stringify(t)),this.$router.push({path:"/activeManager/createActivity"})},goToActivityDetail:function(t){this.$router.push({path:"/home/activityIntroduction",query:{id:t}})},goToManagerCenter:function(t){sessionStorage.setItem("addActivityForm",null),this.$router.push({path:"/activeManager/managerCenter",query:{id:t,activeName:"third"}})}}},d=u,p=(i("177c"),i("623f")),h=Object(p["a"])(d,a,n,!1,null,"3f25392b",null);e["default"]=h.exports},f8e5:function(t,e,i){},f90f:function(t,e,i){},f996:function(t,e,i){},fb13:function(t,e,i){"use strict";var a=i("0859"),n=i.n(a);n.a},fb4e:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"excellent-work-detail"},[i("div",{staticClass:"work-title"},[t._v("资源展示 / "+t._s(t.workName))]),i("div",{staticClass:"work-detail-wrap"},[i("work-detail",{staticClass:"work-vido",attrs:{WorkId:t.workId}})],1)])},n=[],r=i("46b4"),s=i.n(r),o=i("0865");function c(t,e,i,a,n,r,s){try{var o=t[r](s),c=o.value}catch(l){return void i(l)}o.done?e(c):Promise.resolve(c).then(a,n)}function l(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var r=t.apply(e,i);function s(t){c(r,a,n,s,o,"next",t)}function o(t){c(r,a,n,s,o,"throw",t)}s(void 0)}))}}var u={components:{WorkDetail:o["a"]},data:function(){return{workId:"",workName:""}},created:function(){var t=l(s.a.mark((function t(){return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.workId=+this.$route.query.WorkId,this.workName=this.$route.query.WorkName;case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},d=u,p=(i("28ce"),i("623f")),h=Object(p["a"])(d,a,n,!1,null,null,null);e["default"]=h.exports},fbd0:function(t,e,i){"use strict";var a=i("f8e5"),n=i.n(a);n.a},fcb3:function(t,e,i){t.exports=i.p+"img/userIcon.410c2a8a.png"},fccf:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"activity-container"},[i("el-card",[i("div",{staticClass:"title"},[t.activityDetail.info.activity.length<=75?i("p",[t._v(t._s(t.activityDetail.info.activity))]):i("el-tooltip",{attrs:{content:t.activityDetail.info.activity,placement:"top",effect:"dark"}},[i("p",[t._v(t._s(t.activityDetail.info.activity))])])],1),i("el-divider"),i("el-steps",{attrs:{active:t.process,"align-center":""}},[i("el-step",{attrs:{title:"作品报名",description:t.formatDateChar(1e3*t.activityDetail.info.nodes[0].stime)+"--"+t.formatDateChar(1e3*t.activityDetail.info.nodes[0].etime)}}),i("el-step",{attrs:{title:"区域推荐",description:t.formatDateChar(1e3*t.activityDetail.info.nodes[1].stime)+"--"+t.formatDateChar(1e3*t.activityDetail.info.nodes[1].etime)}}),i("el-step",{attrs:{title:"市级评审",description:t.formatDateChar(1e3*t.activityDetail.info.nodes[2].stime)+"--"+t.formatDateChar(1e3*t.activityDetail.info.nodes[2].etime)}}),i("el-step",{attrs:{title:"作品展示",description:t.formatDateChar(1e3*t.activityDetail.info.nodes[3].stime)+"--"+t.formatDateChar(1e3*t.activityDetail.info.nodes[2].etime)}})],1)],1),i("el-card",{staticStyle:{"margin-top":"10px"}},[i("div",{staticClass:"act-button"},[0!=t.look&&t.process<=2&&1&!t.position?i("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:t.goToEdit}},[t._v("修改")]):t._e()],1),i("works-preview",{attrs:{id:t.id,rejectReason:0==t.activityDetail.status},on:{goback:t.goback}})],1)],1)},n=[],r=i("46b4"),s=i.n(r),o=i("408b"),c=i("9e1e");function l(t,e,i,a,n,r,s){try{var o=t[r](s),c=o.value}catch(l){return void i(l)}o.done?e(c):Promise.resolve(c).then(a,n)}function u(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var r=t.apply(e,i);function s(t){l(r,a,n,s,o,"next",t)}function o(t){l(r,a,n,s,o,"throw",t)}s(void 0)}))}}var d={components:{WorksPreview:c["a"]},data:function(){return{imgUrl:i("1617"),form:{},id:this.$route.query.id,activityDetail:{},look:this.$route.query.look,process:1,position:0}},created:function(){},mounted:function(){this.getActivityDetail()},methods:{goback:function(){this.$router.push("/userCenter")},getActivityDetail:function(){var t=u(s.a.mark((function t(){var e,i=this;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={},e.url=o["a"].enroll,e.id=this.id,e.expand="info,works,school,professional,award,process",t.next=6,this.axiosGet(e).then((function(t){i.activityDetail=t,i.position=t.position;var e=Date.parse(new Date);1e3*t.info.nodes[0].stime<=e&&(i.process=1),1e3*t.info.nodes[1].stime<=e&&(i.process=2),1e3*t.info.nodes[2].stime<=e&&(i.process=3),1e3*t.info.nodes[3].stime<=e&&(i.process=4)})).catch((function(t){return t}));case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),goToEdit:function(){var t=this;this.$router.push({path:"/home/activityEnroll",query:{id:t.id,activityName:t.activityDetail.info.category}})}}},p=d,h=(i("9451"),i("691f"),i("623f")),m=Object(h["a"])(p,a,n,!1,null,"0ebaf2be",null);e["default"]=m.exports},fda9:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"work-audit-detail"},[i("div",{staticClass:"work-title"},[i("el-button",{staticStyle:{"font-size":"16px"},attrs:{type:"text"},on:{click:t.goBack}},[t._v("返回")])],1),t.workId?i("div",{staticClass:"work-detail-wrap"},[i("work-detail",{staticClass:"work-video",attrs:{WorkId:t.workId}})],1):t._e()])},n=[],r=i("0865"),s={components:{WorkDetail:r["a"]},data:function(){return{activityId:"",workId:"",title:"",curStatus:""}},methods:{goBack:function(){this.$router.push({path:"/myActivity/index?id=".concat(this.activityId,"&title=").concat(this.title,"&curStatus=").concat(this.curStatus,"#third")})}},mounted:function(){this.activityId=this.$route.query.activityId,this.title=this.$route.query.title,this.workId=this.$route.query.workId,this.curStatus=this.$route.query.curStatus}},o=s,c=(i("74e4"),i("623f")),l=Object(c["a"])(o,a,n,!1,null,null,null);e["default"]=l.exports},ff58:function(t,e,i){},ff95:function(t,e,i){},ff99:function(t,e,i){}});
//# sourceMappingURL=app.c3e20a27.js.map