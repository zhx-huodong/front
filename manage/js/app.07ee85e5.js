(function(t){function e(e){for(var a,r,o=e[0],c=e[1],u=e[2],d=0,h=[];d<o.length;d++)r=o[d],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&h.push(n[r][0]),n[r]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);l&&l(e);while(h.length)h.shift()();return s.push.apply(s,u||[]),i()}function i(){for(var t,e=0;e<s.length;e++){for(var i=s[e],a=!0,o=1;o<i.length;o++){var c=i[o];0!==n[c]&&(a=!1)}a&&(s.splice(e--,1),t=r(r.s=i[0]))}return t}var a={},n={app:0},s=[];function r(e){if(a[e])return a[e].exports;var i=a[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=a,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(i,a,function(e){return t[e]}.bind(null,a));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/static/manage/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var l=c;s.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"011e":function(t,e,i){},"0210":function(t,e,i){"use strict";i.r(e),i.d(e,"getCookie",(function(){return r})),i.d(e,"setCookie",(function(){return o})),i.d(e,"copyText",(function(){return c})),i.d(e,"timeFormat",(function(){return u})),i.d(e,"formatDate",(function(){return l})),i.d(e,"getQuery",(function(){return d})),i.d(e,"addClass",(function(){return h})),i.d(e,"removeClass",(function(){return p})),i.d(e,"axiosGet",(function(){return v})),i.d(e,"axiosPost",(function(){return g})),i.d(e,"downloadFromUrl",(function(){return w})),i.d(e,"dateFormate",(function(){return b})),i.d(e,"swapItems",(function(){return x})),i.d(e,"timestampToTime",(function(){return k})),i.d(e,"setAxiosConf",(function(){return C})),i.d(e,"getCosKey",(function(){return _})),i.d(e,"formatTime",(function(){return S}));var a=i("f753"),n=i.n(a),s=i("4360");function r(t){var e=document.cookie.match(new RegExp("(^| )"+t+"=([^;]*)(;|$)"));return null!=e?unescape(e[2]):null}function o(t,e,i,a,n){i||(i=86400);var s=new Date;s.setTime(s.getTime()+1e3*i);var r=t+"="+escape(e)+";expires="+s.toGMTString()+";path=/";n&&(r+=";domain="+n),document.cookie=r}function c(t){var e=document.createElement("textarea");e.textContent=t,document.body.appendChild(e),e.select(),document.execCommand("Copy"),e.style.display="none"}function u(t,e){t instanceof Date||(t=new Date(t));var i={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(var a in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),i)new RegExp("("+a+")").test(e)&&(e=e.replace(RegExp.$1,1===RegExp.$1.length?i[a]:("00"+i[a]).substr((""+i[a]).length)));return e}function l(t){var e=new Date(t),i=""+(e.getMonth()+1),a=""+e.getDate(),n=e.getFullYear();return i.length<2&&(i="0"+i),a.length<2&&(a="0"+a),[n,i,a].join("")}function d(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),i=window.location.search.substr(1).match(e);return null!=i?unescape(i[2]):null}function h(t,e){var i=t.className.split(" ");i.push(e),t.className=i.join(" ")}function p(t,e){var i=t.className.split(" ").filter((function(t){return t!=e}));t.className=i.join(" ")}function f(t){var e=t.url,i=t;delete i.url;var a={};return r("Authorization")&&(a["Authorization"]=r("Authorization")),{url:e,param:i,headers:a}}function v(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2?arguments[2]:void 0,a=f(t),r=Object.assign(a.headers,i);return s["a"].dispatch("INIT_SHOW",!1),new Promise((function(t,i){n.a.get(a.url,{params:a.param,headers:r}).then((function(e){t(e.data)})).catch((function(t){var a=t.response;a&&("Unauthorized"==a.statusText||"UserNotLogin"==a.data.ErrorCode||"User.SessionError"==a.data.ErrorCode)&&e?(y(),i(a.data||t)):i(a.data||t)}))}))}function m(t){var e=t.url,i={"Content-type":"application/json"};return r("Authorization")&&(i["Authorization"]=r("Authorization")),delete t.url,{url:e,param:t,headers:i}}function g(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2?arguments[2]:void 0,a=m(t),r=Object.assign(a.headers,i);return delete a.headers,s["a"].dispatch("INIT_SHOW",!1),new Promise((function(t,i){n.a.post(a.url,a.param,{headers:r}).then((function(e){var i=e.data;t(i)})).catch((function(t){var a=t.response;a&&("Unauthorized"==a.statusText||"UserNotLogin"==a.data.ErrorCode||"User.SessionError"==a.data.ErrorCode)&&e?(y(),i(a.data||t)):i(a.data||t)}))}))}function y(){window.app&&s["a"].dispatch("INIT_SHOW",!0)}function w(t,e){n.a.get(t,{responseType:"blob"}).then((function(i){var a=i.data,n=document.createElement("a");e||(e=t.split("/").pop()),n.download=e,n.href=URL.createObjectURL(a),n.dispatchEvent(new MouseEvent("click")),URL.revokeObjectURL(n.href)}))}function b(t){if(!t)return"";var e=t.substring(0,4),i=t.substring(4,6),a=t.substring(6,8);return e+"-"+i+"-"+a}function x(t,e,i){return t[e]=t.splice(i,1,t[e])[0],t}function k(t,e){var i=new Date(1e3*t),a=i.getFullYear(),n=i.getMonth()+1<10?"0"+(i.getMonth()+1):i.getMonth()+1,s=i.getDate(),r="".concat(a,"-").concat(n,"-").concat(s);return e&&(e.dateZero&&(s=s<10?"0"+s:s,r="".concat(a,"-").concat(n,"-").concat(s)),e.needUnit&&(a+="年",n+="月",s+="日",r="".concat(a).concat(n).concat(s))),r}function C(t){t&&(n.a.defaults.headers.common["Authorization"]=t)}function _(t){var e=t.name.slice(0,t.name.indexOf(".")),i=t.name.slice(t.name.indexOf(".")+1);return"activity_platform/".concat(e,"_").concat(Date.now(),".").concat(i)}function S(t){var e=0,i=0,a=0;return e=parseInt(t/3600,10),t-=3600*e,i=parseInt(t/60,10),t-=60*i,a=t,0!=e&&e<10&&(e="0"+e),0==i?i="00":i<10&&(i="0"+i),0==a?a="00":a<10&&(a="0"+a),e?e+":":i+":"+a}},"02b8":function(t,e,i){"use strict";var a=i("f309"),n=i.n(a);n.a},"04fe":function(t,e,i){},"063c":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"myActivityDetail",staticClass:"my-activity-detail"},[i("el-breadcrumb",{attrs:{separator:"/"}},[i("el-breadcrumb-item",{on:{click:function(e){return t.$router.push("myActivity")}}},[i("span",{staticClass:"link-btn"},[t._v("我发布的活动")])]),i("el-breadcrumb-item",[t._v("创建活动_"+t._s(t.activityName))])],1),i("setting-item")],1)},n=[],s=i("ca41"),r={name:"myActivityDetail",components:{SettingItem:s["a"]},data:function(){return{activityName:""}},mounted:function(){this.activityName=this.$route.query.title}},o=r,c=(i("02b8"),i("5511")),u=Object(c["a"])(o,a,n,!1,null,null,null);e["default"]=u.exports},"06e5":function(t,e,i){},"0865":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.workDetailList?i("div",{staticClass:"audit-word"},[i("span",{staticClass:"audit-name"},[t._v(t._s(this.workDetailList.Title))]),i("div",{staticClass:"audit-info"},[t._v(t._s(this.workDetailList.Desc))]),t._l(t.videoList,(function(t,e){return i("div",{key:e,staticClass:"video-wrap"},[i("video",{staticClass:"work-video",attrs:{id:"work-video",src:t.ResourceContent,controls:"",loop:"loop","x-webkit-airplay":"true","webkit-playsinline":"true"}})])})),i("div",{staticClass:"docfile"},[i("div",{staticClass:"title"},[t._v("学习资料包")]),t._l(t.docList,(function(e,a){return i("div",{key:a,staticClass:"doc-item"},[i("a",{attrs:{download:e.name,href:e.ResourceContent,target:"_blank"}},[t._v(t._s(e.ResourceName))])])}))],2)],2):t._e()},n=[],s=i("ae78"),r=i.n(s);function o(t,e,i,a,n,s,r){try{var o=t[s](r),c=o.value}catch(u){return void i(u)}o.done?e(c):Promise.resolve(c).then(a,n)}function c(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var s=t.apply(e,i);function r(t){o(s,a,n,r,c,"next",t)}function c(t){o(s,a,n,r,c,"throw",t)}r(void 0)}))}}var u={props:{WorkId:Number},data:function(){return{workDetailList:{},videoList:[],docList:[],isShadeShow:!0,DivisionId:""}},mounted:function(){this.DivisionId=this.$route.query.DivisionId||"",this.onWorkDetail()},methods:{onWorkDetail:function(){var t=c(r.a.mark((function t(){var e,i,a,n,s,o,c,u,l;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={url:"/v1/activity/GetWorkDetail",WorkId:this.WorkId},this.DivisionId&&(e.DivisionId=this.DivisionId),t.next=4,this.axiosGet(e).catch((function(t){return t}));case 4:if(i=t.sent,"OK"==i.ErrorCode){t.next=7;break}return t.abrupt("return",this.$message.error(i.ErrorMsg));case 7:for(this.workDetailList=i.Data.WorkDetail,a=this.workDetailList.ResourceList,n=!0,s=!1,o=void 0,t.prev=12,c=a[Symbol.iterator]();!(n=(u=c.next()).done);n=!0)l=u.value,4==l.ResourceType?this.videoList.push(l):5==l.ResourceType&&this.docList.push(l);t.next=20;break;case 16:t.prev=16,t.t0=t["catch"](12),s=!0,o=t.t0;case 20:t.prev=20,t.prev=21,n||null==c.return||c.return();case 23:if(t.prev=23,!s){t.next=26;break}throw o;case 26:return t.finish(23);case 27:return t.finish(20);case 28:this.$emit("Evaluation",i.Data);case 29:case"end":return t.stop()}}),t,this,[[12,16,20,28],[21,,23,27]])})));function e(){return t.apply(this,arguments)}return e}()}},l=u,d=(i("a7d7"),i("5511")),h=Object(d["a"])(l,a,n,!1,null,"104532f0",null);e["a"]=h.exports},"094b":function(t,e,i){"use strict";var a=i("fdfe"),n=i.n(a);n.a},"09c2":function(t,e,i){t.exports=i.p+"img/sanjiao.2227a4fd.png"},"0b35":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"uni-header"},[t._m(0),a("div",{staticClass:"header-menu"},t._l(t.tabs,(function(e){return e.hide?t._e():a("div",{key:e.key,class:"menu-item "+(t.activeTab===e.key?"active":""),on:{click:function(i){return t.switchPage(e.key)}}},[t._v(t._s(e.name)+"\n    ")])})),0),a("div",{staticClass:"header-user"},[a("div",{staticClass:"message",on:{click:t.goToMessage}},[0==t.messageList.length?a("img",{attrs:{src:i("fa34")}}):a("img",{attrs:{src:i("7c4e")}})]),a("div",{staticClass:"divider"},[t._v("|")]),t.user?[a("div",{staticClass:"name"},[t._v(t._s(t.user.Name||"未知用户"))]),a("div",{staticClass:"divider"},[t._v("|")]),a("div",{staticClass:"logout",on:{click:t.logout}},[t._v("退出")])]:[a("el-dropdown",{on:{command:t.loginClick}},[a("span",{staticClass:"name"},[t._v("未登录")]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t.isPro?t._e():a("el-dropdown-item",{attrs:{command:"wx"}},[t._v("微信扫码登录")]),a("el-dropdown-item",{attrs:{command:"phone"}},[t._v("短信验证码登录")])],1)],1)]],2),a("w-x-login",{ref:"wxLogin"}),a("el-dialog",{staticClass:"login-dialog",attrs:{visible:t.showMpCode,width:"400px","modal-append-to-body":!1},on:{"update:visible":function(e){t.showMpCode=e}}},[t.isTest?a("img",{attrs:{src:i("c4d1")}}):a("img",{attrs:{src:i("7815")}}),a("div",{staticClass:"info"},[t._v("\n      请前往小程序端完成身份认证\n      "),a("br"),t._v("认证完成后，重新登录\n    ")])]),a("el-dialog",{staticClass:"choose-dialog",attrs:{title:"选择身份",width:"400px",visible:t.showChooseRole,"show-close":!1,"close-on-click-modal":!1},on:{"update:visible":function(e){t.showChooseRole=e}}},[a("div",{staticClass:"choose-role"},t._l(t.roles,(function(e,i){return a("el-button",{key:i,attrs:{type:"primary",size:"medium"},on:{click:function(i){return t.chooseRole(e.Role)}}},[t._v("\n        "+t._s(e.RoleName)+"\n      ")])})),1)])],1)},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a",{staticClass:"uni-title",attrs:{href:"/"}},[a("img",{staticClass:"logo",attrs:{src:i("933f")}}),a("span",[t._v("中小学信息化活动平台")])])}],s=i("ae78"),r=i.n(s),o=i("f753"),c=i.n(o),u=i("6507"),l=i.n(u),d=i("0210"),h=i("99a7");function p(t,e,i,a,n,s,r){try{var o=t[s](r),c=o.value}catch(u){return void i(u)}o.done?e(c):Promise.resolve(c).then(a,n)}function f(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var s=t.apply(e,i);function r(t){p(s,a,n,r,o,"next",t)}function o(t){p(s,a,n,r,o,"throw",t)}r(void 0)}))}}var v={name:"uni-header",components:{WXLogin:h["a"]},data:function(){return{tabs:[],normalTabs:[{key:"activityCenter",name:"活动中心",hide:!1},{key:"myActivity",name:"活动发布与管理",hide:!1},{key:"excellence",name:"优秀作品展",hide:!1},{key:"expertReview",name:"专家评审",hide:!0},{key:"userCenter",name:"个人中心",hide:!1}],adminTabs:[{key:"auditActivity",name:"审核中心",hide:!1},{key:"expertReview",name:"专家评审",hide:!0},{key:"expertStore",name:"专家库",hide:!1}],activeTab:"activityCenter",wxCode:"",isAdmin:!1,isJudge:!1,messageList:[],showMpCode:!1,isTest:"127.0.0.1"==location.hostname||"api.huodong.eduinspector.com"==location.hostname,isPro:"cxyy.educloud.tencent.com"==location.hostname||"cxyy.szdj.edu.cn"==location.hostname,showMul:!1,roles:[{Role:"TEACHER",RoleName:"教师"},{Role:"PARENT",RoleName:"家长"}],showChooseRole:!1,loginCb:""}},computed:{user:function(){return this.$store.state.account.user}},mounted:function(){var t=f(r.a.mark((function t(){var e,i=this;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=this.$route.query.token||Object(d["getCookie"])("Authorization"),this.wxCode=this.$route.query.code||"",!this.wxCode){t.next=6;break}this.idaasLogin((function(t){i.tabs=i.normalTabs,t?(i.$store.dispatch("INIT_USER"),i.getMessage()):i.$router.push("/activityCenter")})),t.next=15;break;case 6:if(!e){t.next=13;break}return Object(d["setCookie"])("Authorization",e),t.next=10,this.$store.dispatch("INIT_USER");case 10:this.user?(this.activeTab=this.$route.path.split("/")[1],this.getMessage()):(this.tabs=this.normalTabs,"/"==this.$route.path&&this.$router.push("/activityCenter")),t.next=15;break;case 13:this.tabs=this.normalTabs,"/"==this.$route.path&&this.$router.push("/activityCenter");case 15:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),watch:{$route:function(t){this.activeTab=t.path.split("/")[1]},user:function(){this.checkRole()}},methods:{switchPage:function(t){this.activeTab===t&&this.$route.path=="/"+this.activeTab||(this.activeTab=t,this.$router.push("/"+t))},checkRole:function(){var t=f(r.a.mark((function t(){var e;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.isAdmin=this.user.IsPlatformAdmin,this.isJudge=this.user.IsJudge,this.isAdmin?this.tabs=this.adminTabs:this.tabs=this.normalTabs,this.isJudge&&(e=this.getTabByKey("expertReview",this.tabs),e.hide=!1);case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getTabByKey:function(t,e){var i=!0,a=!1,n=void 0;try{for(var s,r=e[Symbol.iterator]();!(i=(s=r.next()).done);i=!0){var o=s.value;if(o.key==t)return o}}catch(c){a=!0,n=c}finally{try{i||null==r.return||r.return()}finally{if(a)throw n}}return{}},goToMessage:function(){this.$route.path.indexOf("msgcenter")>-1||this.$router.push("/msgcenter")},loginClick:function(t){if("wx"==t)this.$refs.wxLogin.login();else if("127.0.0.1"===location.hostname){var e=location.protocol+"//"+location.host;location.href="https://api.huodong.eduinspector.com/edulogin?redirectUrl=".concat(e,"&from=activity")}else{var i=location.protocol+"//"+location.host;location.href="".concat(i,"/edulogin/?redirectUrl=").concat(i,"&from=activity")}},logout:function(){Object(d["setCookie"])("Authorization",""),localStorage.removeItem("user"),location.href="/"},idaasLogin:function(t){var e=this;return this.loginCb=t,new Promise(function(){var i=f(r.a.mark((function i(a,n){var s,o;return r.a.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,e.idassCode();case 2:if(s=i.sent,s){i.next=5;break}return i.abrupt("return",t(!1));case 5:return i.next=7,e.axiosPost({url:"/idaasproxy/v1/account/oauth2/login"}).catch((function(t){return t}));case 7:if(o=i.sent,12008!=o.code){i.next=13;break}return e.showMpCode=!0,i.abrupt("return",t(!1));case 13:if(0==o.code){i.next=16;break}return e.$message.error(o.message),i.abrupt("return",t(!1));case 16:e.stateAuthLogin();case 17:case"end":return i.stop()}}),i)})));return function(t,e){return i.apply(this,arguments)}}())},stateAuthLogin:function(){var t=f(r.a.mark((function t(e){var i=this;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=f(r.a.mark((function t(a,n){var s,o,c,u,l;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i.axiosGet({url:"/v1/users/state",loginType:"IDAAS",callback:location.protocol+"//"+location.host}).catch((function(t){return t}));case 2:if(s=t.sent,"OK"==s.ErrorCode){t.next=6;break}return i.$message.error(s.ErrorMsg),t.abrupt("return",a(!1));case 6:return o=s.Data.redirectUrl,"api.huodong.eduinspector.com"==location.hostname&&(o=o.replace("https://login.educloud.tencent.com","https://api.huodong.eduinspector.com/idaasproxy")),t.next=10,i.axiosGet({url:o},!1,{"x-client":"true"});case 10:if(c=t.sent,c&&c.code){t.next=14;break}return i.$message.error("获取code失败"),t.abrupt("return",a(!1));case 14:return u={url:"/v1/users/login",code:c.code,loginType:"IDAAS",state:c.state},e&&(u.LoginRoles=[e]),t.next=18,i.axiosPost(u).catch((function(t){return t}));case 18:if(l=t.sent,"OK"!=l.ErrorCode){t.next=23;break}"LOGIN_MULTIROLE"==l.Data.status?i.getRoles(l.Data.token):(Object(d["setCookie"])("Authorization",l.Data.token),i.loginCb(!0)),t.next=36;break;case 23:if("User.UserNotExists"!=l.ErrorCode){t.next=28;break}return i.showMpCode=!0,t.abrupt("return",i.loginCb(!1));case 28:if("User.NoRole"!=l.ErrorCode){t.next=33;break}return i.showMpCode=!0,t.abrupt("return",i.loginCb(!1));case 33:if("OK"==l.ErrorCode){t.next=36;break}return i.$message.error(l.ErrorMsg),t.abrupt("return",i.loginCb(!1));case 36:case"end":return t.stop()}}),t)})));return function(e,i){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),idassCode:function(){var t=f(r.a.mark((function t(){var e,i,a,n=this;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getIdaasId();case 2:return e=t.sent,i=e.Data.idaasId,a=l()(),Object(d["setCookie"])("XSRF-TOKEN",a),t.abrupt("return",new Promise((function(t,e){c.a.post("/idaasproxy/v1/account/oauth2/code",{code:n.wxCode,registrationId:i},{headers:{CompanyID:1,"X-XSRF-TOKEN":a}}).then((function(e){0!=e.data.code?(n.$message.error(e.data.message),t(!1)):t(!0)})).catch((function(){t(!1)}))})));case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getIdaasId:function(){var t="127.0.0.1"==location.hostname?"api.huodong.eduinspector.com":location.hostname;return new Promise((function(e,i){c.a.get("/v1/users/state",{params:{callback:t,loginType:"IDAAS"}}).then((function(t){e(t.data)})).catch((function(t){e(t)}))}))},getRoles:function(t){var e=this;c.a.get("/v1/users/getroles",{headers:{Authorization:t}}).then((function(t){var i=t.data.Data.UserRole||[];e.showChooseRole=!0,e.roles=i}))},chooseRole:function(t){this.stateAuthLogin(t),this.showChooseRole=!1},getMessage:function(){var t=f(r.a.mark((function t(){var e;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/message/GetUserMessageList",AppId:1567654633},!1).catch((function(t){return t}));case 2:if(e=t.sent,"OK"==e.ErrorCode){t.next=5;break}return t.abrupt("return",this.$message.error(e.ErrorMsg));case 5:this.messageList=e.Data.MessageList||[];case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},m=v,g=(i("66ad"),i("5511")),y=Object(g["a"])(m,a,n,!1,null,null,null);e["a"]=y.exports},"0ddc":function(t,e,i){},"0fbe":function(t,e,i){"use strict";var a=i("b214"),n=i.n(a);n.a},"11e2":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div")},n=[],s=i("1f21"),r=i.n(s),o=i("7690"),c=i.n(o),u=i("a313"),l=i.n(u);c()(r.a),l()(r.a);var d={name:"highCharts",data:function(){return{chart:{}}},props:{options:{type:Object}},watch:{options:function(t){this.render()}},mounted:function(){this.render()},methods:{render:function(){this.options&&this.options.show&&(this.options.credits={enabled:!1},this.addNoData(),this.chart=new r.a.Chart(this.$el,this.options))},addNoData:function(){this.options.lang=this.options.lang||{noData:"暂无有数据"},this.options.noData=this.options.noData||{style:{fontWeight:"bold",fontSize:"24px"}}}}},h=d,p=i("5511"),f=Object(p["a"])(h,a,n,!1,null,null,null);e["a"]=f.exports},1217:function(t,e,i){t.exports=i.p+"img/small.0b57a1f1.png"},"12d2":function(t,e,i){},"14c4":function(t,e,i){},"16e7":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"message-warrp"},[i("div",{staticClass:"message-center"},[i("div",{staticClass:"message-title"},[t._v("消息中心")]),i("div",{staticClass:"message-lable"},[i("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData}},[i("el-table-column",{attrs:{label:"时间",prop:"UpdatedTime",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(t.timeFormat(1e3*e.row.UpdatedTime,"yyyy-MM-dd"))+"\n          ")]}}])}),i("el-table-column",{attrs:{label:"标题",prop:"Title",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.Title))]),1==e.row.Type?i("el-button",{attrs:{type:"text"},on:{click:function(i){return t.messageDetail(e.row)}}},[t._v("查看详情")]):t._e()]}}])}),i("el-table-column",{attrs:{label:"内容",prop:"Abstract","show-overflow-tooltip":""}})],1)],1),i("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.total,"page-size":t.PageSize,"current-page":t.currentPage},on:{"current-change":t.handleCurrentChange}})],1)])},n=[],s=i("ae78"),r=i.n(s);function o(t,e,i,a,n,s,r){try{var o=t[s](r),c=o.value}catch(u){return void i(u)}o.done?e(c):Promise.resolve(c).then(a,n)}function c(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var s=t.apply(e,i);function r(t){o(s,a,n,r,c,"next",t)}function c(t){o(s,a,n,r,c,"throw",t)}r(void 0)}))}}var u={data:function(){return{tableData:[],multipleSelection:[],currentPage:1,PageSize:10,total:0,MessageId:"",day:""}},created:function(){var t=c(r.a.mark((function t(){var e;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.init(),t.next=3,this.axiosGet({url:"/v1/message/GetUserMessageList",AppId:1567654633,PageNum:this.currentPage,PageSize:this.PageSize}).catch((function(t){return t}));case 3:e=t.sent,this.total=e.Data.Total;case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),methods:{init:function(){var t=c(r.a.mark((function t(){var e;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/message/GetUserMessageList",AppId:1567654633,PageNum:this.currentPage,PageSize:this.PageSize}).catch((function(t){return t}));case 2:if(e=t.sent,"OK"==e.ErrorCode){t.next=5;break}return t.abrupt("return");case 5:this.tableData=e.Data.MessageList;case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),handleCurrentChange:function(t){this.currentPage=t,this.init()},messageDetail:function(){var t=c(r.a.mark((function t(e){var i,a;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/message/GetUserMessage",MessageId:e.MessageId}).catch((function(t){return t}));case 2:if(i=t.sent,"OK"==i.ErrorCode){t.next=5;break}return t.abrupt("return",this.$message.error(i.ErrorMsg));case 5:a=JSON.parse(i.Data.Content||"{}"),this.$router.push({path:"/myActivity/workAuditDetail",query:{activityId:a.ActivityId,title:a.Title,workId:a.WorkId,curStatus:3}});case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}},l=u,d=(i("9fd1"),i("bdab"),i("5511")),h=Object(d["a"])(l,a,n,!1,null,"4282035e",null);e["default"]=h.exports},"1e50":function(t,e,i){"use strict";var a=i("4740"),n=i.n(a);n.a},"20e8":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"activity-publicity"},[i("div",{staticClass:"activity-wrap"},[i("div",{staticClass:"activity-left"},["STAGE_PREPARE"==t.currentStage?i("prepare"):t._e(),"STAGE_WORK_UPLOAD"==t.currentStage?i("work-upload",{attrs:{stage:t.currentStage}}):t._e(),"STAGE_WORK_AUDIT"==t.currentStage?i("work-upload",{attrs:{stage:t.currentStage}}):t._e(),"STAGE_WORK_SHOW"==t.currentStage?i("work-show",{key:"work-show1",attrs:{stage:t.currentStage}}):t._e(),"STAGE_WORK_PRE_JUDGE"==t.currentStage?i("expert-jude",{key:"expert-jude1",attrs:{stage:t.currentStage}}):t._e(),"STAGE_WORK_JUDGE"==t.currentStage?i("expert-jude",{key:"expert-jude2",attrs:{stage:t.currentStage}}):t._e(),"STAGE_EXCELLENT_WORK_SHOW"==t.currentStage?i("work-show",{key:"work-show2",attrs:{stage:t.currentStage}}):t._e()],1),t.stageList.length>0?i("div",{staticClass:"activity-right"},[i("flow-steps",{attrs:{"stage-list":t.stageList,stage:t.currentStage},on:{changeStage:t.changeStage}})],1):t._e()])])},n=[],s=i("ae78"),r=i.n(s),o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"flow-steps-wrap"},[i("div",{staticClass:"process-title"},[t._v("活动流程")]),i("div",{staticClass:"activity-step"},[i("el-steps",{attrs:{active:t.stageIndex,direction:"vertical","process-status":"finish","finish-status":"success"}},t._l(t.myStageList,(function(e,a){return i("el-step",{key:a,attrs:{status:a==t.stageIndex?"finish":e.status},nativeOn:{click:function(i){return t.onStep(e,a)}}},[i("template",{slot:"title"},[i("div",{staticClass:"step-title"},[t._v(t._s(a+1))])]),i("template",{slot:"description"},[i("div",{staticClass:"step-row"},[t._v(t._s(e.StageName))]),e.ShowTime?i("div",[t._v("\n            "+t._s(t.timeFormat(1e3*e.StartTime,"yyyy-MM-dd"))+" -\n            "+t._s(t.timeFormat(1e3*e.EndTime,"yyyy-MM-dd"))+"\n          ")]):t._e()])],2)})),1)],1),i("div",{staticClass:"activity-file"},[i("div",{staticClass:"file-title"},[t._v("其他活动材料")]),t.fileList.length>0?i("div",{staticClass:"file-wrap"},t._l(t.fileList,(function(e,a){return i("div",{key:a,staticClass:"file-name",on:{click:function(i){return t.downLodeFile(e)}}},[t._v("\n        "+t._s(e.Name)+"\n      ")])})),0):i("div",{staticClass:"no-data"},[t._v("暂无")])]),i("div",{staticClass:"feedback"},[i("el-button",{staticClass:"feedback-text",attrs:{type:"text"},on:{click:function(e){t.dialogVisible=!0}}},[t._v("有问题请反馈，点击这里")]),i("el-dialog",{attrs:{title:"问题反馈",visible:t.dialogVisible,width:"500px","modal-append-to-body":!1,"append-to-body":!1},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("el-input",{attrs:{type:"textarea",rows:3,resize:"none",placeholder:"请输入需要反馈的具体内容"},model:{value:t.textarea,callback:function(e){t.textarea=e},expression:"textarea"}}),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary",disabled:t.lockAct},on:{click:t.feedbackSubmit}},[t._v("提交")]),i("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取消")])],1)],1)],1)])},c=[];function u(t,e,i,a,n,s,r){try{var o=t[s](r),c=o.value}catch(u){return void i(u)}o.done?e(c):Promise.resolve(c).then(a,n)}function l(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var s=t.apply(e,i);function r(t){u(s,a,n,r,o,"next",t)}function o(t){u(s,a,n,r,o,"throw",t)}r(void 0)}))}}var d={name:"flow-steps",props:{stage:{type:String},stageList:{type:Array,default:[]}},data:function(){return{activityId:"",myStageList:[],dialogVisible:!1,textarea:"",fileList:[],myStage:"",lockAct:!1}},computed:{stageIndex:function(){var t=this;return this.stageList.findIndex((function(e){return e.StageId==t.myStage}))}},mounted:function(){var t=this;this.myStageList=this.stageList.map((function(e){var i=new Date(1e3*e.StartTime),a=t.getNowLastTime();return e.status=a<i?"wait":"success",e})),this.activityId=this.$route.query.ActivityId,this.myStage=this.stage,this.getFileList()},methods:{getFileList:function(){var t=l(r.a.mark((function t(){var e;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/activity/GetActivityPageConf",ActivityId:this.activityId}).catch((function(t){return t}));case 2:if(e=t.sent,"OK"==e.ErrorCode){t.next=5;break}return t.abrupt("return",this.$message.error(e.ErrorMsg));case 5:this.fileList=e.Data.AttachmentList||[];case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),downLodeFile:function(t){window.open(t.URL)},feedbackSubmit:function(){var t=l(r.a.mark((function t(){var e,i=this;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.lockAct){t.next=2;break}return t.abrupt("return");case 2:return this.lockAct=!0,t.next=5,this.axiosPost({url:"/v1/activity/AddFeedback",Content:this.textarea,Title:"",ActivityId:this.activityId}).catch((function(t){return t}));case 5:e=t.sent,"OK"===e.ErrorCode?(this.dialogVisible=!1,this.textarea="",this.$message({type:"success",duration:2e3,message:"提交成功！"})):this.$message({type:"error",duration:2e3,message:e.ErrorCode}),setTimeout((function(){i.lockAct=!1}),1e3);case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),onStep:function(t,e){var i=new Date(1e3*t.StartTime),a=this.getNowLastTime();a<i||(this.myStage=t.StageId,this.$emit("changeStage",this.myStage))},getNowLastTime:function(){var t=new Date;return t.setHours(23),t.setMinutes(23),t.setSeconds(59),t}}},h=d,p=(i("68b4"),i("5511")),f=Object(p["a"])(h,o,c,!1,null,null,null),v=f.exports,m=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"activity-prepare"},[t._l(t.activityDetailList,(function(e,a){return i("component-item",{key:a,attrs:{type:e.type,name:e.name,text:e.text,url:e.url||"",styleType:e.styleType},on:{btnClick:t.apply}})})),i("w-x-login")],2)},g=[],y=i("b6cc"),w=i("99a7");function b(t,e,i,a,n,s,r){try{var o=t[s](r),c=o.value}catch(u){return void i(u)}o.done?e(c):Promise.resolve(c).then(a,n)}function x(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var s=t.apply(e,i);function r(t){b(s,a,n,r,o,"next",t)}function o(t){b(s,a,n,r,o,"throw",t)}r(void 0)}))}}var k={name:"activity-prepare",components:{ComponentItem:y["a"],WXLogin:w["a"]},data:function(){return{activityId:"",activityDetailList:[],styleType:2,isShadeShow:!0}},mounted:function(){this.activityId=this.$route.query.ActivityId,this.getPublicPage()},methods:{getPublicPage:function(){var t=x(r.a.mark((function t(){var e;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/page/GetPublicPage",ActivityId:this.activityId}).catch((function(t){return t}));case 2:if(e=t.sent,"OK"==e.ErrorCode){t.next=5;break}return t.abrupt("return",this.$message.error(e.ErrorMsg));case 5:this.activityDetailList=JSON.parse(e.Data.Content||"{}");case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),apply:function(){var t=x(r.a.mark((function t(){var e;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosPost({url:"/v1/activity/ApplyActivity",ActivityId:this.activityId}).catch((function(t){return t}));case 2:if(e=t.sent,"OK"==e.ErrorCode){t.next=5;break}return t.abrupt("return",this.$message.error(e.ErrorMsg));case 5:this.$message.success("报名成功");case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},C=k,_=(i("fb13"),Object(p["a"])(C,m,g,!1,null,null,null)),S=_.exports,T=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"activity-work-upload"},[a("div",{staticClass:"work-title"},[t._v("提交作品")]),a("div",{staticClass:"line"}),"WORK_WAITING_AUDIT"==t.auditStatus?a("div",{staticClass:"work-hint audio-ing"},[a("span",[t._v("您提交的作品正在审核中…")])]):t._e(),"WORK_AUDIT_REJECT"==t.auditStatus||"WORK_AUDIT_AI_REJECT"==t.auditStatus?a("div",{staticClass:"work-hint audio-no"},[a("span",[t._v("您提交的作品审核不通过！")]),a("span",{staticClass:"appeal",on:{click:t.onAppealVisible}},[t._v("提交申述")])]):t._e(),a("div",{staticClass:"hint-title"},[a("span",[t._v("请输入作品名称")]),a("el-select",{staticClass:"subject",staticStyle:{width:"150px"},attrs:{placeholder:"选择学段",disabled:t.disabled},model:{value:t.TermId,callback:function(e){t.TermId=e},expression:"TermId"}},t._l(t.gradeOptions,(function(t){return a("el-option",{key:t.Id,attrs:{label:t.Name,value:t.Id}})})),1),a("el-select",{staticClass:"subject",staticStyle:{width:"150px"},attrs:{placeholder:"选择学科",disabled:t.disabled},model:{value:t.SubjectId,callback:function(e){t.SubjectId=e},expression:"SubjectId"}},t._l(t.subjectOptions,(function(t){return a("el-option",{key:t.Id,attrs:{label:t.Name,value:t.Id}})})),1)],1),a("el-input",{attrs:{placeholder:"请输入作品名称",disabled:t.disabled,maxlength:50},model:{value:t.workName,callback:function(e){t.workName=e},expression:"workName"}}),a("div",{staticClass:"hint-title"},[t._v("请输入作品简介")]),a("div",{staticClass:"work-textarea"},[a("el-input",{attrs:{type:"textarea",rows:9,placeholder:"请输入作品简介",disabled:t.disabled,maxlength:300,resize:"none"},model:{value:t.textarea,callback:function(e){t.textarea=e},expression:"textarea"}})],1),a("div",{staticClass:"upload-content"},[a("div",{staticClass:"upload-wrap video-wrap"},[a("div",{staticClass:"upload-file"},[a("el-button",{attrs:{type:"primary",disabled:t.disabled||t.uploading},on:{click:function(e){return t.uploadFile("video")}}},[0==t.videoFile.length?a("span",[t._v("上传作品")]):a("span",[t._v("替换作品")])]),a("div",{staticClass:"upload-text"},[t._v("支持mp4格式")])],1),t._l(t.videoFile,(function(e,n){return a("div",{key:n,staticClass:"file"},[a("span",{staticClass:"file-name"},[t._v(t._s(e.ResourceName))]),t.disabled?t._e():a("span",{staticClass:"close",on:{click:function(e){return t.deleteFile("video",n)}}},[a("img",{attrs:{src:i("9265")}})])])}))],2),a("div",{staticClass:"upload-wrap"},[a("div",{staticClass:"upload-file"},[a("el-button",{attrs:{type:"primary",disabled:t.disabled||t.uploading},on:{click:function(e){return t.uploadFile("doc")}}},[t._v("学习材料包")]),a("div",{staticClass:"upload-text"},[t._v("支持"+t._s(t.docFileList.join("、"))+"格式")])],1),t._l(t.docFile,(function(e,n){return a("div",{key:n,staticClass:"file"},[a("span",{staticClass:"file-name"},[t._v(t._s(e.ResourceName))]),t.disabled?t._e():a("span",{staticClass:"close",on:{click:function(e){return t.deleteFile("doc",n)}}},[a("img",{attrs:{src:i("9265")}})])])}))],2)]),a("div",{staticClass:"submit"},[t.disabled?t._e():a("el-button",{attrs:{type:"primary",disabled:!t.submitEnable},on:{click:t.submitWork}},[t._v("确认提交")])],1),a("div",{staticClass:"qr-code"},[t.h5Url?a("vue-qr",{attrs:{size:200,dotScale:1,text:t.h5Url}}):t._e(),a("div",{staticClass:"code-title"},[t._v("手机扫描查看作品预览页")])],1),a("cos",{ref:"cos",attrs:{"valid-list":t.validList},on:{start:function(e){t.uploading=!0},fail:t.fileFail,success:t.fileSuccess}}),a("el-dialog",{attrs:{title:"提交申述",visible:t.appealVisible,width:"400px","modal-append-to-body":!1,"append-to-body":!1},on:{"update:visible":function(e){t.appealVisible=e}}},[a("el-input",{attrs:{type:"textarea",rows:3,resize:"none",placeholder:"请输入申述的内容"},model:{value:t.appealText,callback:function(e){t.appealText=e},expression:"appealText"}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.submitAppeal}},[t._v("提交")]),a("el-button",{on:{click:function(e){t.appealVisible=!1}}},[t._v("取消")])],1)],1)],1)},A=[],I=i("af32"),L=i("4579"),E=i.n(L);function D(t,e,i,a,n,s,r){try{var o=t[s](r),c=o.value}catch(u){return void i(u)}o.done?e(c):Promise.resolve(c).then(a,n)}function O(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var s=t.apply(e,i);function r(t){D(s,a,n,r,o,"next",t)}function o(t){D(s,a,n,r,o,"throw",t)}r(void 0)}))}}var P={name:"activity-work-upload",components:{Cos:I["a"],VueQr:E.a},props:{stage:{type:String}},data:function(){return{workName:"",textarea:"",videoFile:[],docFile:[],nullFile:!0,QRCode:"",queryFileList:[],activityId:null,validList:[],videoFileList:["mp4"],docFileList:["txt","pdf","doc","ppt","xls","docx","xlsx","pptx"],fileLimit:200,videoName:"",videoUrl:"",appealVisible:!1,auditStatus:"",Current:"",workId:"",gradeOptions:[],subjectOptions:[],TermId:"",SubjectId:"",uploadType:"",isSubmit:!1,appealText:"",h5Url:"",uploading:!1}},computed:{submitEnable:function(){return this.TermId&&this.SubjectId&&this.workName&&this.textarea&&this.videoFile.length>0&&this.docFile.length>0},disabled:function(){return"STAGE_WORK_AUDIT"==this.stage}},mounted:function(){this.activityId=this.$route.query.ActivityId,this.Current=this.$route.query.Current,this.getGradeList(),this.getSubjectList(),this.getActivityWorkDetail()},methods:{getActivityWorkDetail:function(){var t=O(r.a.mark((function t(){var e,i,a,n,s,o,c,u,l,d;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/activity/GetWorkDetailByActivityId",ActivityId:this.activityId}).catch((function(t){return t}));case 2:if(e=t.sent,"OK"==e.ErrorCode){t.next=5;break}return t.abrupt("return");case 5:for(i=e.Data.WorkDetail||{},this.workName=i.Title,this.textarea=i.Desc,this.workId=i.WorkId,this.TermId=i.TermId,this.SubjectId=i.SubjectId,this.auditStatus=i.Status,this.videoFile=[],this.docFile=[],a=e.Data.Resource||[],n=!0,s=!1,o=void 0,t.prev=18,c=a[Symbol.iterator]();!(n=(u=c.next()).done);n=!0)l=u.value,4==l.ResourceType?this.videoFile.push(l):5==l.ResourceType&&this.docFile.push(l);t.next=26;break;case 22:t.prev=22,t.t0=t["catch"](18),s=!0,o=t.t0;case 26:t.prev=26,t.prev=27,n||null==c.return||c.return();case 29:if(t.prev=29,!s){t.next=32;break}throw o;case 32:return t.finish(29);case 33:return t.finish(26);case 34:i.WorkId&&(d=this.getCookie("Authorization"),this.h5Url="https://".concat(location.hostname,"/h5/myWorks?")+"ActivityId=".concat(this.activityId,"&WorkId=").concat(i.WorkId,"&token=").concat(d));case 35:case"end":return t.stop()}}),t,this,[[18,22,26,34],[27,,29,33]])})));function e(){return t.apply(this,arguments)}return e}(),submitWork:function(){var t=O(r.a.mark((function t(){var e,i;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("STAGE_WORK_AUDIT"!=this.auditStatus&&"WORK_AUDIT_REJECT"!=this.auditStatus&&"WORK_AUDIT_ACCEPT"!=this.auditStatus){t.next=11;break}return t.next=3,this.axiosPost({url:"/v1/activity/UpdateWork",ActivityId:+this.activityId,WorkId:"".concat(this.workId),Desc:this.textarea,Title:this.workName,Category:1,ResourceType:0,ResourceList:this.videoFile.concat(this.docFile),Term:this.TermId,Subject:this.SubjectId}).catch((function(t){return t}));case 3:if(e=t.sent,"OK"==e.ErrorCode){t.next=8;break}return t.abrupt("return",this.$message.error(e.ErrorMsg));case 8:this.$message.success("更新成功");case 9:t.next=18;break;case 11:return t.next=13,this.axiosPost({url:"/v1/activity/UploadWork",ActivityId:+this.activityId,Desc:this.textarea,Title:this.workName,Category:1,ResourceType:0,ResourceList:this.videoFile.concat(this.docFile),Term:this.TermId,Subject:this.SubjectId}).catch((function(t){return t}));case 13:if(i=t.sent,"OK"==i.ErrorCode){t.next=16;break}return t.abrupt("return",this.$message.error(i.ErrorMsg));case 16:this.$message.success("提交成功"),this.getActivityWorkDetail();case 18:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),deleteFile:function(t,e){"video"==t?this.videoFile=[]:this.docFile.splice(e,1)},fileFail:function(){this.uploading=!1},fileSuccess:function(t){this.uploading=!1;var e={ResourceType:"video"==this.uploadType?4:5,ResourceName:t.filename,ResourceContent:"https://"+t.Location};"video"==this.uploadType?this.videoFile=[e]:this.docFile.push(e)},uploadFile:function(t){this.uploadType=t,this.validList="doc"==t?this.docFileList:this.videoFileList,this.$refs.cos.$refs.fileEle.dispatchEvent(new MouseEvent("click"))},onAppealVisible:function(){this.appealText="",this.appealVisible=!0},submitAppeal:function(){var t=O(r.a.mark((function t(){var e;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosPost({url:"/v1/activity/WorkAppeal",WorkId:this.workId,Message:this.appealText}).catch((function(t){return t}));case 2:if(e=t.sent,"OK"==e.ErrorCode){t.next=5;break}return t.abrupt("return",this.$message.error(e.ErrorMsg));case 5:this.$message.success("申诉成功"),this.appealVisible=!1;case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getGradeList:function(){var t=O(r.a.mark((function t(){var e;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/activity/GetGradeGroup"}).catch((function(t){return t}));case 2:e=t.sent,this.gradeOptions=e.Data.GradeGroup||[];case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getSubjectList:function(){var t=O(r.a.mark((function t(){var e;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/activity/GetSubjectList"}).catch((function(t){return t}));case 2:e=t.sent,this.subjectOptions=e.Data.SubjectList||[];case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},$=P,N=(i("622c"),Object(p["a"])($,T,A,!1,null,null,null)),j=N.exports,G=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"activity-work-show"},[t.workList.length>0?t._l(t.workList,(function(e,a){return i("el-card",{key:a,staticClass:"work-list-item"},[i("video",{attrs:{src:e.url,controls:""}}),i("div",{staticClass:"name"},[t._v(t._s(e.name))]),i("div",{staticClass:"school"},[t._v(t._s(e.school||"未知学校"))])])})):i("div",{staticClass:"no-data"},[t._v("暂无数据")])],2)},M=[],W=i("7342");function R(t,e,i,a,n,s,r){try{var o=t[s](r),c=o.value}catch(u){return void i(u)}o.done?e(c):Promise.resolve(c).then(a,n)}function U(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var s=t.apply(e,i);function r(t){R(s,a,n,r,o,"next",t)}function o(t){R(s,a,n,r,o,"throw",t)}r(void 0)}))}}var V={name:"activity-work-show",components:{ActivityList:W["a"]},data:function(){return{workList:[],activityId:""}},props:{stage:{type:String}},mounted:function(){this.activityId=this.$route.query.ActivityId,"STAGE_WORK_SHOW"==this.stage?this.getAllWorkList():"STAGE_EXCELLENT_WORK_SHOW"==this.stage&&this.getExcellentWorkList()},methods:{getAllWorkList:function(){var t=U(r.a.mark((function t(){var e,i;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/activity/GetWorkList",ActivityId:this.activityId,Category:0}).catch((function(t){return t}));case 2:if(e=t.sent,"OK"==e.ErrorCode){t.next=5;break}return t.abrupt("return");case 5:i=e.Data.WorkList||[],this.workList=i.map((function(t){var e=t.ResourceList,i=e.find((function(t){return 4==t.ResourceType}));return{name:t.TeamName,school:t.School,url:i.ResourceContent}}));case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getExcellentWorkList:function(){var t=U(r.a.mark((function t(){var e,i;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/activity/GetExcellentWorkList",ActivityId:this.activityId,GradeId:5}).catch((function(t){return t}));case 2:if(e=t.sent,"OK"==e.ErrorCode){t.next=5;break}return t.abrupt("return");case 5:i=e.Data.WorkList||[],this.workList=i.map((function(t){var e=t.ResourceList,i=e.find((function(t){return 4==t.ResourceType}));return{name:t.TeamName,school:t.School,url:i.ResourceContent}}));case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},z=V,F=(i("863f"),Object(p["a"])(z,G,M,!1,null,null,null)),K=F.exports,q=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"activity-expert-judge"},[t.loaded?i("div",{staticClass:"info"},[t.award?i("span",[t._v(t._s(t.award.Message))]):i("span",[t._v("暂无获奖信息")])]):t._e(),i("div",{staticClass:"expert-img"})])},J=[];function B(t,e,i,a,n,s,r){try{var o=t[s](r),c=o.value}catch(u){return void i(u)}o.done?e(c):Promise.resolve(c).then(a,n)}function H(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var s=t.apply(e,i);function r(t){B(s,a,n,r,o,"next",t)}function o(t){B(s,a,n,r,o,"throw",t)}r(void 0)}))}}var Y={name:"activity-expert-judge",props:{stage:{type:String}},data:function(){return{activityId:"",award:"",loaded:!1}},mounted:function(){this.activityId=this.$route.query.ActivityId,this.getAward()},methods:{getAward:function(){var t=H(r.a.mark((function t(){var e,i;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/activity/AwardStatus",ActivityId:this.activityId,StageId:this.stage}).catch((function(t){return t}));case 2:if(e=t.sent,this.loaded=!0,"OK"==e.ErrorCode){t.next=6;break}return t.abrupt("return");case 6:i=e.Data.AwardList,i&&i[0]&&(this.award=i[0]);case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},Q=Y,X=(i("81ef"),Object(p["a"])(Q,q,J,!1,null,null,null)),Z=X.exports;function tt(t,e,i,a,n,s,r){try{var o=t[s](r),c=o.value}catch(u){return void i(u)}o.done?e(c):Promise.resolve(c).then(a,n)}function et(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var s=t.apply(e,i);function r(t){tt(s,a,n,r,o,"next",t)}function o(t){tt(s,a,n,r,o,"throw",t)}r(void 0)}))}}var it={components:{FlowSteps:v,Prepare:S,WorkUpload:j,WorkShow:K,ExpertJude:Z},data:function(){return{activityId:1,currentStage:"",stageList:[]}},mounted:function(){this.activityId=this.$route.query.ActivityId,this.getStageList()},methods:{getStageList:function(){var t=et(r.a.mark((function t(){var e;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/activity/GetStageList",ActivityId:this.activityId}).catch((function(t){return t}));case 2:if(e=t.sent,"OK"==e.ErrorCode){t.next=5;break}return t.abrupt("return",this.$message.error(e.ErrorMsg));case 5:this.currentStage=e.Data.Current,this.stageList=e.Data.StageList||[];case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),changeStage:function(t){this.currentStage=t}}},at=it,nt=(i("0fbe"),Object(p["a"])(at,a,n,!1,null,null,null));e["default"]=nt.exports},"22ff":function(t,e,i){"use strict";var a=i("85a7"),n=i.n(a);n.a},"24a8":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"warrp"},[i("div",{staticClass:"expert-content"},[i("el-button",{staticStyle:{"margin-bottom":"10px"},attrs:{type:"primary"},on:{click:t.addClick}},[t._v("添加专家")]),i("div",{staticClass:"exper-table"},[i("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{"tooltip-effect":"dark",data:t.tableData}},[i("el-table-column",{attrs:{prop:"Username",label:"专家姓名",width:"193"}}),i("el-table-column",{attrs:{prop:"Phone",label:"联系电话",width:"193"}}),i("el-table-column",{attrs:{prop:"WorkUnit",label:"所属单位",width:"193"}}),i("el-table-column",{attrs:{prop:"CreatedAt",label:"创建时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(t.timeFormat(1e3*e.row.CreatedAt,"yyyy-MM-dd hh:mm:ss"))+"\n          ")]}}])}),i("el-table-column",{scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return t.handleDelete(e.row)}}},[t._v("删除")])]}}])})],1),i("el-pagination",{attrs:{layout:"prev, pager, next",total:t.total,"page-size":t.pagesize,"current-page":t.currentPage},on:{"current-change":t.handleCurrentChange}})],1)],1),i("el-dialog",{attrs:{title:"添加专家",visible:t.showAdd,width:"500px"},on:{"update:visible":function(e){t.showAdd=e}}},[i("el-form",{attrs:{"label-width":"80px"}},[i("el-form-item",{attrs:{label:"专家姓名"}},[i("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"支持中英文数字",maxlength:"20"},model:{value:t.form.Username,callback:function(e){t.$set(t.form,"Username",e)},expression:"form.Username"}})],1),i("el-form-item",{attrs:{label:"手机号"}},[i("el-input",{staticStyle:{width:"300px"},attrs:{maxlength:"11"},model:{value:t.form.Phone,callback:function(e){t.$set(t.form,"Phone",e)},expression:"form.Phone"}})],1),i("el-form-item",{attrs:{label:"所属单位"}},[i("el-input",{staticStyle:{width:"300px"},attrs:{maxlength:"20"},model:{value:t.form.WorkUnit,callback:function(e){t.$set(t.form,"WorkUnit",e)},expression:"form.WorkUnit"}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.showAdd=!1}}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:t.confirmBtn}},[t._v("确 定")])],1)],1)],1)},n=[],s=i("ae78"),r=i.n(s),o=/^1[23456789]\d{9}$/,c=/^[0-9A-Za-z\u4e00-\u9fa5]+$/;function u(t,e,i,a,n,s,r){try{var o=t[s](r),c=o.value}catch(u){return void i(u)}o.done?e(c):Promise.resolve(c).then(a,n)}function l(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var s=t.apply(e,i);function r(t){u(s,a,n,r,o,"next",t)}function o(t){u(s,a,n,r,o,"throw",t)}r(void 0)}))}}var d={data:function(){return{currentPage:1,pagesize:10,total:0,tableData:[],multipleSelection:[],showAdd:!1,UserId:"",day:"",form:{Username:"",Phone:"",WorkUnit:""}}},created:function(){var t=l(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.init();case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),methods:{init:function(){var t=l(r.a.mark((function t(){var e;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/activity/GetExpertList",PageSize:this.pagesize,PageNum:this.currentPage}).catch((function(t){return t}));case 2:e=t.sent,this.tableData=e.Data.ExpertInfo,this.total=e.Data.Total;case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),addClick:function(){for(var t in this.form)this.form[t]="";this.showAdd=!0},confirmBtn:function(){var t=l(r.a.mark((function t(){var e;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(c.test(this.form.Username)){t.next=2;break}return t.abrupt("return",this.$message.error("请输入正确的姓名"));case 2:if(o.test(this.form.Phone)){t.next=4;break}return t.abrupt("return",this.$message.error("请输入正确的手机号"));case 4:return t.next=6,this.axiosPost({url:"/v1/activity/AddExpert",Username:this.form.Username,Phone:this.form.Phone,WorkUnit:this.form.WorkUnit}).catch((function(t){return t}));case 6:if(e=t.sent,"OK"==e.ErrorCode){t.next=9;break}return t.abrupt("return",this.$message.error(e.ErrorMsg));case 9:this.$message.success("添加成功"),this.showAdd=!1,this.init();case 12:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),handleDelete:function(t){var e=this;this.$confirm("确定删除专家【".concat(t.Username,"】？"),"删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(l(r.a.mark((function i(){var a;return r.a.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,e.axiosGet({url:"/v1/activity/DeleteExpert",UserId:t.UserId}).catch((function(t){return t}));case 2:if(a=i.sent,"OK"==a.ErrorCode){i.next=5;break}return i.abrupt("return",e.$message.error(a.ErrorMsg));case 5:e.$message({type:"success",showClose:!0,message:"删除成功",duration:2e3}),e.init();case 7:case"end":return i.stop()}}),i)}))))},handleCurrentChange:function(t){this.currentPage=t,this.init()}}},h=d,p=(i("dd6e"),i("3a08"),i("5511")),f=Object(p["a"])(h,a,n,!1,null,"416d2a40",null);e["default"]=f.exports},"26c7":function(t,e,i){"use strict";var a=i("a5cf"),n=i.n(a);n.a},2894:function(t,e,i){},"28ce":function(t,e,i){"use strict";var a=i("0ddc"),n=i.n(a);n.a},"28ef":function(t,e,i){"use strict";var a=i("d8f4"),n=i.n(a);n.a},"28f0":function(t,e,i){"use strict";var a=i("77bb"),n=i.n(a);n.a},"2b20":function(t,e,i){"use strict";var a=i("3c7e"),n=i.n(a);n.a},"2b88":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"audit-warrp"},[i("div",[i("div",{staticClass:"audit-center"},[i("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:"待审核的活动",name:"first"}},[i("div",{staticClass:"audit-buttom"},[i("el-button",{attrs:{type:"primary",disabled:0==t.checkedList1.length},on:{click:function(e){return t.choseprofrom("",1)}}},[t._v("审核通过")]),i("el-button",{attrs:{type:"primary",disabled:0==t.checkedList1.length},on:{click:function(e){return t.choseprofrom("",0)}}},[t._v("审核不通过")])],1),t._l(t.dataList,(function(e,a){return i("div",{key:a,staticClass:"audit-checkbox"},[i("el-checkbox",{on:{change:function(i){return t.onChange1(i,e)}},model:{value:e.checked,callback:function(i){t.$set(e,"checked",i)},expression:"item.checked"}}),i("div",{staticClass:"audit-box"},[i("img",{staticClass:"audit-image",attrs:{src:e.ActivityLogo}}),i("div",{staticClass:"audit-content"},[i("div",{staticClass:"audit-content-title"},[t._v(t._s(e.ActivityName))]),i("div",{staticClass:"audit-content-word",staticStyle:{width:"756px",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"}},[t._v(t._s(e.ActivityDesc))]),e.StartTime||e.EndTime?i("div",{staticClass:"audit-content-word"},[t._v("\n                  "+t._s(e.StartTime)+" - "+t._s(e.EndTime)+"\n                ")]):t._e()]),i("div",{staticClass:"audit-info"},[i("el-button",{attrs:{type:"text"},on:{click:function(i){return t.goToActDetail(e)}}},[t._v("详情")]),i("el-button",{attrs:{type:"text"},on:{click:function(i){return t.choseprofrom(e,1)}}},[t._v("通过")]),i("el-button",{attrs:{type:"text"},on:{click:function(i){return t.choseprofrom(e,0)}}},[t._v("不通过")])],1)])],1)})),i("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.total1,"page-size":t.PageSize1,"current-page":t.currentPage1},on:{"current-change":t.handleCurrentChange}})],2),i("el-tab-pane",{attrs:{label:"已审核的活动",name:"second"}},[i("div",{staticClass:"audit-buttom"},[i("el-button",{attrs:{type:"primary",disabled:0==t.checkedList2.length},on:{click:function(e){return t.offline()}}},[t._v("活动下线")])],1),t._l(t.dataList,(function(e,a){return i("div",{key:a,staticClass:"audit-checkbox"},[i("el-checkbox",{on:{change:function(i){return t.onChange2(i,e)}},model:{value:e.checked,callback:function(i){t.$set(e,"checked",i)},expression:"item.checked"}}),i("div",{staticClass:"audit-box"},[i("img",{staticClass:"audit-image",attrs:{src:e.ActivityLogo}}),i("div",{staticClass:"audit-content"},[i("div",{staticClass:"audit-content-title"},[t._v(t._s(e.ActivityName))]),i("div",{staticClass:"audit-content-word",staticStyle:{width:"756px",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"}},[t._v(t._s(e.ActivityDesc))]),e.StartTime||e.EndTime?i("div",{staticClass:"audit-content-word"},[t._v("\n                  "+t._s(e.StartTime)+"-"+t._s(e.EndTime)+"\n                ")]):t._e()]),i("div",{staticClass:"audit-info"},[i("el-button",{attrs:{type:"text"},on:{click:function(i){return t.goToActDetail(e)}}},[t._v("详情")]),i("el-button",{attrs:{type:"text"},on:{click:function(i){return t.offline(e.ActivityId)}}},[t._v("下线")])],1)])],1)})),i("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.total2,"page-size":t.PageSize2,"current-page":t.currentPage2},on:{"current-change":t.handleCurrentChange}})],2),i("el-tab-pane",{attrs:{label:"审核未通过的活动",name:"third"}},[i("div",{staticClass:"audit-buttom"},[i("el-button",{attrs:{type:"primary",disabled:0==t.checkedList3.length},on:{click:function(e){return t.passClick()}}},[t._v("审核通过")])],1),t._l(t.dataList,(function(e,a){return i("div",{key:a,staticClass:"audit-checkbox"},[i("el-checkbox",{on:{change:function(i){return t.onChange3(i,e)}},model:{value:e.checked,callback:function(i){t.$set(e,"checked",i)},expression:"item.checked"}}),i("div",{staticClass:"audit-box"},[i("img",{staticClass:"audit-image",attrs:{src:e.ActivityLogo}}),i("div",{staticClass:"audit-content"},[i("div",{staticClass:"audit-content-title"},[t._v(t._s(e.ActivityName))]),i("div",{staticClass:"audit-content-word",staticStyle:{width:"756px",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"}},[t._v(t._s(e.ActivityDesc))]),e.StartTime||e.EndTime?i("div",{staticClass:"audit-content-word"},[t._v("\n                  "+t._s(e.StartTime)+"-"+t._s(e.EndTime)+"\n                ")]):t._e()]),i("div",{staticClass:"audit-info"},[i("el-button",{attrs:{type:"text"},on:{click:function(i){return t.goToActDetail(e)}}},[t._v("详情")]),i("el-button",{attrs:{type:"text"},on:{click:function(i){return t.passClick(e.ActivityId)}}},[t._v("通过")])],1)])],1)})),i("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.total3,"page-size":t.PageSize3,"current-page":t.currentPage3},on:{"current-change":t.handleCurrentChange}})],2)],1)],1)]),i("el-dialog",{attrs:{title:"审核不通过",visible:t.noPassDialog,width:"30%"},on:{"update:visible":function(e){t.noPassDialog=e}}},[i("div",{staticClass:"dialog-title"},[t._v("请输入审核不通过的原因")]),i("el-input",{staticStyle:{width:"348px",height:"71px"},attrs:{type:"textarea"},model:{value:t.from.Message,callback:function(e){t.$set(t.from,"Message",e)},expression:"from.Message"}}),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.noPassDialog=!1}}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:t.confirmBtn}},[t._v("确 定")])],1)],1)],1)},n=[],s=i("ae78"),r=i.n(s);function o(t,e,i,a,n,s,r){try{var o=t[s](r),c=o.value}catch(u){return void i(u)}o.done?e(c):Promise.resolve(c).then(a,n)}function c(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var s=t.apply(e,i);function r(t){o(s,a,n,r,c,"next",t)}function c(t){o(s,a,n,r,c,"throw",t)}r(void 0)}))}}var u={data:function(){return{isShow:!0,onShow:!0,showMask:!1,Status:"ACTIVITY_WAITING_AUDIT",ActivityId:[],activeName:"first",dataList:[],from:{Status:"ACTIVITY_AUDIT_REJECT",Message:""},noPassDialog:!1,checkedList1:[],checkedList2:[],checkedList3:[],actionIdList:[],total1:0,total2:0,total3:0,PageSize1:10,PageSize2:10,PageSize3:10,currentPage1:1,currentPage2:1,currentPage3:1}},created:function(){this.init()},methods:{init:function(){var t=c(r.a.mark((function t(){var e,i,a,n,s=this;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.checkedList1=[],this.checkedList2=[],this.checkedList3=[],"ACTIVITY_WAITING_AUDIT"==this.Status?(e=this.PageSize1,i=this.currentPage1):"ACTIVITY_AUDIT_ACCEPT"==this.Status?(e=this.PageSize2,i=this.currentPage2):"ACTIVITY_AUDIT_REJECT"==this.Status&&(e=this.PageSize3,i=this.currentPage3),t.next=6,this.axiosGet({url:"/v1/activity/GetMyAuditActivityList",PageNum:i,PageSize:e,Status:this.Status}).catch((function(t){return t}));case 6:if(a=t.sent,"OK"==a.ErrorCode){t.next=9;break}return t.abrupt("return",this.$message.error(a.ErrorMsg));case 9:n=a.Data.ActivityList,n.forEach((function(t){t.StartTime=s.timeFormat(1e3*t.StartTime,"yyyy-MM-dd"),t.EndTime=s.timeFormat(1e3*t.EndTime,"yyyy-MM-dd"),t.checked=!1})),this.dataList=a.Data.ActivityList,this.total1=this.total2=this.total3=a.Data.Total;case 13:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),handleCurrentChange:function(t){this.currentPage1=this.currentPage2=this.currentPage3=t,this.init()},offline:function(){var t=c(r.a.mark((function t(e){var i;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosPost({url:"/v1/activity/AuditActivity",ActivityId:e?[e]:this.checkedList2,Status:"ACTIVITY_FORBIDDEN",Message:"活动下线"}).catch((function(t){return t}));case 2:if(i=t.sent,"OK"==i.ErrorCode){t.next=5;break}return t.abrupt("return",this.$message.error(i.ErrorMsg));case 5:this.$message.success("下线成功"),this.init();case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),passClick:function(){var t=c(r.a.mark((function t(e){var i;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosPost({url:"/v1/activity/AuditActivity",ActivityId:e?[e]:this.checkedList3,Status:"ACTIVITY_AUDIT_ACCEPT",Message:"通过"}).catch((function(t){return t}));case 2:if(i=t.sent,"OK"==i.ErrorCode){t.next=5;break}return t.abrupt("return",this.$message.error(i.ErrorMsg));case 5:this.$message.success("审核通过"),this.init();case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),handleClick:function(t,e){this.currentPage1=this.currentPage2=this.currentPage3=1,0==t.index?(this.Status="ACTIVITY_WAITING_AUDIT",this.init()):1==t.index?(this.Status="ACTIVITY_AUDIT_ACCEPT",this.init()):2==t.index&&(this.Status="ACTIVITY_AUDIT_REJECT",this.init())},onChange1:function(t,e){if(t)this.checkedList1.push(e.ActivityId);else{var i=this.checkedList1.indexOf(e.ActivityId);this.checkedList1.splice(i,1)}},onChange2:function(t,e){if(t)this.checkedList2.push(e.ActivityId);else{var i=this.checkedList1.indexOf(e.ActivityId);this.checkedList2.splice(i,1)}},onChange3:function(t,e){if(t)this.checkedList3.push(e.ActivityId);else{var i=this.checkedList3.indexOf(e.ActivityId);this.checkedList3.splice(i,1)}},confirmBtn:function(){var t=c(r.a.mark((function t(){var e;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosPost({url:"/v1/activity/AuditActivity",ActivityId:this.actionIdList,Status:"ACTIVITY_AUDIT_REJECT",Message:this.from.Message}).catch((function(t){return t}));case 2:if(e=t.sent,"OK"==e.ErrorCode){t.next=5;break}return t.abrupt("return",this.$messsage.error(e.ErrorMsg));case 5:this.noPassDialog=!1,this.$message.success("提交成功"),this.init();case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),choseprofrom:function(){var t=c(r.a.mark((function t(e,i){var a;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!=i){t.next=5;break}this.noPassDialog=!0,this.actionIdList=e?[e.ActivityId]:this.checkedList1,t.next=12;break;case 5:return t.next=7,this.axiosPost({url:"/v1/activity/AuditActivity",ActivityId:e?[e.ActivityId]:this.checkedList1,Status:"ACTIVITY_AUDIT_ACCEPT",Message:"通过"}).catch((function(t){return t}));case 7:if(a=t.sent,"OK"==a.ErrorCode){t.next=10;break}return t.abrupt("return",this.$message.error(a.ErrorMsg));case 10:this.$message.success("审核通过"),this.init();case 12:case"end":return t.stop()}}),t,this)})));function e(e,i){return t.apply(this,arguments)}return e}(),goToActDetail:function(t){this.$router.push({path:"/auditActivity/auditDetail",query:{id:t.ActivityId,name:t.ActivityName}})}}},l=u,d=(i("6cf9"),i("e59f"),i("5511")),h=Object(d["a"])(l,a,n,!1,null,null,null);e["default"]=h.exports},"2c4c":function(t,e,i){},"2e5e":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"warrp"},[i("div",{staticClass:"audit-center"},[i("div",{staticClass:"audit-lable"},[i("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:"待评审的作品",name:"first"}},[i("div",{staticClass:"audit-table"},[i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[i("el-table-column",{attrs:{prop:"Title",label:"作品名称"}}),i("el-table-column",{attrs:{prop:"ActivityName",label:"活动名称"}}),i("el-table-column",{attrs:{prop:"Category",label:"类别"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                  "+t._s(t.typeMap[e.row.Category])+"\n                ")]}}])}),i("el-table-column",{attrs:{prop:"CreatedTime",label:"提交时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                  "+t._s(t.timeFormat(new Date(1e3*e.row.CreatedTime),"yyyy-MM-dd hh:mm:ss"))+"\n                ")]}}])}),i("el-table-column",{scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return t.goToWorkDetail(e.row,0)}}},[t._v("评审")])]}}])})],1)],1)]),i("el-tab-pane",{attrs:{label:"已评审的作品",name:"second"}},[i("div",{staticClass:"audit-table"},[i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[i("el-table-column",{attrs:{prop:"Title",label:"作品名称"}}),i("el-table-column",{attrs:{prop:"ActivityName",label:"活动名称"}}),i("el-table-column",{attrs:{prop:"Category",label:"类别"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                  "+t._s(t.typeMap[e.row.Category])+"\n                ")]}}])}),i("el-table-column",{attrs:{prop:"CreatedTime",label:"提交时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                  "+t._s(t.timeFormat(new Date(1e3*e.row.CreatedTime),"yyyy-MM-dd hh:mm:ss"))+"\n                ")]}}])}),i("el-table-column",{scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return t.goToWorkDetail(e.row,1)}}},[t._v("查看")])]}}])})],1)],1)]),i("el-pagination",{staticClass:"paging",attrs:{background:"","current-page":t.currentPage,"page-size":t.pageSize,layout:"prev, pager, next",total:t.total},on:{"current-change":t.handleCurrentPage}})],1)],1)])])},n=[],s=i("ae78"),r=i.n(s);function o(t,e,i,a,n,s,r){try{var o=t[s](r),c=o.value}catch(u){return void i(u)}o.done?e(c):Promise.resolve(c).then(a,n)}function c(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var s=t.apply(e,i);function r(t){o(s,a,n,r,c,"next",t)}function c(t){o(s,a,n,r,c,"throw",t)}r(void 0)}))}}var u={data:function(){return{select:!1,selector:!0,activeName:"first",currentPage:1,pageSize:10,total:0,scoreStatus:0,divisionId:1,tableData:[],workId:"",typeMap:{}}},mounted:function(){this.scoreStatus=location.hash.substr(1)||"0",this.activeName="0"==this.scoreStatus?"first":"second",this.getActivityType(),this.getJudgeWorkList()},methods:{getJudgeWorkList:function(){var t=c(r.a.mark((function t(){var e;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.tableData=[],t.next=3,this.axiosGet({url:"/v1/activity/GetWorkListByJudge",ScoreStatus:this.scoreStatus,PageNum:this.currentPage,PageSize:this.pageSize}).catch((function(t){return t}));case 3:if(e=t.sent,"OK"==e.ErrorCode){t.next=6;break}return t.abrupt("return",this.$message.error(e.ErrorMsg));case 6:this.tableData=e.Data.WorkList||[],this.total=e.Data.Total;case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),handleClick:function(){var t=c(r.a.mark((function t(e){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.currentPage=0,"first"==e.name?this.scoreStatus=0:"second"==e.name&&(this.scoreStatus=1),location.hash=this.scoreStatus,this.getJudgeWorkList();case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),handleCurrentPage:function(t){this.currentPage=t,this.getJudgeWorkList()},goToWorkDetail:function(t,e){this.$router.push({path:"/expertReview/workDetail",query:{WorkId:t.WorkId,WorkName:t.Title,status:e,DivisionId:t.DivisionId}})},getActivityType:function(){var t=c(r.a.mark((function t(){var e,i,a=this;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/activity/GetActivityType"}).catch((function(t){return t}));case 2:if(e=t.sent,"OK"==e.ErrorCode){t.next=5;break}return t.abrupt("return");case 5:i=e.Data.ActivityTypeList||[],i.forEach((function(t){a.typeMap[t.Id]=t.Name}));case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},l=u,d=(i("4795"),i("a65a"),i("5511")),h=Object(d["a"])(l,a,n,!1,null,null,null);e["default"]=h.exports},"2ee0":function(t,e,i){"use strict";var a=i("51ed"),n=i.n(a);n.a},3699:function(t,e,i){"use strict";var a=i("5e9f"),n=i.n(a);n.a},"38fd":function(t,e,i){"use strict";var a=i("fbbb"),n=i.n(a);n.a},"3a08":function(t,e,i){"use strict";var a=i("e801"),n=i.n(a);n.a},"3c56":function(t,e,i){},"3c7e":function(t,e,i){},"3dd2":function(t,e,i){"use strict";var a=i("c423"),n=i.n(a);n.a},"3f49":function(t,e,i){t.exports=i.p+"img/video-play.a8611dfd.svg"},"422b":function(t,e,i){},4360:function(t,e,i){"use strict";var a=i("0261"),n=i("08c1"),s=i("0210"),r={state:{user:""},mutations:{SET_USER:function(t,e){t.user=e}},actions:{INIT_USER:function(t){var e=t.commit;return Object(s["axiosGet"])({url:"/v1/activity/GetMySubRole"},!1).then((function(t){"OK"==t.ErrorCode?e("SET_USER",t.Data):Object(s["setCookie"])("Authorization","")})).catch((function(t){return t}))}}},o={state:{show:!1},mutations:{SET_SHOW:function(t,e){t.show=e}},actions:{INIT_SHOW:function(t,e){var i=t.commit;i("SET_SHOW",e)}}};a["default"].use(n["a"]);e["a"]=new n["a"].Store({modules:{account:r,login:o}})},"43dd":function(t,e,i){},4463:function(t,e,i){},"44cb":function(t,e,i){t.exports=i.p+"img/flower2.02195a1a.svg"},"46de":function(t,e,i){"use strict";var a=i("6629"),n=i.n(a);n.a},4740:function(t,e,i){},4795:function(t,e,i){"use strict";var a=i("7d0a"),n=i.n(a);n.a},"49da":function(t,e,i){t.exports=i.p+"img/video-demo.8c33d79a.png"},"49f6":function(t,e,i){"use strict";var a=i("a7d0"),n=i.n(a);n.a},"50d7":function(t,e,i){},5127:function(t,e,i){"use strict";var a=i("50d7"),n=i.n(a);n.a},"51ed":function(t,e,i){},5616:function(t,e,i){},"56d7":function(t,e,i){"use strict";i.r(e);var a=i("0261"),n=i("2ca7"),s=i.n(n),r=i("9bfb"),o=(i("ba64"),i("46c6"),i("cf8e")),c=i("ab01"),u=i("769a"),l=i("d8f5"),d=i("9b12"),h=i("c5b3"),p=i("063c"),f=i("20e8"),v=i("7dd5"),m=i("fb4e"),g=i("2e5e"),y=i("ccab"),w=i("24a8"),b=i("2b88"),x=i("7938"),k=i("96d7"),C=i("16e7"),_=i("fda9"),S=i("5c8f"),T=[{path:"/",components:o,children:[{path:"/",components:S},{path:"/myActivity",components:h},{path:"/myActivityDetail",components:p},{path:"/myActivity/index",components:k},{path:"/myActivity/workAuditDetail",components:_},{path:"/activityCenter",components:c},{path:"/publishManage",components:u},{path:"/excellence",components:l},{path:"/userCenter",components:d},{path:"/activity/process",components:f},{path:"/excellentWork/index",components:v},{path:"/excellentWork/excellentWorkDetail",components:m},{path:"/expertReview",components:g},{path:"/expertReview/workDetail",components:y},{path:"/expertStore",components:w},{path:"/auditActivity",components:b},{path:"/auditActivity/auditDetail",components:x},{path:"/msgcenter",components:C}]},{path:"*",redirect:"/"}],A=T,I=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("router-view")},L=[],E=i("0b35"),D={name:"uni-app",components:{tHeader:E["a"]}},O=D,P=(i("7c55"),i("5511")),$=Object(P["a"])(O,I,L,!1,null,null,null),N=$.exports,j=i("4360"),G=i("0210");for(var M in a["default"].config.productiontip=!0,a["default"].use(r["a"]),a["default"].use(s.a),G)a["default"].prototype[M]=G[M];var W=new r["a"]({routes:A,mode:"history"});window.app=new a["default"]({el:"#app",store:j["a"],render:function(t){return t(N)},router:W})},"584a":function(t,e,i){"use strict";var a=i("d623"),n=i.n(a);n.a},"5c0a":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.toPage?t._e():i("div",{staticClass:"lable"},[i("div",{staticClass:"lable-title"},[t._v("活动对象:")]),i("div",{staticClass:"lable-aside"},t._l(t.activityObjectList,(function(e,a){return i("div",{key:a,staticClass:"lable-self",class:{"type-active":t.activityObjectIndex==a},on:{click:function(i){return t.onactivityObjectList(e.Id,a)}}},[t._v(t._s(e.Name))])})),0)]),i("div",{staticClass:"lable"},[i("div",{staticClass:"lable-title"},[t._v("学段:")]),i("div",{staticClass:"lable-aside"},t._l(t.gradeList,(function(e,a){return i("div",{key:a,staticClass:"lable-self",class:{"type-active":t.gradeIndex==a},on:{click:function(i){return t.ongradeList(e.Id,a)}}},[t._v(t._s(e.Name))])})),0)]),t.subjectList?i("div",{staticClass:"lable"},[i("div",{staticClass:"lable-title"},[t._v("科目:")]),i("div",{staticClass:"lable-aside"},t._l(t.subjectList,(function(e,a){return i("div",{key:a,staticClass:"lable-self",class:{"type-active":t.subjectIndex==a},on:{click:function(i){return t.onsubjectList(e.Id,a)}}},[t._v(t._s(e.Name))])})),0)]):t._e(),t.hideRegion?t._e():i("div",{staticClass:"lable"},[i("div",{staticClass:"lable-title"},[t._v("区域:")]),i("div",{staticClass:"lable-aside"},t._l(t.regionList,(function(e,a){return i("div",{key:a,staticClass:"lable-self",class:{"type-active":t.regionIndex==a},on:{click:function(i){return t.onregionList(e.DivisionId,a)}}},[t._v(t._s(e.Name))])})),0)]),!t.hideAward&&t.toPage&&"elcellent"==t.toPage?i("div",{staticClass:"lable"},[i("div",{staticClass:"lable-title"},[t._v("奖项:")]),i("div",{staticClass:"lable-aside"},t._l(t.awardList,(function(e,a){return i("div",{key:a,staticClass:"lable-self",class:{"type-active":t.awardIndex==a},on:{click:function(i){return t.onawardList(e.Id,a)}}},[t._v(t._s(e.Name))])})),0)]):t._e()])},n=[],s={props:{gradeList:{type:Array},subjectList:{type:Array},regionList:{type:Array},toPage:String,hideRegion:{type:Boolean,default:!1},hideAward:{type:Boolean,default:!1}},data:function(){return{activityObjectIndex:0,awardIndex:0,gradeIndex:0,subjectIndex:0,regionIndex:0,activityObject:0,award:"",gradeGroup:"",subject:"",region:"",activityObjectList:[{Id:0,Name:"全部"},{Id:12,Name:"老师"},{Id:11,Name:"学生"}],awardList:[{Id:0,Name:"全部"},{Id:1,Name:"一等奖"},{Id:2,Name:"二等奖"},{Id:3,Name:"三等奖"},{Id:4,Name:"优秀奖"}]}},methods:{onactivityObjectList:function(t,e){this.activityObjectIndex=e,this.activityObject=this.activityObjectList[e].Id,this.$emit("activityObject",this.activityObject)},onawardList:function(t,e){this.awardIndex=e,this.award=this.awardList[e].Id,this.$emit("award",this.award)},ongradeList:function(t,e){this.gradeIndex=e,this.gradeGroup=this.gradeList[e].Id,this.$emit("gradeGroup",this.gradeGroup)},onsubjectList:function(t,e){this.subjectIndex=e,this.subject=this.subjectList[e].Id,this.$emit("subject",this.subject)},onregionList:function(t,e){this.regionIndex=e,this.region=this.regionList[e].DivisionId,this.$emit("region",this.region)}}},r=s,o=(i("80a7"),i("5511")),c=Object(o["a"])(r,a,n,!1,null,null,null);e["a"]=c.exports},"5c8f":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div")},n=[],s={name:"switch-page",computed:{user:function(){return this.$store.state.account.user}},watch:{user:function(t){t.IsPlatformAdmin?this.$router.push("/auditActivity"):this.$router.push("/activityCenter")}}},r=s,o=i("5511"),c=Object(o["a"])(r,a,n,!1,null,null,null);e["default"]=c.exports},"5e9f":function(t,e,i){},6076:function(t,e,i){"use strict";var a=i("43dd"),n=i.n(a);n.a},"622c":function(t,e,i){"use strict";var a=i("8ab8"),n=i.n(a);n.a},6629:function(t,e,i){},"66ad":function(t,e,i){"use strict";var a=i("ab05"),n=i.n(a);n.a},"679f":function(t,e,i){"use strict";var a=i("5616"),n=i.n(a);n.a},"68b4":function(t,e,i){"use strict";var a=i("96d9"),n=i.n(a);n.a},"6b57":function(t,e,i){"use strict";var a=i("72a0"),n=i.n(a);n.a},"6cca":function(t,e,i){"use strict";var a=i("f12a"),n=i.n(a);n.a},"6ccd":function(t,e,i){t.exports=i.p+"img/pen2.e742eb05.svg"},"6cf9":function(t,e,i){"use strict";var a=i("e265"),n=i.n(a);n.a},"70e7":function(t,e,i){"use strict";var a=i("8de0"),n=i.n(a);n.a},"72a0":function(t,e,i){},7342:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"activity-list"},t._l(t.activityList,(function(e,n){return a("div",{key:n,staticClass:"activity-self",on:{click:function(i){return t.onActivityDetail(e)}}},[e.ActivityLogo?a("div",{staticClass:"activity-img"},[a("img",{attrs:{src:e.ActivityLogo,alt:""}})]):t._e(),e.ResourceList?a("div",{staticClass:"activity-img"},[a("video",{attrs:{id:n,src:e.ResourceList[0].ResourceContent,loop:"loop","x-webkit-airplay":"true","webkit-playsinline":"true"},on:{click:function(i){return i.stopPropagation(),t.playVideo(e)}}}),a("div",{directives:[{name:"show",rawName:"v-show",value:e.tag,expression:"item.tag"}],staticClass:"shade",on:{click:function(i){return i.stopPropagation(),t.onShade(e,n)}}},[a("img",{attrs:{src:i("a987"),alt:""}})])]):t._e(),a("div",{staticClass:"activity-tex"},[a("div",{staticClass:"avtive-title"},[a("span",{staticStyle:{"margin-right":"10px"}},[t._v(t._s(e.ActivityName))]),e.Status?["ACTIVITY_FINISHED"==e.Status?a("el-tag",{attrs:{type:"danger",size:"small"}},[t._v("已结束")]):a("el-tag",{attrs:{type:"success",size:"small"}},[t._v("进行中")])]:t._e()],2),e.TeamName?a("div",{staticClass:"avtive-title"},[t._v(t._s(e.TeamName))]):t._e(),e.School?a("div",{staticClass:"activity-time"},[t._v(t._s(e.School))]):t._e(),e.StartTime||e.EndTime?a("div",{staticClass:"activity-time"},[t._v(t._s(e.StartTime)+"至"+t._s(e.EndTime))]):t._e(),e.Sponsor?a("div",{staticClass:"activity-time"},[t._v("主办方："+t._s(e.Sponsor))]):t._e()])])})),0)},n=[],s=i("ae78"),r=i.n(s);function o(t,e,i,a,n,s,r){try{var o=t[s](r),c=o.value}catch(u){return void i(u)}o.done?e(c):Promise.resolve(c).then(a,n)}function c(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var s=t.apply(e,i);function r(t){o(s,a,n,r,c,"next",t)}function c(t){o(s,a,n,r,c,"throw",t)}r(void 0)}))}}var u={props:{activityList:{type:Array,default:function(){}},goToDetail:String},data:function(){return{isShadeShow:!0,Current:"",activityStageList:[],newList:[],day:""}},methods:{onActivityDetail:function(){var t=c(r.a.mark((function t(e){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:"excellentWork"==this.goToDetail?this.$router.push({path:"/excellentWork/index",query:{id:e.ActivityId,name:e.ActivityName}}):"activityDetail"==this.goToDetail?this.$router.push({path:"/activity/process",query:{ActivityId:e.ActivityId}}):"excellentWorkDetail"==this.goToDetail&&this.$router.push({path:"/excellentWork/excellentWorkDetail",query:{WorkId:e.WorkId,WorkName:e.Title}});case 1:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),playVideo:function(t){event.target.paused?event.target.play():(event.target.pause(),t.tag=!0)},onShade:function(t,e){var i=document.getElementById(e);t.tag=!1,i.paused?(t.tag=!1,i.play()):i.pause()}}},l=u,d=(i("3699"),i("5511")),h=Object(d["a"])(l,a,n,!1,null,"f9ed30ba",null);e["a"]=h.exports},"74e4":function(t,e,i){"use strict";var a=i("2c4c"),n=i.n(a);n.a},"769a":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"publish-manage"},[a("div",{staticClass:"action-bar"},[a("div",{staticClass:"icon",on:{click:function(e){return t.$router.back(-1)}}},[a("img",{staticClass:"el-icon-back",attrs:{src:i("ad0f")}})]),a("div",{staticClass:"btn"},[a("el-button",{attrs:{type:"primary",disabled:t.lockAction},on:{click:t.save}},[t._v("保存")]),a("el-button",{attrs:{disabled:t.lockAction},on:{click:t.preview}},[t._v("预览")])],1)]),a("div",{staticClass:"manage-content"},[a("div",{staticClass:"content-component"},[t._m(0),a("div",{staticClass:"component-list"},t._l(t.componentList,(function(e,i){return a("activity-component-list",{key:i,attrs:{type:e.type,name:e.name,text:e.text},nativeOn:{click:function(i){return t.addComponent(e)}}})})),1)]),a("div",{staticClass:"content-show"},[a("div",{staticClass:"activity-edit"},[0==t.selectedComponents.length?a("div",{staticStyle:{"text-align":"center"}},[t._v("请点击左侧组件进行添加")]):t._l(t.selectedComponents,(function(e,n){return a("component-item",{key:n,class:n==t.selectedIndex?"item-active":"",attrs:{type:e.type,name:e.name,text:e.text,url:e.url||"",styleType:e.styleType},nativeOn:{click:function(i){return t.editStyle(n,e)}}},[n==t.selectedIndex?a("div",{staticClass:"action-icon",attrs:{slot:"action"},slot:"action"},[a("img",{staticClass:"action-up",attrs:{src:i("e3ba")},on:{click:function(e){return e.stopPropagation(),t.moveUp(e)}}}),a("img",{staticClass:"action-down",attrs:{src:i("d47b")},on:{click:function(e){return e.stopPropagation(),t.moveDown(e)}}}),a("img",{staticClass:"action-delete",attrs:{src:i("9dc9")},on:{click:function(e){return e.stopPropagation(),t.deleteItem(e)}}})]):t._e()])}))],2)]),a("div",{staticClass:"content-style"},[a("div",{staticClass:"title"},[-1==t.fileType.indexOf(t.curEditComponent.type)?a("span",[t._v("样式选择")]):"picture"==t.curEditComponent.type?a("span",[t._v("图片源")]):"video"==t.curEditComponent.type?a("span",[t._v("视频源")]):"audio"==t.curEditComponent.type?a("span",[t._v("音频源")]):t._e()]),t.curEditComponent.show?a("style-edit",{ref:"styleEdit",attrs:{type:t.curEditComponent.type,name:t.curEditComponent.name,styleType:t.curEditComponent.styleType,text:t.curEditComponent.text,url:t.curEditComponent.url},on:{changeTypeText:t.changeTypeText,addFile:t.addFileComponent,uploading:t.changeStatus}}):t._e()],1)]),a("el-dialog",{attrs:{title:"预览",visible:t.dialog.preview.show,width:"350px"},on:{"update:visible":function(e){return t.$set(t.dialog.preview,"show",e)}}},[a("div",{staticClass:"preview-box"},[a("vue-qr",{attrs:{size:200,dotScale:1,text:t.previewUrl}}),a("div",[t._v("预览二维码仅限于查看编辑效果，短期内会失效。")])],1)])],1)},n=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"title"},[i("span",[t._v("组件")])])}],s=i("ae78"),r=i.n(s),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"activity-component"},[a("el-card",{staticClass:"activity-component-card"},[a("div",{staticClass:"activity-component-content"},["picture"==t.type?a("div",{staticClass:"component-video"},[a("img",{staticClass:"video-img",attrs:{src:i("49da")}})]):"video"==t.type?a("div",{staticClass:"component-video"},[a("img",{staticClass:"video-img",attrs:{src:i("49da")}}),a("img",{staticClass:"play-img",attrs:{src:i("3f49")}})]):"audio"==t.type?a("div",{staticClass:"component-audio"},[a("div",{staticClass:"time-left"},[t._v("00:20")]),a("div",{staticClass:"timeline"},[a("div",{staticClass:"time-use"})]),a("div",{staticClass:"time-total"},[t._v("02:20")])]):a("component-item",{attrs:{type:t.type,name:t.name,text:t.text,styleType:t.styleType}})],1),a("div",{staticClass:"divider"}),a("div",{staticClass:"type-name"},[t._v(t._s(t.name))])])],1)},c=[],u=i("b6cc"),l={props:{type:{type:String,required:!0},name:{type:String,required:!0},text:{type:String}},components:{ComponentItem:u["a"]},data:function(){return{videoUrl:"https://courseware-1259194201.cos.ap-guangzhou.myqcloud.com/1113/4/1566364986-7547264871797397412",audioUrl:"https://saas-develop-1255701415.cos.ap-guangzhou.myqcloud.com/gouzhong.mp3",styleType:2}}},d=l,h=(i("9bc0"),i("5511")),p=Object(h["a"])(d,o,c,!1,null,null,null),f=p.exports,v=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"component-style-edit"},[t.showInputList.indexOf(t.type)>-1?i("div",[i("div",{staticClass:"edit-title"},[t._v("文本内容编辑")]),i("el-input",{staticClass:"text-input",attrs:{type:"textarea",placeholder:"内容编辑"},model:{value:t.myText,callback:function(e){t.myText=e},expression:"myText"}}),i("div",{staticClass:"edit-title"},[t._v("样式风格选择")]),t._l(t.styleTypeList,(function(e){return i("el-card",{key:e,staticClass:"card-item"},[i("component-item",{attrs:{"style-type":e,type:t.type,name:t.name,text:t.myText},nativeOn:{click:function(i){return t.selectStyle(e)}}}),t.selectedStyleType==e?i("i",{staticClass:"select el-icon-circle-check"}):t._e()],1)}))],2):i("div",{staticClass:"upload-action"},["picture"==t.type?i("div",[i("el-button",{on:{click:t.uploadFile}},[t._v(t._s(t.myUrl?"更换图片":"上传图片"))]),i("span",{staticClass:"tip"},[t._v("支持jpg、jpeg、png格式，不超过2M")])],1):t._e(),"video"==t.type?i("div",[i("el-button",{on:{click:t.uploadFile}},[t._v(t._s(t.myUrl?"更换视频":"上传视频"))]),i("span",{staticClass:"tip"},[t._v("支持mp4格式")])],1):t._e(),"audio"==t.type?i("div",[i("el-button",{on:{click:t.uploadFile}},[t._v(t._s(t.myUrl?"更换音频":"上传音频"))]),i("span",{staticClass:"tip"},[t._v("支持mp3格式")])],1):t._e(),t.myUrl?i("div",{staticClass:"file-list"},[t._v("\n      "+t._s(t.myText)+"\n    ")]):t._e(),"audio"==t.type?i("div",[i("div",{staticClass:"edit-title",staticStyle:{"margin-top":"20px"}},[t._v("样式风格选择")]),t._l(t.styleTypeList,(function(e){return i("el-card",{key:e,staticClass:"card-item"},[i("component-item",{attrs:{"style-type":e,type:t.type,name:t.name,text:t.myText,static:!0},nativeOn:{click:function(i){return t.selectStyle(e)}}}),t.selectedStyleType==e?i("i",{staticClass:"select el-icon-circle-check"}):t._e()],1)}))],2):t._e()]),i("cos",{ref:"cos",attrs:{"valid-list":t.validList,limit:t.fileLimit},on:{success:t.uploadSuccess,start:t.uploadStart}})],1)},m=[],g=i("af32"),y={components:{Cos:g["a"],ComponentItem:u["a"]},props:{type:{type:String,required:!0},name:{type:String,required:!0},styleType:{type:Number,default:2},text:{type:String,default:""},url:{type:String}},data:function(){return{myText:"",selectedStyleType:"",myUrl:"",styleTypeList:[1,2,3],maxLength:30,showInputList:["title","secTitle","content","button"],validList:["mp4"],fileLimit:200}},watch:{myText:function(t){this.$emit("changeTypeText",{type:this.selectedStyleType,url:this.myUrl,text:t})},text:function(t){this.myText=t},url:function(t){this.myUrl=t},type:function(t){this.maxLength="content"==t?600:10,this.styleTypeList="title"==t?[1,2,3,4]:[1,2,3],this.setFileType(t)}},mounted:function(){this.myText=this.text,this.myUrl=this.url,this.selectedStyleType=this.styleType,"title"==this.type?this.styleTypeList=[1,2,3,4]:this.styleTypeList=[1,2,3],this.setFileType(this.type)},methods:{selectStyle:function(t,e,i){this.selectedStyleType=t,"undefined"!=typeof e&&(this.myText=e),"undefined"!=typeof i&&(this.myUrl=i),this.$emit("changeTypeText",{type:this.selectedStyleType,text:this.myText,url:this.myUrl})},uploadSuccess:function(t){var e="https://"+t.Location;this.myUrl=e,this.myText=t.filename,this.$emit("addFile",{url:e,name:this.name,filename:t.filename,styleType:this.selectedStyleType,type:this.type})},clearUrlAndText:function(){this.myText="",this.myUrl=""},setFileType:function(t){"picture"==t?(this.validList=["png","jpg","jpeg"],this.fileLimit=2):"video"==t?(this.validList=["mp4"],this.fileLimit=200):"audio"==t&&(this.validList=["mp3"],this.fileLimit=100)},uploadStart:function(){this.$emit("uploading",!0)},uploadFile:function(){this.$refs.cos.$refs.fileEle.dispatchEvent(new MouseEvent("click"))}}},w=y,b=(i("679f"),Object(h["a"])(w,v,m,!1,null,null,null)),x=b.exports,k=i("0210"),C=i("4579"),_=i.n(C);function S(t,e,i,a,n,s,r){try{var o=t[s](r),c=o.value}catch(u){return void i(u)}o.done?e(c):Promise.resolve(c).then(a,n)}function T(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var s=t.apply(e,i);function r(t){S(s,a,n,r,o,"next",t)}function o(t){S(s,a,n,r,o,"throw",t)}r(void 0)}))}}var A={name:"activity-center",components:{ActivityComponentList:f,ComponentItem:u["a"],StyleEdit:x,VueQr:_.a},data:function(){return{msg:"活动发布与管理",componentList:[{type:"title",name:"主标题",text:"这是一个标题"},{type:"content",name:"内容",text:"这是内容这是内容这是内容这是内容这是内容这是内容这是内容这是内容这是内容这是内容这是内容这是"},{type:"secTitle",name:"段落标题",text:"赛事流程安排"},{type:"video",name:"视频",text:""},{type:"audio",name:"音频",text:""},{type:"picture",name:"图片",text:""},{type:"button",name:"按钮",text:"报名入口"}],videoUrl:"https://courseware-1259194201.cos.ap-guangzhou.myqcloud.com/1113/4/1566364986-7547264871797397412",audioUrl:"https://saas-develop-1255701415.cos.ap-guangzhou.myqcloud.com/gouzhong.mp3",styleType:2,selectedComponents:[],curEditComponent:{index:0,show:!1,name:"",styleType:"",text:"",type:"",url:""},selectedIndex:0,fileType:["picture","video","audio"],dialog:{preview:{show:!1},publish:{show:!1}},previewUrl:"",ActivityId:"",previewPageId:"",uploading:!1}},computed:{lockAction:function(){return 0==this.selectedComponents.length}},mounted:function(){this.ActivityId=this.$route.query.id||"",this.getPage()},methods:{changeStatus:function(t){this.uploading=t},addComponent:function(t){var e=this;t.styleType=2,t.url="",this.selectedComponents.push(t),this.editStyle(this.selectedComponents.length-1,t),setTimeout((function(){e.fileType.indexOf(t.type)>-1&&e.$refs.styleEdit.clearUrlAndText()}))},addFileComponent:function(t){this.uploading=!1;var e=this.selectedComponents[this.selectedIndex];e.text=t.filename,e.url=t.url,this.$set(this.selectedComponents,this.selectedIndex,e)},editStyle:function(t,e){var i=this;if(this.uploading)return this.$message.error("请先等待上传完成");if(e){for(var a in e)this.curEditComponent[a]=e[a];this.curEditComponent.show=!0,this.selectedIndex=t,setTimeout((function(){i.$refs.styleEdit.selectStyle(e.styleType,e.text,e.url)}))}},changeTypeText:function(t){var e={name:this.curEditComponent.name,styleType:t.type,text:t.text,type:this.curEditComponent.type,url:t.url};this.$set(this.selectedComponents,this.selectedIndex,e)},moveUp:function(){this.uploading||0!=this.selectedIndex&&(Object(k["swapItems"])(this.selectedComponents,this.selectedIndex,this.selectedIndex-1),this.selectedIndex-=1)},moveDown:function(){this.uploading||this.selectedIndex!=this.selectedComponents.length-1&&(Object(k["swapItems"])(this.selectedComponents,this.selectedIndex,this.selectedIndex+1),this.selectedIndex+=1)},deleteItem:function(){if(!this.uploading){this.selectedComponents.splice(this.selectedIndex,1),0!=this.selectedIndex&&(this.selectedIndex-=1);var t=this.selectedComponents[this.selectedIndex];this.editStyle(this.selectedIndex,t)}},preview:function(){var t=T(r.a.mark((function t(){var e;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosPost({url:"/v1/page/SavePreviewPage",ActivityId:this.ActivityId,Content:JSON.stringify(this.selectedComponents)}).catch((function(t){return t}));case 2:e="127.0.0.1"==location.hostname?"https://upclass.educloud.tencent.com":location.protocol+"//"+location.host,this.previewUrl="".concat(e,"/h5/?ActivityId=").concat(this.ActivityId,"&preview=1"),this.dialog.preview.show=!0;case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),save:function(){var t=T(r.a.mark((function t(){var e;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.checkComponents()){t.next=2;break}return t.abrupt("return",this.$message.error("请讲内容补充完整"));case 2:return t.next=4,this.axiosPost({url:"/v1/page/SavePage",ActivityId:this.ActivityId,PageId:this.PageId,Content:JSON.stringify(this.selectedComponents)}).catch((function(t){return t}));case 4:if(e=t.sent,"OK"==e.ErrorCode){t.next=7;break}return t.abrupt("return");case 7:this.$message.success("保存成功");case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getPage:function(){var t=T(r.a.mark((function t(){var e,i,a=this;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/page/GetPage",ActivityId:this.ActivityId}).catch((function(t){return t}));case 2:if(e=t.sent,"OK"==e.ErrorCode){t.next=5;break}return t.abrupt("return");case 5:if(i=e.Data.Content,i){t.next=8;break}return t.abrupt("return");case 8:this.selectedComponents=JSON.parse(i),setTimeout((function(){var t=a.selectedComponents[0];t&&a.editStyle(0,t)}));case 10:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),checkComponents:function(){var t=!0,e=!1,i=void 0;try{for(var a,n=this.selectedComponents[Symbol.iterator]();!(t=(a=n.next()).done);t=!0){var s=a.value;if(this.fileType.indexOf(s.type)>-1){if(!s.url)return!1}else if(!s.text)return!1}}catch(r){e=!0,i=r}finally{try{t||null==n.return||n.return()}finally{if(e)throw i}}return!0}}},I=A,L=(i("c607"),Object(h["a"])(I,a,n,!1,null,null,null));e["default"]=L.exports},"77bb":function(t,e,i){},7815:function(t,e,i){t.exports=i.p+"img/code.b5b59eb1.png"},7938:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"audit-detail"},[i("div",{staticClass:"active-title"},[i("el-breadcrumb",{attrs:{separator:"/"}},[i("el-breadcrumb-item",{nativeOn:{click:function(e){return t.$router.back(-1)}}},[i("span",{staticStyle:{color:"#337ab7"}},[t._v("审核中心")])]),i("el-breadcrumb-item",[t._v("活动_"+t._s(t.activityName))])],1)],1),i("setting-item",{attrs:{"read-only":!0,"hide-publish":!0}})],1)},n=[],s=i("ca41"),r={components:{SettingItem:s["a"]},data:function(){return{activityName:""}},mounted:function(){this.activityName=this.$route.query.name}},o=r,c=(i("cb57"),i("5511")),u=Object(c["a"])(o,a,n,!1,null,null,null);e["default"]=u.exports},"7c4e":function(t,e,i){t.exports=i.p+"img/message2.a16689ed.svg"},"7c55":function(t,e,i){"use strict";var a=i("ad75"),n=i.n(a);n.a},"7d0a":function(t,e,i){},"7dd5":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"elcellent-work"},[i("div",{staticClass:"elcellent-title"},[t._v("\n      资源展示 / "),i("span",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(t.ActivityName))]),t._v("优秀作品\n    ")]),i("div",{staticClass:"activity-lable"},[i("type-select",{attrs:{gradeList:t.gradeList,subjectList:t.subjectList,regionList:t.regionList,toPage:"elcellent"},on:{award:t.awardMgr,gradeGroup:t.gradeGroupMgr,subject:t.subjectMgr,region:t.regionMgr}})],1),i("div",{staticClass:"activity-content"},[i("activity-list",{attrs:{activityList:t.activityList,goToDetail:"excellentWorkDetail"}}),i("el-pagination",{attrs:{layout:"prev, pager, next",total:t.totalCount,"page-size":t.pagesize,"current-page":t.currentPage},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])},n=[],s=i("ae78"),r=i.n(s),o=i("5c0a"),c=i("7342");function u(t,e,i,a,n,s,r){try{var o=t[s](r),c=o.value}catch(u){return void i(u)}o.done?e(c):Promise.resolve(c).then(a,n)}function l(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var s=t.apply(e,i);function r(t){u(s,a,n,r,o,"next",t)}function o(t){u(s,a,n,r,o,"throw",t)}r(void 0)}))}}var d={components:{TypeSelect:o["a"],ActivityList:c["a"]},data:function(){return{gradeList:[],subjectList:[],regionList:[],award:0,region:0,gradeGroup:0,subject:0,activityList:[],ActivityId:"",ActivityName:"",SchoolSection:"",currentPage:1,pagesize:10,totalCount:0}},mounted:function(){this.ActivityId=this.$route.query.id,this.ActivityName=this.$route.query.name,this.getGradeGroup(),this.getSubjectList(),this.getAllDivision(),this.onExcellentWorkList()},methods:{onExcellentWorkList:function(){var t=l(r.a.mark((function t(){var e;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/activity/GetExcellentWorkList",ActivityId:this.ActivityId,GradeId:this.award,Subject:this.subject,SchoolSection:this.gradeGroup,DivisionId:this.region,PageNum:0,PageSize:this.pagesize}).catch((function(t){return t}));case 2:if(e=t.sent,"OK"==e.ErrorCode){t.next=5;break}return t.abrupt("return",this.$message.error(e.ErrorMsg));case 5:this.activityList=e.Data.WorkList,this.totalCount=e.Data.Total;case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getGradeGroup:function(){var t=l(r.a.mark((function t(){var e;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/activity/GetGradeGroup"}).catch((function(t){return t}));case 2:e=t.sent,this.gradeList=e.Data.GradeGroup||[];case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getSubjectList:function(){var t=l(r.a.mark((function t(){var e;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/activity/GetSubjectList"}).catch((function(t){return t}));case 2:e=t.sent,this.subjectList=e.Data.SubjectList||[];case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getAllDivision:function(){var t=l(r.a.mark((function t(){var e;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/activity/GetAllDivision"}).catch((function(t){return t}));case 2:e=t.sent,this.regionList=[{DivisionId:0,Name:"全部"}].concat(e.Data.DivisionList||[]);case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),awardMgr:function(){var t=l(r.a.mark((function t(e){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.award=e,this.onExcellentWorkList();case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),gradeGroupMgr:function(){var t=l(r.a.mark((function t(e){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.gradeGroup=e,this.onExcellentWorkList();case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),subjectMgr:function(){var t=l(r.a.mark((function t(e){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.subject=e,this.onExcellentWorkList();case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),regionMgr:function(){var t=l(r.a.mark((function t(e){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.region=e,this.onExcellentWorkList();case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),handleSizeChange:function(t){this.pagesize=t},handleCurrentChange:function(t){this.currentPage=t,this.onExcellentWorkList()}}},h=d,p=(i("a5f2"),i("5511")),f=Object(p["a"])(h,a,n,!1,null,"0affb149",null);e["default"]=f.exports},"80a7":function(t,e,i){"use strict";var a=i("a180"),n=i.n(a);n.a},"81ef":function(t,e,i){"use strict";var a=i("8bd5"),n=i.n(a);n.a},"85a7":function(t,e,i){},"863f":function(t,e,i){"use strict";var a=i("e57a"),n=i.n(a);n.a},"8ab8":function(t,e,i){},"8ae4":function(t,e,i){t.exports=i.p+"img/pen.513a0e63.svg"},"8bd5":function(t,e,i){},"8de0":function(t,e,i){},9265:function(t,e,i){t.exports=i.p+"img/icon_close.001d221d.svg"},"933f":function(t,e,i){t.exports=i.p+"img/logo.7eb02757.png"},"96d7":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"warrp"},[i("div",{staticClass:"active-warrp"},[i("div",{staticClass:"active-title"},[i("el-breadcrumb",{attrs:{separator:"/"}},[i("el-breadcrumb-item",{nativeOn:{click:function(e){return t.goToMyAct(e)}}},[i("span",{staticClass:"link-btn"},[t._v("我发布的活动")])]),i("el-breadcrumb-item",[t._v("活动_"+t._s(t.activityName))])],1)],1),i("div",{staticClass:"active-tab"},[i("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:"活动设置",name:"first"}}),i("el-tab-pane",{attrs:{label:"报名信息",name:"second"}}),i("el-tab-pane",{attrs:{label:"作品审核",name:"third"}}),i("el-tab-pane",{attrs:{label:"作品评奖",name:"fourth"}}),i("el-tab-pane",{attrs:{label:"活动统计",name:"five"}}),i("el-tab-pane",{attrs:{label:"用户反馈",name:"six"}})],1),"first"==t.activeName?i("activity-setting"):t._e(),"second"==t.activeName?i("apply-message"):t._e(),"third"==t.activeName?i("production-message"):t._e(),"fourth"==t.activeName?i("works-in"):t._e(),"five"==t.activeName?i("statistics"):t._e(),"six"==t.activeName?i("feed-back"):t._e()],1)])])},n=[],s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"activity-setting"},[i("setting-item",{attrs:{"hide-publish":!0}})],1)},r=[],o=i("ca41"),c={components:{SettingItem:o["a"]},data:function(){return{}}},u=c,l=i("5511"),d=Object(l["a"])(u,s,r,!1,null,null,null),h=d.exports,p=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[i("el-table-column",{attrs:{prop:"UserName",label:"报名人姓名",width:"180"}}),i("el-table-column",{attrs:{prop:"Phone",label:"联系电话",width:"180"}}),i("el-table-column",{attrs:{prop:"DivisionName",label:"区域"}}),i("el-table-column",{attrs:{prop:"School",label:"所在学校"}}),i("el-table-column",{attrs:{prop:"ApplyTime",label:"报名时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(t.timeFormat(1e3*e.row.ApplyTime,"yyyy-MM-dd"))+"\n      ")]}}])})],1),i("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.total,"page-size":t.PageSize,"current-page":t.currentPage},on:{"current-change":t.handleCurrentChange}})],1)},f=[],v=i("ae78"),m=i.n(v);function g(t,e,i,a,n,s,r){try{var o=t[s](r),c=o.value}catch(u){return void i(u)}o.done?e(c):Promise.resolve(c).then(a,n)}function y(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var s=t.apply(e,i);function r(t){g(s,a,n,r,o,"next",t)}function o(t){g(s,a,n,r,o,"throw",t)}r(void 0)}))}}var w={prop:{type:String,required:!0},data:function(){return{currentPage:1,PageSize:10,total:0,ActivityId:"",tableData:[]}},created:function(){this.ActivityId=+this.$route.query.id,this.getList()},methods:{getList:function(){var t=y(m.a.mark((function t(){var e;return m.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/activity/GetApplyUserList",ActivityId:this.ActivityId,PageNum:this.currentPage,PageSize:this.PageSize}).catch((function(t){return t}));case 2:e=t.sent,this.tableData=e.Data.ApplyUserList,this.total=e.Data.Total;case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),handleCurrentChange:function(t){this.currentPage=t,this.getList()}}},b=w,x=Object(l["a"])(b,p,f,!1,null,null,null),k=x.exports,C=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"production-message"},[i("div",{staticClass:"work-warrp"},[i("div",{staticClass:"activity-lable"},[i("type-select",{attrs:{gradeList:t.gradeList,subjectList:t.subjectList,regionList:t.regionList,"hide-region":t.IsDivisionAdmin,"hide-award":!0,toPage:"elcellent"},on:{gradeGroup:t.gradeGroupMgr,subject:t.subjectMgr,region:t.regionMgr}})],1)]),i("el-tabs",{staticStyle:{width:"330px"},on:{"tab-click":t.filterData},model:{value:t.curStatus,callback:function(e){t.curStatus=e},expression:"curStatus"}},[i("el-tab-pane",{attrs:{label:"待审核",name:"1"}}),i("el-tab-pane",{attrs:{label:"审核通过",name:"2"}}),i("el-tab-pane",{attrs:{label:"未审核通过",name:"3"}})],1),1==t.curStatus?i("div",{staticClass:"audit-pass"},[i("el-button",{attrs:{disabled:0==t.checkedList.length},on:{click:function(e){return t.changeStatus(1)}}},[t._v("通过")]),i("el-button",{attrs:{disabled:0==t.checkedList.length},on:{click:function(e){return t.changeStatus(2)}}},[t._v("不通过")])],1):t._e(),2==t.curStatus?i("div",{staticClass:"audit-pass"},[i("el-button",{attrs:{disabled:0==t.checkedList.length},on:{click:function(e){return t.changeStatus(2)}}},[t._v("不通过")])],1):t._e(),3==t.curStatus?i("div",{staticClass:"audit-pass"},[i("el-button",{attrs:{disabled:0==t.checkedList.length},on:{click:function(e){return t.changeStatus(1)}}},[t._v("通过")])],1):t._e(),i("div",{staticClass:"activity-conts"},t._l(t.arr,(function(e,a){return i("div",{key:a,staticClass:"acitivity-self"},[i("el-checkbox",{on:{change:function(i){return t.checkChange(i,e)}},model:{value:e.checked,callback:function(i){t.$set(e,"checked",i)},expression:"item.checked"}}),e.ResourceList.length>0?i("video",{attrs:{controls:"controls",src:e.ResourceList[0].ResourceContent}}):t._e(),i("div",{staticClass:"activity-tex"},[i("div",{staticClass:"avtive-title"},[t._v(t._s(e.TeamName))]),i("div",{staticClass:"activity-time"},[e.School.length>8?i("el-tooltip",{attrs:{effect:"dark",content:e.School,placement:"top"}},[i("span",[t._v(t._s(e.School.substr(0,8)))])]):i("span",[t._v(t._s(e.School))])],1),i("a",{staticClass:"detail-tip",on:{click:function(i){return t.auditClick(e)}}},[t._v("详情")])])],1)})),0),i("el-pagination",{staticClass:"paging",attrs:{background:"",layout:"prev, pager, next",total:t.total,"page-size":t.PageSize,"current-page":t.currentPage},on:{"current-change":t.handleCurrentChange}})],1)},_=[],S=i("5c0a");function T(t,e,i,a,n,s,r){try{var o=t[s](r),c=o.value}catch(u){return void i(u)}o.done?e(c):Promise.resolve(c).then(a,n)}function A(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var s=t.apply(e,i);function r(t){T(s,a,n,r,o,"next",t)}function o(t){T(s,a,n,r,o,"throw",t)}r(void 0)}))}}var I={props:{type:String,required:!0},components:{TypeSelect:S["a"]},data:function(){return{gradeList:[],subjectList:[],regionList:[],isShadeShow:!1,show:!0,total:0,currentPage:1,PageSize:12,passIndex:1,list:[],WorkId:"",Status:1,auditShow:!1,arr:[],activityId:"",checkedList:[],curStatus:"",region:0,gradeGroup:0,subject:0,IsActivityAdmin:!1,IsDivisionAdmin:!1}},created:function(){this.getGradeGroup(),this.getSubjectList(),this.getAllDivision(),this.activityId=this.$route.query.id,this.getAdmin(),this.curStatus=this.$route.query.curStatus||"1",this.getWorkList()},methods:{getAdmin:function(){var t=A(m.a.mark((function t(){var e;return m.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/activity/IsActivityAdmin",ActivityId:this.activityId}).catch((function(t){return t}));case 2:if(e=t.sent,"OK"==e.ErrorCode){t.next=5;break}return t.abrupt("return",this.$message.error(e.ErrorMsg));case 5:this.IsActivityAdmin=e.Data.IsActivityAdmin,this.IsDivisionAdmin=e.Data.IsDivisionAdmin;case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getWorkList:function(){var t=A(m.a.mark((function t(){var e,i,a,n;return m.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.checkedList=[],e=4==this.curStatus?"1":this.curStatus,i={url:"/v1/activity/GetWorkListByAdmin",Status:e,PageNum:this.currentPage,PageSize:this.PageSize,ActivityId:this.activityId,DivisionId:this.region,SubjectId:this.subject,SchoolSection:this.gradeGroup},4==this.curStatus&&(i.PushStatus="PUSH"),t.next=6,this.axiosGet(i).catch((function(t){return t}));case 6:if(a=t.sent,"OK"==a.ErrorCode){t.next=9;break}return t.abrupt("return",this.$message.error(a.ErrorMsg));case 9:n=a.Data.WorkList||[],n.forEach((function(t){return t.checked=!1})),this.arr=n,this.total=a.Data.Total;case 13:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),filterData:function(t){this.curStatus=t.name,this.getWorkList()},handleCurrentChange:function(t){this.currentPage=t,this.getWorkList()},changeStatus:function(){var t=A(m.a.mark((function t(e){var i,a;return m.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!=this.checkedList.length){t.next=2;break}return t.abrupt("return",this.$message.error("请先选择作品"));case 2:if(1!=e){t.next=11;break}return t.next=5,this.axiosPost({url:"/v1/activity/AuditWork",WorkIdList:this.checkedList,ActivityId:this.activityId,Status:"WORK_AUDIT_ACCEPT",Message:"审核通过"}).catch((function(t){return t}));case 5:if(i=t.sent,"OK"==i.ErrorCode){t.next=8;break}return t.abrupt("return",this.$message.error(i.ErrorMsg));case 8:this.$message.success("审核通过"),t.next=18;break;case 11:if(2!=e){t.next=18;break}return t.next=14,this.axiosPost({url:"/v1/activity/AuditWork",WorkIdList:this.checkedList,ActivityId:this.activityId,Status:"WORK_AUDIT_REJECT",Message:"审核未通过"}).catch((function(t){return t}));case 14:if(a=t.sent,"OK"==a.ErrorCode){t.next=17;break}return t.abrupt("return",this.$message.error(a.ErrorMsg));case 17:this.$message.success("审核未通过");case 18:this.getWorkList();case 19:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),checkChange:function(t,e){if(t)this.checkedList.push(e.WorkId);else{var i=this.checkedList.indexOf(e.WorkId);this.checkedList.splice(i,1)}},auditClick:function(t){this.$router.push({path:"/myActivity/workAuditDetail",query:{workId:t.WorkId,activityId:this.activityId,title:this.$route.query.title,curStatus:this.curStatus}})},getGradeGroup:function(){var t=A(m.a.mark((function t(){var e;return m.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/activity/GetGradeGroup"}).catch((function(t){return t}));case 2:e=t.sent,this.gradeList=e.Data.GradeGroup||[];case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getSubjectList:function(){var t=A(m.a.mark((function t(){var e;return m.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/activity/GetSubjectList"}).catch((function(t){return t}));case 2:e=t.sent,this.subjectList=e.Data.SubjectList||[];case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getAllDivision:function(){var t=A(m.a.mark((function t(){var e;return m.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/activity/GetAllDivision"}).catch((function(t){return t}));case 2:e=t.sent,this.regionList=[{DivisionId:0,Name:"全部"}].concat(e.Data.DivisionList||[]);case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),gradeGroupMgr:function(){var t=A(m.a.mark((function t(e){return m.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.gradeGroup=e,this.getWorkList();case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),subjectMgr:function(){var t=A(m.a.mark((function t(e){return m.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.subject=e,this.getWorkList();case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),regionMgr:function(){var t=A(m.a.mark((function t(e){return m.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.region=e,this.getWorkList();case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}},L=I,E=(i("38fd"),Object(l["a"])(L,C,_,!1,null,null,null)),D=E.exports,O=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"work-warrp"},[i("div",{staticClass:"activity-lable"},[i("type-select",{attrs:{gradeList:t.gradeList,subjectList:t.subjectList,regionList:t.regionList,"hide-region":t.IsDivisionAdmin,toPage:"elcellent"},on:{award:t.awardMgr,gradeGroup:t.gradeGroupMgr,subject:t.subjectMgr,region:t.regionMgr}})],1)]),i("div",{staticClass:"work-box"},[t._l(t.list,(function(e,a){return i("el-button",{key:a,attrs:{disabled:0==t.selectedList.length},on:{click:function(i){return t.action(a,e.key)}}},[t._v(t._s(e.name))])})),i("el-button",{on:{click:t.download}},[t._v("导出作品信息")]),i("div",{staticClass:"work-box-title"},[t._v("已选择数量："+t._s(t.selectedList.length))])],2),i("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelect}},[i("el-table-column",{attrs:{type:"selection",width:"55"}}),i("el-table-column",{attrs:{label:"优秀作品","show-overflow-tooltip":"",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.Title))]}}])}),i("el-table-column",{attrs:{prop:"TeamName",label:"提交人"}}),i("el-table-column",{attrs:{prop:"CreatedTime",label:"提交时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(t.timeFormat(1e3*e.row.CreatedTime,"yyyy-MM-dd hh:mm:ss"))+"\n      ")]}}])}),i("el-table-column",{attrs:{prop:"Score",label:"评分"}}),i("el-table-column",{attrs:{prop:"GradeName",label:"奖项"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.GradeName||"无")+"\n      ")]}}])}),i("el-table-column",{attrs:{label:"是否推荐到市"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(1==e.row.PushCity?"是":"否")+"\n      ")]}}])})],1),i("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.total,"page-size":t.PageSize,"current-page":t.currentPage},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)},P=[];function $(t,e,i,a,n,s,r){try{var o=t[s](r),c=o.value}catch(u){return void i(u)}o.done?e(c):Promise.resolve(c).then(a,n)}function N(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var s=t.apply(e,i);function r(t){$(s,a,n,r,o,"next",t)}function o(t){$(s,a,n,r,o,"throw",t)}r(void 0)}))}}var j={props:{type:String,required:!0},components:{TypeSelect:S["a"]},data:function(){return{gradeList:[],subjectList:[],regionList:[],award:0,region:0,gradeGroup:0,subject:0,PageSize:10,currentPage:1,list:[{id:1,name:"设为优秀作品",key:"优秀奖"},{id:3,name:"设为一等奖",key:"一等奖"},{id:4,name:"设为二等奖",key:"二等奖"},{id:5,name:"设为三等奖",key:"三等奖"},{id:6,name:"取消奖项",key:"未得奖"}],tableData:[],ActivityId:"",total:0,curFilter:0,selectedList:[],IsActivityAdmin:!1,IsDivisionAdmin:!1}},mounted:function(){this.ActivityId=this.$route.query.id,this.getAdmin(),this.getGradeGroup(),this.getSubjectList(),this.getAllDivision(),this.ActivityId&&this.getAwardsList()},methods:{getAdmin:function(){var t=N(m.a.mark((function t(){var e,i;return m.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/activity/IsActivityAdmin",ActivityId:this.ActivityId}).catch((function(t){return t}));case 2:if(e=t.sent,"OK"==e.ErrorCode){t.next=5;break}return t.abrupt("return",this.$message.error(e.ErrorMsg));case 5:this.IsActivityAdmin=e.Data.IsActivityAdmin,this.IsDivisionAdmin=e.Data.IsDivisionAdmin,i=[{id:1,name:"设为优秀作品",key:"优秀奖"},{id:3,name:"设为一等奖",key:"一等奖"},{id:4,name:"设为二等奖",key:"二等奖"},{id:5,name:"设为三等奖",key:"三等奖"},{id:6,name:"取消奖项",key:"未得奖"}],this.IsDivisionAdmin&&(i=i.concat([{id:7,name:"推荐到市",key:"push"},{id:7,name:"取消推荐",key:"unpush"}])),this.list=i;case 10:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getAwardsList:function(){var t=N(m.a.mark((function t(){var e;return m.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/activity/GetWorkAwardsList",ActivityId:this.ActivityId,DivisionId:this.region,Subject:this.subject,SchoolSection:this.gradeGroup,PageSize:this.PageSize,PageNum:this.currentPage,GradeId:this.award}).catch((function(t){return t}));case 2:if(e=t.sent,"OK"==e.ErrorCode){t.next=5;break}return t.abrupt("return",this.$message.error(e.ErrorMsg));case 5:this.tableData=e.Data.AwardsList,this.total=e.Data.Total;case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),action:function(){var t=N(m.a.mark((function t(e,i){var a,n;return m.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=this.selectedList.map((function(t){return t.WorkId})),"push"!=i){t.next=7;break}return t.next=4,this.axiosPost({url:"/v1/activity/PushCityByAdmin",ActivityId:this.ActivityId,WorkIdList:a,STATUS:"PUSH"}).catch((function(t){return t}));case 4:n=t.sent,t.next=16;break;case 7:if("unpush"!=i){t.next=13;break}return t.next=10,this.axiosPost({url:"/v1/activity/PushCityByAdmin",ActivityId:this.ActivityId,WorkIdList:a,STATUS:"UNPUSH"}).catch((function(t){return t}));case 10:n=t.sent,t.next=16;break;case 13:return t.next=15,this.axiosPost({url:"/v1/activity/SetWorkAwards",WorkIdList:a,Awards:i}).catch((function(t){return t}));case 15:n=t.sent;case 16:if("OK"==n.ErrorCode){t.next=18;break}return t.abrupt("return",this.$message.error(n.ErrorMsg));case 18:this.$message.success("设置成功"),this.getAwardsList();case 20:case"end":return t.stop()}}),t,this)})));function e(e,i){return t.apply(this,arguments)}return e}(),download:function(){var t=N(m.a.mark((function t(){var e,i;return m.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/activity/DownloadWorkInfoList",ActivityId:this.ActivityId}).catch((function(t){return t}));case 2:if(e=t.sent,"OK"==e.ErrorCode){t.next=5;break}return t.abrupt("return",this.$message.error(e.ErrorMsg));case 5:i=e.Data.CosUrl,window.open(i);case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),handleSelect:function(t){this.selectedList=t},handleSizeChange:function(t){this.PageSize=t,this.getAwardsList()},handleCurrentChange:function(t){this.currentPage=t,this.getAwardsList()},getGradeGroup:function(){var t=N(m.a.mark((function t(){var e;return m.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/activity/GetGradeGroup"}).catch((function(t){return t}));case 2:e=t.sent,this.gradeList=e.Data.GradeGroup||[];case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getSubjectList:function(){var t=N(m.a.mark((function t(){var e;return m.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/activity/GetSubjectList"}).catch((function(t){return t}));case 2:e=t.sent,this.subjectList=e.Data.SubjectList||[];case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getAllDivision:function(){var t=N(m.a.mark((function t(){var e;return m.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/activity/GetAllDivision"}).catch((function(t){return t}));case 2:e=t.sent,this.regionList=[{DivisionId:0,Name:"全部"}].concat(e.Data.DivisionList||[]);case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),awardMgr:function(){var t=N(m.a.mark((function t(e){return m.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.award=e,this.getAwardsList();case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),gradeGroupMgr:function(){var t=N(m.a.mark((function t(e){return m.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.gradeGroup=e,this.getAwardsList();case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),subjectMgr:function(){var t=N(m.a.mark((function t(e){return m.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.subject=e,this.getAwardsList();case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),regionMgr:function(){var t=N(m.a.mark((function t(e){return m.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.region=e,this.getAwardsList();case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}},G=j,M=(i("584a"),Object(l["a"])(G,O,P,!1,null,"df723c2e",null)),W=M.exports,R=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[i("el-table-column",{attrs:{prop:"Content",label:"内容","show-overflow-tooltip":""}}),i("el-table-column",{attrs:{prop:"UserName",label:"姓名",width:"150"}}),i("el-table-column",{attrs:{prop:"CreateTime",label:"日期",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(t.timeFormat(1e3*e.row.CreateTime,"yyyy-MM-dd hh:mm:ss"))+"\n      ")]}}])})],1),i("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.total,"page-size":t.PageSize,"current-page":t.currentPage},on:{"current-change":t.handleCurrentChange}})],1)},U=[];function V(t,e,i,a,n,s,r){try{var o=t[s](r),c=o.value}catch(u){return void i(u)}o.done?e(c):Promise.resolve(c).then(a,n)}function z(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var s=t.apply(e,i);function r(t){V(s,a,n,r,o,"next",t)}function o(t){V(s,a,n,r,o,"throw",t)}r(void 0)}))}}var F={props:{type:String,required:!0},data:function(){return{activityId:"",currentPage:1,PageSize:10,total:0,tableData:[]}},mounted:function(){this.activityId=this.$route.query.id,this.activityId&&this.init()},methods:{init:function(){var t=z(m.a.mark((function t(){var e;return m.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/activity/GetFeedbackList",ActivityId:this.activityId,PageNum:this.currentPage-1,PageSize:this.PageSize}).catch((function(t){return t}));case 2:if(e=t.sent,"OK"==e.ErrorCode){t.next=5;break}return t.abrupt("return",this.$message.error(e.ErrorMsg));case 5:this.tableData=e.Data.FeedbackList,this.total=e.Data.Total;case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),handleCurrentChange:function(t){this.currentPage=t,this.init(this.PageSize,this.currentPage)}}},K=F,q=Object(l["a"])(K,R,U,!1,null,null,null),J=q.exports,B=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"activity-statistic"},[i("el-card",{staticClass:"apply-num"},[i("high-charts",{attrs:{options:t.applyNumOpt}})],1),i("el-card",{staticClass:"learn"},[i("div",{staticClass:"xueke"},[i("high-charts",{attrs:{options:t.xuekeOpt}})],1),i("div",{staticClass:"xueduan"},[i("high-charts",{attrs:{options:t.xueduanOpt}})],1)]),i("el-card",{staticClass:"activity-table"},[i("div",{staticClass:"quyu-table"},[i("el-table",{attrs:{data:t.areaData,height:"400",width:"95%"}},[i("el-table-column",{attrs:{prop:"DivisionName",label:"区"}}),i("el-table-column",{attrs:{prop:"ApplyNum",label:"报名数"}}),i("el-table-column",{attrs:{prop:"WorkNum",label:"作品数"}})],1)],1),i("div",{staticClass:"school-table"},[i("el-table",{attrs:{data:t.schoolData,height:"400",width:"95%"}},[i("el-table-column",{attrs:{prop:"DivisionName",label:"学校"}}),i("el-table-column",{attrs:{prop:"ApplyNum",label:"报名数"}}),i("el-table-column",{attrs:{prop:"WorkNum",label:"作品数"}})],1)],1)])],1)},H=[],Y=i("11e2"),Q=i("0210");function X(t,e,i,a,n,s,r){try{var o=t[s](r),c=o.value}catch(u){return void i(u)}o.done?e(c):Promise.resolve(c).then(a,n)}function Z(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var s=t.apply(e,i);function r(t){X(s,a,n,r,o,"next",t)}function o(t){X(s,a,n,r,o,"throw",t)}r(void 0)}))}}var tt={name:"activity-statistic",components:{HighCharts:Y["a"]},data:function(){return{applyNumOpt:{},xuekeOpt:{},xueduanOpt:{},areaData:[],schoolData:[],activityId:""}},mounted:function(){this.activityId=this.$route.query.id,this.getApplyNumData(),this.getXueKeData(),this.getXueDuanData(),this.getTableData()},methods:{getApplyNumData:function(){var t=Z(m.a.mark((function t(){var e,i,a,n,s,r,o,c,u,l,d,h;return m.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/activity/GetApplyUserNum",ActivityId:this.activityId}).catch((function(t){return t}));case 2:if(e=t.sent,"OK"==e.ErrorCode){t.next=5;break}return t.abrupt("return",this.$message.error(e.ErrorMsg));case 5:for(i=e.Data.DataList||[],a=[],n=[],s=!0,r=!1,o=void 0,t.prev=10,c=i[Symbol.iterator]();!(s=(u=c.next()).done);s=!0)l=u.value,d=new Date(1e3*l.datetime),a.push(Object(Q["timeFormat"])(d,"yyyy-MM-dd")),n.push(l.value);t.next=18;break;case 14:t.prev=14,t.t0=t["catch"](10),r=!0,o=t.t0;case 18:t.prev=18,t.prev=19,s||null==c.return||c.return();case 21:if(t.prev=21,!r){t.next=24;break}throw o;case 24:return t.finish(21);case 25:return t.finish(18);case 26:h={show:!0,chart:{type:"spline"},title:{text:null},yAxis:{title:{text:null}},xAxis:{categories:a},series:[{name:"报名人数",data:n}]},this.applyNumOpt=h;case 28:case"end":return t.stop()}}),t,this,[[10,14,18,26],[19,,21,25]])})));function e(){return t.apply(this,arguments)}return e}(),getXueKeData:function(){var t=Z(m.a.mark((function t(){var e,i,a,n,s,r,o,c,u,l;return m.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/activity/GetWorkCountBySubject",ActivityId:this.activityId}).catch((function(t){return t}));case 2:if(e=t.sent,"OK"==e.ErrorCode){t.next=5;break}return t.abrupt("return",this.$message.error(e.ErrorMsg));case 5:for(i=e.Data.SubjectList||[],a=[],n=!0,s=!1,r=void 0,t.prev=10,o=i[Symbol.iterator]();!(n=(c=o.next()).done);n=!0)u=c.value,a.push({name:u.Name,y:u.Num});t.next=18;break;case 14:t.prev=14,t.t0=t["catch"](10),s=!0,r=t.t0;case 18:t.prev=18,t.prev=19,n||null==o.return||o.return();case 21:if(t.prev=21,!s){t.next=24;break}throw r;case 24:return t.finish(21);case 25:return t.finish(18);case 26:l={show:!0,chart:{type:"pie"},title:{text:"学科分布"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!1},showInLegend:!0}},series:[{name:"学科",data:a}]},this.xuekeOpt=l;case 28:case"end":return t.stop()}}),t,this,[[10,14,18,26],[19,,21,25]])})));function e(){return t.apply(this,arguments)}return e}(),getXueDuanData:function(){var t=Z(m.a.mark((function t(){var e,i,a,n,s,r,o,c,u,l,d;return m.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/activity/GetWorkCountByTerm",ActivityId:this.activityId}).catch((function(t){return t}));case 2:if(e=t.sent,"OK"==e.ErrorCode){t.next=5;break}return t.abrupt("return",this.$message.error(e.ErrorMsg));case 5:for(i=e.Data.TermList||[],a=[],n=[],s=!0,r=!1,o=void 0,t.prev=10,c=i[Symbol.iterator]();!(s=(u=c.next()).done);s=!0)l=u.value,n.push(l.Name),a.push(l.Num);t.next=18;break;case 14:t.prev=14,t.t0=t["catch"](10),r=!0,o=t.t0;case 18:t.prev=18,t.prev=19,s||null==c.return||c.return();case 21:if(t.prev=21,!r){t.next=24;break}throw o;case 24:return t.finish(21);case 25:return t.finish(18);case 26:d={show:!0,chart:{type:"column"},title:{text:"学段分布"},yAxis:{title:{text:null}},xAxis:{categories:n},plotOptions:{column:{borderRadius:4,pointPadding:.3,borderWidth:0,stacking:"normal"}},series:[{name:"学段",data:a}]},this.xueduanOpt=d;case 28:case"end":return t.stop()}}),t,this,[[10,14,18,26],[19,,21,25]])})));function e(){return t.apply(this,arguments)}return e}(),getTableData:function(){var t=Z(m.a.mark((function t(){var e,i;return m.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/activity/GetDivisionStatistics",ActivityId:this.activityId}).catch((function(t){return t}));case 2:if(e=t.sent,"OK"==e.ErrorCode){t.next=5;break}return t.abrupt("return",this.$message.error(e.ErrorMsg));case 5:i=e.Data,this.areaData=i.AreaData,this.schoolData=i.SchoolData;case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},et=tt,it=(i("28f0"),Object(l["a"])(et,B,H,!1,null,null,null)),at=it.exports,nt={components:{ActivitySetting:h,ApplyMessage:k,ProductionMessage:D,WorksIn:W,FeedBack:J,Statistics:at},data:function(){return{activeName:"",activityName:""}},watch:{activeName:function(t){location.hash=t}},mounted:function(){this.activeName=location.hash.substr(1)||"first",this.activityName=this.$route.query.title||"活动名称"},methods:{goToMyAct:function(){this.$router.push("/myActivity")}}},st=nt,rt=(i("70e7"),i("6cca"),Object(l["a"])(st,a,n,!1,null,"6be7554f",null));e["default"]=rt.exports},"96d9":function(t,e,i){},"99a7":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-dialog",{staticClass:"login-dialog",attrs:{visible:t.show,width:"400px","modal-append-to-body":!1},on:{"update:visible":function(e){t.show=e},close:t.onClose}},[i("div",{attrs:{id:"weixin-code"}})])},n=[],s={name:"wx-login",data:function(){return{show:!1}},methods:{login:function(){this.show=!0;var t="127.0.0.1"==location.hostname?"https://upclaass.educloud.tencent.com":location.protocol+"//"+location.host;"cxyy.educloud.tencent.com"!=location.hostname&&"cxyy.szdj.edu.cn"!=location.hostname?setTimeout((function(){new window.WxLogin({id:"weixin-code",appid:"wx34fc14711090d000",scope:"snsapi_login",redirect_uri:encodeURIComponent(t),state:(new Date).getTime()})})):location.href="".concat(t,"/edulogin/?redirectUrl=").concat(t,"&from=activity")},onClose:function(){this.$store.dispatch("INIT_SHOW",!1)}}},r=s,o=(i("094b"),i("5511")),c=Object(o["a"])(r,a,n,!1,null,null,null);e["a"]=c.exports},"9b12":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"user-center"},[i("div",{staticClass:"user-wrap"},[i("div",{staticClass:"user-content"},[i("div",{staticClass:"user-left"},[i("div",{staticClass:"block"},[i("div",{staticClass:"user-text"},[t._v("我参加的活动")]),i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,height:"400px"}},[i("el-table-column",{attrs:{prop:"ActivityName",label:"活动名称","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"text"},on:{click:function(i){return t.goToActDetail(e.row)}}},[t._v(t._s(e.row.ActivityName))])]}}])}),i("el-table-column",{attrs:{prop:"Sponsor",label:"主办方"}}),i("el-table-column",{attrs:{prop:"Status",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(t.statusMap[e.row.Status])+"\n              ")]}}])}),i("el-table-column",{attrs:{prop:"StartTime",label:"报名日期"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(t.timeFormat(1e3*e.row.StartTime,"yyyy-MM-dd hh:mm:ss"))+"\n              ")]}}])})],1),i("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.total,"page-size":t.pageSize,"current-page":t.currentPage},on:{"current-change":t.handleCurrentChange}})],1)]),i("div",{staticClass:"user-right"},[t.user?i("div",{staticClass:"user-info-wrap"},[i("div",{staticClass:"user-head-left"},[t.user.Avatar?i("img",{attrs:{src:t.user.Avatar}}):i("div",{staticClass:"head-img"})]),i("div",{staticClass:"user-head-right"},[i("div",{staticClass:"user-name"},[t._v(t._s(t.user.Name))]),i("div",{staticClass:"user-tel"},[t._v(t._s(t.user.Phone))]),i("div",{staticClass:"user-tel"},[t._v(t._s(t.user.School))])])]):t._e(),i("div",{staticClass:"user-info-atlas"},[i("high-charts",{attrs:{options:t.abilityOpt}})],1)])])])])},n=[],s=i("ae78"),r=i.n(s),o=i("11e2");function c(t,e,i,a,n,s,r){try{var o=t[s](r),c=o.value}catch(u){return void i(u)}o.done?e(c):Promise.resolve(c).then(a,n)}function u(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var s=t.apply(e,i);function r(t){c(s,a,n,r,o,"next",t)}function o(t){c(s,a,n,r,o,"throw",t)}r(void 0)}))}}var l={name:"activity-center",components:{HighCharts:o["a"]},data:function(){return{currentPage:1,pageSize:10,total:0,tableData:[],day:"",certificateList:[{img:"0",name:"活动名称"},{img:"0",name:"活动名称"},{img:"0",name:"活动名称"},{img:"0",name:"活动名称"},{img:"0",name:"活动名称"},{img:"0",name:"活动名称"},{img:"0",name:"活动名称"},{img:"0",name:"活动名称"}],statusMap:{ACTIVITY_WAITING_AUDIT:"待审核",STAGE_PREPARE:"活动预热",STAGE_WORK_UPLOAD:"作品上传（提交作品）",STAGE_WORK_AUDIT:"作品审核",STAGE_WORK_PRE_JUDGE:"作品预审",STAGE_WORK_JUDGE:"作品评审",STAGE_WORK_SHOW:"作品公示",STAGE_EXCELLENT_WORK_SHOW:"优秀作品展示",ACTIVITY_RUNNING:"进行中"},abilityOpt:{}}},computed:{user:function(){return this.$store.state.account.user}},mounted:function(){this.getActivityList(),this.getAbility()},methods:{handleCurrentChange:function(){var t=u(r.a.mark((function t(e){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.currentPage=e,this.getActivityList();case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),getActivityList:function(){var t=u(r.a.mark((function t(){var e;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/activity/GetMyApplyActivityList",PageSize:this.pageSize,PageNum:this.currentPage}).catch((function(t){return t}));case 2:if(e=t.sent,"OK"==e.ErrorCode){t.next=5;break}return t.abrupt("return");case 5:this.tableData=e.Data.ActivityList,this.total=e.Data.Total;case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getAbility:function(){var t=u(r.a.mark((function t(){var e;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/activity/GetAbilityRadar"}).catch((function(t){return t}));case 2:if(e=t.sent,"OK"==e.ErrorCode){t.next=5;break}return t.abrupt("return");case 5:this.renderChart(e.Data.AbilityList);case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),renderChart:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=[],i=[];t.forEach((function(t){e.push(t.Name),i.push(t.Value)}));var a={show:!0,chart:{polar:!0,type:"line"},title:{text:"我的能力图谱"},pane:{size:"65%"},xAxis:{categories:e,tickmarkPlacement:"on",lineWidth:0},yAxis:{gridLineInterpolation:"polygon",lineWidth:0,min:0},legend:{enabled:!1},series:[{name:"能力值",data:i,pointPlacement:"on"}]};this.abilityOpt=a},goToActDetail:function(t){"ACTIVITY_WAITING_AUDIT"!=t.Status&&this.$router.push({path:"/activity/process",query:{ActivityId:t.ActivityId}})}}},d=l,h=(i("a5f0"),i("5511")),p=Object(h["a"])(d,a,n,!1,null,"2f90c30e",null);e["default"]=p.exports},"9bb6":function(t,e,i){},"9bc0":function(t,e,i){"use strict";var a=i("bec8"),n=i.n(a);n.a},"9dc9":function(t,e,i){t.exports=i.p+"img/delete.e04546de.svg"},"9fd1":function(t,e,i){"use strict";var a=i("d040"),n=i.n(a);n.a},a180:function(t,e,i){},a5cf:function(t,e,i){},a5f0:function(t,e,i){"use strict";var a=i("f911"),n=i.n(a);n.a},a5f2:function(t,e,i){"use strict";var a=i("04fe"),n=i.n(a);n.a},a65a:function(t,e,i){"use strict";var a=i("011e"),n=i.n(a);n.a},a7d0:function(t,e,i){},a7d7:function(t,e,i){"use strict";var a=i("9bb6"),n=i.n(a);n.a},a987:function(t,e,i){t.exports=i.p+"img/play-video.99eb746a.svg"},ab01:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"activity-center"},[i("div",{staticClass:"activity-wrap"},[i("div",{staticClass:"activity-header"}),i("div",{staticClass:"activity-lable"},[t.gradeList.length>0&&t.regionList.length>0?i("type-select",{attrs:{gradeList:t.gradeList,regionList:t.regionList},on:{activityObject:t.activityObjectMgr,gradeGroup:t.gradeGroupMgr,region:t.regionMgr}}):t._e()],1),t.activityList.length>0?i("div",{staticClass:"activity-content"},[i("activity-list",{attrs:{activityList:t.activityList,goToDetail:t.excellentWork}})],1):t._e(),i("div",{staticClass:"activity-page"},[i("el-pagination",{staticClass:"paging",attrs:{background:"","current-page":t.currentPage,"page-size":t.pageSize,layout:"prev, pager, next",total:t.total},on:{"current-change":t.handleCurrentPage}})],1)])])},n=[],s=i("ae78"),r=i.n(s),o=i("5c0a"),c=i("7342");function u(t,e,i,a,n,s,r){try{var o=t[s](r),c=o.value}catch(u){return void i(u)}o.done?e(c):Promise.resolve(c).then(a,n)}function l(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var s=t.apply(e,i);function r(t){u(s,a,n,r,o,"next",t)}function o(t){u(s,a,n,r,o,"throw",t)}r(void 0)}))}}var d={name:"activity-center",components:{TypeSelect:o["a"],ActivityList:c["a"]},data:function(){return{gradeList:[],subjectList:[],regionList:[{DivisionId:0,Name:"全部"}],region:"",gradeGroup:"",activityObject:"",activityList:[],excellentWork:"activityDetail",dialogVisible:!1,wechatVisible:!1,currentPage:1,pageSize:12,total:0,filter:{Role:0,GradeGroup:0,District:0}}},created:function(){var t=l(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.getGradeGroupList(),this.getRegionList(),this.getActivityList();case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),methods:{getActivityList:function(){var t=l(r.a.mark((function t(){var e,i,a=this;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/activity/GetActivityList",Role:this.filter.Role,GradeGroup:this.filter.GradeGroup,District:this.filter.District,PageSize:this.pageSize,PageNum:this.currentPage});case 2:if(e=t.sent,"OK"==e.ErrorCode){t.next=5;break}return t.abrupt("return",this.$message.error(e.ErrorMsg));case 5:this.total=e.Data.Total,i=e.Data.ActivityList||[],i.forEach((function(t){t.StartTime=a.timeFormat(1e3*t.StartTime,"yyyy-MM-dd"),t.EndTime=a.timeFormat(1e3*t.EndTime,"yyyy-MM-dd")})),this.activityList=i;case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getGradeGroupList:function(){var t=l(r.a.mark((function t(){var e;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/activity/GetGradeGroup"}).catch((function(t){return t}));case 2:e=t.sent,this.gradeList=e.Data.GradeGroup;case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getRegionList:function(){var t=l(r.a.mark((function t(){var e;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/activity/GetAllDivision"}).catch((function(t){return t}));case 2:e=t.sent,this.regionList=[{DivisionId:0,Name:"全部"}].concat(e.Data.DivisionList);case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),activityObjectMgr:function(){var t=l(r.a.mark((function t(e){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.filter.Role=e,this.currentPage=1,this.getActivityList();case 3:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),gradeGroupMgr:function(){var t=l(r.a.mark((function t(e){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.filter.GradeGroup=e,this.currentPage=1,this.getActivityList();case 3:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),regionMgr:function(){var t=l(r.a.mark((function t(e){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.filter.District=e,this.currentPage=1,this.getActivityList();case 3:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),handleCurrentPage:function(t){this.currentPage=t,this.getActivityList()}}},h=d,p=(i("26c7"),i("2ee0"),i("5511")),f=Object(p["a"])(h,a,n,!1,null,"51b76632",null);e["default"]=f.exports},ab05:function(t,e,i){},ad0f:function(t,e,i){t.exports=i.p+"img/return.99bbe863.svg"},ad75:function(t,e,i){},af32:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"cos"},[i("input",{ref:"fileEle",staticStyle:{display:"none"},attrs:{type:"file"}})])},n=[],s=i("ae78"),r=i.n(s),o=i("9530"),c=i.n(o),u=i("f753"),l=i.n(u),d=location.protocol,h="api.huodong.eduinspector.com",p="127.0.0.1"===location.hostname||"localhost"===location.hostname,f=p?h:location.host,v={protocol:d,host:f,protocolHost:"https://".concat(f)},m=v,g=i("0210");function y(t,e,i,a,n,s,r){try{var o=t[s](r),c=o.value}catch(u){return void i(u)}o.done?e(c):Promise.resolve(c).then(a,n)}function w(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var s=t.apply(e,i);function r(t){y(s,a,n,r,o,"next",t)}function o(t){y(s,a,n,r,o,"throw",t)}r(void 0)}))}}var b={props:{validList:{type:Array},limit:{type:Number,default:200},page:{type:String}},data:function(){return{cos:"",dialog:"",myFile:"",cosConfig:{bucket:"",region:""},fileList:[]}},watch:{file:function(t){this.myFile=t,this.upload()}},mounted:function(){var t=w(r.a.mark((function t(){var e,i,a;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/resource/costoken"});case 2:e=t.sent,i=e.Data,this.cosConfig.bucket=i.Name,this.cosConfig.region=i.Region,this.cos=new c.a({getAuthorization:function(t,e){l.a.get("".concat(m.protocolHost,"/v1/resource/costoken"),{headers:{Authorization:Object(g["getCookie"])("Authorization")}}).then((function(t){var i=t.data.Data;e({TmpSecretId:i.TmpSecretId,TmpSecretKey:i.TmpSecretKey,XCosSecurityToken:i.SessionToken,ExpiredTime:i.ExpiredTime})})).catch((function(t){console.log(t)}))}}),a=this,this.$refs.fileEle.onchange=function(){a.myFile=this.files[0],a.upload()};case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),methods:{upload:function(){var t=w(r.a.mark((function t(e){var i,a,n,s,o,c,u;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i=this,a=this.myFile,a){t.next=4;break}return t.abrupt("return");case 4:if(i.$emit("start"),this.$refs.fileEle.value="",n=a.name,s=n.split("."),o=s[s.length-1],c=n.replace("."+o,""),-1!=this.validList.indexOf(o)){t.next=14;break}return u=this.validList.join("，"),this.$message({type:"error",duration:2e3,message:"必须上传文件必须是".concat(u,"类型")}),t.abrupt("return",this.$emit("fail"));case 14:this.dialog=this.$message({type:"warning",showClose:!0,message:"上传中...",duration:0}),this.cos.sliceUploadFile({Bucket:i.cosConfig.bucket,Region:i.cosConfig.region,Key:"".concat(c).concat((new Date).getTime(),".").concat(o),Body:a},(function(t,e){e.filename=n,t?i.$emit("fail"):i.$emit("success",e),i.dialog&&i.dialog.close()}));case 16:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}},x=b,k=(i("af3c"),i("5511")),C=Object(k["a"])(x,a,n,!1,null,null,null);e["a"]=C.exports},af3c:function(t,e,i){"use strict";var a=i("4463"),n=i.n(a);n.a},b214:function(t,e,i){},b441:function(t,e,i){"use strict";var a=i("422b"),n=i.n(a);n.a},b6cc:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"component-item"},["title"==t.type?i("top-title",{attrs:{text:t.text,"style-type":t.styleType}}):"content"==t.type?i("text-content",{attrs:{text:t.text,"style-type":t.styleType}}):"secTitle"==t.type?i("sec-title",{attrs:{text:t.text,"style-type":t.styleType}}):"picture"==t.type?i("div",[t.url?i("img",{staticStyle:{width:"100%"},attrs:{src:t.url}}):i("div",{staticClass:"empty-tip"},[t._v("请在右侧上传图片")])]):"video"==t.type?i("div",[t.url?i("video",{staticStyle:{width:"100%"},attrs:{src:t.url,controls:""}}):i("div",{staticClass:"empty-tip"},[t._v("请在右侧上传视频")])]):"audio"==t.type?i("audio-content",{attrs:{url:t.url,"style-type":t.styleType,static:t.static}}):"button"==t.type?i("button-content",{attrs:{text:t.text,"style-type":t.styleType},nativeOn:{click:function(e){return t.btnClick(e)}}}):t._e(),t._t("action")],2)},n=[],s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"activity-edit-top-title"},[1==t.styleType?a("div",{attrs:{"style-type":t.styleType}},[a("span",[t._v(t._s(t.text))]),a("img",{staticClass:"img-left",attrs:{src:i("c39e8")}}),a("img",{staticClass:"img-right",attrs:{src:i("c39e")}})]):2==t.styleType?a("div",{attrs:{"style-type":t.styleType}},[a("img",{staticClass:"img-left",attrs:{src:i("c2c1")}}),a("img",{staticClass:"img-right",attrs:{src:i("44cb")}}),t._l(t.text,(function(e){return a("div",{staticClass:"block-text"},[a("div",{staticClass:"xian shuxian"}),a("div",{staticClass:"xian hengxian"}),a("span",[t._v(t._s(e))])])}))],2):3==t.styleType?a("div",{attrs:{"style-type":t.styleType}},[a("div",{staticClass:"text"},[t._v(t._s(t.text))]),a("img",{attrs:{src:i("8ae4"),alt:""}})]):4==t.styleType?a("div",{attrs:{"style-type":t.styleType}},[a("div",{staticClass:"text"},[t._v(t._s(t.text))])]):t._e()])},r=[],o={props:{styleType:{type:Number,default:1},text:{type:String,required:!0}},data:function(){return{textList:[]}}},c=o,u=(i("fbd0"),i("5511")),l=Object(u["a"])(c,s,r,!1,null,null,null),d=l.exports,h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"activity-edit-text-content"},[1==t.styleType?a("div",{staticClass:"container",attrs:{"style-type":t.styleType}},[a("span",{staticClass:"text"},[t._v(t._s(t.text))])]):t._e(),2==t.styleType?a("div",{staticClass:"container",attrs:{"style-type":t.styleType}},[a("div",{staticClass:"text"},[t._v(t._s(t.text))]),a("img",{attrs:{src:i("44cb")}})]):t._e(),3==t.styleType?a("div",{staticClass:"container",attrs:{"style-type":t.styleType}},[a("div",{staticClass:"text"},[t._v(t._s(t.text))]),a("img",{staticClass:"sanjiao",attrs:{src:i("09c2")}}),a("img",{attrs:{src:i("6ccd")}})]):t._e()])},p=[],f={props:{styleType:{type:Number,default:1},text:{type:String,required:!0}}},v=f,m=(i("6076"),Object(u["a"])(v,h,p,!1,null,null,null)),g=m.exports,y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"activity-edit-sec-title"},[1==t.styleType?a("div",{attrs:{"style-type":t.styleType}},[a("div",{staticClass:"content"},[a("img",{attrs:{src:i("c39e")}}),a("span",{staticClass:"text"},[t._v(t._s(t.text))]),a("div",{staticClass:"bottom-bg"})])]):t._e(),2==t.styleType?a("div",{attrs:{"style-type":t.styleType}},[a("span",{staticClass:"text"},[t._v(t._s(t.text))]),a("div",{staticClass:"line line1"}),a("div",{staticClass:"line line2"})]):t._e(),3==t.styleType?a("div",{attrs:{"style-type":t.styleType}},[a("div",{staticClass:"content"},[a("span",{staticClass:"text"},[t._v(t._s(t.text))]),a("img",{attrs:{src:i("6ccd")}}),a("div",{staticClass:"bottom-bg"})])]):t._e()])},w=[],b={props:{styleType:{type:Number,default:1},text:{type:String,required:!0}}},x=b,k=(i("b441"),Object(u["a"])(x,y,w,!1,null,null,null)),C=k.exports,_=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"activity-edit-video-content"},[i("video",{attrs:{src:t.src,controls:""}})])},S=[],T={props:{styleType:{type:Number,default:1},src:{type:String,required:!0}}},A=T,I=(i("3dd2"),Object(u["a"])(A,_,S,!1,null,null,null)),L=I.exports,E=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"activity-edit-video-content"},[t.static||t.url?i("div",{staticClass:"audio-box",attrs:{"style-type":t.styleType}},[t.static?[i("div",{staticClass:"num cur-step"},[t._v("00:20")]),i("div",{staticClass:"duration-box"},[i("div",{ref:"step",staticClass:"step-box",staticStyle:{width:"30%"}})]),i("div",{staticClass:"num duration"},[t._v("02:20")])]:[i("div",{staticClass:"play-icon",on:{click:function(e){return e.stopPropagation(),t.triggerAudio(e)}}},[1==t.status?i("i",{staticClass:"el-icon-video-play"}):t._e(),2==t.status?i("i",{staticClass:"el-icon-video-pause"}):t._e()]),i("div",{staticClass:"num cur-step"},[t._v(t._s(t.curStep))]),i("div",{staticClass:"duration-box"},[i("div",{ref:"step",staticClass:"step-box"})]),i("div",{staticClass:"num duration"},[t._v(t._s(t.durationStr))]),i("audio",{ref:"myAudio",staticStyle:{display:"none"},attrs:{src:t.url,controls:""}})]],2):i("div",{staticClass:"empty-tip"},[t._v("请在右侧上传音频")])])},D=[],O=i("0210"),P={props:{styleType:{type:Number,default:1},url:{type:String,default:""},static:{type:Boolean,default:!1}},data:function(){return{curStep:"00:00",duration:0,durationStr:"",status:1}},watch:{url:function(){var t=this;setTimeout((function(){t.bindAudioEvent()}))}},mounted:function(){this.bindAudioEvent()},methods:{bindAudioEvent:function(){var t=this;this.$refs.myAudio&&(this.reset(),this.$refs.myAudio.oncanplay=function(e){t.duration=parseInt(t.$refs.myAudio.duration,10),t.durationStr=Object(O["formatTime"])(t.duration)},this.$refs.myAudio.ontimeupdate=function(e){var i=parseInt(e.target.currentTime,10);t.curStep=Object(O["formatTime"])(i),t.$refs.step.style.width=i/t.duration*100+"%"})},triggerAudio:function(){1==this.status?(this.$refs.myAudio.play(),this.status=2):(this.$refs.myAudio.pause(),this.status=1)},reset:function(){this.curStep="00:00",this.$refs.step.style.width=0,this.status=1}}},$=P,N=(i("22ff"),Object(u["a"])($,E,D,!1,null,null,null)),j=N.exports,G=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"activity-edit-button-content"},[1==t.styleType?i("div",{attrs:{"style-type":t.styleType}},[i("span",[t._v(t._s(t.text))])]):t._e(),2==t.styleType?i("div",{attrs:{"style-type":t.styleType}},[i("span",[t._v(t._s(t.text))])]):t._e(),3==t.styleType?i("div",{attrs:{"style-type":t.styleType}},[i("span",[t._v(t._s(t.text))])]):t._e()])},M=[],W={props:{styleType:{type:Number,default:1},text:{type:String,required:!0}}},R=W,U=(i("49f6"),Object(u["a"])(R,G,M,!1,null,null,null)),V=U.exports,z={props:{type:{type:String,required:!0},name:{type:String,required:!0},text:{type:String},styleType:{type:Number,default:1},url:{type:String},static:{type:Boolean,default:!1}},components:{TopTitle:d,TextContent:g,SecTitle:C,VideoContent:L,AudioContent:j,ButtonContent:V},methods:{btnClick:function(){this.$emit("btnClick")}}},F=z,K=(i("1e50"),Object(u["a"])(F,a,n,!1,null,null,null));e["a"]=K.exports},ba3d:function(t,e,i){},ba64:function(t,e,i){},bdab:function(t,e,i){"use strict";var a=i("12d2"),n=i.n(a);n.a},bec8:function(t,e,i){},c2c1:function(t,e,i){t.exports=i.p+"img/flower.e6453426.svg"},c39e:function(t,e,i){t.exports=i.p+"img/tree2.29125bf4.svg"},c39e8:function(t,e,i){t.exports=i.p+"img/tree.956ae210.svg"},c423:function(t,e,i){},c4d1:function(t,e,i){t.exports=i.p+"img/test-code.703d37d4.png"},c5b3:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"my-activity"},[i("el-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:t.handleCreateAtivity}},[t._v("创建活动")]),t._l(t.activityList,(function(e,a){return i("div",{key:a,staticClass:"list",class:0!=a?"bordertop":"",on:{click:function(i){return t.handleRedirect(e)}}},[e.cover?i("img",{staticClass:"cover",attrs:{src:e.cover}}):t._e(),i("div",{staticClass:"title"},[i("span",{staticClass:"title-name"},[t._v(t._s(e.title))]),"ACTIVITY_DRAFT"==e.status?i("span",{staticClass:"status unpublished"},[t._v("未发布")]):t._e(),"ACTIVITY_WAITING_AUDIT"==e.status?i("span",{staticClass:"status inreview"},[t._v("审核中")]):t._e(),"ACTIVITY_AUDIT_REJECT"==e.status?i("span",{staticClass:"status fail"},[t._v("审核未通过")]):t._e(),"ACTIVITY_NOT_START"==e.status?i("span",{staticClass:"status abouttobegin"},[t._v("即将开始")]):t._e(),"ACTIVITY_RUNNING"==e.status?i("span",{staticClass:"status progress"},[t._v("进行中")]):t._e(),"ACTIVITY_FINISHED"==e.status?i("span",{staticClass:"status over"},[t._v("已结束")]):t._e()]),i("div",{staticClass:"desc"},[t._v(t._s(e.desc))]),i("div",{staticClass:"time"},[t._v(t._s(e.time))]),i("div",{staticClass:"vertical-line"}),i("div",{staticClass:"visit_num",class:3==e.status?"unpublished":""},[t._v(t._s(e.visitNum))])])})),i("el-pagination",{staticClass:"paging",attrs:{background:"","current-page":t.currentPage,"page-size":t.pageSize,layout:"prev, pager, next",total:t.total},on:{"current-change":t.handleCurrentPage}}),i("el-dialog",{attrs:{title:"创建活动",visible:t.dialogVisible,width:"545px"},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("el-form",{attrs:{"label-position":"top","label-width":"80px",model:t.form}},[i("el-form-item",{attrs:{label:"活动名称"}},[i("el-input",{attrs:{placeholder:"请输入活动名称",maxlength:20},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),i("el-form-item",{staticClass:"inline marginright",attrs:{label:"活动类型"}},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:t.typeValue,callback:function(e){t.typeValue=e},expression:"typeValue"}},t._l(t.typeOptions,(function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),i("el-form-item",{staticClass:"inline marginright",attrs:{label:"活动组别"}},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:t.groupValue,callback:function(e){t.groupValue=e},expression:"groupValue"}},t._l(t.groupOptions,(function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),i("el-form-item",{staticClass:"inline marginright",attrs:{label:"科目"}},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:t.subjectValue,callback:function(e){t.subjectValue=e},expression:"subjectValue"}},t._l(t.subjectOptions,(function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),i("el-form-item",{attrs:{label:"活动模板"}},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:t.tmplValue,callback:function(e){t.tmplValue=e},expression:"tmplValue"}},t._l(t.tmplOptions,(function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),i("el-form-item",{staticClass:"selectinline",attrs:{label:"活动发布范围（参加活动的人员所属范围）"}},[i("el-select",{staticClass:"marginright",attrs:{placeholder:"请选择"},on:{change:t.handleSelectProvince},model:{value:t.provinceValue,callback:function(e){t.provinceValue=e},expression:"provinceValue"}},t._l(t.provinceOptions,(function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),i("el-select",{staticClass:"marginright",attrs:{placeholder:"请选择"},on:{change:t.handleSelectCity},model:{value:t.cityValue,callback:function(e){t.cityValue=e},expression:"cityValue"}},t._l(t.cityOptions,(function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),i("el-select",{staticClass:"marginright",attrs:{placeholder:"请选择"},model:{value:t.districtValue,callback:function(e){t.districtValue=e},expression:"districtValue"}},t._l(t.districtOptions,(function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),i("el-form-item",{staticClass:"selectinline",attrs:{label:"活动面向对象"}},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:t.roleValue,callback:function(e){t.roleValue=e},expression:"roleValue"}},t._l(t.roleOptions,(function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:t.handleOk}},[t._v("继续创建活动流程")]),i("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")])],1)],1)],2)},n=[],s=i("ae78"),r=i.n(s),o=i("0210");function c(t,e,i,a,n,s,r){try{var o=t[s](r),c=o.value}catch(u){return void i(u)}o.done?e(c):Promise.resolve(c).then(a,n)}function u(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var s=t.apply(e,i);function r(t){c(s,a,n,r,o,"next",t)}function o(t){c(s,a,n,r,o,"throw",t)}r(void 0)}))}}var l={name:"myActivity",data:function(){return{activityList:[],currentPage:1,pageSize:6,total:0,dialogVisible:!1,form:{name:"",type:"",group:"",subject:"",tmpl:"",area:"",role:"",status:""},typeValue:"",typeOptions:[],groupValue:"",groupOptions:[],subjectValue:"",subjectOptions:[],tmplValue:"",tmplOptions:[],provinceValue:"",provinceOptions:[],cityValue:"",cityOptions:[],districtValue:"",districtOptions:[],roleValue:"",roleOptions:[{value:"11",label:"学生"},{value:"12",label:"老师"}],nameReg:/^[\u4e00-\u9fa5a-zA-Z0-9]*$/}},mounted:function(){this.getMyCreateActivityList(this.currentPage,this.pageSize),this.getActivityType(),this.getGradeGroup(),this.getSubjectList(),this.getTemplateList(),this.getProvince()},computed:{user:function(){return this.$store.state.account.user}},methods:{handleRedirect:function(t){var e="";e="ACTIVITY_DRAFT"==t.status?"/myActivityDetail?id=".concat(t.id,"&title=").concat(t.title):"/myActivity/index?id=".concat(t.id,"&title=").concat(t.title),this.$router.push(e)},handleCurrentPage:function(t){this.currentPage=t,this.getMyCreateActivityList(this.currentPage,this.pageSize)},getMyCreateActivityList:function(){var t=u(r.a.mark((function t(e,i){var a,n=this;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/activity/GetManageActivityList",PageNum:e,PageSize:i}).catch((function(t){return t}));case 2:if(a=t.sent,"OK"==a.ErrorCode){t.next=5;break}return t.abrupt("return");case 5:this.activityList=[],this.total=a.Data.Total,a.Data.ActivityList.forEach((function(t){n.activityList.push({id:t.ActivityId,visitNum:t.ViewCount,cover:t.ActivityLogo,status:t.Status,title:t.ActivityName,desc:t.ActivityDesc,time:"".concat(Object(o["timestampToTime"])(t.StartTime,{needUnit:1})," - ").concat(Object(o["timestampToTime"])(t.EndTime,{needUnit:1})),ActivityType:t.ActivityType,GradeGroup:t.GradeGroup,Sponsor:t.Sponsor,Subject:t.Subject})}));case 8:case"end":return t.stop()}}),t,this)})));function e(e,i){return t.apply(this,arguments)}return e}(),getActivityType:function(){var t=u(r.a.mark((function t(){var e,i=this;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/activity/GetActivityType"}).catch((function(t){return t}));case 2:if(e=t.sent,"OK"==e.ErrorCode){t.next=5;break}return t.abrupt("return");case 5:e.Data.ActivityTypeList.forEach((function(t){i.typeOptions.push({value:t.Id,label:t.Name})}));case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getGradeGroup:function(){var t=u(r.a.mark((function t(){var e,i=this;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/activity/GetGradeGroup"}).catch((function(t){return t}));case 2:if(e=t.sent,"OK"==e.ErrorCode){t.next=5;break}return t.abrupt("return");case 5:this.groupOptions=[],e.Data.GradeGroup.forEach((function(t){i.groupOptions.push({value:t.Id,label:t.Name})}));case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getSubjectList:function(){var t=u(r.a.mark((function t(){var e,i=this;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/activity/GetSubjectList"}).catch((function(t){return t}));case 2:if(e=t.sent,"OK"==e.ErrorCode){t.next=5;break}return t.abrupt("return");case 5:this.subjectOptions=[],e.Data.SubjectList.forEach((function(t){i.subjectOptions.push({value:t.Id,label:t.Name})}));case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getTemplateList:function(){var t=u(r.a.mark((function t(){var e,i=this;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/activity/GetTemplateList"}).catch((function(t){return t}));case 2:if(e=t.sent,"OK"==e.ErrorCode){t.next=5;break}return t.abrupt("return");case 5:this.tmplOptions=[],e.Data.TemplateList.forEach((function(t){i.tmplOptions.push({value:t.TemplateId,label:t.TemplateName})}));case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getProvince:function(){var t=u(r.a.mark((function t(){var e,i=this;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/activity/GetProvince"}).catch((function(t){return t}));case 2:if(e=t.sent,"OK"==e.ErrorCode){t.next=5;break}return t.abrupt("return");case 5:this.provinceOptions=[],e.Data.ProvinceList.forEach((function(t){i.provinceOptions.push({value:t.Id,label:t.Name})}));case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getCity:function(){var t=u(r.a.mark((function t(){var e,i=this;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/activity/GetCity",ProvinceId:this.provinceValue}).catch((function(t){return t}));case 2:if(e=t.sent,"OK"==e.ErrorCode){t.next=5;break}return t.abrupt("return");case 5:this.cityOptions=[],e.Data.CityList.forEach((function(t){i.cityOptions.push({value:t.Id,label:t.Name})}));case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getDistrict:function(){var t=u(r.a.mark((function t(){var e,i=this;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/activity/GetDistrict",ProvinceId:this.provinceValue,CityId:this.cityValue}).catch((function(t){return t}));case 2:e=t.sent,this.districtOptions=[],e.Data.DistrictList.forEach((function(t){i.districtOptions.push({value:t.Id,label:t.Name})}));case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),createActivity:function(){var t=u(r.a.mark((function t(){var e,i;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""!=this.form.name){t.next=4;break}return t.abrupt("return",this.$message.error("请输入活动名称"));case 4:if(this.nameReg.test(this.form.name)){t.next=6;break}return t.abrupt("return",this.$message.error("活动名称，只支持中英文数字"));case 6:if(""!=this.typeValue){t.next=8;break}return t.abrupt("return",this.$message.error("请选择活动类型"));case 8:if(""!==this.groupValue){t.next=10;break}return t.abrupt("return",this.$message.error("请选择活动组别"));case 10:if(""!==this.subjectValue){t.next=12;break}return t.abrupt("return",this.$message.error("请选择科目"));case 12:if(""!=this.cityValue){t.next=14;break}return t.abrupt("return",this.$message.error("请选择城市"));case 14:if(""!==this.districtValue){t.next=16;break}return t.abrupt("return",this.$message.error("请选择地区"));case 16:if(""!=this.provinceValue){t.next=18;break}return t.abrupt("return",this.$message.error("请选择省份"));case 18:if(""!=this.tmplValue){t.next=20;break}return t.abrupt("return",this.$message.error("请选择活动模板"));case 20:if(""!=this.roleValue){t.next=22;break}return t.abrupt("return",this.$message.error("请选择活动对象"));case 22:return e={url:"/v1/activity/CreateActivity",ActivityName:this.form.name,ActivityType:this.typeValue,GradeGroup:this.groupValue,Subject:this.subjectValue,ActivityRange:{City:this.cityValue,District:this.districtValue,Province:this.provinceValue},TemplateId:this.tmplValue.toString(),RoleList:[this.roleValue]},t.next=25,this.axiosPost(e).catch((function(t){return t}));case 25:if(i=t.sent,"OK"==i.ErrorCode){t.next=28;break}return t.abrupt("return",this.$message.error(i.ErrorMsg));case 28:this.$router.push("/myActivityDetail?id=".concat(i.Data.ActivityId));case 29:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),handleSelectProvince:function(){this.getCity()},handleSelectCity:function(){this.getDistrict()},handleCreateAtivity:function(){this.user?this.dialogVisible=!0:this.$store.dispatch("INIT_SHOW",!0)},handleOk:function(){this.createActivity()}}},d=l,h=(i("5127"),i("ecde"),i("5511")),p=Object(h["a"])(d,a,n,!1,null,"854c8782",null);e["default"]=p.exports},c607:function(t,e,i){"use strict";var a=i("2894"),n=i.n(a);n.a},ca41:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"activity-setting-item"},[a("div",{staticClass:"logo_desc"},[a("div",{staticClass:"upload-logo",class:t.activityLogo?"logo":"",on:{click:t.chooseImg}},[a("span",{directives:[{name:"show",rawName:"v-show",value:!t.activityLogo,expression:"!activityLogo"}]},[t._v("+添加活动展示预览图")]),a("img",{directives:[{name:"show",rawName:"v-show",value:t.activityLogo,expression:"activityLogo"}],attrs:{src:t.activityLogo}}),a("input",{ref:"uploadImgElem",staticClass:"upload-file",staticStyle:{filter:"alpha(opacity=0)",opacity:"0",width:"0",height:"0"},attrs:{disabled:!t.canEdit,type:"file"},on:{change:t.uploadImg}})]),a("div",{staticClass:"detail-desc",style:t.detailDescWidth},[a("el-input",{attrs:{disabled:!t.canEdit,type:"textarea",rows:2,placeholder:"请输入活动内容介绍",maxlength:120,resize:"none","show-word-limit":""},model:{value:t.detailDescValue,callback:function(e){t.detailDescValue=e},expression:"detailDescValue"}})],1)]),a("p",{staticClass:"tips"},[t._v("根据活动流程需要添加所要展示的页面，设置各环节所需要的配置设置")]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.flow1.show,expression:"flow1.show"}],staticClass:"flow flow1"},[a("div",{staticClass:"line1"},[a("span",{staticClass:"flow-name"},[t._v(t._s(t.flow1.index)+". "+t._s(t.flow1.name))]),a("span",{staticClass:"time-name"},[t._v("对应时间段")]),a("el-date-picker",{attrs:{disabled:!t.canEdit,type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right","picker-options":t.pickerOptions},on:{change:function(e){return t.handleDateChange("1")}},model:{value:t.flow1.time,callback:function(e){t.$set(t.flow1,"time",e)},expression:"flow1.time"}})],1),a("div",{staticClass:"line"}),a("div",{staticClass:"line2"},[a("span",{staticClass:"title"},[t._v("活动介绍页")]),t.canEdit?a("el-button",{staticClass:"first",attrs:{type:"text"},on:{click:function(e){return t.goToFlow1EditPage()}}},[t._v("编辑页面")]):t._e(),t.showPagePreview?a("el-button",{staticClass:"second",attrs:{type:"text"},on:{click:function(e){return t.handleShowFlowQr(1)}}},[a("span",[t._v(t._s(t.flow1.previewName))]),a("vue-qr",{directives:[{name:"show",rawName:"v-show",value:t.flow1.showQr,expression:"flow1.showQr"}],staticClass:"flow-qr",attrs:{text:t.flow1.qrText,margin:4,dotScale:1}})],1):t._e()],1),a("div",{staticClass:"line"}),a("div",{staticClass:"line3"},[t.canEdit?[a("el-button",{staticStyle:{"margin-right":"10px"},on:{click:t.chooseAttachment}},[t._v("上传其他活动相关附件")]),a("span",{staticClass:"tip"},[t._v("支持excel/word/pdf三种格式")]),a("input",{ref:"uploadAttachmentElem",staticClass:"upload-file",staticStyle:{filter:"alpha(opacity=0)",opacity:"0",width:"0",height:"0"},attrs:{type:"file"},on:{change:t.uploadAttachment}}),t._l(t.flow1.fileList,(function(e,i){return a("div",{key:i+"_flow1",staticClass:"file",on:{mouseover:function(i){return t.handleFileOver(e)},mouseout:function(i){return t.handleFileOut(e)}}},[a("span",{staticClass:"file-name"},[t._v(t._s(e.name))]),a("span",{directives:[{name:"show",rawName:"v-show",value:e.showDeleteFileIcon,expression:"item.showDeleteFileIcon"}],staticClass:"close",on:{click:function(a){return t.handleDeleteFile(e,i)}}},[t._v("x")])])}))]:t._l(t.flow1.fileList,(function(e,i){return a("div",{key:i+"_flow1",staticClass:"file",on:{mouseover:function(i){return t.handleFileOver(e)},mouseout:function(i){return t.handleFileOut(e)}}},[a("span",{staticClass:"file-name"},[t._v(t._s(e.name))])])}))],2)]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.flow2.show,expression:"flow2.show"}],staticClass:"flow flow2"},[a("div",{staticClass:"line1"},[a("span",{staticClass:"flow-name"},[t._v(t._s(t.flow2.index)+". "+t._s(t.flow2.name))]),a("span",{staticClass:"time-name"},[t._v("对应时间段")]),a("el-date-picker",{attrs:{disabled:!t.canEdit,type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right","picker-options":t.pickerOptions},on:{change:function(e){return t.handleDateChange("2")}},model:{value:t.flow2.time,callback:function(e){t.$set(t.flow2,"time",e)},expression:"flow2.time"}})],1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.flow3.show,expression:"flow3.show"}],staticClass:"flow flow3"},[a("div",{staticClass:"line1"},[a("span",{staticClass:"flow-name"},[t._v(t._s(t.flow3.index)+". "+t._s(t.flow3.name))]),a("span",{staticClass:"time-name"},[t._v("对应时间段")]),a("el-date-picker",{attrs:{disabled:!t.canEdit,type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right","picker-options":t.pickerOptions},on:{change:function(e){return t.handleDateChange("3")}},model:{value:t.flow3.time,callback:function(e){t.$set(t.flow3,"time",e)},expression:"flow3.time"}})],1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.flow4.show,expression:"flow4.show"}],staticClass:"flow flow4"},[a("div",{staticClass:"line1"},[a("span",{staticClass:"flow-name"},[t._v(t._s(t.flow4.index)+". "+t._s(t.flow4.name))]),a("span",{staticClass:"time-name"},[t._v("对应时间段")]),a("el-date-picker",{attrs:{disabled:!t.canEdit,type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right","picker-options":t.pickerOptions},on:{change:function(e){return t.handleDateChange("4")}},model:{value:t.flow4.time,callback:function(e){t.$set(t.flow4,"time",e)},expression:"flow4.time"}})],1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.flow5.show,expression:"flow5.show"}],staticClass:"flow flow5"},[a("div",{staticClass:"line1"},[a("span",{staticClass:"flow-name"},[t._v(t._s(t.flow5.index)+". "+t._s(t.flow5.name))]),a("span",{staticClass:"time-name"},[t._v("对应时间段")]),a("el-date-picker",{attrs:{disabled:!t.canEdit,type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right","picker-options":t.pickerOptions},on:{change:function(e){return t.handleDateChange("5")}},model:{value:t.flow5.time,callback:function(e){t.$set(t.flow5,"time",e)},expression:"flow5.time"}})],1),a("div",{staticClass:"line"}),t._m(0),a("div",{staticClass:"line"}),t._l(t.flow5.areaAndSchoolList,(function(e,i){return a("div",{key:i+"_flow5",staticClass:"area-school"},[a("span",{staticClass:"name"},[t._v(t._s(e.name))]),a("el-input",{staticClass:"flow5-count",attrs:{disabled:!t.canEdit},on:{blur:function(i){return t.hanleInputBlur("commitCount",e.count)}},model:{value:e.count,callback:function(i){t.$set(e,"count",i)},expression:"item.count"}}),t.canEdit?a("el-button",{staticClass:"delete",attrs:{type:"text"},on:{click:function(e){return t.handleDeleteAreaAndSchool(i)}}},[t._v("删除")]):t._e(),a("div",{staticClass:"line"})],1)})),t.canEdit?a("el-button",{staticClass:"add-area-school",attrs:{type:"text"},on:{click:t.handleShowAddAreaAndSchool}},[t._v("+添加区域/学校")]):t._e()],2),a("div",{directives:[{name:"show",rawName:"v-show",value:t.flow6.show,expression:"flow6.show"}],staticClass:"flow flow6"},[a("div",{staticClass:"line1"},[a("span",{staticClass:"flow-name"},[t._v(t._s(t.flow6.index)+". "+t._s(t.flow6.name))]),a("span",{staticClass:"time-name"},[t._v("对应时间段")]),a("el-date-picker",{attrs:{disabled:!t.canEdit,type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right","picker-options":t.pickerOptions},on:{change:function(e){return t.handleDateChange("6")}},model:{value:t.flow6.time,callback:function(e){t.$set(t.flow6,"time",e)},expression:"flow6.time"}})],1),a("div",{staticClass:"line"}),t._l(t.flow6.expertList,(function(e,i){return a("div",{key:i+"_flow61",staticClass:"expert"},[a("span",{staticClass:"name"},[t._v(t._s(e.name))]),a("span",{staticClass:"phone"},[t._v(t._s(e.phone))]),t.readOnly?t._e():a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.handleDeleteExpert(i,e.id)}}},[t._v("删除")]),a("div",{staticClass:"line"})],1)})),t.readOnly?t._e():a("el-button",{staticClass:"add-expert",attrs:{type:"text"},on:{click:t.handleShowAddExpertDialog}},[t._v("+添加评委")]),a("p",{staticClass:"flow6-tips"},[t._v("设置评分项目")]),a("div",{staticClass:"line"}),a("div",t._l(t.flow6.markProjectList,(function(e,i){return a("div",{key:i+"_flow62",staticClass:"markproject"},[a("span",{staticClass:"name"},[t._v(t._s(e.name))]),a("span",{staticClass:"score"},[t._v(t._s(e.start))]),a("span",{staticClass:"score sperate"},[t._v("-")]),a("span",{staticClass:"score"},[t._v(t._s(e.end))]),t.canEdit?a("el-button",{staticClass:"delete",attrs:{type:"text"},on:{click:function(e){return t.handleDeleteMarkProject(i)}}},[t._v("删除")]):t._e(),a("div",{staticClass:"line"})],1)})),0),a("div",{directives:[{name:"show",rawName:"v-show",value:t.showAddMarkproject,expression:"showAddMarkproject"}],staticClass:"add-markproject-container"},[a("el-input",{staticClass:"addmp-name",attrs:{placeholder:"请输入评分内容"},model:{value:t.markproject.name,callback:function(e){t.$set(t.markproject,"name",e)},expression:"markproject.name"}}),a("el-input",{staticClass:"addmp-start",on:{blur:function(e){return t.hanleInputBlur("mpstart")}},model:{value:t.markproject.start,callback:function(e){t.$set(t.markproject,"start",e)},expression:"markproject.start"}}),a("span",{staticClass:"score sperate"},[t._v("-")]),a("el-input",{staticClass:"addmp-end",on:{blur:function(e){return t.hanleInputBlur("mpend")}},model:{value:t.markproject.end,callback:function(e){t.$set(t.markproject,"end",e)},expression:"markproject.end"}}),a("el-button",{staticClass:"add",attrs:{type:"text"},on:{click:t.handleAddMarkProject}},[t._v("确定")]),a("el-button",{staticClass:"delete",attrs:{type:"text"},on:{click:t.handleCancleMarkProject}},[t._v("取消")]),a("div",{staticClass:"line"})],1),t.canEdit?a("el-button",{staticClass:"add-markproject",attrs:{type:"text"},on:{click:t.handleShowAddMarkProject}},[t._v("+添加评分项目")]):t._e()],2),a("div",{directives:[{name:"show",rawName:"v-show",value:t.flow7.show,expression:"flow7.show"}],staticClass:"flow flow7"},[a("div",{staticClass:"line1"},[a("span",{staticClass:"flow-name"},[t._v(t._s(t.flow7.index)+". "+t._s(t.flow7.name))]),a("span",{staticClass:"time-name"},[t._v("对应时间段")]),a("el-date-picker",{attrs:{disabled:!t.canEdit,type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right","picker-options":t.pickerOptions},on:{change:function(e){return t.handleDateChange("7")}},model:{value:t.flow7.time,callback:function(e){t.$set(t.flow7,"time",e)},expression:"flow7.time"}})],1)]),t.canEdit&&!t.readOnly?a("div",{staticClass:"button-container"},[t.hidePublish?t._e():a("el-button",{staticClass:"save-publish",attrs:{type:"primary"},on:{click:t.handleSaveAndPublish}},[t._v("保存并发布")]),a("el-button",{staticClass:"save",on:{click:t.handleSave}},[t._v("保存")]),t.hidePublish?t._e():a("el-button",{staticClass:"cancel",on:{click:t.handleCancel}},[t._v("取消")])],1):t._e(),t._t("default"),a("el-dialog",{attrs:{title:"添加评委",visible:t.dialogVisible,width:"409px"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:t.expertValue,callback:function(e){t.expertValue=e},expression:"expertValue"}},t._l(t.expertOptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.handleAddExpert}},[t._v("确定")])],1)],1),a("el-dialog",{attrs:{title:"添加区域/学校",visible:t.areaAndSchoolDialogVisible,width:"409px"},on:{"update:visible":function(e){t.areaAndSchoolDialogVisible=e}}},[a("el-tabs",{model:{value:t.addAreaSchoolType,callback:function(e){t.addAreaSchoolType=e},expression:"addAreaSchoolType"}},[a("el-tab-pane",{attrs:{label:"区域",name:"2"}},[a("el-checkbox",{attrs:{indeterminate:t.areaOpt.isIndeterminate},on:{change:t.handleAreaCheckAll},model:{value:t.areaOpt.checkAll,callback:function(e){t.$set(t.areaOpt,"checkAll",e)},expression:"areaOpt.checkAll"}},[t._v("全选")]),a("el-checkbox-group",{on:{change:t.handleAreaCheckedChange},model:{value:t.checkedAreaSchool,callback:function(e){t.checkedAreaSchool=e},expression:"checkedAreaSchool"}},t._l(t.areaOptions,(function(e){return a("el-checkbox",{key:e.value,attrs:{label:e.value}},[t._v(t._s(e.label))])})),1)],1),a("el-tab-pane",{attrs:{label:"学校",name:"1"}},[a("el-checkbox",{attrs:{indeterminate:t.schoolOpt.isIndeterminate},on:{change:t.handleSchoolCheckAll},model:{value:t.schoolOpt.checkAll,callback:function(e){t.$set(t.schoolOpt,"checkAll",e)},expression:"schoolOpt.checkAll"}},[t._v("全选")]),a("el-checkbox-group",{on:{change:t.handleSchoolCheckedChange},model:{value:t.checkedAreaSchool,callback:function(e){t.checkedAreaSchool=e},expression:"checkedAreaSchool"}},t._l(t.schoolOptions,(function(e){return a("el-checkbox",{key:e.value,attrs:{label:e.value}},[t._v(t._s(e.label))])})),1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.areaAndSchoolDialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.handleAddAreaAndSchool}},[t._v("确定")])],1)],1),a("el-dialog",{attrs:{title:"裁剪",visible:t.cropImgShow,width:"500px",top:"80px"},on:{"update:visible":function(e){t.cropImgShow=e}}},[a("div",{staticClass:"icon-contain"},[a("img",{attrs:{src:i("dc34")},on:{click:t.bigger}}),a("img",{staticClass:"second",attrs:{src:i("1217")},on:{click:t.smaller}})]),a("vue-cropper",{ref:"cropper",staticStyle:{height:"400px",width:"90%","margin-left":"30px"},attrs:{img:t.croperOption.img,outputSize:t.croperOption.size,fixedBox:!0,outputType:t.croperOption.outputType,info:!0,canMoveBox:t.croperOption.canMoveBox,autoCrop:t.croperOption.autoCrop,autoCropWidth:t.croperOption.autoCropWidth,autoCropHeight:t.croperOption.autoCropHeight}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.cropImgShow=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.saveCropImg}},[t._v("确 定")])],1)],1)],2)},n=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("p",{staticClass:"flow5-tips"},[i("span",{staticClass:"head-name"},[t._v("区名称区学校")]),i("span",{staticClass:"head-count"},[t._v("可提交人数")])])}],s=i("ae78"),r=i.n(s),o=i("4c99"),c=i("0210"),u=i("9530"),l=i.n(u),d=i("4579"),h=i.n(d);function p(t,e,i,a,n,s,r){try{var o=t[s](r),c=o.value}catch(u){return void i(u)}o.done?e(c):Promise.resolve(c).then(a,n)}function f(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var s=t.apply(e,i);function r(t){p(s,a,n,r,o,"next",t)}function o(t){p(s,a,n,r,o,"throw",t)}r(void 0)}))}}var v={name:"activitySettingItem",components:{VueCropper:o["VueCropper"],VueQr:h.a,SettingItem:w},props:{readOnly:{type:Boolean,default:!1},hidePublish:{type:Boolean,default:!1}},data:function(){return{croperOption:{img:"",size:1,outputType:"png",canMoveBox:!0,autoCrop:!0,autoCropWidth:320,autoCropHeight:180,fixed:!0,centerBox:!0},cropImgShow:!1,cosConfig:{bucket:"",region:""},cos:"",isSaveCropImging:!1,activityId:"",activityName:"",activityLogo:"",activityStatus:"",detailDescValue:"",detailDescWidth:"",flow1:{id:"STAGE_PREPARE",index:"",show:!1,name:"",time:"",config:{},fileList:[],showQr:!1,qrText:"",previewName:"预览",pageUrl:""},flow2:{id:"STAGE_WORK_UPLOAD",index:"",show:!1,name:"",time:"",config:{},showQr:!1,qrText:"",previewName:"预览"},flow3:{id:"STAGE_WORK_AUDIT",index:"",show:!1,name:"",time:"",config:{}},flow4:{id:"STAGE_WORK_SHOW",index:"",show:!1,name:"",time:"",config:{}},flow5:{id:"STAGE_WORK_PRE_JUDGE",index:"",show:!1,name:"",time:"",config:{},areaAndSchoolList:[]},flow6:{id:"STAGE_WORK_JUDGE",index:"",show:!1,name:"",time:"",config:{},expertList:[],markProjectList:[]},flow7:{id:"STAGE_EXCELLENT_WORK_SHOW",index:"",show:!1,name:"",time:"",config:{},showQr:!1,qrText:""},showAddMarkproject:!1,markproject:{name:"",start:0,end:10},dialogVisible:!1,expertValue:"",expertOptions:[],areaAndSchoolDialogVisible:!1,checkedAreaSchool:[],nameReg:/^[\u4e00-\u9fa5a-zA-Z0-9]*$/,numReg:/^\d*$/,saveTaskId:"",areaAndSchoolOptions:[],areaOptions:[],schoolOptions:[],areaOpt:{checkAll:!1,isIndeterminate:!1},schoolOpt:{checkAll:!1,isIndeterminate:!1},allAreaId:[],allSchoolId:[],showPagePreview:!1,pickerOptions:{disabledDate:function(t){var e=new Date,i=e.getFullYear(),a=e.getMonth()+1,n=e.getDate(),s=new Date(i+"/"+a+"/"+n+" 00:00:00");return t.getTime()<s.getTime()}},addAreaSchoolType:"2"}},computed:{canEdit:function(){return("ACTIVITY_DRAFT"==this.activityStatus||"ACTIVITY_WAITING_AUDIT"==this.activityStatus)&&!this.readOnly}},mounted:function(){this.activityId=this.$route.query.id,this.getActivityDetail(this.activityId),this.getCosBucket(),this.initCos(),this.getExpertList(),this.getQuickDivison()},destroyed:function(){clearInterval(this.saveTaskId)},methods:{hanleInputBlur:function(t,e){"mpstart"==t?this.numReg.test(this.markproject.start)||this.$message.warning("设置评分项目的起始值，只支持数字类型"):"mpend"==t?this.numReg.test(this.markproject.end)||this.$message.warning("设置评分项目的结束值，只支持数字类型"):"commitCount"==t&&(this.numReg.test(e)||this.$message.warning("可提交人数，只支持数字类型"))},goToFlow1EditPage:function(){this.handleSave("interval");var t="/publishManage?id=".concat(this.activityId);"undefined"!=typeof this.flow1.pageId&&(t="/publishManage?id=".concat(this.activityId,"&pageId=").concat(this.flow1.pageId,"&previewToken=").concat(this.flow1.previewToken)),this.$router.push(t)},handleShowFlowQr:function(){var t=f(r.a.mark((function t(e){var i,a;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this["flow"+e].showQr){t.next=11;break}return t.next=3,this.axiosGet({url:"/v1/page/GetPreviewCode",ActivityId:this.activityId}).catch((function(t){return t}));case 3:i=t.sent,a=i.Data.Code,this.flow1.qrText=this.flow1.qrText.replace("Code=","Code=".concat(a)),this["flow"+e].previewName="关闭",this["flow"+e].showQr=!0,console.log(this.flow1.qrText),t.next=13;break;case 11:this["flow"+e].previewName="预览",this["flow"+e].showQr=!1;case 13:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),getCosBucket:function(){var t=f(r.a.mark((function t(){var e;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/resource/costoken"}).catch((function(t){return t}));case 2:if(e=t.sent,"OK"==e.ErrorCode){t.next=5;break}return t.abrupt("return");case 5:this.cosConfig.bucket=e.Data.Name,this.cosConfig.region=e.Data.Region;case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getExpertList:function(){var t=f(r.a.mark((function t(){var e,i;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/activity/GetExpertList"}).catch((function(t){return t}));case 2:if(e=t.sent,"OK"==e.ErrorCode){t.next=5;break}return t.abrupt("return");case 5:i=[],e.Data.ExpertInfo.forEach((function(t){i.push({value:t.UserId,label:t.Username,phone:t.Phone})})),this.expertOptions=i;case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getQuickDivison:function(){var t=f(r.a.mark((function t(){var e,i=this;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/platform/GetQuickDivison",TagName:"sz_shuoke"}).catch((function(t){return t}));case 2:if(e=t.sent,"OK"==e.ErrorCode){t.next=5;break}return t.abrupt("return");case 5:e.Data.DivisonList.forEach((function(t){1==t.DivisionType?(i.schoolOptions.push({value:t.DivisionId+"",label:t.DivisionName}),i.allSchoolId.push(t.DivisionId+"")):2==t.DivisionType&&(i.areaOptions.push({value:t.DivisionId+"",label:t.DivisionName}),i.allAreaId.push(t.DivisionId+"")),i.areaAndSchoolOptions.push({value:t.DivisionId+"",label:t.DivisionName})}));case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),initCos:function(){var t=this;this.cos=new l.a({getAuthorization:function(e,i){t.axiosGet({url:"/v1/resource/costoken"}).then((function(t){var e=t.Data;i({TmpSecretId:e.TmpSecretId,TmpSecretKey:e.TmpSecretKey,XCosSecurityToken:e.SessionToken,ExpiredTime:e.ExpiredTime})})).catch((function(e){t.$message.error(e)}))}})},saveCropImg:function(){if(!this.isSaveCropImging){this.isSaveCropImging=!0;var t=this,e=t.$message({message:"裁剪并上传中...",duration:2e4});this.$refs.cropper.getCropBlob((function(i){var a=new window.File([i],t.uploadImgName,{type:t.uploadImgType});t.cos.sliceUploadFile({Bucket:t.cosConfig.bucket,Region:t.cosConfig.region,Key:Object(c["getCosKey"])(a),Body:a},(function(i,a){t.isSaveCropImging=!1,e.close(),i||(t.$message({message:"上传成功",type:"success"}),t.activityLogo=location.protocol+"//"+a.Location,t.cropImgShow=!1)}))}))}},bigger:function(){this.$refs.cropper.changeScale(1)},smaller:function(){this.$refs.cropper.changeScale(-1)},chooseImg:function(){this.$refs.uploadImgElem.dispatchEvent(new MouseEvent("click"))},uploadImg:function(){var t=this;if(this.$refs.uploadImgElem.files.length>0){var e=this.$refs.uploadImgElem.files[0],i=e.type;if("image/jpeg"!=i&&"image/jpg"!=i&&"image/png"!=i)return this.$message({message:"只支持 jpg/jpeg/png 三种格式的图片",type:"error"});this.uploadImgName=e.name,this.uploadImgType=i;var a=new FileReader;a.onload=function(e){t.croperOption.img=e.target.result,t.cropImgShow=!0},a.readAsDataURL(e)}},chooseAttachment:function(){this.$refs.uploadAttachmentElem.dispatchEvent(new MouseEvent("click"))},uploadAttachment:function(){if(this.$refs.uploadAttachmentElem.files.length>0){var t=this.$refs.uploadAttachmentElem.files[0],e=t.type;if("application/vnd.ms-excel"!=e&&"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"!=e&&"application/pdf"!=e&&"application/msword"!=e&&"application/vnd.openxmlformats-officedocument.wordprocessingml.document"!=e)return this.$message({message:"只支持 excel/word/pdf 三种格式的文件",type:"error"});var i=this;if(this.isUploadAttachmenting)return;this.isUploadAttachmenting=!0;var a=i.$message({message:"上传中...",duration:2e5});i.cos.sliceUploadFile({Bucket:i.cosConfig.bucket,Region:i.cosConfig.region,Key:Object(c["getCosKey"])(t),Body:t},(function(e,n){if(a.close(),i.isUploadAttachmenting=!1,!e){i.$message({message:"上传成功",type:"success"});var s=location.protocol+"//"+n.Location,r=t.name;i.flow1.fileList.push({name:r,url:s,showDeleteFileIcon:!1})}}))}},getActivityDetail:function(){var t=f(r.a.mark((function t(e){var i,a=this;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/activity/GetActivityDetail",ActivityId:e}).catch((function(t){return t}));case 2:if(i=t.sent,"OK"==i.ErrorCode){t.next=5;break}return t.abrupt("return");case 5:this.showPagePreview=i.Data.HasPage,this.activityStatus=i.Data.Status,("ACTIVITY_DRAFT"==this.activityStatus||"ACTIVITY_WAITING_AUDIT"==this.activityStatus&&!this.hidePublish)&&(this.saveTaskId=setInterval((function(){a.handleSave("interval")}),5e3)),this.activityName=i.Data.ActivityName,this.activityLogo=i.Data.ActivityLogo,this.activityType=i.Data.ActivityType,this.detailDescValue=i.Data.ActivityDesc,this.endTime=i.Data.EndTime,this.gradeGroup=i.Data.GradeGroup,this.startTime=i.Data.StartTime,this.subject=i.Data.Subject,i.Data.StageList.forEach((function(t,e){if(t.StageId==a.flow1.id){if(a.flow1.show=!0,a.flow1.index=e+1,a.flow1.name=t.StageName,a.flow1.startTime=t.StartTime,a.flow1.endTime=t.EndTime,a.flow1.time=[1e3*t.StartTime,1e3*t.EndTime],a.flow1.config=t.Config?JSON.parse(t.Config):null,a.flow1.config){a.flow1.config.Attachment&&a.flow1.config.Attachment.forEach((function(t){a.flow1.fileList.push({name:t.Name,url:t.URL,showDeleteFileIcon:!1})}));var i=location.protocol+"//"+location.host+"/h5/";"127.0.0.1"==location.hostname&&(i="https://upclass.educloud.tencent.com/h5/"),i+="?ActivityId=".concat(a.activityId,"&Code="),a.flow1.qrText=i}}else if(t.StageId==a.flow2.id)a.flow2.show=!0,a.flow2.index=e+1,a.flow2.name=t.StageName,a.flow2.startTime=t.StartTime,a.flow2.endTime=t.EndTime,a.flow2.time=[1e3*t.StartTime,1e3*t.EndTime],a.flow2.config=t.Config?JSON.parse(t.Config):null,a.flow2.config&&(a.flow2.qrText=a.flow2.config.PageURL?a.flow2.config.PageURL:"");else if(t.StageId==a.flow3.id)a.flow3.show=!0,a.flow3.index=e+1,a.flow3.name=t.StageName,a.flow3.startTime=t.StartTime,a.flow3.endTime=t.EndTime,a.flow3.time=[1e3*t.StartTime,1e3*t.EndTime],a.flow3.config=t.Config?JSON.parse(t.Config):null;else if(t.StageId==a.flow4.id)a.flow4.show=!0,a.flow4.index=e+1,a.flow4.name=t.StageName,a.flow4.startTime=t.StartTime,a.flow4.endTime=t.EndTime,a.flow4.time=[1e3*t.StartTime,1e3*t.EndTime],a.flow4.config=t.Config?JSON.parse(t.Config):null;else if(t.StageId==a.flow5.id)a.flow5.show=!0,a.flow5.index=e+1,a.flow5.name=t.StageName,a.flow5.startTime=t.StartTime,a.flow5.endTime=t.EndTime,a.flow5.time=[1e3*t.StartTime,1e3*t.EndTime],a.flow5.config=t.Config?JSON.parse(t.Config):null,a.flow5.config&&a.flow5.config.DivisionList&&a.flow5.config.DivisionList.forEach((function(t){a.flow5.areaAndSchoolList.push({name:t.DivisionName,count:t.WorkNum,id:t.DivisionID})}));else if(t.StageId==a.flow6.id){if(a.flow6.show=!0,a.flow6.index=e+1,a.flow6.name=t.StageName,a.flow6.startTime=t.StartTime,a.flow6.endTime=t.EndTime,a.flow6.time=[1e3*t.StartTime,1e3*t.EndTime],a.flow6.config=t.Config?JSON.parse(t.Config):null,a.flow6.config){if(a.flow6.config.JudgeList){var n=[];a.flow6.config.JudgeList.forEach((function(t){n.push({name:t.UserName,phone:t.Phone,id:t.UserID})})),a.flow6.expertList=n}if(a.flow6.config.EvaluationList){var s=[];a.flow6.config.EvaluationList.forEach((function(t){s.push({name:t.Name,start:t.MinScore,end:t.MaxScore})})),a.flow6.markProjectList=s}}}else t.StageId==a.flow7.id&&(a.flow7.show=!0,a.flow7.index=e+1,a.flow7.name=t.StageName,a.flow7.startTime=t.StartTime,a.flow7.endTime=t.EndTime,a.flow7.time=[1e3*t.StartTime,1e3*t.EndTime],a.flow7.config=t.Config?JSON.parse(t.Config):null,a.flow7.config&&(a.flow7.qrText=a.flow7.config.PageURL?a.flow7.config.PageURL:""))}));case 17:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),handleFileOver:function(t){t.showDeleteFileIcon=!0},handleFileOut:function(t){t.showDeleteFileIcon=!1},handleDeleteFile:function(t,e){this.flow1.fileList.splice(e,1)},handleSaveAndPublish:function(){this.handleSave("publish")},handleSave:function(){var t=f(r.a.mark((function t(e){var i,a,n,s,o,c,u,l,d=this;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i=[],a=!0,this.flow1.show&&(this.flow1.config.Attachment=[],this.flow1.fileList.forEach((function(t){d.flow1.config.Attachment.push({Name:t.name,URL:t.url})})),i.push({Config:JSON.stringify(this.flow1.config),EndTime:this.flow1.endTime,StageId:this.flow1.id,StageName:this.flow1.name,StartTime:this.flow1.startTime})),this.flow2.show&&i.push({Config:JSON.stringify(this.flow2.config),EndTime:this.flow2.endTime,StageId:this.flow2.id,StageName:this.flow2.name,StartTime:this.flow2.startTime}),this.flow3.show&&i.push({Config:JSON.stringify(this.flow3.config),EndTime:this.flow3.endTime,StageId:this.flow3.id,StageName:this.flow3.name,StartTime:this.flow3.startTime}),this.flow4.show&&i.push({Config:JSON.stringify(this.flow4.config),EndTime:this.flow4.endTime,StageId:this.flow4.id,StageName:this.flow4.name,StartTime:this.flow4.startTime}),!this.flow5.show){t.next=20;break}this.flow5.config.DivisionList=[],n=0;case 9:if(!(n<this.flow5.areaAndSchoolList.length)){t.next=16;break}if(this.numReg.test(this.flow5.areaAndSchoolList[n].count)){t.next=13;break}return a=!1,t.abrupt("break",16);case 13:n++,t.next=9;break;case 16:if(a){t.next=18;break}return t.abrupt("return",this.$message.error("可提交人数，只支持数字类型"));case 18:this.flow5.areaAndSchoolList.forEach((function(t){d.flow5.config.DivisionList.push({DivisionID:Number(t.id),DivisionName:t.name,WorkNum:Number(t.count)})})),i.push({Config:JSON.stringify(this.flow5.config),EndTime:this.flow5.endTime,StageId:this.flow5.id,StageName:this.flow5.name,StartTime:this.flow5.startTime});case 20:if(!this.flow6.show){t.next=37;break}this.flow6.config.JudgeList=[],this.flow6.expertList.forEach((function(t){d.flow6.config.JudgeList.push({UserName:t.name,Phone:t.phone,UserId:t.id})})),s=0;case 24:if(!(s<this.flow6.markProjectList.length)){t.next=32;break}if(o=this.flow6.markProjectList[s],this.numReg.test(o.start)&&this.numReg.test(o.end)){t.next=29;break}return a=!1,t.abrupt("break",32);case 29:s++,t.next=24;break;case 32:if(a){t.next=34;break}return t.abrupt("return",this.$message.error("设置评分项目的起始和结束，只支持数字类型"));case 34:this.flow6.config.EvaluationList=[],this.flow6.markProjectList.forEach((function(t){d.flow6.config.EvaluationList.push({Name:t.name,MinScore:Number(t.start),MaxScore:Number(t.end)})})),i.push({Config:JSON.stringify(this.flow6.config),EndTime:this.flow6.endTime,StageId:this.flow6.id,StageName:this.flow6.name,StartTime:this.flow6.startTime});case 37:if(this.flow7.show&&i.push({Config:JSON.stringify(this.flow7.config),EndTime:this.flow7.endTime,StageId:this.flow7.id,StageName:this.flow7.name,StartTime:this.flow7.startTime}),"interval"==e||this.activityLogo){t.next=40;break}return t.abrupt("return",this.$message.error("必须上传活动封面"));case 40:return c={url:"/v1/activity/UpdateActivity",ActivityId:Number(this.activityId),ActivityLogo:this.activityLogo,ActivityDesc:this.detailDescValue,ActivityName:this.activityName,ActivityType:Number(this.activityType),EndTime:this.endTime,GradeGroup:this.gradeGroup,StartTime:this.startTime,Subject:this.subject,StageList:i},u="保存成功","publish"==e&&(c.Status="ACTIVITY_WAITING_AUDIT",u="保存并发布成功"),t.next=45,this.axiosPost(c).catch((function(t){return t}));case 45:if(l=t.sent,"OK"==l.ErrorCode){t.next=49;break}return clearInterval(this.saveTaskId),t.abrupt("return",this.$message.error(l.ErrorMsg));case 49:"interval"!=e&&this.$message.success(u),"publish"==e&&setTimeout((function(){d.$router.back(-1)}),1500);case 51:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),handleCancel:function(){this.$router.push("/myActivity")},handleShowAddMarkProject:function(){this.markproject.Name="",this.showAddMarkproject=!0},handleAddMarkProject:function(){if(""==this.markproject.name)return this.$message.warning("请输入评分项目名称");this.nameReg.test(this.markproject.name)||this.$message.warning("评分项目名称，只支持中英文数字"),this.flow6.markProjectList.push({name:this.markproject.name,start:this.markproject.start,end:this.markproject.end}),this.markproject.name="",this.showAddMarkproject=!1},handleDeleteMarkProject:function(t){this.flow6.markProjectList.splice(t,1)},handleCancleMarkProject:function(){this.showAddMarkproject=!1},handleDeleteExpert:function(){var t=f(r.a.mark((function t(e,i){var a;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosPost({url:"/v1/activity/RemoveJudge",ActivityId:this.activityId,JudgeList:[{UserId:i}]}).catch((function(t){return t}));case 2:a=t.sent,"OK"==a.ErrorCode?(this.$message.success("删除评委成功"),this.flow6.expertList.splice(e,1)):this.$message.error("删除评委失败:[".concat(a.ErrorMsg,"][code=").concat(a.ErrorCode,"]"));case 4:case"end":return t.stop()}}),t,this)})));function e(e,i){return t.apply(this,arguments)}return e}(),handleShowAddExpertDialog:function(){this.dialogVisible=!0},handleAddExpert:function(){var t=f(r.a.mark((function t(){var e,i;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(this.expertValue.length>0)){t.next=11;break}return e=[],this.expertValue.forEach((function(t){e.push({UserId:t})})),t.next=5,this.axiosPost({url:"/v1/activity/AddJudge",ActivityId:this.activityId,JudgeList:e}).catch((function(t){return t}));case 5:if(i=t.sent,"OK"==i.ErrorCode){t.next=8;break}return t.abrupt("return",this.$message.error(i.ErrorMsg));case 8:this.expertValue=[],this.$message.success("添加评委成功"),this.getActivityDetail(this.activityId);case 11:this.dialogVisible=!1;case 12:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),handleShowAddAreaAndSchool:function(){this.areaAndSchoolDialogVisible=!0},handleAreaCheckAll:function(t){this.checkedAreaSchool=t?this.allAreaId:[],this.areaOpt.isIndeterminate=!1},handleSchoolCheckAll:function(t){this.checkedAreaSchool=t?this.allSchoolId:[],this.schoolOpt.isIndeterminate=!1},handleAreaCheckedChange:function(t){var e=t.length;this.areaOpt.checkAll=e===this.allAreaId.length,this.areaOpt.isIndeterminate=e>0&&e<this.allAreaId.length},handleSchoolCheckedChange:function(t){var e=t.length;this.schoolOpt.checkAll=e===this.allSchoolId.length,this.schoolOpt.isIndeterminate=e>0&&e<this.allSchoolId.length},handleAddAreaAndSchool:function(){var t=this,e=[];if(this.checkedAreaSchool.length>0){for(var i=0;i<this.flow5.areaAndSchoolList.length;i++)for(var a=0;a<this.checkedAreaSchool.length;a++)if(this.flow5.areaAndSchoolList[i].id==this.checkedAreaSchool[a]){this.checkedAreaSchool.splice(a,1);break}this.checkedAreaSchool.forEach((function(i){for(var a=0;a<t.areaAndSchoolOptions.length;a++)if(t.areaAndSchoolOptions[a].value==i){var n=t.areaAndSchoolOptions[a];e.push({name:n.label,count:n.count?n.count:0,id:n.value});break}})),this.flow5.areaAndSchoolList=this.flow5.areaAndSchoolList.concat(e)}this.areaAndSchoolDialogVisible=!1},handleDeleteAreaAndSchool:function(t){this.flow5.areaAndSchoolList.splice(t,1)},handleDateChange:function(t){var e=this["flow".concat(t)];e.startTime=Object(c["timestampToTime"])(Math.floor(e.time[0]/1e3),{dateZero:1}),e.endTime=Object(c["timestampToTime"])(Math.floor(e.time[1]/1e3),{dateZero:1}),e.startTime=Math.floor(new Date("".concat(e.startTime,"T00:00:00")).getTime()/1e3),e.endTime=Math.floor(new Date("".concat(e.endTime,"T23:59:59")).getTime()/1e3)}}},m=v,g=(i("28ef"),i("5511")),y=Object(g["a"])(m,a,n,!1,null,null,null),w=e["a"]=y.exports},cb57:function(t,e,i){"use strict";var a=i("ba3d"),n=i.n(a);n.a},ccab:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"excellent-work-detail"},[i("div",{staticClass:"work-title"},[i("span",{staticClass:"go-back",on:{click:function(e){return t.$router.back(-1)}}},[t._v("待评审的作品")]),t._v(" / "+t._s(t.workName))]),i("div",{staticClass:"work-detail-wrap"},[i("work-detail",{staticClass:"work-vido",attrs:{WorkId:parseInt(t.workId)},on:{Evaluation:t.evaluationListMgr}}),0==t.status?i("div",[i("div",{staticClass:"aduit-list"},[t._v("评分表")]),0==t.status?i("div",{staticClass:"aduit-bottom"},t._l(t.evaluationList,(function(e,a){return i("div",{key:a,staticClass:"box"},[i("p",{staticClass:"box-btn"},[t._v(t._s(e.Name))]),i("el-select",{staticStyle:{width:"100px"},model:{value:e.value,callback:function(i){t.$set(e,"value",i)},expression:"item.value"}},t._l(t.optionsList[a],(function(t){return i("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1)})),0):t._e()]):t._e(),1==t.status?i("div",{staticClass:"aduit-bottom"},[i("div",{staticClass:"aduit-list"},[t._v("评分表")]),t._l(t.evaluationList,(function(e,a){return i("div",{key:a,staticClass:"box"},[i("p",{staticClass:"box-btn"},[t._v(t._s(e.Name))]),i("span",{staticClass:"store"},[t._v(t._s(e.Score))])])}))],2):t._e(),0==t.status?i("el-button",{staticStyle:{"margin-top":"10px"},attrs:{type:"primary"},on:{click:t.subComment}},[t._v("提交评论")]):t._e()],1)])},n=[],s=i("ae78"),r=i.n(s),o=i("0865");function c(t,e,i,a,n,s,r){try{var o=t[s](r),c=o.value}catch(u){return void i(u)}o.done?e(c):Promise.resolve(c).then(a,n)}function u(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var s=t.apply(e,i);function r(t){c(s,a,n,r,o,"next",t)}function o(t){c(s,a,n,r,o,"throw",t)}r(void 0)}))}}var l={components:{WorkDetail:o["a"]},data:function(){return{workId:"",workName:"",fullStore:10,innovateStore:10,evaluationList:[],optionsList:[],workStatus:"",DivisionId:""}},created:function(){var t=u(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.workId=this.$route.query.WorkId,this.workName=this.$route.query.WorkName,this.status=this.$route.query.status,this.DivisionId=this.$route.query.DivisionId;case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),methods:{evaluationListMgr:function(t){if(t.ScoreList){this.evaluationList=t.ScoreList;var e=!0,i=!1,a=void 0;try{for(var n,s=this.evaluationList[Symbol.iterator]();!(e=(n=s.next()).done);e=!0){for(var r=n.value,o=r.MinScore,c=r.MaxScore,u=[],l=o;l<=c;l++)u.push(l);this.optionsList.push(u)}}catch(d){i=!0,a=d}finally{try{e||null==s.return||s.return()}finally{if(i)throw a}}}},subComment:function(){var t=u(r.a.mark((function t(){var e,i,a,n,s,o,c,u;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=[],i=!0,a=!1,n=void 0,t.prev=4,s=this.evaluationList[Symbol.iterator]();case 6:if(i=(o=s.next()).done){t.next=14;break}if(c=o.value,c.value){t.next=10;break}return t.abrupt("return",this.$message.error("请将评分表填写完整"));case 10:e.push({Name:c.Name,Score:c.value});case 11:i=!0,t.next=6;break;case 14:t.next=20;break;case 16:t.prev=16,t.t0=t["catch"](4),a=!0,n=t.t0;case 20:t.prev=20,t.prev=21,i||null==s.return||s.return();case 23:if(t.prev=23,!a){t.next=26;break}throw n;case 26:return t.finish(23);case 27:return t.finish(20);case 28:return t.next=30,this.axiosPost({url:"/v1/activity/SetWorkScore",WorkId:this.workId,ScoreList:e,DivisionId:this.DivisionId}).catch((function(t){return t}));case 30:if(u=t.sent,"OK"==u.ErrorCode){t.next=33;break}return t.abrupt("return",this.$message.error(u.ErrorMsg));case 33:this.$message.success("提交成功"),this.$router.back(-1);case 35:case"end":return t.stop()}}),t,this,[[4,16,20,28],[21,,23,27]])})));function e(){return t.apply(this,arguments)}return e}()}},d=l,h=(i("46de"),i("5511")),p=Object(h["a"])(d,a,n,!1,null,"4c50e10d",null);e["default"]=p.exports},cf8e:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"uni-app uni-layout"},[i("t-header"),i("div",{staticClass:"uni-layout-content"},[i("div",{staticClass:"pages"},[i("router-view")],1)]),i("w-x-login",{ref:"wxLogin"})],1)},n=[],s=i("0b35"),r=i("99a7"),o={name:"uni-content",components:{tHeader:s["a"],WXLogin:r["a"]},watch:{"$store.state.login.show":function(t){t&&this.$refs.wxLogin.login()}}},c=o,u=(i("6b57"),i("5511")),l=Object(u["a"])(c,a,n,!1,null,null,null);e["default"]=l.exports},d040:function(t,e,i){},d47b:function(t,e,i){t.exports=i.p+"img/down.5013077a.svg"},d4d9:function(t,e,i){},d623:function(t,e,i){},d8f4:function(t,e,i){},d8f5:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"excellent-work-list"},[t.activityList.length>0?i("div",{staticClass:"work-show"},[i("activity-list",{attrs:{activityList:t.activityList,goToDetail:t.excellentWork}})],1):t._e()])},n=[],s=i("ae78"),r=i.n(s),o=i("7342");function c(t,e,i,a,n,s,r){try{var o=t[s](r),c=o.value}catch(u){return void i(u)}o.done?e(c):Promise.resolve(c).then(a,n)}function u(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var s=t.apply(e,i);function r(t){c(s,a,n,r,o,"next",t)}function o(t){c(s,a,n,r,o,"throw",t)}r(void 0)}))}}var l={name:"activity-center",components:{ActivityList:o["a"]},data:function(){return{activityList:[],excellentWork:"excellentWork"}},created:function(){var t=u(r.a.mark((function t(){var e,i,a=this;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axiosGet({url:"/v1/activity/GetExcellentWorkCategory"}).catch((function(t){return t}));case 2:if(e=t.sent,"OK"==e.ErrorCode){t.next=5;break}return t.abrupt("return",this.$message.error(e.ErrorMsg));case 5:i=e.Data.CategoryList||[],i.forEach((function(t){t.StartTime=a.timeFormat(1e3*t.StartTime,"yyyy-MM-dd"),t.EndTime=a.timeFormat(1e3*t.EndTime,"yyyy-MM-dd")})),this.activityList=i;case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},d=l,h=(i("2b20"),i("5511")),p=Object(h["a"])(d,a,n,!1,null,null,null);e["default"]=p.exports},dc34:function(t,e,i){t.exports=i.p+"img/big.3f69fe78.png"},dd6e:function(t,e,i){"use strict";var a=i("3c56"),n=i.n(a);n.a},e265:function(t,e,i){},e3ba:function(t,e,i){t.exports=i.p+"img/up.a439af33.svg"},e57a:function(t,e,i){},e59f:function(t,e,i){"use strict";var a=i("fd16"),n=i.n(a);n.a},e801:function(t,e,i){},ecde:function(t,e,i){"use strict";var a=i("d4d9"),n=i.n(a);n.a},f12a:function(t,e,i){},f309:function(t,e,i){},f911:function(t,e,i){},fa34:function(t,e,i){t.exports=i.p+"img/message.b9dd23e3.svg"},fb13:function(t,e,i){"use strict";var a=i("06e5"),n=i.n(a);n.a},fb4e:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"excellent-work-detail"},[i("div",{staticClass:"work-title"},[t._v("资源展示 / "+t._s(t.workName))]),i("div",{staticClass:"work-detail-wrap"},[i("work-detail",{staticClass:"work-vido",attrs:{WorkId:t.workId}})],1)])},n=[],s=i("ae78"),r=i.n(s),o=i("0865");function c(t,e,i,a,n,s,r){try{var o=t[s](r),c=o.value}catch(u){return void i(u)}o.done?e(c):Promise.resolve(c).then(a,n)}function u(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var s=t.apply(e,i);function r(t){c(s,a,n,r,o,"next",t)}function o(t){c(s,a,n,r,o,"throw",t)}r(void 0)}))}}var l={components:{WorkDetail:o["a"]},data:function(){return{workId:"",workName:""}},created:function(){var t=u(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.workId=+this.$route.query.WorkId,this.workName=this.$route.query.WorkName;case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},d=l,h=(i("28ce"),i("5511")),p=Object(h["a"])(d,a,n,!1,null,null,null);e["default"]=p.exports},fbbb:function(t,e,i){},fbd0:function(t,e,i){"use strict";var a=i("14c4"),n=i.n(a);n.a},fd16:function(t,e,i){},fda9:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"work-audit-detail"},[i("div",{staticClass:"work-title"},[i("el-button",{staticStyle:{"font-size":"16px"},attrs:{type:"text"},on:{click:t.goBack}},[t._v("返回")])],1),t.workId?i("div",{staticClass:"work-detail-wrap"},[i("work-detail",{staticClass:"work-video",attrs:{WorkId:t.workId}})],1):t._e()])},n=[],s=i("0865"),r={components:{WorkDetail:s["a"]},data:function(){return{activityId:"",workId:"",title:"",curStatus:""}},methods:{goBack:function(){this.$router.push({path:"/myActivity/index?id=".concat(this.activityId,"&title=").concat(this.title,"&curStatus=").concat(this.curStatus,"#third")})}},mounted:function(){this.activityId=this.$route.query.activityId,this.title=this.$route.query.title,this.workId=this.$route.query.workId,this.curStatus=this.$route.query.curStatus}},o=r,c=(i("74e4"),i("5511")),u=Object(c["a"])(o,a,n,!1,null,null,null);e["default"]=u.exports},fdfe:function(t,e,i){}});
//# sourceMappingURL=app.07ee85e5.js.map